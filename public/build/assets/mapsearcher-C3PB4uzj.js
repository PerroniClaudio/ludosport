const r=a=>({map:null,search:"",results:a,allResults:a,paginatedResults:[],currentPage:1,totalPages:0,nationFilter:"",markers:[],searchChanged:async function(){if(this.search.length<3)return;const s=await fetch(`/schools-search?location=${this.search}`);this.results=await s.json(),this.results.forEach(t=>{let e=JSON.parse(t.coordinates),i=new google.maps.Marker({position:e,map:this.map});this.markers.push({id:t.id,marker:i})}),this.results[0]&&this.results[0].id&&this.zoomToMarker(this.results[0].id)},zoomToMarker:function(s){let t=this.markers.find(e=>e.id===s);t&&(this.map.panTo(t.marker.getPosition()),this.map.setZoom(15))},paginateResults:function(){this.totalPages=Math.ceil(this.results.length/5),this.paginatedResults=this.results.slice((this.currentPage-1)*5,this.currentPage*5)},nextPage:function(){this.currentPage<this.totalPages&&(this.currentPage++,this.paginateResults())},prevPage:function(){this.currentPage>1&&(this.currentPage--,this.paginateResults())},fiterByNation:async function(s){this.results=a.filter(i=>i.nation_id==s),this.paginateResults();const t=this.results[0].coordinates;let e=new google.maps.Marker({position:t,map:this.map});this.map.panTo(e.getPosition()),this.map.setZoom(6),this.map.mapTypeId="roadmap"},async init(){const{Map:s}=await google.maps.importLibrary("maps");this.map=new s(document.getElementById("google-map"),{center:{lat:45.46404,lng:9.18938},zoom:2,mapTypeId:"satellite",mapTypeControlOptions:{mapTypeIds:["roadmap","satellite","hybrid","terrain"]}}),this.paginateResults(),this.results.forEach(t=>{let e=new google.maps.Marker({position:t.coordinates,map:this.map});console.log(t.nation_id),this.markers.push({id:t.id,marker:e})})}});export{r as mapsearcher};
