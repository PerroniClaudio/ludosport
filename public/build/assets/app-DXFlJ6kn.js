var xS=Object.defineProperty;var _S=(n,e,t)=>e in n?xS(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var T=(n,e,t)=>_S(n,typeof e!="symbol"?e+"":e,t);function Nb(n,e){return function(){return n.apply(e,arguments)}}const{toString:SS}=Object.prototype,{getPrototypeOf:Ld}=Object,Dl=(n=>e=>{const t=SS.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),At=n=>(n=n.toLowerCase(),e=>Dl(e)===n),Tl=n=>e=>typeof e===n,{isArray:_s}=Array,pr=Tl("undefined");function wS(n){return n!==null&&!pr(n)&&n.constructor!==null&&!pr(n.constructor)&&rt(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Ib=At("ArrayBuffer");function AS(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Ib(n.buffer),e}const kS=Tl("string"),rt=Tl("function"),Lb=Tl("number"),Ol=n=>n!==null&&typeof n=="object",ES=n=>n===!0||n===!1,jo=n=>{if(Dl(n)!=="object")return!1;const e=Ld(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},CS=At("Date"),MS=At("File"),DS=At("Blob"),TS=At("FileList"),OS=n=>Ol(n)&&rt(n.pipe),RS=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||rt(n.append)&&((e=Dl(n))==="formdata"||e==="object"&&rt(n.toString)&&n.toString()==="[object FormData]"))},PS=At("URLSearchParams"),[NS,IS,LS,BS]=["ReadableStream","Request","Response","Headers"].map(At),FS=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Fr(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,s;if(typeof n!="object"&&(n=[n]),_s(n))for(i=0,s=n.length;i<s;i++)e.call(null,n[i],i,n);else{const r=t?Object.getOwnPropertyNames(n):Object.keys(n),o=r.length;let a;for(i=0;i<o;i++)a=r[i],e.call(null,n[a],a,n)}}function Bb(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,s;for(;i-- >0;)if(s=t[i],e===s.toLowerCase())return s;return null}const ii=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Fb=n=>!pr(n)&&n!==ii;function fu(){const{caseless:n}=Fb(this)&&this||{},e={},t=(i,s)=>{const r=n&&Bb(e,s)||s;jo(e[r])&&jo(i)?e[r]=fu(e[r],i):jo(i)?e[r]=fu({},i):_s(i)?e[r]=i.slice():e[r]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Fr(arguments[i],t);return e}const zS=(n,e,t,{allOwnKeys:i}={})=>(Fr(e,(s,r)=>{t&&rt(s)?n[r]=Nb(s,t):n[r]=s},{allOwnKeys:i}),n),HS=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),VS=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},jS=(n,e,t,i)=>{let s,r,o;const a={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),r=s.length;r-- >0;)o=s[r],(!i||i(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&Ld(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},WS=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},US=n=>{if(!n)return null;if(_s(n))return n;let e=n.length;if(!Lb(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},$S=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Ld(Uint8Array)),qS=(n,e)=>{const i=(n&&n[Symbol.iterator]).call(n);let s;for(;(s=i.next())&&!s.done;){const r=s.value;e.call(n,r[0],r[1])}},GS=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},KS=At("HTMLFormElement"),YS=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,s){return i.toUpperCase()+s}),bh=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),JS=At("RegExp"),zb=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Fr(t,(s,r)=>{let o;(o=e(s,r,n))!==!1&&(i[r]=o||s)}),Object.defineProperties(n,i)},QS=n=>{zb(n,(e,t)=>{if(rt(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(rt(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},ZS=(n,e)=>{const t={},i=s=>{s.forEach(r=>{t[r]=!0})};return _s(n)?i(n):i(String(n).split(e)),t},XS=()=>{},ew=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,lc="abcdefghijklmnopqrstuvwxyz",yh="0123456789",Hb={DIGIT:yh,ALPHA:lc,ALPHA_DIGIT:lc+lc.toUpperCase()+yh},tw=(n=16,e=Hb.ALPHA_DIGIT)=>{let t="";const{length:i}=e;for(;n--;)t+=e[Math.random()*i|0];return t};function nw(n){return!!(n&&rt(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const iw=n=>{const e=new Array(10),t=(i,s)=>{if(Ol(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[s]=i;const r=_s(i)?[]:{};return Fr(i,(o,a)=>{const l=t(o,s+1);!pr(l)&&(r[a]=l)}),e[s]=void 0,r}}return i};return t(n,0)},sw=At("AsyncFunction"),rw=n=>n&&(Ol(n)||rt(n))&&rt(n.then)&&rt(n.catch),Vb=((n,e)=>n?setImmediate:e?((t,i)=>(ii.addEventListener("message",({source:s,data:r})=>{s===ii&&r===t&&i.length&&i.shift()()},!1),s=>{i.push(s),ii.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",rt(ii.postMessage)),ow=typeof queueMicrotask<"u"?queueMicrotask.bind(ii):typeof process<"u"&&process.nextTick||Vb,A={isArray:_s,isArrayBuffer:Ib,isBuffer:wS,isFormData:RS,isArrayBufferView:AS,isString:kS,isNumber:Lb,isBoolean:ES,isObject:Ol,isPlainObject:jo,isReadableStream:NS,isRequest:IS,isResponse:LS,isHeaders:BS,isUndefined:pr,isDate:CS,isFile:MS,isBlob:DS,isRegExp:JS,isFunction:rt,isStream:OS,isURLSearchParams:PS,isTypedArray:$S,isFileList:TS,forEach:Fr,merge:fu,extend:zS,trim:FS,stripBOM:HS,inherits:VS,toFlatObject:jS,kindOf:Dl,kindOfTest:At,endsWith:WS,toArray:US,forEachEntry:qS,matchAll:GS,isHTMLForm:KS,hasOwnProperty:bh,hasOwnProp:bh,reduceDescriptors:zb,freezeMethods:QS,toObjectSet:ZS,toCamelCase:YS,noop:XS,toFiniteNumber:ew,findKey:Bb,global:ii,isContextDefined:Fb,ALPHABET:Hb,generateString:tw,isSpecCompliantForm:nw,toJSONObject:iw,isAsyncFn:sw,isThenable:rw,setImmediate:Vb,asap:ow};function z(n,e,t,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}A.inherits(z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:A.toJSONObject(this.config),code:this.code,status:this.status}}});const jb=z.prototype,Wb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Wb[n]={value:n}});Object.defineProperties(z,Wb);Object.defineProperty(jb,"isAxiosError",{value:!0});z.from=(n,e,t,i,s,r)=>{const o=Object.create(jb);return A.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),z.call(o,n.message,e,t,i,s),o.cause=n,o.name=n.name,r&&Object.assign(o,r),o};const aw=null;function hu(n){return A.isPlainObject(n)||A.isArray(n)}function Ub(n){return A.endsWith(n,"[]")?n.slice(0,-2):n}function vh(n,e,t){return n?n.concat(e).map(function(s,r){return s=Ub(s),!t&&r?"["+s+"]":s}).join(t?".":""):e}function lw(n){return A.isArray(n)&&!n.some(hu)}const cw=A.toFlatObject(A,{},null,function(e){return/^is[A-Z]/.test(e)});function Rl(n,e,t){if(!A.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=A.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!A.isUndefined(g[m])});const i=t.metaTokens,s=t.visitor||u,r=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&A.isSpecCompliantForm(e);if(!A.isFunction(s))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(A.isDate(p))return p.toISOString();if(!l&&A.isBlob(p))throw new z("Blob is not supported. Use a Buffer instead.");return A.isArrayBuffer(p)||A.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,m,g){let b=p;if(p&&!g&&typeof p=="object"){if(A.endsWith(m,"{}"))m=i?m:m.slice(0,-2),p=JSON.stringify(p);else if(A.isArray(p)&&lw(p)||(A.isFileList(p)||A.endsWith(m,"[]"))&&(b=A.toArray(p)))return m=Ub(m),b.forEach(function(v,x){!(A.isUndefined(v)||v===null)&&e.append(o===!0?vh([m],x,r):o===null?m:m+"[]",c(v))}),!1}return hu(p)?!0:(e.append(vh(g,m,r),c(p)),!1)}const d=[],f=Object.assign(cw,{defaultVisitor:u,convertValue:c,isVisitable:hu});function h(p,m){if(!A.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));d.push(p),A.forEach(p,function(b,y){(!(A.isUndefined(b)||b===null)&&s.call(e,b,A.isString(y)?y.trim():y,m,f))===!0&&h(b,m?m.concat(y):[y])}),d.pop()}}if(!A.isObject(n))throw new TypeError("data must be an object");return h(n),e}function xh(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Bd(n,e){this._pairs=[],n&&Rl(n,this,e)}const $b=Bd.prototype;$b.append=function(e,t){this._pairs.push([e,t])};$b.toString=function(e){const t=e?function(i){return e.call(this,i,xh)}:xh;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function uw(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function qb(n,e,t){if(!e)return n;const i=t&&t.encode||uw,s=t&&t.serialize;let r;if(s?r=s(e,t):r=A.isURLSearchParams(e)?e.toString():new Bd(e,t).toString(i),r){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}class _h{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){A.forEach(this.handlers,function(i){i!==null&&e(i)})}}const Gb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dw=typeof URLSearchParams<"u"?URLSearchParams:Bd,fw=typeof FormData<"u"?FormData:null,hw=typeof Blob<"u"?Blob:null,pw={isBrowser:!0,classes:{URLSearchParams:dw,FormData:fw,Blob:hw},protocols:["http","https","file","blob","url","data"]},Fd=typeof window<"u"&&typeof document<"u",pu=typeof navigator=="object"&&navigator||void 0,gw=Fd&&(!pu||["ReactNative","NativeScript","NS"].indexOf(pu.product)<0),mw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",bw=Fd&&window.location.href||"http://localhost",yw=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Fd,hasStandardBrowserEnv:gw,hasStandardBrowserWebWorkerEnv:mw,navigator:pu,origin:bw},Symbol.toStringTag,{value:"Module"})),Ze={...yw,...pw};function vw(n,e){return Rl(n,new Ze.classes.URLSearchParams,Object.assign({visitor:function(t,i,s,r){return Ze.isNode&&A.isBuffer(t)?(this.append(i,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function xw(n){return A.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function _w(n){const e={},t=Object.keys(n);let i;const s=t.length;let r;for(i=0;i<s;i++)r=t[i],e[r]=n[r];return e}function Kb(n){function e(t,i,s,r){let o=t[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=t.length;return o=!o&&A.isArray(s)?s.length:o,l?(A.hasOwnProp(s,o)?s[o]=[s[o],i]:s[o]=i,!a):((!s[o]||!A.isObject(s[o]))&&(s[o]=[]),e(t,i,s[o],r)&&A.isArray(s[o])&&(s[o]=_w(s[o])),!a)}if(A.isFormData(n)&&A.isFunction(n.entries)){const t={};return A.forEachEntry(n,(i,s)=>{e(xw(i),s,t,0)}),t}return null}function Sw(n,e,t){if(A.isString(n))try{return(e||JSON.parse)(n),A.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(0,JSON.stringify)(n)}const zr={transitional:Gb,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",s=i.indexOf("application/json")>-1,r=A.isObject(e);if(r&&A.isHTMLForm(e)&&(e=new FormData(e)),A.isFormData(e))return s?JSON.stringify(Kb(e)):e;if(A.isArrayBuffer(e)||A.isBuffer(e)||A.isStream(e)||A.isFile(e)||A.isBlob(e)||A.isReadableStream(e))return e;if(A.isArrayBufferView(e))return e.buffer;if(A.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return vw(e,this.formSerializer).toString();if((a=A.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Rl(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||s?(t.setContentType("application/json",!1),Sw(e)):e}],transformResponse:[function(e){const t=this.transitional||zr.transitional,i=t&&t.forcedJSONParsing,s=this.responseType==="json";if(A.isResponse(e)||A.isReadableStream(e))return e;if(e&&A.isString(e)&&(i&&!this.responseType||s)){const o=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?z.from(a,z.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ze.classes.FormData,Blob:Ze.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};A.forEach(["delete","get","head","post","put","patch"],n=>{zr.headers[n]={}});const ww=A.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Aw=n=>{const e={};let t,i,s;return n&&n.split(`
`).forEach(function(o){s=o.indexOf(":"),t=o.substring(0,s).trim().toLowerCase(),i=o.substring(s+1).trim(),!(!t||e[t]&&ww[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},Sh=Symbol("internals");function Ts(n){return n&&String(n).trim().toLowerCase()}function Wo(n){return n===!1||n==null?n:A.isArray(n)?n.map(Wo):String(n)}function kw(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const Ew=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function cc(n,e,t,i,s){if(A.isFunction(i))return i.call(this,e,t);if(s&&(e=t),!!A.isString(e)){if(A.isString(i))return e.indexOf(i)!==-1;if(A.isRegExp(i))return i.test(e)}}function Cw(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function Mw(n,e){const t=A.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(s,r,o){return this[i].call(this,e,s,r,o)},configurable:!0})})}class Xe{constructor(e){e&&this.set(e)}set(e,t,i){const s=this;function r(a,l,c){const u=Ts(l);if(!u)throw new Error("header name must be a non-empty string");const d=A.findKey(s,u);(!d||s[d]===void 0||c===!0||c===void 0&&s[d]!==!1)&&(s[d||l]=Wo(a))}const o=(a,l)=>A.forEach(a,(c,u)=>r(c,u,l));if(A.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(A.isString(e)&&(e=e.trim())&&!Ew(e))o(Aw(e),t);else if(A.isHeaders(e))for(const[a,l]of e.entries())r(l,a,i);else e!=null&&r(t,e,i);return this}get(e,t){if(e=Ts(e),e){const i=A.findKey(this,e);if(i){const s=this[i];if(!t)return s;if(t===!0)return kw(s);if(A.isFunction(t))return t.call(this,s,i);if(A.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ts(e),e){const i=A.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||cc(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let s=!1;function r(o){if(o=Ts(o),o){const a=A.findKey(i,o);a&&(!t||cc(i,i[a],a,t))&&(delete i[a],s=!0)}}return A.isArray(e)?e.forEach(r):r(e),s}clear(e){const t=Object.keys(this);let i=t.length,s=!1;for(;i--;){const r=t[i];(!e||cc(this,this[r],r,e,!0))&&(delete this[r],s=!0)}return s}normalize(e){const t=this,i={};return A.forEach(this,(s,r)=>{const o=A.findKey(i,r);if(o){t[o]=Wo(s),delete t[r];return}const a=e?Cw(r):String(r).trim();a!==r&&delete t[r],t[a]=Wo(s),i[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return A.forEach(this,(i,s)=>{i!=null&&i!==!1&&(t[s]=e&&A.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[Sh]=this[Sh]={accessors:{}}).accessors,s=this.prototype;function r(o){const a=Ts(o);i[a]||(Mw(s,o),i[a]=!0)}return A.isArray(e)?e.forEach(r):r(e),this}}Xe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);A.reduceDescriptors(Xe.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});A.freezeMethods(Xe);function uc(n,e){const t=this||zr,i=e||t,s=Xe.from(i.headers);let r=i.data;return A.forEach(n,function(a){r=a.call(t,r,s.normalize(),e?e.status:void 0)}),s.normalize(),r}function Yb(n){return!!(n&&n.__CANCEL__)}function Ss(n,e,t){z.call(this,n??"canceled",z.ERR_CANCELED,e,t),this.name="CanceledError"}A.inherits(Ss,z,{__CANCEL__:!0});function Jb(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new z("Request failed with status code "+t.status,[z.ERR_BAD_REQUEST,z.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Dw(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Tw(n,e){n=n||10;const t=new Array(n),i=new Array(n);let s=0,r=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=i[r];o||(o=c),t[s]=l,i[s]=c;let d=r,f=0;for(;d!==s;)f+=t[d++],d=d%n;if(s=(s+1)%n,s===r&&(r=(r+1)%n),c-o<e)return;const h=u&&c-u;return h?Math.round(f*1e3/h):void 0}}function Ow(n,e){let t=0,i=1e3/e,s,r;const o=(c,u=Date.now())=>{t=u,s=null,r&&(clearTimeout(r),r=null),n.apply(null,c)};return[(...c)=>{const u=Date.now(),d=u-t;d>=i?o(c,u):(s=c,r||(r=setTimeout(()=>{r=null,o(s)},i-d)))},()=>s&&o(s)]}const da=(n,e,t=3)=>{let i=0;const s=Tw(50,250);return Ow(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-i,c=s(l),u=o<=a;i=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:r,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(d)},t)},wh=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},Ah=n=>(...e)=>A.asap(()=>n(...e)),Rw=Ze.hasStandardBrowserEnv?function(){const e=Ze.navigator&&/(msie|trident)/i.test(Ze.navigator.userAgent),t=document.createElement("a");let i;function s(r){let o=r;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return i=s(window.location.href),function(o){const a=A.isString(o)?s(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}(),Pw=Ze.hasStandardBrowserEnv?{write(n,e,t,i,s,r){const o=[n+"="+encodeURIComponent(e)];A.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),A.isString(i)&&o.push("path="+i),A.isString(s)&&o.push("domain="+s),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Nw(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Iw(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Qb(n,e){return n&&!Nw(e)?Iw(n,e):e}const kh=n=>n instanceof Xe?{...n}:n;function Ai(n,e){e=e||{};const t={};function i(c,u,d){return A.isPlainObject(c)&&A.isPlainObject(u)?A.merge.call({caseless:d},c,u):A.isPlainObject(u)?A.merge({},u):A.isArray(u)?u.slice():u}function s(c,u,d){if(A.isUndefined(u)){if(!A.isUndefined(c))return i(void 0,c,d)}else return i(c,u,d)}function r(c,u){if(!A.isUndefined(u))return i(void 0,u)}function o(c,u){if(A.isUndefined(u)){if(!A.isUndefined(c))return i(void 0,c)}else return i(void 0,u)}function a(c,u,d){if(d in e)return i(c,u);if(d in n)return i(void 0,c)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u)=>s(kh(c),kh(u),!0)};return A.forEach(Object.keys(Object.assign({},n,e)),function(u){const d=l[u]||s,f=d(n[u],e[u],u);A.isUndefined(f)&&d!==a||(t[u]=f)}),t}const Zb=n=>{const e=Ai({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:r,headers:o,auth:a}=e;e.headers=o=Xe.from(o),e.url=qb(Qb(e.baseURL,e.url),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(A.isFormData(t)){if(Ze.hasStandardBrowserEnv||Ze.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(Ze.hasStandardBrowserEnv&&(i&&A.isFunction(i)&&(i=i(e)),i||i!==!1&&Rw(e.url))){const c=s&&r&&Pw.read(r);c&&o.set(s,c)}return e},Lw=typeof XMLHttpRequest<"u",Bw=Lw&&function(n){return new Promise(function(t,i){const s=Zb(n);let r=s.data;const o=Xe.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,u,d,f,h,p;function m(){h&&h(),p&&p(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let g=new XMLHttpRequest;g.open(s.method.toUpperCase(),s.url,!0),g.timeout=s.timeout;function b(){if(!g)return;const v=Xe.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),_={data:!a||a==="text"||a==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:v,config:n,request:g};Jb(function(C){t(C),m()},function(C){i(C),m()},_),g=null}"onloadend"in g?g.onloadend=b:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(b)},g.onabort=function(){g&&(i(new z("Request aborted",z.ECONNABORTED,n,g)),g=null)},g.onerror=function(){i(new z("Network Error",z.ERR_NETWORK,n,g)),g=null},g.ontimeout=function(){let x=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const _=s.transitional||Gb;s.timeoutErrorMessage&&(x=s.timeoutErrorMessage),i(new z(x,_.clarifyTimeoutError?z.ETIMEDOUT:z.ECONNABORTED,n,g)),g=null},r===void 0&&o.setContentType(null),"setRequestHeader"in g&&A.forEach(o.toJSON(),function(x,_){g.setRequestHeader(_,x)}),A.isUndefined(s.withCredentials)||(g.withCredentials=!!s.withCredentials),a&&a!=="json"&&(g.responseType=s.responseType),c&&([f,p]=da(c,!0),g.addEventListener("progress",f)),l&&g.upload&&([d,h]=da(l),g.upload.addEventListener("progress",d),g.upload.addEventListener("loadend",h)),(s.cancelToken||s.signal)&&(u=v=>{g&&(i(!v||v.type?new Ss(null,n,g):v),g.abort(),g=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const y=Dw(s.url);if(y&&Ze.protocols.indexOf(y)===-1){i(new z("Unsupported protocol "+y+":",z.ERR_BAD_REQUEST,n));return}g.send(r||null)})},Fw=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,s;const r=function(c){if(!s){s=!0,a();const u=c instanceof Error?c:this.reason;i.abort(u instanceof z?u:new Ss(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,r(new z(`timeout ${e} of ms exceeded`,z.ETIMEDOUT))},e);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),n=null)};n.forEach(c=>c.addEventListener("abort",r));const{signal:l}=i;return l.unsubscribe=()=>A.asap(a),l}},zw=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,s;for(;i<t;)s=i+e,yield n.slice(i,s),i=s},Hw=async function*(n,e){for await(const t of Vw(n))yield*zw(t,e)},Vw=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},Eh=(n,e,t,i)=>{const s=Hw(n,e);let r=0,o,a=l=>{o||(o=!0,i&&i(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await s.next();if(c){a(),l.close();return}let d=u.byteLength;if(t){let f=r+=d;t(f)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},Pl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Xb=Pl&&typeof ReadableStream=="function",jw=Pl&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),ey=(n,...e)=>{try{return!!n(...e)}catch{return!1}},Ww=Xb&&ey(()=>{let n=!1;const e=new Request(Ze.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),Ch=64*1024,gu=Xb&&ey(()=>A.isReadableStream(new Response("").body)),fa={stream:gu&&(n=>n.body)};Pl&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!fa[e]&&(fa[e]=A.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new z(`Response type '${e}' is not supported`,z.ERR_NOT_SUPPORT,i)})})})(new Response);const Uw=async n=>{if(n==null)return 0;if(A.isBlob(n))return n.size;if(A.isSpecCompliantForm(n))return(await new Request(Ze.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(A.isArrayBufferView(n)||A.isArrayBuffer(n))return n.byteLength;if(A.isURLSearchParams(n)&&(n=n+""),A.isString(n))return(await jw(n)).byteLength},$w=async(n,e)=>{const t=A.toFiniteNumber(n.getContentLength());return t??Uw(e)},qw=Pl&&(async n=>{let{url:e,method:t,data:i,signal:s,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:f}=Zb(n);c=c?(c+"").toLowerCase():"text";let h=Fw([s,r&&r.toAbortSignal()],o),p;const m=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let g;try{if(l&&Ww&&t!=="get"&&t!=="head"&&(g=await $w(u,i))!==0){let _=new Request(e,{method:"POST",body:i,duplex:"half"}),S;if(A.isFormData(i)&&(S=_.headers.get("content-type"))&&u.setContentType(S),_.body){const[C,E]=wh(g,da(Ah(l)));i=Eh(_.body,Ch,C,E)}}A.isString(d)||(d=d?"include":"omit");const b="credentials"in Request.prototype;p=new Request(e,{...f,signal:h,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:i,duplex:"half",credentials:b?d:void 0});let y=await fetch(p);const v=gu&&(c==="stream"||c==="response");if(gu&&(a||v&&m)){const _={};["status","statusText","headers"].forEach(M=>{_[M]=y[M]});const S=A.toFiniteNumber(y.headers.get("content-length")),[C,E]=a&&wh(S,da(Ah(a),!0))||[];y=new Response(Eh(y.body,Ch,C,()=>{E&&E(),m&&m()}),_)}c=c||"text";let x=await fa[A.findKey(fa,c)||"text"](y,n);return!v&&m&&m(),await new Promise((_,S)=>{Jb(_,S,{data:x,headers:Xe.from(y.headers),status:y.status,statusText:y.statusText,config:n,request:p})})}catch(b){throw m&&m(),b&&b.name==="TypeError"&&/fetch/i.test(b.message)?Object.assign(new z("Network Error",z.ERR_NETWORK,n,p),{cause:b.cause||b}):z.from(b,b&&b.code,n,p)}}),mu={http:aw,xhr:Bw,fetch:qw};A.forEach(mu,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Mh=n=>`- ${n}`,Gw=n=>A.isFunction(n)||n===null||n===!1,ty={getAdapter:n=>{n=A.isArray(n)?n:[n];const{length:e}=n;let t,i;const s={};for(let r=0;r<e;r++){t=n[r];let o;if(i=t,!Gw(t)&&(i=mu[(o=String(t)).toLowerCase()],i===void 0))throw new z(`Unknown adapter '${o}'`);if(i)break;s[o||"#"+r]=i}if(!i){const r=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?r.length>1?`since :
`+r.map(Mh).join(`
`):" "+Mh(r[0]):"as no adapter specified";throw new z("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:mu};function dc(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Ss(null,n)}function Dh(n){return dc(n),n.headers=Xe.from(n.headers),n.data=uc.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),ty.getAdapter(n.adapter||zr.adapter)(n).then(function(i){return dc(n),i.data=uc.call(n,n.transformResponse,i),i.headers=Xe.from(i.headers),i},function(i){return Yb(i)||(dc(n),i&&i.response&&(i.response.data=uc.call(n,n.transformResponse,i.response),i.response.headers=Xe.from(i.response.headers))),Promise.reject(i)})}const ny="1.7.7",zd={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{zd[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const Th={};zd.transitional=function(e,t,i){function s(r,o){return"[Axios v"+ny+"] Transitional option '"+r+"'"+o+(i?". "+i:"")}return(r,o,a)=>{if(e===!1)throw new z(s(o," has been removed"+(t?" in "+t:"")),z.ERR_DEPRECATED);return t&&!Th[o]&&(Th[o]=!0,console.warn(s(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,o,a):!0}};function Kw(n,e,t){if(typeof n!="object")throw new z("options must be an object",z.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let s=i.length;for(;s-- >0;){const r=i[s],o=e[r];if(o){const a=n[r],l=a===void 0||o(a,r,n);if(l!==!0)throw new z("option "+r+" must be "+l,z.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new z("Unknown option "+r,z.ERR_BAD_OPTION)}}const bu={assertOptions:Kw,validators:zd},sn=bu.validators;class di{constructor(e){this.defaults=e,this.interceptors={request:new _h,response:new _h}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?r&&!String(i.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+r):i.stack=r}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ai(this.defaults,t);const{transitional:i,paramsSerializer:s,headers:r}=t;i!==void 0&&bu.assertOptions(i,{silentJSONParsing:sn.transitional(sn.boolean),forcedJSONParsing:sn.transitional(sn.boolean),clarifyTimeoutError:sn.transitional(sn.boolean)},!1),s!=null&&(A.isFunction(s)?t.paramsSerializer={serialize:s}:bu.assertOptions(s,{encode:sn.function,serialize:sn.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=r&&A.merge(r.common,r[t.method]);r&&A.forEach(["delete","get","head","post","put","patch","common"],p=>{delete r[p]}),t.headers=Xe.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(t)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,d=0,f;if(!l){const p=[Dh.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,c),f=p.length,u=Promise.resolve(t);d<f;)u=u.then(p[d++],p[d++]);return u}f=a.length;let h=t;for(d=0;d<f;){const p=a[d++],m=a[d++];try{h=p(h)}catch(g){m.call(this,g);break}}try{u=Dh.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=Ai(this.defaults,e);const t=Qb(e.baseURL,e.url);return qb(t,e.params,e.paramsSerializer)}}A.forEach(["delete","get","head","options"],function(e){di.prototype[e]=function(t,i){return this.request(Ai(i||{},{method:e,url:t,data:(i||{}).data}))}});A.forEach(["post","put","patch"],function(e){function t(i){return function(r,o,a){return this.request(Ai(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}di.prototype[e]=t(),di.prototype[e+"Form"]=t(!0)});class Hd{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const i=this;this.promise.then(s=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](s);i._listeners=null}),this.promise.then=s=>{let r;const o=new Promise(a=>{i.subscribe(a),r=a}).then(s);return o.cancel=function(){i.unsubscribe(r)},o},e(function(r,o,a){i.reason||(i.reason=new Ss(r,o,a),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Hd(function(s){e=s}),cancel:e}}}function Yw(n){return function(t){return n.apply(null,t)}}function Jw(n){return A.isObject(n)&&n.isAxiosError===!0}const yu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(yu).forEach(([n,e])=>{yu[e]=n});function iy(n){const e=new di(n),t=Nb(di.prototype.request,e);return A.extend(t,di.prototype,e,{allOwnKeys:!0}),A.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return iy(Ai(n,s))},t}const ge=iy(zr);ge.Axios=di;ge.CanceledError=Ss;ge.CancelToken=Hd;ge.isCancel=Yb;ge.VERSION=ny;ge.toFormData=Rl;ge.AxiosError=z;ge.Cancel=ge.CanceledError;ge.all=function(e){return Promise.all(e)};ge.spread=Yw;ge.isAxiosError=Jw;ge.mergeConfig=Ai;ge.AxiosHeaders=Xe;ge.formToJSON=n=>Kb(A.isHTMLForm(n)?new FormData(n):n);ge.getAdapter=ty.getAdapter;ge.HttpStatusCode=yu;ge.default=ge;window.axios=ge;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var vu=!1,xu=!1,fi=[],_u=-1;function Qw(n){Zw(n)}function Zw(n){fi.includes(n)||fi.push(n),Xw()}function sy(n){let e=fi.indexOf(n);e!==-1&&e>_u&&fi.splice(e,1)}function Xw(){!xu&&!vu&&(vu=!0,queueMicrotask(eA))}function eA(){vu=!1,xu=!0;for(let n=0;n<fi.length;n++)fi[n](),_u=n;fi.length=0,_u=-1,xu=!1}var ws,Ri,As,ry,Su=!0;function tA(n){Su=!1,n(),Su=!0}function nA(n){ws=n.reactive,As=n.release,Ri=e=>n.effect(e,{scheduler:t=>{Su?Qw(t):t()}}),ry=n.raw}function Oh(n){Ri=n}function iA(n){let e=()=>{};return[i=>{let s=Ri(i);return n._x_effects||(n._x_effects=new Set,n._x_runEffects=()=>{n._x_effects.forEach(r=>r())}),n._x_effects.add(s),e=()=>{s!==void 0&&(n._x_effects.delete(s),As(s))},s},()=>{e()}]}function oy(n,e){let t=!0,i,s=Ri(()=>{let r=n();JSON.stringify(r),t?i=r:queueMicrotask(()=>{e(r,i),i=r}),t=!1});return()=>As(s)}var ay=[],ly=[],cy=[];function sA(n){cy.push(n)}function Vd(n,e){typeof e=="function"?(n._x_cleanups||(n._x_cleanups=[]),n._x_cleanups.push(e)):(e=n,ly.push(e))}function uy(n){ay.push(n)}function dy(n,e,t){n._x_attributeCleanups||(n._x_attributeCleanups={}),n._x_attributeCleanups[e]||(n._x_attributeCleanups[e]=[]),n._x_attributeCleanups[e].push(t)}function fy(n,e){n._x_attributeCleanups&&Object.entries(n._x_attributeCleanups).forEach(([t,i])=>{(e===void 0||e.includes(t))&&(i.forEach(s=>s()),delete n._x_attributeCleanups[t])})}function rA(n){if(n._x_cleanups)for(;n._x_cleanups.length;)n._x_cleanups.pop()()}var jd=new MutationObserver(qd),Wd=!1;function Ud(){jd.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),Wd=!0}function hy(){oA(),jd.disconnect(),Wd=!1}var Os=[];function oA(){let n=jd.takeRecords();Os.push(()=>n.length>0&&qd(n));let e=Os.length;queueMicrotask(()=>{if(Os.length===e)for(;Os.length>0;)Os.shift()()})}function ye(n){if(!Wd)return n();hy();let e=n();return Ud(),e}var $d=!1,ha=[];function aA(){$d=!0}function lA(){$d=!1,qd(ha),ha=[]}function qd(n){if($d){ha=ha.concat(n);return}let e=new Set,t=new Set,i=new Map,s=new Map;for(let r=0;r<n.length;r++)if(!n[r].target._x_ignoreMutationObserver&&(n[r].type==="childList"&&(n[r].addedNodes.forEach(o=>o.nodeType===1&&e.add(o)),n[r].removedNodes.forEach(o=>o.nodeType===1&&t.add(o))),n[r].type==="attributes")){let o=n[r].target,a=n[r].attributeName,l=n[r].oldValue,c=()=>{i.has(o)||i.set(o,[]),i.get(o).push({name:a,value:o.getAttribute(a)})},u=()=>{s.has(o)||s.set(o,[]),s.get(o).push(a)};o.hasAttribute(a)&&l===null?c():o.hasAttribute(a)?(u(),c()):u()}s.forEach((r,o)=>{fy(o,r)}),i.forEach((r,o)=>{ay.forEach(a=>a(o,r))});for(let r of t)e.has(r)||ly.forEach(o=>o(r));e.forEach(r=>{r._x_ignoreSelf=!0,r._x_ignore=!0});for(let r of e)t.has(r)||r.isConnected&&(delete r._x_ignoreSelf,delete r._x_ignore,cy.forEach(o=>o(r)),r._x_ignore=!0,r._x_ignoreSelf=!0);e.forEach(r=>{delete r._x_ignoreSelf,delete r._x_ignore}),e=null,t=null,i=null,s=null}function py(n){return Vr(as(n))}function Hr(n,e,t){return n._x_dataStack=[e,...as(t||n)],()=>{n._x_dataStack=n._x_dataStack.filter(i=>i!==e)}}function as(n){return n._x_dataStack?n._x_dataStack:typeof ShadowRoot=="function"&&n instanceof ShadowRoot?as(n.host):n.parentNode?as(n.parentNode):[]}function Vr(n){return new Proxy({objects:n},cA)}var cA={ownKeys({objects:n}){return Array.from(new Set(n.flatMap(e=>Object.keys(e))))},has({objects:n},e){return e==Symbol.unscopables?!1:n.some(t=>Object.prototype.hasOwnProperty.call(t,e)||Reflect.has(t,e))},get({objects:n},e,t){return e=="toJSON"?uA:Reflect.get(n.find(i=>Reflect.has(i,e))||{},e,t)},set({objects:n},e,t,i){const s=n.find(o=>Object.prototype.hasOwnProperty.call(o,e))||n[n.length-1],r=Object.getOwnPropertyDescriptor(s,e);return r!=null&&r.set&&(r!=null&&r.get)?r.set.call(i,t)||!0:Reflect.set(s,e,t)}};function uA(){return Reflect.ownKeys(this).reduce((e,t)=>(e[t]=Reflect.get(this,t),e),{})}function gy(n){let e=i=>typeof i=="object"&&!Array.isArray(i)&&i!==null,t=(i,s="")=>{Object.entries(Object.getOwnPropertyDescriptors(i)).forEach(([r,{value:o,enumerable:a}])=>{if(a===!1||o===void 0||typeof o=="object"&&o!==null&&o.__v_skip)return;let l=s===""?r:`${s}.${r}`;typeof o=="object"&&o!==null&&o._x_interceptor?i[r]=o.initialize(n,l,r):e(o)&&o!==i&&!(o instanceof Element)&&t(o,l)})};return t(n)}function my(n,e=()=>{}){let t={initialValue:void 0,_x_interceptor:!0,initialize(i,s,r){return n(this.initialValue,()=>dA(i,s),o=>wu(i,s,o),s,r)}};return e(t),i=>{if(typeof i=="object"&&i!==null&&i._x_interceptor){let s=t.initialize.bind(t);t.initialize=(r,o,a)=>{let l=i.initialize(r,o,a);return t.initialValue=l,s(r,o,a)}}else t.initialValue=i;return t}}function dA(n,e){return e.split(".").reduce((t,i)=>t[i],n)}function wu(n,e,t){if(typeof e=="string"&&(e=e.split(".")),e.length===1)n[e[0]]=t;else{if(e.length===0)throw error;return n[e[0]]||(n[e[0]]={}),wu(n[e[0]],e.slice(1),t)}}var by={};function kt(n,e){by[n]=e}function Au(n,e){return Object.entries(by).forEach(([t,i])=>{let s=null;function r(){if(s)return s;{let[o,a]=wy(e);return s={interceptor:my,...o},Vd(e,a),s}}Object.defineProperty(n,`$${t}`,{get(){return i(e,r())},enumerable:!1})}),n}function fA(n,e,t,...i){try{return t(...i)}catch(s){gr(s,n,e)}}function gr(n,e,t=void 0){n=Object.assign(n??{message:"No error message given."},{el:e,expression:t}),console.warn(`Alpine Expression Error: ${n.message}

${t?'Expression: "'+t+`"

`:""}`,e),setTimeout(()=>{throw n},0)}var Uo=!0;function yy(n){let e=Uo;Uo=!1;let t=n();return Uo=e,t}function hi(n,e,t={}){let i;return Ue(n,e)(s=>i=s,t),i}function Ue(...n){return vy(...n)}var vy=xy;function hA(n){vy=n}function xy(n,e){let t={};Au(t,n);let i=[t,...as(n)],s=typeof e=="function"?pA(i,e):mA(i,e,n);return fA.bind(null,n,e,s)}function pA(n,e){return(t=()=>{},{scope:i={},params:s=[]}={})=>{let r=e.apply(Vr([i,...n]),s);pa(t,r)}}var fc={};function gA(n,e){if(fc[n])return fc[n];let t=Object.getPrototypeOf(async function(){}).constructor,i=/^[\n\s]*if.*\(.*\)/.test(n.trim())||/^(let|const)\s/.test(n.trim())?`(async()=>{ ${n} })()`:n,r=(()=>{try{let o=new t(["__self","scope"],`with (scope) { __self.result = ${i} }; __self.finished = true; return __self.result;`);return Object.defineProperty(o,"name",{value:`[Alpine] ${n}`}),o}catch(o){return gr(o,e,n),Promise.resolve()}})();return fc[n]=r,r}function mA(n,e,t){let i=gA(e,t);return(s=()=>{},{scope:r={},params:o=[]}={})=>{i.result=void 0,i.finished=!1;let a=Vr([r,...n]);if(typeof i=="function"){let l=i(i,a).catch(c=>gr(c,t,e));i.finished?(pa(s,i.result,a,o,t),i.result=void 0):l.then(c=>{pa(s,c,a,o,t)}).catch(c=>gr(c,t,e)).finally(()=>i.result=void 0)}}}function pa(n,e,t,i,s){if(Uo&&typeof e=="function"){let r=e.apply(t,i);r instanceof Promise?r.then(o=>pa(n,o,t,i)).catch(o=>gr(o,s,e)):n(r)}else typeof e=="object"&&e instanceof Promise?e.then(r=>n(r)):n(e)}var Gd="x-";function ks(n=""){return Gd+n}function bA(n){Gd=n}var ga={};function me(n,e){return ga[n]=e,{before(t){if(!ga[t]){console.warn(String.raw`Cannot find directive \`${t}\`. \`${n}\` will use the default order of execution`);return}const i=si.indexOf(t);si.splice(i>=0?i:si.indexOf("DEFAULT"),0,n)}}}function yA(n){return Object.keys(ga).includes(n)}function Kd(n,e,t){if(e=Array.from(e),n._x_virtualDirectives){let r=Object.entries(n._x_virtualDirectives).map(([a,l])=>({name:a,value:l})),o=_y(r);r=r.map(a=>o.find(l=>l.name===a.name)?{name:`x-bind:${a.name}`,value:`"${a.value}"`}:a),e=e.concat(r)}let i={};return e.map(Ey((r,o)=>i[r]=o)).filter(My).map(_A(i,t)).sort(SA).map(r=>xA(n,r))}function _y(n){return Array.from(n).map(Ey()).filter(e=>!My(e))}var ku=!1,Hs=new Map,Sy=Symbol();function vA(n){ku=!0;let e=Symbol();Sy=e,Hs.set(e,[]);let t=()=>{for(;Hs.get(e).length;)Hs.get(e).shift()();Hs.delete(e)},i=()=>{ku=!1,t()};n(t),i()}function wy(n){let e=[],t=a=>e.push(a),[i,s]=iA(n);return e.push(s),[{Alpine:Wr,effect:i,cleanup:t,evaluateLater:Ue.bind(Ue,n),evaluate:hi.bind(hi,n)},()=>e.forEach(a=>a())]}function xA(n,e){let t=()=>{},i=ga[e.type]||t,[s,r]=wy(n);dy(n,e.original,r);let o=()=>{n._x_ignore||n._x_ignoreSelf||(i.inline&&i.inline(n,e,s),i=i.bind(i,n,e,s),ku?Hs.get(Sy).push(i):i())};return o.runCleanups=r,o}var Ay=(n,e)=>({name:t,value:i})=>(t.startsWith(n)&&(t=t.replace(n,e)),{name:t,value:i}),ky=n=>n;function Ey(n=()=>{}){return({name:e,value:t})=>{let{name:i,value:s}=Cy.reduce((r,o)=>o(r),{name:e,value:t});return i!==e&&n(i,e),{name:i,value:s}}}var Cy=[];function Yd(n){Cy.push(n)}function My({name:n}){return Dy().test(n)}var Dy=()=>new RegExp(`^${Gd}([^:^.]+)\\b`);function _A(n,e){return({name:t,value:i})=>{let s=t.match(Dy()),r=t.match(/:([a-zA-Z0-9\-_:]+)/),o=t.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],a=e||n[t]||t;return{type:s?s[1]:null,value:r?r[1]:null,modifiers:o.map(l=>l.replace(".","")),expression:i,original:a}}}var Eu="DEFAULT",si=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Eu,"teleport"];function SA(n,e){let t=si.indexOf(n.type)===-1?Eu:n.type,i=si.indexOf(e.type)===-1?Eu:e.type;return si.indexOf(t)-si.indexOf(i)}function Js(n,e,t={}){n.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0}))}function Dn(n,e){if(typeof ShadowRoot=="function"&&n instanceof ShadowRoot){Array.from(n.children).forEach(s=>Dn(s,e));return}let t=!1;if(e(n,()=>t=!0),t)return;let i=n.firstElementChild;for(;i;)Dn(i,e),i=i.nextElementSibling}function ht(n,...e){console.warn(`Alpine Warning: ${n}`,...e)}var Rh=!1;function wA(){Rh&&ht("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),Rh=!0,document.body||ht("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),Js(document,"alpine:init"),Js(document,"alpine:initializing"),Ud(),sA(e=>Zt(e,Dn)),Vd(e=>Ly(e)),uy((e,t)=>{Kd(e,t).forEach(i=>i())});let n=e=>!Nl(e.parentElement,!0);Array.from(document.querySelectorAll(Ry().join(","))).filter(n).forEach(e=>{Zt(e)}),Js(document,"alpine:initialized"),setTimeout(()=>{EA()})}var Jd=[],Ty=[];function Oy(){return Jd.map(n=>n())}function Ry(){return Jd.concat(Ty).map(n=>n())}function Py(n){Jd.push(n)}function Ny(n){Ty.push(n)}function Nl(n,e=!1){return jr(n,t=>{if((e?Ry():Oy()).some(s=>t.matches(s)))return!0})}function jr(n,e){if(n){if(e(n))return n;if(n._x_teleportBack&&(n=n._x_teleportBack),!!n.parentElement)return jr(n.parentElement,e)}}function AA(n){return Oy().some(e=>n.matches(e))}var Iy=[];function kA(n){Iy.push(n)}function Zt(n,e=Dn,t=()=>{}){vA(()=>{e(n,(i,s)=>{t(i,s),Iy.forEach(r=>r(i,s)),Kd(i,i.attributes).forEach(r=>r()),i._x_ignore&&s()})})}function Ly(n,e=Dn){e(n,t=>{fy(t),rA(t)})}function EA(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([e,t,i])=>{yA(t)||i.some(s=>{if(document.querySelector(s))return ht(`found "${s}", but missing ${e} plugin`),!0})})}var Cu=[],Qd=!1;function Zd(n=()=>{}){return queueMicrotask(()=>{Qd||setTimeout(()=>{Mu()})}),new Promise(e=>{Cu.push(()=>{n(),e()})})}function Mu(){for(Qd=!1;Cu.length;)Cu.shift()()}function CA(){Qd=!0}function Xd(n,e){return Array.isArray(e)?Ph(n,e.join(" ")):typeof e=="object"&&e!==null?MA(n,e):typeof e=="function"?Xd(n,e()):Ph(n,e)}function Ph(n,e){let t=s=>s.split(" ").filter(r=>!n.classList.contains(r)).filter(Boolean),i=s=>(n.classList.add(...s),()=>{n.classList.remove(...s)});return e=e===!0?e="":e||"",i(t(e))}function MA(n,e){let t=a=>a.split(" ").filter(Boolean),i=Object.entries(e).flatMap(([a,l])=>l?t(a):!1).filter(Boolean),s=Object.entries(e).flatMap(([a,l])=>l?!1:t(a)).filter(Boolean),r=[],o=[];return s.forEach(a=>{n.classList.contains(a)&&(n.classList.remove(a),o.push(a))}),i.forEach(a=>{n.classList.contains(a)||(n.classList.add(a),r.push(a))}),()=>{o.forEach(a=>n.classList.add(a)),r.forEach(a=>n.classList.remove(a))}}function Il(n,e){return typeof e=="object"&&e!==null?DA(n,e):TA(n,e)}function DA(n,e){let t={};return Object.entries(e).forEach(([i,s])=>{t[i]=n.style[i],i.startsWith("--")||(i=OA(i)),n.style.setProperty(i,s)}),setTimeout(()=>{n.style.length===0&&n.removeAttribute("style")}),()=>{Il(n,t)}}function TA(n,e){let t=n.getAttribute("style",e);return n.setAttribute("style",e),()=>{n.setAttribute("style",t||"")}}function OA(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Du(n,e=()=>{}){let t=!1;return function(){t?e.apply(this,arguments):(t=!0,n.apply(this,arguments))}}me("transition",(n,{value:e,modifiers:t,expression:i},{evaluate:s})=>{typeof i=="function"&&(i=s(i)),i!==!1&&(!i||typeof i=="boolean"?PA(n,t,e):RA(n,i,e))});function RA(n,e,t){By(n,Xd,""),{enter:s=>{n._x_transition.enter.during=s},"enter-start":s=>{n._x_transition.enter.start=s},"enter-end":s=>{n._x_transition.enter.end=s},leave:s=>{n._x_transition.leave.during=s},"leave-start":s=>{n._x_transition.leave.start=s},"leave-end":s=>{n._x_transition.leave.end=s}}[t](e)}function PA(n,e,t){By(n,Il);let i=!e.includes("in")&&!e.includes("out")&&!t,s=i||e.includes("in")||["enter"].includes(t),r=i||e.includes("out")||["leave"].includes(t);e.includes("in")&&!i&&(e=e.filter((b,y)=>y<e.indexOf("out"))),e.includes("out")&&!i&&(e=e.filter((b,y)=>y>e.indexOf("out")));let o=!e.includes("opacity")&&!e.includes("scale"),a=o||e.includes("opacity"),l=o||e.includes("scale"),c=a?0:1,u=l?Rs(e,"scale",95)/100:1,d=Rs(e,"delay",0)/1e3,f=Rs(e,"origin","center"),h="opacity, transform",p=Rs(e,"duration",150)/1e3,m=Rs(e,"duration",75)/1e3,g="cubic-bezier(0.4, 0.0, 0.2, 1)";s&&(n._x_transition.enter.during={transformOrigin:f,transitionDelay:`${d}s`,transitionProperty:h,transitionDuration:`${p}s`,transitionTimingFunction:g},n._x_transition.enter.start={opacity:c,transform:`scale(${u})`},n._x_transition.enter.end={opacity:1,transform:"scale(1)"}),r&&(n._x_transition.leave.during={transformOrigin:f,transitionDelay:`${d}s`,transitionProperty:h,transitionDuration:`${m}s`,transitionTimingFunction:g},n._x_transition.leave.start={opacity:1,transform:"scale(1)"},n._x_transition.leave.end={opacity:c,transform:`scale(${u})`})}function By(n,e,t={}){n._x_transition||(n._x_transition={enter:{during:t,start:t,end:t},leave:{during:t,start:t,end:t},in(i=()=>{},s=()=>{}){Tu(n,e,{during:this.enter.during,start:this.enter.start,end:this.enter.end},i,s)},out(i=()=>{},s=()=>{}){Tu(n,e,{during:this.leave.during,start:this.leave.start,end:this.leave.end},i,s)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(n,e,t,i){const s=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let r=()=>s(t);if(e){n._x_transition&&(n._x_transition.enter||n._x_transition.leave)?n._x_transition.enter&&(Object.entries(n._x_transition.enter.during).length||Object.entries(n._x_transition.enter.start).length||Object.entries(n._x_transition.enter.end).length)?n._x_transition.in(t):r():n._x_transition?n._x_transition.in(t):r();return}n._x_hidePromise=n._x_transition?new Promise((o,a)=>{n._x_transition.out(()=>{},()=>o(i)),n._x_transitioning&&n._x_transitioning.beforeCancel(()=>a({isFromCancelledTransition:!0}))}):Promise.resolve(i),queueMicrotask(()=>{let o=Fy(n);o?(o._x_hideChildren||(o._x_hideChildren=[]),o._x_hideChildren.push(n)):s(()=>{let a=l=>{let c=Promise.all([l._x_hidePromise,...(l._x_hideChildren||[]).map(a)]).then(([u])=>u==null?void 0:u());return delete l._x_hidePromise,delete l._x_hideChildren,c};a(n).catch(l=>{if(!l.isFromCancelledTransition)throw l})})})};function Fy(n){let e=n.parentNode;if(e)return e._x_hidePromise?e:Fy(e)}function Tu(n,e,{during:t,start:i,end:s}={},r=()=>{},o=()=>{}){if(n._x_transitioning&&n._x_transitioning.cancel(),Object.keys(t).length===0&&Object.keys(i).length===0&&Object.keys(s).length===0){r(),o();return}let a,l,c;NA(n,{start(){a=e(n,i)},during(){l=e(n,t)},before:r,end(){a(),c=e(n,s)},after:o,cleanup(){l(),c()}})}function NA(n,e){let t,i,s,r=Du(()=>{ye(()=>{t=!0,i||e.before(),s||(e.end(),Mu()),e.after(),n.isConnected&&e.cleanup(),delete n._x_transitioning})});n._x_transitioning={beforeCancels:[],beforeCancel(o){this.beforeCancels.push(o)},cancel:Du(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();r()}),finish:r},ye(()=>{e.start(),e.during()}),CA(),requestAnimationFrame(()=>{if(t)return;let o=Number(getComputedStyle(n).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,a=Number(getComputedStyle(n).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;o===0&&(o=Number(getComputedStyle(n).animationDuration.replace("s",""))*1e3),ye(()=>{e.before()}),i=!0,requestAnimationFrame(()=>{t||(ye(()=>{e.end()}),Mu(),setTimeout(n._x_transitioning.finish,o+a),s=!0)})})}function Rs(n,e,t){if(n.indexOf(e)===-1)return t;const i=n[n.indexOf(e)+1];if(!i||e==="scale"&&isNaN(i))return t;if(e==="duration"||e==="delay"){let s=i.match(/([0-9]+)ms/);if(s)return s[1]}return e==="origin"&&["top","right","left","center","bottom"].includes(n[n.indexOf(e)+2])?[i,n[n.indexOf(e)+2]].join(" "):i}var Tn=!1;function Bn(n,e=()=>{}){return(...t)=>Tn?e(...t):n(...t)}function IA(n){return(...e)=>Tn&&n(...e)}var zy=[];function Ll(n){zy.push(n)}function LA(n,e){zy.forEach(t=>t(n,e)),Tn=!0,Hy(()=>{Zt(e,(t,i)=>{i(t,()=>{})})}),Tn=!1}var Ou=!1;function BA(n,e){e._x_dataStack||(e._x_dataStack=n._x_dataStack),Tn=!0,Ou=!0,Hy(()=>{FA(e)}),Tn=!1,Ou=!1}function FA(n){let e=!1;Zt(n,(i,s)=>{Dn(i,(r,o)=>{if(e&&AA(r))return o();e=!0,s(r,o)})})}function Hy(n){let e=Ri;Oh((t,i)=>{let s=e(t);return As(s),()=>{}}),n(),Oh(e)}function Vy(n,e,t,i=[]){switch(n._x_bindings||(n._x_bindings=ws({})),n._x_bindings[e]=t,e=i.includes("camel")?qA(e):e,e){case"value":zA(n,t);break;case"style":VA(n,t);break;case"class":HA(n,t);break;case"selected":case"checked":jA(n,e,t);break;default:jy(n,e,t);break}}function zA(n,e){if(n.type==="radio")n.attributes.value===void 0&&(n.value=e),window.fromModel&&(typeof e=="boolean"?n.checked=$o(n.value)===e:n.checked=Nh(n.value,e));else if(n.type==="checkbox")Number.isInteger(e)?n.value=e:!Array.isArray(e)&&typeof e!="boolean"&&![null,void 0].includes(e)?n.value=String(e):Array.isArray(e)?n.checked=e.some(t=>Nh(t,n.value)):n.checked=!!e;else if(n.tagName==="SELECT")$A(n,e);else{if(n.value===e)return;n.value=e===void 0?"":e}}function HA(n,e){n._x_undoAddedClasses&&n._x_undoAddedClasses(),n._x_undoAddedClasses=Xd(n,e)}function VA(n,e){n._x_undoAddedStyles&&n._x_undoAddedStyles(),n._x_undoAddedStyles=Il(n,e)}function jA(n,e,t){jy(n,e,t),UA(n,e,t)}function jy(n,e,t){[null,void 0,!1].includes(t)&&GA(e)?n.removeAttribute(e):(Wy(e)&&(t=e),WA(n,e,t))}function WA(n,e,t){n.getAttribute(e)!=t&&n.setAttribute(e,t)}function UA(n,e,t){n[e]!==t&&(n[e]=t)}function $A(n,e){const t=[].concat(e).map(i=>i+"");Array.from(n.options).forEach(i=>{i.selected=t.includes(i.value)})}function qA(n){return n.toLowerCase().replace(/-(\w)/g,(e,t)=>t.toUpperCase())}function Nh(n,e){return n==e}function $o(n){return[1,"1","true","on","yes",!0].includes(n)?!0:[0,"0","false","off","no",!1].includes(n)?!1:n?!!n:null}function Wy(n){return["disabled","checked","required","readonly","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(n)}function GA(n){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(n)}function KA(n,e,t){return n._x_bindings&&n._x_bindings[e]!==void 0?n._x_bindings[e]:Uy(n,e,t)}function YA(n,e,t,i=!0){if(n._x_bindings&&n._x_bindings[e]!==void 0)return n._x_bindings[e];if(n._x_inlineBindings&&n._x_inlineBindings[e]!==void 0){let s=n._x_inlineBindings[e];return s.extract=i,yy(()=>hi(n,s.expression))}return Uy(n,e,t)}function Uy(n,e,t){let i=n.getAttribute(e);return i===null?typeof t=="function"?t():t:i===""?!0:Wy(e)?!![e,"true"].includes(i):i}function $y(n,e){var t;return function(){var i=this,s=arguments,r=function(){t=null,n.apply(i,s)};clearTimeout(t),t=setTimeout(r,e)}}function qy(n,e){let t;return function(){let i=this,s=arguments;t||(n.apply(i,s),t=!0,setTimeout(()=>t=!1,e))}}function Gy({get:n,set:e},{get:t,set:i}){let s=!0,r,o=Ri(()=>{let a=n(),l=t();if(s)i(hc(a)),s=!1;else{let c=JSON.stringify(a),u=JSON.stringify(l);c!==r?i(hc(a)):c!==u&&e(hc(l))}r=JSON.stringify(n()),JSON.stringify(t())});return()=>{As(o)}}function hc(n){return typeof n=="object"?JSON.parse(JSON.stringify(n)):n}function JA(n){(Array.isArray(n)?n:[n]).forEach(t=>t(Wr))}var Yn={},Ih=!1;function QA(n,e){if(Ih||(Yn=ws(Yn),Ih=!0),e===void 0)return Yn[n];Yn[n]=e,typeof e=="object"&&e!==null&&e.hasOwnProperty("init")&&typeof e.init=="function"&&Yn[n].init(),gy(Yn[n])}function ZA(){return Yn}var Ky={};function XA(n,e){let t=typeof e!="function"?()=>e:e;return n instanceof Element?Yy(n,t()):(Ky[n]=t,()=>{})}function ek(n){return Object.entries(Ky).forEach(([e,t])=>{Object.defineProperty(n,e,{get(){return(...i)=>t(...i)}})}),n}function Yy(n,e,t){let i=[];for(;i.length;)i.pop()();let s=Object.entries(e).map(([o,a])=>({name:o,value:a})),r=_y(s);return s=s.map(o=>r.find(a=>a.name===o.name)?{name:`x-bind:${o.name}`,value:`"${o.value}"`}:o),Kd(n,s,t).map(o=>{i.push(o.runCleanups),o()}),()=>{for(;i.length;)i.pop()()}}var Jy={};function tk(n,e){Jy[n]=e}function nk(n,e){return Object.entries(Jy).forEach(([t,i])=>{Object.defineProperty(n,t,{get(){return(...s)=>i.bind(e)(...s)},enumerable:!1})}),n}var ik={get reactive(){return ws},get release(){return As},get effect(){return Ri},get raw(){return ry},version:"3.14.1",flushAndStopDeferringMutations:lA,dontAutoEvaluateFunctions:yy,disableEffectScheduling:tA,startObservingMutations:Ud,stopObservingMutations:hy,setReactivityEngine:nA,onAttributeRemoved:dy,onAttributesAdded:uy,closestDataStack:as,skipDuringClone:Bn,onlyDuringClone:IA,addRootSelector:Py,addInitSelector:Ny,interceptClone:Ll,addScopeToNode:Hr,deferMutations:aA,mapAttributes:Yd,evaluateLater:Ue,interceptInit:kA,setEvaluator:hA,mergeProxies:Vr,extractProp:YA,findClosest:jr,onElRemoved:Vd,closestRoot:Nl,destroyTree:Ly,interceptor:my,transition:Tu,setStyles:Il,mutateDom:ye,directive:me,entangle:Gy,throttle:qy,debounce:$y,evaluate:hi,initTree:Zt,nextTick:Zd,prefixed:ks,prefix:bA,plugin:JA,magic:kt,store:QA,start:wA,clone:BA,cloneNode:LA,bound:KA,$data:py,watch:oy,walk:Dn,data:tk,bind:XA},Wr=ik;function sk(n,e){const t=Object.create(null),i=n.split(",");for(let s=0;s<i.length;s++)t[i[s]]=!0;return s=>!!t[s]}var rk=Object.freeze({}),ok=Object.prototype.hasOwnProperty,Bl=(n,e)=>ok.call(n,e),pi=Array.isArray,Qs=n=>Qy(n)==="[object Map]",ak=n=>typeof n=="string",ef=n=>typeof n=="symbol",Fl=n=>n!==null&&typeof n=="object",lk=Object.prototype.toString,Qy=n=>lk.call(n),Zy=n=>Qy(n).slice(8,-1),tf=n=>ak(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,ck=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},uk=ck(n=>n.charAt(0).toUpperCase()+n.slice(1)),Xy=(n,e)=>n!==e&&(n===n||e===e),Ru=new WeakMap,Ps=[],Rt,gi=Symbol("iterate"),Pu=Symbol("Map key iterate");function dk(n){return n&&n._isEffect===!0}function fk(n,e=rk){dk(n)&&(n=n.raw);const t=gk(n,e);return e.lazy||t(),t}function hk(n){n.active&&(e0(n),n.options.onStop&&n.options.onStop(),n.active=!1)}var pk=0;function gk(n,e){const t=function(){if(!t.active)return n();if(!Ps.includes(t)){e0(t);try{return bk(),Ps.push(t),Rt=t,n()}finally{Ps.pop(),t0(),Rt=Ps[Ps.length-1]}}};return t.id=pk++,t.allowRecurse=!!e.allowRecurse,t._isEffect=!0,t.active=!0,t.raw=n,t.deps=[],t.options=e,t}function e0(n){const{deps:e}=n;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(n);e.length=0}}var ls=!0,nf=[];function mk(){nf.push(ls),ls=!1}function bk(){nf.push(ls),ls=!0}function t0(){const n=nf.pop();ls=n===void 0?!0:n}function St(n,e,t){if(!ls||Rt===void 0)return;let i=Ru.get(n);i||Ru.set(n,i=new Map);let s=i.get(t);s||i.set(t,s=new Set),s.has(Rt)||(s.add(Rt),Rt.deps.push(s),Rt.options.onTrack&&Rt.options.onTrack({effect:Rt,target:n,type:e,key:t}))}function On(n,e,t,i,s,r){const o=Ru.get(n);if(!o)return;const a=new Set,l=u=>{u&&u.forEach(d=>{(d!==Rt||d.allowRecurse)&&a.add(d)})};if(e==="clear")o.forEach(l);else if(t==="length"&&pi(n))o.forEach((u,d)=>{(d==="length"||d>=i)&&l(u)});else switch(t!==void 0&&l(o.get(t)),e){case"add":pi(n)?tf(t)&&l(o.get("length")):(l(o.get(gi)),Qs(n)&&l(o.get(Pu)));break;case"delete":pi(n)||(l(o.get(gi)),Qs(n)&&l(o.get(Pu)));break;case"set":Qs(n)&&l(o.get(gi));break}const c=u=>{u.options.onTrigger&&u.options.onTrigger({effect:u,target:n,key:t,type:e,newValue:i,oldValue:s,oldTarget:r}),u.options.scheduler?u.options.scheduler(u):u()};a.forEach(c)}var yk=sk("__proto__,__v_isRef,__isVue"),n0=new Set(Object.getOwnPropertyNames(Symbol).map(n=>Symbol[n]).filter(ef)),vk=i0(),xk=i0(!0),Lh=_k();function _k(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const i=ne(this);for(let r=0,o=this.length;r<o;r++)St(i,"get",r+"");const s=i[e](...t);return s===-1||s===!1?i[e](...t.map(ne)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){mk();const i=ne(this)[e].apply(this,t);return t0(),i}}),n}function i0(n=!1,e=!1){return function(i,s,r){if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_raw"&&r===(n?e?Ik:a0:e?Nk:o0).get(i))return i;const o=pi(i);if(!n&&o&&Bl(Lh,s))return Reflect.get(Lh,s,r);const a=Reflect.get(i,s,r);return(ef(s)?n0.has(s):yk(s))||(n||St(i,"get",s),e)?a:Nu(a)?!o||!tf(s)?a.value:a:Fl(a)?n?l0(a):af(a):a}}var Sk=wk();function wk(n=!1){return function(t,i,s,r){let o=t[i];if(!n&&(s=ne(s),o=ne(o),!pi(t)&&Nu(o)&&!Nu(s)))return o.value=s,!0;const a=pi(t)&&tf(i)?Number(i)<t.length:Bl(t,i),l=Reflect.set(t,i,s,r);return t===ne(r)&&(a?Xy(s,o)&&On(t,"set",i,s,o):On(t,"add",i,s)),l}}function Ak(n,e){const t=Bl(n,e),i=n[e],s=Reflect.deleteProperty(n,e);return s&&t&&On(n,"delete",e,void 0,i),s}function kk(n,e){const t=Reflect.has(n,e);return(!ef(e)||!n0.has(e))&&St(n,"has",e),t}function Ek(n){return St(n,"iterate",pi(n)?"length":gi),Reflect.ownKeys(n)}var Ck={get:vk,set:Sk,deleteProperty:Ak,has:kk,ownKeys:Ek},Mk={get:xk,set(n,e){return console.warn(`Set operation on key "${String(e)}" failed: target is readonly.`,n),!0},deleteProperty(n,e){return console.warn(`Delete operation on key "${String(e)}" failed: target is readonly.`,n),!0}},sf=n=>Fl(n)?af(n):n,rf=n=>Fl(n)?l0(n):n,of=n=>n,zl=n=>Reflect.getPrototypeOf(n);function to(n,e,t=!1,i=!1){n=n.__v_raw;const s=ne(n),r=ne(e);e!==r&&!t&&St(s,"get",e),!t&&St(s,"get",r);const{has:o}=zl(s),a=i?of:t?rf:sf;if(o.call(s,e))return a(n.get(e));if(o.call(s,r))return a(n.get(r));n!==s&&n.get(e)}function no(n,e=!1){const t=this.__v_raw,i=ne(t),s=ne(n);return n!==s&&!e&&St(i,"has",n),!e&&St(i,"has",s),n===s?t.has(n):t.has(n)||t.has(s)}function io(n,e=!1){return n=n.__v_raw,!e&&St(ne(n),"iterate",gi),Reflect.get(n,"size",n)}function Bh(n){n=ne(n);const e=ne(this);return zl(e).has.call(e,n)||(e.add(n),On(e,"add",n,n)),this}function Fh(n,e){e=ne(e);const t=ne(this),{has:i,get:s}=zl(t);let r=i.call(t,n);r?r0(t,i,n):(n=ne(n),r=i.call(t,n));const o=s.call(t,n);return t.set(n,e),r?Xy(e,o)&&On(t,"set",n,e,o):On(t,"add",n,e),this}function zh(n){const e=ne(this),{has:t,get:i}=zl(e);let s=t.call(e,n);s?r0(e,t,n):(n=ne(n),s=t.call(e,n));const r=i?i.call(e,n):void 0,o=e.delete(n);return s&&On(e,"delete",n,void 0,r),o}function Hh(){const n=ne(this),e=n.size!==0,t=Qs(n)?new Map(n):new Set(n),i=n.clear();return e&&On(n,"clear",void 0,void 0,t),i}function so(n,e){return function(i,s){const r=this,o=r.__v_raw,a=ne(o),l=e?of:n?rf:sf;return!n&&St(a,"iterate",gi),o.forEach((c,u)=>i.call(s,l(c),l(u),r))}}function ro(n,e,t){return function(...i){const s=this.__v_raw,r=ne(s),o=Qs(r),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=s[n](...i),u=t?of:e?rf:sf;return!e&&St(r,"iterate",l?Pu:gi),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function rn(n){return function(...e){{const t=e[0]?`on key "${e[0]}" `:"";console.warn(`${uk(n)} operation ${t}failed: target is readonly.`,ne(this))}return n==="delete"?!1:this}}function Dk(){const n={get(r){return to(this,r)},get size(){return io(this)},has:no,add:Bh,set:Fh,delete:zh,clear:Hh,forEach:so(!1,!1)},e={get(r){return to(this,r,!1,!0)},get size(){return io(this)},has:no,add:Bh,set:Fh,delete:zh,clear:Hh,forEach:so(!1,!0)},t={get(r){return to(this,r,!0)},get size(){return io(this,!0)},has(r){return no.call(this,r,!0)},add:rn("add"),set:rn("set"),delete:rn("delete"),clear:rn("clear"),forEach:so(!0,!1)},i={get(r){return to(this,r,!0,!0)},get size(){return io(this,!0)},has(r){return no.call(this,r,!0)},add:rn("add"),set:rn("set"),delete:rn("delete"),clear:rn("clear"),forEach:so(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=ro(r,!1,!1),t[r]=ro(r,!0,!1),e[r]=ro(r,!1,!0),i[r]=ro(r,!0,!0)}),[n,t,e,i]}var[Tk,Ok,pV,gV]=Dk();function s0(n,e){const t=n?Ok:Tk;return(i,s,r)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(Bl(t,s)&&s in i?t:i,s,r)}var Rk={get:s0(!1)},Pk={get:s0(!0)};function r0(n,e,t){const i=ne(t);if(i!==t&&e.call(n,i)){const s=Zy(n);console.warn(`Reactive ${s} contains both the raw and reactive versions of the same object${s==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var o0=new WeakMap,Nk=new WeakMap,a0=new WeakMap,Ik=new WeakMap;function Lk(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Bk(n){return n.__v_skip||!Object.isExtensible(n)?0:Lk(Zy(n))}function af(n){return n&&n.__v_isReadonly?n:c0(n,!1,Ck,Rk,o0)}function l0(n){return c0(n,!0,Mk,Pk,a0)}function c0(n,e,t,i,s){if(!Fl(n))return console.warn(`value cannot be made reactive: ${String(n)}`),n;if(n.__v_raw&&!(e&&n.__v_isReactive))return n;const r=s.get(n);if(r)return r;const o=Bk(n);if(o===0)return n;const a=new Proxy(n,o===2?i:t);return s.set(n,a),a}function ne(n){return n&&ne(n.__v_raw)||n}function Nu(n){return!!(n&&n.__v_isRef===!0)}kt("nextTick",()=>Zd);kt("dispatch",n=>Js.bind(Js,n));kt("watch",(n,{evaluateLater:e,cleanup:t})=>(i,s)=>{let r=e(i),a=oy(()=>{let l;return r(c=>l=c),l},s);t(a)});kt("store",ZA);kt("data",n=>py(n));kt("root",n=>Nl(n));kt("refs",n=>(n._x_refs_proxy||(n._x_refs_proxy=Vr(Fk(n))),n._x_refs_proxy));function Fk(n){let e=[];return jr(n,t=>{t._x_refs&&e.push(t._x_refs)}),e}var pc={};function u0(n){return pc[n]||(pc[n]=0),++pc[n]}function zk(n,e){return jr(n,t=>{if(t._x_ids&&t._x_ids[e])return!0})}function Hk(n,e){n._x_ids||(n._x_ids={}),n._x_ids[e]||(n._x_ids[e]=u0(e))}kt("id",(n,{cleanup:e})=>(t,i=null)=>{let s=`${t}${i?`-${i}`:""}`;return Vk(n,s,e,()=>{let r=zk(n,t),o=r?r._x_ids[t]:u0(t);return i?`${t}-${o}-${i}`:`${t}-${o}`})});Ll((n,e)=>{n._x_id&&(e._x_id=n._x_id)});function Vk(n,e,t,i){if(n._x_id||(n._x_id={}),n._x_id[e])return n._x_id[e];let s=i();return n._x_id[e]=s,t(()=>{delete n._x_id[e]}),s}kt("el",n=>n);d0("Focus","focus","focus");d0("Persist","persist","persist");function d0(n,e,t){kt(e,i=>ht(`You can't use [$${e}] without first installing the "${n}" plugin here: https://alpinejs.dev/plugins/${t}`,i))}me("modelable",(n,{expression:e},{effect:t,evaluateLater:i,cleanup:s})=>{let r=i(e),o=()=>{let u;return r(d=>u=d),u},a=i(`${e} = __placeholder`),l=u=>a(()=>{},{scope:{__placeholder:u}}),c=o();l(c),queueMicrotask(()=>{if(!n._x_model)return;n._x_removeModelListeners.default();let u=n._x_model.get,d=n._x_model.set,f=Gy({get(){return u()},set(h){d(h)}},{get(){return o()},set(h){l(h)}});s(f)})});me("teleport",(n,{modifiers:e,expression:t},{cleanup:i})=>{n.tagName.toLowerCase()!=="template"&&ht("x-teleport can only be used on a <template> tag",n);let s=Vh(t),r=n.content.cloneNode(!0).firstElementChild;n._x_teleport=r,r._x_teleportBack=n,n.setAttribute("data-teleport-template",!0),r.setAttribute("data-teleport-target",!0),n._x_forwardEvents&&n._x_forwardEvents.forEach(a=>{r.addEventListener(a,l=>{l.stopPropagation(),n.dispatchEvent(new l.constructor(l.type,l))})}),Hr(r,{},n);let o=(a,l,c)=>{c.includes("prepend")?l.parentNode.insertBefore(a,l):c.includes("append")?l.parentNode.insertBefore(a,l.nextSibling):l.appendChild(a)};ye(()=>{o(r,s,e),Bn(()=>{Zt(r),r._x_ignore=!0})()}),n._x_teleportPutBack=()=>{let a=Vh(t);ye(()=>{o(n._x_teleport,a,e)})},i(()=>r.remove())});var jk=document.createElement("div");function Vh(n){let e=Bn(()=>document.querySelector(n),()=>jk)();return e||ht(`Cannot find x-teleport element for selector: "${n}"`),e}var f0=()=>{};f0.inline=(n,{modifiers:e},{cleanup:t})=>{e.includes("self")?n._x_ignoreSelf=!0:n._x_ignore=!0,t(()=>{e.includes("self")?delete n._x_ignoreSelf:delete n._x_ignore})};me("ignore",f0);me("effect",Bn((n,{expression:e},{effect:t})=>{t(Ue(n,e))}));function Iu(n,e,t,i){let s=n,r=l=>i(l),o={},a=(l,c)=>u=>c(l,u);if(t.includes("dot")&&(e=Wk(e)),t.includes("camel")&&(e=Uk(e)),t.includes("passive")&&(o.passive=!0),t.includes("capture")&&(o.capture=!0),t.includes("window")&&(s=window),t.includes("document")&&(s=document),t.includes("debounce")){let l=t[t.indexOf("debounce")+1]||"invalid-wait",c=ma(l.split("ms")[0])?Number(l.split("ms")[0]):250;r=$y(r,c)}if(t.includes("throttle")){let l=t[t.indexOf("throttle")+1]||"invalid-wait",c=ma(l.split("ms")[0])?Number(l.split("ms")[0]):250;r=qy(r,c)}return t.includes("prevent")&&(r=a(r,(l,c)=>{c.preventDefault(),l(c)})),t.includes("stop")&&(r=a(r,(l,c)=>{c.stopPropagation(),l(c)})),t.includes("once")&&(r=a(r,(l,c)=>{l(c),s.removeEventListener(e,r,o)})),(t.includes("away")||t.includes("outside"))&&(s=document,r=a(r,(l,c)=>{n.contains(c.target)||c.target.isConnected!==!1&&(n.offsetWidth<1&&n.offsetHeight<1||n._x_isShown!==!1&&l(c))})),t.includes("self")&&(r=a(r,(l,c)=>{c.target===n&&l(c)})),(qk(e)||h0(e))&&(r=a(r,(l,c)=>{Gk(c,t)||l(c)})),s.addEventListener(e,r,o),()=>{s.removeEventListener(e,r,o)}}function Wk(n){return n.replace(/-/g,".")}function Uk(n){return n.toLowerCase().replace(/-(\w)/g,(e,t)=>t.toUpperCase())}function ma(n){return!Array.isArray(n)&&!isNaN(n)}function $k(n){return[" ","_"].includes(n)?n:n.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function qk(n){return["keydown","keyup"].includes(n)}function h0(n){return["contextmenu","click","mouse"].some(e=>n.includes(e))}function Gk(n,e){let t=e.filter(r=>!["window","document","prevent","stop","once","capture","self","away","outside","passive"].includes(r));if(t.includes("debounce")){let r=t.indexOf("debounce");t.splice(r,ma((t[r+1]||"invalid-wait").split("ms")[0])?2:1)}if(t.includes("throttle")){let r=t.indexOf("throttle");t.splice(r,ma((t[r+1]||"invalid-wait").split("ms")[0])?2:1)}if(t.length===0||t.length===1&&jh(n.key).includes(t[0]))return!1;const s=["ctrl","shift","alt","meta","cmd","super"].filter(r=>t.includes(r));return t=t.filter(r=>!s.includes(r)),!(s.length>0&&s.filter(o=>((o==="cmd"||o==="super")&&(o="meta"),n[`${o}Key`])).length===s.length&&(h0(n.type)||jh(n.key).includes(t[0])))}function jh(n){if(!n)return[];n=$k(n);let e={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return e[n]=n,Object.keys(e).map(t=>{if(e[t]===n)return t}).filter(t=>t)}me("model",(n,{modifiers:e,expression:t},{effect:i,cleanup:s})=>{let r=n;e.includes("parent")&&(r=n.parentNode);let o=Ue(r,t),a;typeof t=="string"?a=Ue(r,`${t} = __placeholder`):typeof t=="function"&&typeof t()=="string"?a=Ue(r,`${t()} = __placeholder`):a=()=>{};let l=()=>{let f;return o(h=>f=h),Wh(f)?f.get():f},c=f=>{let h;o(p=>h=p),Wh(h)?h.set(f):a(()=>{},{scope:{__placeholder:f}})};typeof t=="string"&&n.type==="radio"&&ye(()=>{n.hasAttribute("name")||n.setAttribute("name",t)});var u=n.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(n.type)||e.includes("lazy")?"change":"input";let d=Tn?()=>{}:Iu(n,u,e,f=>{c(gc(n,e,f,l()))});if(e.includes("fill")&&([void 0,null,""].includes(l())||n.type==="checkbox"&&Array.isArray(l())||n.tagName.toLowerCase()==="select"&&n.multiple)&&c(gc(n,e,{target:n},l())),n._x_removeModelListeners||(n._x_removeModelListeners={}),n._x_removeModelListeners.default=d,s(()=>n._x_removeModelListeners.default()),n.form){let f=Iu(n.form,"reset",[],h=>{Zd(()=>n._x_model&&n._x_model.set(gc(n,e,{target:n},l())))});s(()=>f())}n._x_model={get(){return l()},set(f){c(f)}},n._x_forceModelUpdate=f=>{f===void 0&&typeof t=="string"&&t.match(/\./)&&(f=""),window.fromModel=!0,ye(()=>Vy(n,"value",f)),delete window.fromModel},i(()=>{let f=l();e.includes("unintrusive")&&document.activeElement.isSameNode(n)||n._x_forceModelUpdate(f)})});function gc(n,e,t,i){return ye(()=>{if(t instanceof CustomEvent&&t.detail!==void 0)return t.detail!==null&&t.detail!==void 0?t.detail:t.target.value;if(n.type==="checkbox")if(Array.isArray(i)){let s=null;return e.includes("number")?s=mc(t.target.value):e.includes("boolean")?s=$o(t.target.value):s=t.target.value,t.target.checked?i.includes(s)?i:i.concat([s]):i.filter(r=>!Kk(r,s))}else return t.target.checked;else{if(n.tagName.toLowerCase()==="select"&&n.multiple)return e.includes("number")?Array.from(t.target.selectedOptions).map(s=>{let r=s.value||s.text;return mc(r)}):e.includes("boolean")?Array.from(t.target.selectedOptions).map(s=>{let r=s.value||s.text;return $o(r)}):Array.from(t.target.selectedOptions).map(s=>s.value||s.text);{let s;return n.type==="radio"?t.target.checked?s=t.target.value:s=i:s=t.target.value,e.includes("number")?mc(s):e.includes("boolean")?$o(s):e.includes("trim")?s.trim():s}}})}function mc(n){let e=n?parseFloat(n):null;return Yk(e)?e:n}function Kk(n,e){return n==e}function Yk(n){return!Array.isArray(n)&&!isNaN(n)}function Wh(n){return n!==null&&typeof n=="object"&&typeof n.get=="function"&&typeof n.set=="function"}me("cloak",n=>queueMicrotask(()=>ye(()=>n.removeAttribute(ks("cloak")))));Ny(()=>`[${ks("init")}]`);me("init",Bn((n,{expression:e},{evaluate:t})=>typeof e=="string"?!!e.trim()&&t(e,{},!1):t(e,{},!1)));me("text",(n,{expression:e},{effect:t,evaluateLater:i})=>{let s=i(e);t(()=>{s(r=>{ye(()=>{n.textContent=r})})})});me("html",(n,{expression:e},{effect:t,evaluateLater:i})=>{let s=i(e);t(()=>{s(r=>{ye(()=>{n.innerHTML=r,n._x_ignoreSelf=!0,Zt(n),delete n._x_ignoreSelf})})})});Yd(Ay(":",ky(ks("bind:"))));var p0=(n,{value:e,modifiers:t,expression:i,original:s},{effect:r,cleanup:o})=>{if(!e){let l={};ek(l),Ue(n,i)(u=>{Yy(n,u,s)},{scope:l});return}if(e==="key")return Jk(n,i);if(n._x_inlineBindings&&n._x_inlineBindings[e]&&n._x_inlineBindings[e].extract)return;let a=Ue(n,i);r(()=>a(l=>{l===void 0&&typeof i=="string"&&i.match(/\./)&&(l=""),ye(()=>Vy(n,e,l,t))})),o(()=>{n._x_undoAddedClasses&&n._x_undoAddedClasses(),n._x_undoAddedStyles&&n._x_undoAddedStyles()})};p0.inline=(n,{value:e,modifiers:t,expression:i})=>{e&&(n._x_inlineBindings||(n._x_inlineBindings={}),n._x_inlineBindings[e]={expression:i,extract:!1})};me("bind",p0);function Jk(n,e){n._x_keyExpression=e}Py(()=>`[${ks("data")}]`);me("data",(n,{expression:e},{cleanup:t})=>{if(Qk(n))return;e=e===""?"{}":e;let i={};Au(i,n);let s={};nk(s,i);let r=hi(n,e,{scope:s});(r===void 0||r===!0)&&(r={}),Au(r,n);let o=ws(r);gy(o);let a=Hr(n,o);o.init&&hi(n,o.init),t(()=>{o.destroy&&hi(n,o.destroy),a()})});Ll((n,e)=>{n._x_dataStack&&(e._x_dataStack=n._x_dataStack,e.setAttribute("data-has-alpine-state",!0))});function Qk(n){return Tn?Ou?!0:n.hasAttribute("data-has-alpine-state"):!1}me("show",(n,{modifiers:e,expression:t},{effect:i})=>{let s=Ue(n,t);n._x_doHide||(n._x_doHide=()=>{ye(()=>{n.style.setProperty("display","none",e.includes("important")?"important":void 0)})}),n._x_doShow||(n._x_doShow=()=>{ye(()=>{n.style.length===1&&n.style.display==="none"?n.removeAttribute("style"):n.style.removeProperty("display")})});let r=()=>{n._x_doHide(),n._x_isShown=!1},o=()=>{n._x_doShow(),n._x_isShown=!0},a=()=>setTimeout(o),l=Du(d=>d?o():r(),d=>{typeof n._x_toggleAndCascadeWithTransitions=="function"?n._x_toggleAndCascadeWithTransitions(n,d,o,r):d?a():r()}),c,u=!0;i(()=>s(d=>{!u&&d===c||(e.includes("immediate")&&(d?a():r()),l(d),c=d,u=!1)}))});me("for",(n,{expression:e},{effect:t,cleanup:i})=>{let s=Xk(e),r=Ue(n,s.items),o=Ue(n,n._x_keyExpression||"index");n._x_prevKeys=[],n._x_lookup={},t(()=>Zk(n,s,r,o)),i(()=>{Object.values(n._x_lookup).forEach(a=>a.remove()),delete n._x_prevKeys,delete n._x_lookup})});function Zk(n,e,t,i){let s=o=>typeof o=="object"&&!Array.isArray(o),r=n;t(o=>{eE(o)&&o>=0&&(o=Array.from(Array(o).keys(),g=>g+1)),o===void 0&&(o=[]);let a=n._x_lookup,l=n._x_prevKeys,c=[],u=[];if(s(o))o=Object.entries(o).map(([g,b])=>{let y=Uh(e,b,g,o);i(v=>{u.includes(v)&&ht("Duplicate key on x-for",n),u.push(v)},{scope:{index:g,...y}}),c.push(y)});else for(let g=0;g<o.length;g++){let b=Uh(e,o[g],g,o);i(y=>{u.includes(y)&&ht("Duplicate key on x-for",n),u.push(y)},{scope:{index:g,...b}}),c.push(b)}let d=[],f=[],h=[],p=[];for(let g=0;g<l.length;g++){let b=l[g];u.indexOf(b)===-1&&h.push(b)}l=l.filter(g=>!h.includes(g));let m="template";for(let g=0;g<u.length;g++){let b=u[g],y=l.indexOf(b);if(y===-1)l.splice(g,0,b),d.push([m,g]);else if(y!==g){let v=l.splice(g,1)[0],x=l.splice(y-1,1)[0];l.splice(g,0,x),l.splice(y,0,v),f.push([v,x])}else p.push(b);m=b}for(let g=0;g<h.length;g++){let b=h[g];a[b]._x_effects&&a[b]._x_effects.forEach(sy),a[b].remove(),a[b]=null,delete a[b]}for(let g=0;g<f.length;g++){let[b,y]=f[g],v=a[b],x=a[y],_=document.createElement("div");ye(()=>{x||ht('x-for ":key" is undefined or invalid',r,y,a),x.after(_),v.after(x),x._x_currentIfEl&&x.after(x._x_currentIfEl),_.before(v),v._x_currentIfEl&&v.after(v._x_currentIfEl),_.remove()}),x._x_refreshXForScope(c[u.indexOf(y)])}for(let g=0;g<d.length;g++){let[b,y]=d[g],v=b==="template"?r:a[b];v._x_currentIfEl&&(v=v._x_currentIfEl);let x=c[y],_=u[y],S=document.importNode(r.content,!0).firstElementChild,C=ws(x);Hr(S,C,r),S._x_refreshXForScope=E=>{Object.entries(E).forEach(([M,N])=>{C[M]=N})},ye(()=>{v.after(S),Bn(()=>Zt(S))()}),typeof _=="object"&&ht("x-for key cannot be an object, it must be a string or an integer",r),a[_]=S}for(let g=0;g<p.length;g++)a[p[g]]._x_refreshXForScope(c[u.indexOf(p[g])]);r._x_prevKeys=u})}function Xk(n){let e=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,t=/^\s*\(|\)\s*$/g,i=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,s=n.match(i);if(!s)return;let r={};r.items=s[2].trim();let o=s[1].replace(t,"").trim(),a=o.match(e);return a?(r.item=o.replace(e,"").trim(),r.index=a[1].trim(),a[2]&&(r.collection=a[2].trim())):r.item=o,r}function Uh(n,e,t,i){let s={};return/^\[.*\]$/.test(n.item)&&Array.isArray(e)?n.item.replace("[","").replace("]","").split(",").map(o=>o.trim()).forEach((o,a)=>{s[o]=e[a]}):/^\{.*\}$/.test(n.item)&&!Array.isArray(e)&&typeof e=="object"?n.item.replace("{","").replace("}","").split(",").map(o=>o.trim()).forEach(o=>{s[o]=e[o]}):s[n.item]=e,n.index&&(s[n.index]=t),n.collection&&(s[n.collection]=i),s}function eE(n){return!Array.isArray(n)&&!isNaN(n)}function g0(){}g0.inline=(n,{expression:e},{cleanup:t})=>{let i=Nl(n);i._x_refs||(i._x_refs={}),i._x_refs[e]=n,t(()=>delete i._x_refs[e])};me("ref",g0);me("if",(n,{expression:e},{effect:t,cleanup:i})=>{n.tagName.toLowerCase()!=="template"&&ht("x-if can only be used on a <template> tag",n);let s=Ue(n,e),r=()=>{if(n._x_currentIfEl)return n._x_currentIfEl;let a=n.content.cloneNode(!0).firstElementChild;return Hr(a,{},n),ye(()=>{n.after(a),Bn(()=>Zt(a))()}),n._x_currentIfEl=a,n._x_undoIf=()=>{Dn(a,l=>{l._x_effects&&l._x_effects.forEach(sy)}),a.remove(),delete n._x_currentIfEl},a},o=()=>{n._x_undoIf&&(n._x_undoIf(),delete n._x_undoIf)};t(()=>s(a=>{a?r():o()})),i(()=>n._x_undoIf&&n._x_undoIf())});me("id",(n,{expression:e},{evaluate:t})=>{t(e).forEach(s=>Hk(n,s))});Ll((n,e)=>{n._x_ids&&(e._x_ids=n._x_ids)});Yd(Ay("@",ky(ks("on:"))));me("on",Bn((n,{value:e,modifiers:t,expression:i},{cleanup:s})=>{let r=i?Ue(n,i):()=>{};n.tagName.toLowerCase()==="template"&&(n._x_forwardEvents||(n._x_forwardEvents=[]),n._x_forwardEvents.includes(e)||n._x_forwardEvents.push(e));let o=Iu(n,e,t,a=>{r(()=>{},{scope:{$event:a},params:[a]})});s(()=>o())}));Hl("Collapse","collapse","collapse");Hl("Intersect","intersect","intersect");Hl("Focus","trap","focus");Hl("Mask","mask","mask");function Hl(n,e,t){me(e,i=>ht(`You can't use [x-${e}] without first installing the "${n}" plugin here: https://alpinejs.dev/plugins/${t}`,i))}Wr.setEvaluator(xy);Wr.setReactivityEngine({reactive:af,effect:fk,release:hk,raw:ne});var tE=Wr,xe=tE;const nE=n=>({data:n,showingDataForDate:new Date,previousMonth:function(){let e=new Date(this.showingDataForDate);e.setMonth(e.getMonth()-1);let t=e.getMonth()+1;t<10&&(t="0"+t);const i=`/rankings/paginate?date=${e.getFullYear()}-${t}`;fetch(i).then(s=>s.json()).then(s=>{this.data=s,this.showingDataForDate=e,this.init()}).catch(s=>console.log(s))},nextMonth:function(){let e=new Date(this.showingDataForDate);e.setMonth(e.getMonth()+1);let t=e.getMonth()+1;t<10&&(t="0"+t);const i=`/rankings/paginate?date=${e.getFullYear()}-${t}`;fetch(i).then(s=>s.json()).then(s=>{this.data=s,this.showingDataForDate=e,this.init()}).catch(s=>console.log(s))},currentPage:1,pageSize:10,totalItems:0,totalPages:0,paginatedData:[],paginateData(){console.log(this.data);const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;this.paginatedData=this.data.slice(e,t),this.totalItems=this.data.length,this.totalPages=Math.ceil(this.totalItems/this.pageSize)},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.paginateData())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.paginateData())},previousPage(){this.currentPage>1&&(this.currentPage--,this.paginateData())},init(){this.paginateData()}});function De(n){this.content=n}De.prototype={constructor:De,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var i=t&&t!=n?this.remove(t):this,s=i.find(n),r=i.content.slice();return s==-1?r.push(t||n,e):(r[s+1]=e,t&&(r[s]=t)),new De(r)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new De(t)},addToStart:function(n,e){return new De([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new De(t)},addBefore:function(n,e,t){var i=this.remove(e),s=i.content.slice(),r=i.find(n);return s.splice(r==-1?s.length:r,0,e,t),new De(s)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=De.from(n),n.size?new De(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=De.from(n),n.size?new De(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=De.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};De.from=function(n){if(n instanceof De)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new De(e)};function m0(n,e,t){for(let i=0;;i++){if(i==n.childCount||i==e.childCount)return n.childCount==e.childCount?null:t;let s=n.child(i),r=e.child(i);if(s==r){t+=s.nodeSize;continue}if(!s.sameMarkup(r))return t;if(s.isText&&s.text!=r.text){for(let o=0;s.text[o]==r.text[o];o++)t++;return t}if(s.content.size||r.content.size){let o=m0(s.content,r.content,t+1);if(o!=null)return o}t+=s.nodeSize}}function b0(n,e,t,i){for(let s=n.childCount,r=e.childCount;;){if(s==0||r==0)return s==r?null:{a:t,b:i};let o=n.child(--s),a=e.child(--r),l=o.nodeSize;if(o==a){t-=l,i-=l;continue}if(!o.sameMarkup(a))return{a:t,b:i};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,i--;return{a:t,b:i}}if(o.content.size||a.content.size){let c=b0(o.content,a.content,t-1,i-1);if(c)return c}t-=l,i-=l}}class D{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,t,i,s=0,r){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&i(l,s+a,r||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),i,s+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,i,s){let r="",o=!0;return this.nodesBetween(e,t,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&i&&(o?o=!1:r+=i),r+=c},0),r}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,i=e.firstChild,s=this.content.slice(),r=0;for(t.isText&&t.sameMarkup(i)&&(s[s.length-1]=t.withText(t.text+i.text),r=1);r<e.content.length;r++)s.push(e.content[r]);return new D(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let i=[],s=0;if(t>e)for(let r=0,o=0;o<t;r++){let a=this.content[r],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),i.push(a),s+=a.nodeSize),o=l}return new D(i,s)}cutByIndex(e,t){return e==t?D.empty:e==0&&t==this.content.length?this:new D(this.content.slice(e,t))}replaceChild(e,t){let i=this.content[e];if(i==t)return this;let s=this.content.slice(),r=this.size+t.nodeSize-i.nodeSize;return s[e]=t,new D(s,r)}addToStart(e){return new D([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new D(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,i=0;t<this.content.length;t++){let s=this.content[t];e(s,i,t),i+=s.nodeSize}}findDiffStart(e,t=0){return m0(this,e,t)}findDiffEnd(e,t=this.size,i=e.size){return b0(this,e,t,i)}findIndex(e,t=-1){if(e==0)return oo(0,e);if(e==this.size)return oo(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let i=0,s=0;;i++){let r=this.child(i),o=s+r.nodeSize;if(o>=e)return o==e||t>0?oo(i+1,o):oo(i,s);s=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return D.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new D(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return D.empty;let t,i=0;for(let s=0;s<e.length;s++){let r=e[s];i+=r.nodeSize,s&&r.isText&&e[s-1].sameMarkup(r)?(t||(t=e.slice(0,s)),t[t.length-1]=r.withText(t[t.length-1].text+r.text)):t&&t.push(r)}return new D(t||e,i)}static from(e){if(!e)return D.empty;if(e instanceof D)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new D([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}D.empty=new D([],0);const bc={index:0,offset:0};function oo(n,e){return bc.index=n,bc.offset=e,bc}function ba(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!ba(n[i],e[i]))return!1}else{for(let i in n)if(!(i in e)||!ba(n[i],e[i]))return!1;for(let i in e)if(!(i in n))return!1}return!0}let X=class Lu{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,i=!1;for(let s=0;s<e.length;s++){let r=e[s];if(this.eq(r))return e;if(this.type.excludes(r.type))t||(t=e.slice(0,s));else{if(r.type.excludes(this.type))return e;!i&&r.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),i=!0),t&&t.push(r)}}return t||(t=e.slice()),i||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&ba(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let i=e.marks[t.type];if(!i)throw new RangeError(`There is no mark type ${t.type} in this schema`);let s=i.create(t.attrs);return i.checkAttrs(s.attrs),s}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].eq(t[i]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Lu.none;if(e instanceof Lu)return[e];let t=e.slice();return t.sort((i,s)=>i.type.rank-s.type.rank),t}};X.none=[];class ya extends Error{}class R{constructor(e,t,i){this.content=e,this.openStart=t,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let i=v0(this.content,e+this.openStart,t);return i&&new R(i,this.openStart,this.openEnd)}removeBetween(e,t){return new R(y0(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return R.empty;let i=t.openStart||0,s=t.openEnd||0;if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new R(D.fromJSON(e,t.content),i,s)}static maxOpen(e,t=!0){let i=0,s=0;for(let r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)i++;for(let r=e.lastChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.lastChild)s++;return new R(e,i,s)}}R.empty=new R(D.empty,0,0);function y0(n,e,t){let{index:i,offset:s}=n.findIndex(e),r=n.maybeChild(i),{index:o,offset:a}=n.findIndex(t);if(s==e||r.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(i!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(i,r.copy(y0(r.content,e-s-1,t-s-1)))}function v0(n,e,t,i){let{index:s,offset:r}=n.findIndex(e),o=n.maybeChild(s);if(r==e||o.isText)return n.cut(0,e).append(t).append(n.cut(e));let a=v0(o.content,e-r-1,t);return a&&n.replaceChild(s,o.copy(a))}function iE(n,e,t){if(t.openStart>n.depth)throw new ya("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new ya("Inconsistent open depths");return x0(n,e,t,0)}function x0(n,e,t,i){let s=n.index(i),r=n.node(i);if(s==e.index(i)&&i<n.depth-t.openStart){let o=x0(n,e,t,i+1);return r.copy(r.content.replaceChild(s,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==i&&e.depth==i){let o=n.parent,a=o.content;return bi(o,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=sE(t,n);return bi(r,S0(n,o,a,e,i))}else return bi(r,va(n,e,i))}function _0(n,e){if(!e.type.compatibleContent(n.type))throw new ya("Cannot join "+e.type.name+" onto "+n.type.name)}function Bu(n,e,t){let i=n.node(t);return _0(i,e.node(t)),i}function mi(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Zs(n,e,t,i){let s=(e||n).node(t),r=0,o=e?e.index(t):s.childCount;n&&(r=n.index(t),n.depth>t?r++:n.textOffset&&(mi(n.nodeAfter,i),r++));for(let a=r;a<o;a++)mi(s.child(a),i);e&&e.depth==t&&e.textOffset&&mi(e.nodeBefore,i)}function bi(n,e){return n.type.checkContent(e),n.copy(e)}function S0(n,e,t,i,s){let r=n.depth>s&&Bu(n,e,s+1),o=i.depth>s&&Bu(t,i,s+1),a=[];return Zs(null,n,s,a),r&&o&&e.index(s)==t.index(s)?(_0(r,o),mi(bi(r,S0(n,e,t,i,s+1)),a)):(r&&mi(bi(r,va(n,e,s+1)),a),Zs(e,t,s,a),o&&mi(bi(o,va(t,i,s+1)),a)),Zs(i,null,s,a),new D(a)}function va(n,e,t){let i=[];if(Zs(null,n,t,i),n.depth>t){let s=Bu(n,e,t+1);mi(bi(s,va(n,e,t+1)),i)}return Zs(e,null,t,i),new D(i)}function sE(n,e){let t=e.depth-n.openStart,s=e.node(t).copy(n.content);for(let r=t-1;r>=0;r--)s=e.node(r).copy(D.from(s));return{start:s.resolveNoCache(n.openStart+t),end:s.resolveNoCache(s.content.size-n.openEnd-t)}}class mr{constructor(e,t,i){this.pos=e,this.path=t,this.parentOffset=i,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],s=e.child(t);return i?e.child(t).cut(i):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let i=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let r=0;r<e;r++)s+=i.child(r).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return X.none;if(this.textOffset)return e.child(t).marks;let i=e.maybeChild(t-1),s=e.maybeChild(t);if(!i){let a=i;i=s,s=a}let r=i.marks;for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let i=t.marks,s=e.parent.maybeChild(e.index());for(var r=0;r<i.length;r++)i[r].type.spec.inclusive===!1&&(!s||!i[r].isInSet(s.marks))&&(i=i[r--].removeFromSet(i));return i}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!t||t(this.node(i))))return new xa(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let i=[],s=0,r=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(r),c=r-l;if(i.push(o,a,s+l),!c||(o=o.child(a),o.isText))break;r=c-1,s+=l+1}return new mr(t,i,r)}static resolveCached(e,t){let i=$h.get(e);if(i)for(let r=0;r<i.elts.length;r++){let o=i.elts[r];if(o.pos==t)return o}else $h.set(e,i=new rE);let s=i.elts[i.i]=mr.resolve(e,t);return i.i=(i.i+1)%oE,s}}class rE{constructor(){this.elts=[],this.i=0}}const oE=12,$h=new WeakMap;class xa{constructor(e,t,i){this.$from=e,this.$to=t,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const aE=Object.create(null);let yi=class Fu{constructor(e,t,i,s=X.none){this.type=e,this.attrs=t,this.marks=s,this.content=i||D.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,i,s=0){this.content.nodesBetween(e,t,i,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,i,s){return this.content.textBetween(e,t,i,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,i){return this.type==e&&ba(this.attrs,t||e.defaultAttrs||aE)&&X.sameSet(this.marks,i||X.none)}copy(e=null){return e==this.content?this:new Fu(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Fu(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,i=!1){if(e==t)return R.empty;let s=this.resolve(e),r=this.resolve(t),o=i?0:s.sharedDepth(t),a=s.start(o),c=s.node(o).content.cut(s.pos-a,r.pos-a);return new R(c,s.depth-o,r.depth-o)}replace(e,t,i){return iE(this.resolve(e),this.resolve(t),i)}nodeAt(e){for(let t=this;;){let{index:i,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(i),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:i}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(t),index:t,offset:i};let s=this.content.child(t-1);return{node:s,index:t-1,offset:i-s.nodeSize}}resolve(e){return mr.resolveCached(this,e)}resolveNoCache(e){return mr.resolve(this,e)}rangeHasMark(e,t,i){let s=!1;return t>e&&this.nodesBetween(e,t,r=>(i.isInSet(r.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),w0(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,i=D.empty,s=0,r=i.childCount){let o=this.contentMatchAt(e).matchFragment(i,s,r),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=s;l<r;l++)if(!this.type.allowsMarks(i.child(l).marks))return!1;return!0}canReplaceWith(e,t,i,s){if(s&&!this.type.allowsMarks(s))return!1;let r=this.contentMatchAt(e).matchType(i),o=r&&r.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=X.none;for(let t=0;t<this.marks.length;t++){let i=this.marks[t];i.type.checkAttrs(i.attrs),e=i.addToSet(e)}if(!X.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let i;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,i)}let s=D.fromJSON(e,t.content),r=e.nodeType(t.type).create(t.attrs,s,i);return r.type.checkAttrs(r.attrs),r}};yi.prototype.text=void 0;class _a extends yi{constructor(e,t,i,s){if(super(e,t,null,s),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):w0(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new _a(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new _a(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function w0(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class ki{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let i=new lE(e,t);if(i.next==null)return ki.empty;let s=A0(i);i.next&&i.err("Unexpected trailing text");let r=gE(pE(s));return mE(r,i),r}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,i=e.childCount){let s=this;for(let r=t;s&&r<i;r++)s=s.matchType(e.child(r).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let i=0;i<e.next.length;i++)if(this.next[t].type==e.next[i].type)return!0;return!1}fillBefore(e,t=!1,i=0){let s=[this];function r(o,a){let l=o.matchFragment(e,i);if(l&&(!t||l.validEnd))return D.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(d)==-1){s.push(d);let f=r(d,a.concat(u));if(f)return f}}return null}return r(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let s=i.shift(),r=s.match;if(r.matchType(e)){let o=[];for(let a=s;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<r.next.length;o++){let{type:a,next:l}=r.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!s.type||l.validEnd)&&(i.push({match:a.contentMatch,type:a,via:s}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(i){e.push(i);for(let s=0;s<i.next.length;s++)e.indexOf(i.next[s].next)==-1&&t(i.next[s].next)}return t(this),e.map((i,s)=>{let r=s+(i.validEnd?"*":" ")+" ";for(let o=0;o<i.next.length;o++)r+=(o?", ":"")+i.next[o].type.name+"->"+e.indexOf(i.next[o].next);return r}).join(`
`)}}ki.empty=new ki(!0);class lE{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function A0(n){let e=[];do e.push(cE(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function cE(n){let e=[];do e.push(uE(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function uE(n){let e=hE(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=dE(n,e);else break;return e}function qh(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function dE(n,e){let t=qh(n),i=t;return n.eat(",")&&(n.next!="}"?i=qh(n):i=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:i,expr:e}}function fE(n,e){let t=n.nodeTypes,i=t[e];if(i)return[i];let s=[];for(let r in t){let o=t[r];o.isInGroup(e)&&s.push(o)}return s.length==0&&n.err("No node type or group '"+e+"' found"),s}function hE(n){if(n.eat("(")){let e=A0(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=fE(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function pE(n){let e=[[]];return s(r(n,0),t()),e;function t(){return e.push([])-1}function i(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function s(o,a){o.forEach(l=>l.to=a)}function r(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(r(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=r(o.exprs[l],a);if(l==o.exprs.length-1)return c;s(c,a=t())}else if(o.type=="star"){let l=t();return i(a,l),s(r(o.expr,l),l),[i(l)]}else if(o.type=="plus"){let l=t();return s(r(o.expr,a),l),s(r(o.expr,l),l),[i(l)]}else{if(o.type=="opt")return[i(a)].concat(r(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=t();s(r(o.expr,l),u),l=u}if(o.max==-1)s(r(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=t();i(l,u),s(r(o.expr,l),u),l=u}return[i(l)]}else{if(o.type=="name")return[i(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function k0(n,e){return e-n}function Gh(n,e){let t=[];return i(e),t.sort(k0);function i(s){let r=n[s];if(r.length==1&&!r[0].term)return i(r[0].to);t.push(s);for(let o=0;o<r.length;o++){let{term:a,to:l}=r[o];!a&&t.indexOf(l)==-1&&i(l)}}}function gE(n){let e=Object.create(null);return t(Gh(n,0));function t(i){let s=[];i.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<s.length;u++)s[u][0]==a&&(c=s[u][1]);Gh(n,l).forEach(u=>{c||s.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let r=e[i.join(",")]=new ki(i.indexOf(n.length-1)>-1);for(let o=0;o<s.length;o++){let a=s[o][1].sort(k0);r.next.push({type:s[o][0],next:e[a.join(",")]||t(a)})}return r}}function mE(n,e){for(let t=0,i=[n];t<i.length;t++){let s=i[t],r=!s.validEnd,o=[];for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];o.push(l.name),r&&!(l.isText||l.hasRequiredAttrs())&&(r=!1),i.indexOf(c)==-1&&i.push(c)}r&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function E0(n){let e=Object.create(null);for(let t in n){let i=n[t];if(!i.hasDefault)return null;e[t]=i.default}return e}function C0(n,e){let t=Object.create(null);for(let i in n){let s=e&&e[i];if(s===void 0){let r=n[i];if(r.hasDefault)s=r.default;else throw new RangeError("No value supplied for attribute "+i)}t[i]=s}return t}function M0(n,e,t,i){for(let s in e)if(!(s in n))throw new RangeError(`Unsupported attribute ${s} for ${t} of type ${s}`);for(let s in n){let r=n[s];r.validate&&r.validate(e[s])}}function D0(n,e){let t=Object.create(null);if(e)for(let i in e)t[i]=new yE(n,i,e[i]);return t}let Kh=class T0{constructor(e,t,i){this.name=e,this.schema=t,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=D0(e,i.attrs),this.defaultAttrs=E0(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ki.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:C0(this.attrs,e)}create(e=null,t,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new yi(this,this.computeAttrs(e),D.from(t),X.setFrom(i))}createChecked(e=null,t,i){return t=D.from(t),this.checkContent(t),new yi(this,this.computeAttrs(e),t,X.setFrom(i))}createAndFill(e=null,t,i){if(e=this.computeAttrs(e),t=D.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let s=this.contentMatch.matchFragment(t),r=s&&s.fillBefore(D.empty,!0);return r?new yi(this,e,t.append(r),X.setFrom(i)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){M0(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?t&&t.push(e[i]):t||(t=e.slice(0,i));return t?t.length?t:X.none:e}static compile(e,t){let i=Object.create(null);e.forEach((r,o)=>i[r]=new T0(r,t,o));let s=t.spec.topNode||"doc";if(!i[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let r in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};function bE(n,e,t){let i=t.split("|");return s=>{let r=s===null?"null":typeof s;if(i.indexOf(r)<0)throw new RangeError(`Expected value of type ${i} for attribute ${e} on type ${n}, got ${r}`)}}class yE{constructor(e,t,i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default,this.validate=typeof i.validate=="string"?bE(e,t,i.validate):i.validate}get isRequired(){return!this.hasDefault}}class Vl{constructor(e,t,i,s){this.name=e,this.rank=t,this.schema=i,this.spec=s,this.attrs=D0(e,s.attrs),this.excluded=null;let r=E0(this.attrs);this.instance=r?new X(this,r):null}create(e=null){return!e&&this.instance?this.instance:new X(this,C0(this.attrs,e))}static compile(e,t){let i=Object.create(null),s=0;return e.forEach((r,o)=>i[r]=new Vl(r,s++,t,o)),i}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){M0(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class O0{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=De.from(e.nodes),t.marks=De.from(e.marks||{}),this.nodes=Kh.compile(this.spec.nodes,this),this.marks=Vl.compile(this.spec.marks,this);let i=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let r=this.nodes[s],o=r.spec.content||"",a=r.spec.marks;if(r.contentMatch=i[o]||(i[o]=ki.parse(o,this.nodes)),r.inlineContent=r.contentMatch.inlineContent,r.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!r.isInline||!r.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=r}r.markSet=a=="_"?null:a?Yh(this,a.split(" ")):a==""||!r.inlineContent?[]:null}for(let s in this.marks){let r=this.marks[s],o=r.spec.excludes;r.excluded=o==null?[r]:o==""?[]:Yh(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,i,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Kh){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,i,s)}text(e,t){let i=this.nodes.text;return new _a(i,i.defaultAttrs,e,X.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return yi.fromJSON(this,e)}markFromJSON(e){return X.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Yh(n,e){let t=[];for(let i=0;i<e.length;i++){let s=e[i],r=n.marks[s],o=r;if(r)t.push(r);else for(let a in n.marks){let l=n.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&t.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return t}function vE(n){return n.tag!=null}function xE(n){return n.style!=null}class wn{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let i=this.matchedStyles=[];t.forEach(s=>{if(vE(s))this.tags.push(s);else if(xE(s)){let r=/[^=]*/.exec(s.style)[0];i.indexOf(r)<0&&i.push(r),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let r=e.nodes[s.node];return r.contentMatch.matchType(r)})}parse(e,t={}){let i=new Qh(this,t,!1);return i.addAll(e,X.none,t.from,t.to),i.finish()}parseSlice(e,t={}){let i=new Qh(this,t,!0);return i.addAll(e,X.none,t.from,t.to),R.maxOpen(i.finish())}matchTag(e,t,i){for(let s=i?this.tags.indexOf(i)+1:0;s<this.tags.length;s++){let r=this.tags[s];if(wE(e,r.tag)&&(r.namespace===void 0||e.namespaceURI==r.namespace)&&(!r.context||t.matchesContext(r.context))){if(r.getAttrs){let o=r.getAttrs(e);if(o===!1)continue;r.attrs=o||void 0}return r}}}matchStyle(e,t,i,s){for(let r=s?this.styles.indexOf(s)+1:0;r<this.styles.length;r++){let o=this.styles[r],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!i.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function i(s){let r=s.priority==null?50:s.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<r)break}t.splice(o,0,s)}for(let s in e.marks){let r=e.marks[s].spec.parseDOM;r&&r.forEach(o=>{i(o=Zh(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in e.nodes){let r=e.nodes[s].spec.parseDOM;r&&r.forEach(o=>{i(o=Zh(o)),o.node||o.ignore||o.mark||(o.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new wn(e,wn.schemaRules(e)))}}const R0={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},_E={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},P0={ol:!0,ul:!0},Sa=1,wa=2,Xs=4;function Jh(n,e,t){return e!=null?(e?Sa:0)|(e==="full"?wa:0):n&&n.whitespace=="pre"?Sa|wa:t&~Xs}class ao{constructor(e,t,i,s,r,o){this.type=e,this.attrs=t,this.marks=i,this.solid=s,this.options=o,this.content=[],this.activeMarks=X.none,this.match=r||(o&Xs?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(D.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let i=this.type.contentMatch,s;return(s=i.findWrapping(e.type))?(this.match=i,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Sa)){let i=this.content[this.content.length-1],s;if(i&&i.isText&&(s=/[ \t\r\n\u000c]+$/.exec(i.text))){let r=i;i.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-s[0].length))}}let t=D.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(D.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!R0.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Qh{constructor(e,t,i){this.parser=e,this.options=t,this.isOpen=i,this.open=0;let s=t.topNode,r,o=Jh(null,t.preserveWhitespace,0)|(i?Xs:0);s?r=new ao(s.type,s.attrs,X.none,!0,t.topMatch||s.type.contentMatch,o):i?r=new ao(null,null,X.none,!0,null,o):r=new ao(e.schema.topNodeType,null,X.none,!0,null,o),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let i=e.nodeValue,s=this.top;if(s.options&wa||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(i)){if(s.options&Sa)s.options&wa?i=i.replace(/\r\n?/g,`
`):i=i.replace(/\r?\n|\r/g," ");else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){let r=s.content[s.content.length-1],o=e.previousSibling;(!r||o&&o.nodeName=="BR"||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(i=i.slice(1))}i&&this.insertNode(this.parser.schema.text(i),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,i){let s=e.nodeName.toLowerCase(),r;P0.hasOwnProperty(s)&&this.parser.normalizeLists&&SE(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(r=this.parser.matchTag(e,this,i));if(o?o.ignore:_E.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let a,l=this.top,c=this.needsBlock;if(R0.hasOwnProperty(s))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),a=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);return}let u=o&&o.skip?t:this.readStyles(e,t);u&&this.addAll(e,u),a&&this.sync(l),this.needsBlock=c}else{let a=this.readStyles(e,t);a&&this.addElementByRule(e,o,a,o.consuming===!1?r:void 0)}}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let i=e.style;if(i&&i.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let r=this.parser.matchedStyles[s],o=i.getPropertyValue(r);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(r,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?t=t.filter(c=>!l.clearMark(c)):t=t.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return t}addElementByRule(e,t,i,s){let r,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),i)||this.leafFallback(e,i);else{let l=this.enter(o,t.attrs||null,i,t.preserveWhitespace);l&&(r=!0,i=l)}else{let l=this.parser.schema.marks[t.mark];i=i.concat(l.create(t.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(s)this.addElement(e,i,s);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,i));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l,i),this.findAround(e,l,!1)}r&&this.sync(a)&&this.open--}addAll(e,t,i,s){let r=i||0;for(let o=i?e.childNodes[i]:e.firstChild,a=s==null?null:e.childNodes[s];o!=a;o=o.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(o,t);this.findAtPoint(e,r)}findPlace(e,t){let i,s;for(let r=this.open;r>=0;r--){let o=this.nodes[r],a=o.findWrapping(e);if(a&&(!i||i.length>a.length)&&(i=a,s=o,!a.length)||o.solid)break}if(!i)return null;this.sync(s);for(let r=0;r<i.length;r++)t=this.enterInner(i[r],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(t=this.enterInner(s,null,t))}let i=this.findPlace(e,t);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let r=X.none;for(let o of i.concat(e.marks))(s.type?s.type.allowsMarkType(o.type):Xh(o.type,e.type))&&(r=o.addToSet(r));return s.content.push(e.mark(r)),!0}return!1}enter(e,t,i,s){let r=this.findPlace(e.create(t),i);return r&&(r=this.enterInner(e,t,i,!0,s)),r}enterInner(e,t,i,s=!1,r){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=Jh(e,r,o.options);o.options&Xs&&o.content.length==0&&(a|=Xs);let l=X.none;return i=i.filter(c=>(o.type?o.type.allowsMarkType(c.type):Xh(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new ao(e,t,l,s,null,a)),this.open++,i}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let i=this.nodes[t].content;for(let s=i.length-1;s>=0;s--)e+=i[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==t&&(this.find[i].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,i){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(i?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),i=this.options.context,s=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),r=-(i?i.depth+1:0)+(s?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=r;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&s?this.nodes[l].type:i&&l>=r?i.node(l-r).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let t in this.parser.schema.nodes){let i=this.parser.schema.nodes[t];if(i.isTextblock&&i.defaultAttrs)return i}}}function SE(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let i=e.nodeType==1?e.nodeName.toLowerCase():null;i&&P0.hasOwnProperty(i)&&t?(t.appendChild(e),e=t):i=="li"?t=e:i&&(t=null)}}function wE(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Zh(n){let e={};for(let t in n)e[t]=n[t];return e}function Xh(n,e){let t=e.schema.nodes;for(let i in t){let s=t[i];if(!s.allowsMarkType(n))continue;let r=[],o=a=>{r.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||r.indexOf(u)<0&&o(u))return!0}};if(o(s.contentMatch))return!0}}class Pi{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},i){i||(i=yc(t).createDocumentFragment());let s=i,r=[];return e.forEach(o=>{if(r.length||o.marks.length){let a=0,l=0;for(;a<r.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(r[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<r.length;)s=r.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,t);u&&(r.push([c,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(o,t))}),i}serializeNodeInner(e,t){let{dom:i,contentDOM:s}=qo(yc(t),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,s)}return i}serializeNode(e,t={}){let i=this.serializeNodeInner(e,t);for(let s=e.marks.length-1;s>=0;s--){let r=this.serializeMark(e.marks[s],e.isInline,t);r&&((r.contentDOM||r.dom).appendChild(i),i=r.dom)}return i}serializeMark(e,t,i={}){let s=this.marks[e.type.name];return s&&qo(yc(i),s(e,t),null,e.attrs)}static renderSpec(e,t,i=null,s){return qo(e,t,i,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Pi(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=ep(e.nodes);return t.text||(t.text=i=>i.text),t}static marksFromSchema(e){return ep(e.marks)}}function ep(n){let e={};for(let t in n){let i=n[t].spec.toDOM;i&&(e[t]=i)}return e}function yc(n){return n.document||window.document}const tp=new WeakMap;function AE(n){let e=tp.get(n);return e===void 0&&tp.set(n,e=kE(n)),e}function kE(n){let e=null;function t(i){if(i&&typeof i=="object")if(Array.isArray(i))if(typeof i[0]=="string")e||(e=[]),e.push(i);else for(let s=0;s<i.length;s++)t(i[s]);else for(let s in i)t(i[s])}return t(n),e}function qo(n,e,t,i){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],r;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(i&&(r=AE(i))&&r.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(t=s.slice(0,o),s=s.slice(o+1));let a,l=t?n.createElementNS(t,s):n.createElement(s),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let f=d.indexOf(" ");f>0?l.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:p}=qo(n,f,t,i);if(l.appendChild(h),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const N0=65535,I0=Math.pow(2,16);function EE(n,e){return n+e*I0}function np(n){return n&N0}function CE(n){return(n-(n&N0))/I0}const L0=1,B0=2,Go=4,F0=8;class zu{constructor(e,t,i){this.pos=e,this.delInfo=t,this.recover=i}get deleted(){return(this.delInfo&F0)>0}get deletedBefore(){return(this.delInfo&(L0|Go))>0}get deletedAfter(){return(this.delInfo&(B0|Go))>0}get deletedAcross(){return(this.delInfo&Go)>0}}class st{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&st.empty)return st.empty}recover(e){let t=0,i=np(e);if(!this.inverted)for(let s=0;s<i;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[i*3]+t+CE(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,i){let s=0,r=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>e)break;let c=this.ranges[a+r],u=this.ranges[a+o],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:t:t,h=l+s+(f<0?0:u);if(i)return h;let p=e==(t<0?l:d)?null:EE(a/3,e-l),m=e==l?B0:e==d?L0:Go;return(t<0?e!=l:e!=d)&&(m|=F0),new zu(h,m,p)}s+=u-c}return i?e+s:new zu(e+s,0,null)}touches(e,t){let i=0,s=np(t),r=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+r],u=l+c;if(e<=u&&a==s*3)return!0;i+=this.ranges[a+o]-c}return!1}forEach(e){let t=this.inverted?2:1,i=this.inverted?1:2;for(let s=0,r=0;s<this.ranges.length;s+=3){let o=this.ranges[s],a=o-(this.inverted?r:0),l=o+(this.inverted?0:r),c=this.ranges[s+t],u=this.ranges[s+i];e(a,a+c,l,l+u),r+=u-c}}invert(){return new st(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?st.empty:new st(e<0?[0,-e,0]:[0,0,e])}}st.empty=new st([]);class Xi{constructor(e=[],t,i=0,s=e.length){this.maps=e,this.mirror=t,this.from=i,this.to=s}slice(e=0,t=this.maps.length){return new Xi(this.maps,this.mirror,e,t)}copy(){return new Xi(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,i=this.maps.length;t<e.maps.length;t++){let s=e.getMirror(t);this.appendMap(e.maps[t],s!=null&&s<t?i+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,i=this.maps.length+e.maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e.maps[t].invert(),s!=null&&s>t?i-s-1:void 0)}}invert(){let e=new Xi;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let i=this.from;i<this.to;i++)e=this.maps[i].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,i){let s=0;for(let r=this.from;r<this.to;r++){let o=this.maps[r],a=o.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(r);if(l!=null&&l>r&&l<this.to){r=l,e=this.maps[l].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return i?e:new zu(e,s,null)}}const vc=Object.create(null);class je{getMap(){return st.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=vc[t.stepType];if(!i)throw new RangeError(`No step type ${t.stepType} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in vc)throw new RangeError("Duplicate use of step JSON ID "+e);return vc[e]=t,t.prototype.jsonID=e,t}}class pe{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new pe(e,null)}static fail(e){return new pe(null,e)}static fromReplace(e,t,i,s){try{return pe.ok(e.replace(t,i,s))}catch(r){if(r instanceof ya)return pe.fail(r.message);throw r}}}function lf(n,e,t){let i=[];for(let s=0;s<n.childCount;s++){let r=n.child(s);r.content.size&&(r=r.copy(lf(r.content,e,r))),r.isInline&&(r=e(r,t,s)),i.push(r)}return D.fromArray(i)}class hn extends je{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=e.resolve(this.from),s=i.node(i.sharedDepth(this.to)),r=new R(lf(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),t.openStart,t.openEnd);return pe.fromReplace(e,this.from,this.to,r)}invert(){return new Nt(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new hn(t.pos,i.pos,this.mark)}merge(e){return e instanceof hn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new hn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new hn(t.from,t.to,e.markFromJSON(t.mark))}}je.jsonID("addMark",hn);class Nt extends je{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=new R(lf(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return pe.fromReplace(e,this.from,this.to,i)}invert(){return new hn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new Nt(t.pos,i.pos,this.mark)}merge(e){return e instanceof Nt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Nt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Nt(t.from,t.to,e.markFromJSON(t.mark))}}je.jsonID("removeMark",Nt);class pn extends je{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return pe.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return pe.fromReplace(e,this.pos,this.pos+1,new R(D.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let i=this.mark.addToSet(t.marks);if(i.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(i))return new pn(this.pos,t.marks[s]);return new pn(this.pos,this.mark)}}return new cs(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new pn(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new pn(t.pos,e.markFromJSON(t.mark))}}je.jsonID("addNodeMark",pn);class cs extends je{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return pe.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return pe.fromReplace(e,this.pos,this.pos+1,new R(D.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new pn(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new cs(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new cs(t.pos,e.markFromJSON(t.mark))}}je.jsonID("removeNodeMark",cs);class _e extends je{constructor(e,t,i,s=!1){super(),this.from=e,this.to=t,this.slice=i,this.structure=s}apply(e){return this.structure&&Hu(e,this.from,this.to)?pe.fail("Structure replace would overwrite content"):pe.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new st([this.from,this.to-this.from,this.slice.size])}invert(e){return new _e(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deletedAcross&&i.deletedAcross?null:new _e(t.pos,Math.max(t.pos,i.pos),this.slice)}merge(e){if(!(e instanceof _e)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?R.empty:new R(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new _e(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?R.empty:new R(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new _e(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new _e(t.from,t.to,R.fromJSON(e,t.slice),!!t.structure)}}je.jsonID("replace",_e);class Ae extends je{constructor(e,t,i,s,r,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=i,this.gapTo=s,this.slice=r,this.insert=o,this.structure=a}apply(e){if(this.structure&&(Hu(e,this.from,this.gapFrom)||Hu(e,this.gapTo,this.to)))return pe.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return pe.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,t.content);return i?pe.fromReplace(e,this.from,this.to,i):pe.fail("Content does not fit in gap")}getMap(){return new st([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Ae(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),s=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),r=this.to==this.gapTo?i.pos:e.map(this.gapTo,1);return t.deletedAcross&&i.deletedAcross||s<t.pos||r>i.pos?null:new Ae(t.pos,i.pos,s,r,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ae(t.from,t.to,t.gapFrom,t.gapTo,R.fromJSON(e,t.slice),t.insert,!!t.structure)}}je.jsonID("replaceAround",Ae);function Hu(n,e,t){let i=n.resolve(e),s=t-e,r=i.depth;for(;s>0&&r>0&&i.indexAfter(r)==i.node(r).childCount;)r--,s--;if(s>0){let o=i.node(r).maybeChild(i.indexAfter(r));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function ME(n,e,t,i){let s=[],r=[],o,a;n.doc.nodesBetween(e,t,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!i.isInSet(d)&&u.type.allowsMarkType(i.type)){let f=Math.max(c,e),h=Math.min(c+l.nodeSize,t),p=i.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(p)||(o&&o.to==f&&o.mark.eq(d[m])?o.to=h:s.push(o=new Nt(f,h,d[m])));a&&a.to==f?a.to=h:r.push(a=new hn(f,h,i))}}),s.forEach(l=>n.step(l)),r.forEach(l=>n.step(l))}function DE(n,e,t,i){let s=[],r=0;n.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;r++;let l=null;if(i instanceof Vl){let c=o.marks,u;for(;u=i.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else i?i.isInSet(o.marks)&&(l=[i]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,t);for(let u=0;u<l.length;u++){let d=l[u],f;for(let h=0;h<s.length;h++){let p=s[h];p.step==r-1&&d.eq(s[h].style)&&(f=p)}f?(f.to=c,f.step=r):s.push({style:d,from:Math.max(a,e),to:c,step:r})}}}),s.forEach(o=>n.step(new Nt(o.from,o.to,o.style)))}function z0(n,e,t,i=t.contentMatch,s=!0){let r=n.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<r.childCount;l++){let c=r.child(l),u=a+c.nodeSize,d=i.matchType(c.type);if(!d)o.push(new _e(a,u,R.empty));else{i=d;for(let f=0;f<c.marks.length;f++)t.allowsMarkType(c.marks[f].type)||n.step(new Nt(a,u,c.marks[f]));if(s&&c.isText&&t.whitespace!="pre"){let f,h=/\r?\n|\r/g,p;for(;f=h.exec(c.text);)p||(p=new R(D.from(t.schema.text(" ",t.allowedMarks(c.marks))),0,0)),o.push(new _e(a+f.index,a+f.index+f[0].length,p))}}a=u}if(!i.validEnd){let l=i.fillBefore(D.empty,!0);n.replace(a,a,new R(l,0,0))}for(let l=o.length-1;l>=0;l--)n.step(o[l])}function TE(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Es(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let i=n.depth;;--i){let s=n.$from.node(i),r=n.$from.index(i),o=n.$to.indexAfter(i);if(i<n.depth&&s.canReplace(r,o,t))return i;if(i==0||s.type.spec.isolating||!TE(s,r,o))break}return null}function OE(n,e,t){let{$from:i,$to:s,depth:r}=e,o=i.before(r+1),a=s.after(r+1),l=o,c=a,u=D.empty,d=0;for(let p=r,m=!1;p>t;p--)m||i.index(p)>0?(m=!0,u=D.from(i.node(p).copy(u)),d++):l--;let f=D.empty,h=0;for(let p=r,m=!1;p>t;p--)m||s.after(p+1)<s.end(p)?(m=!0,f=D.from(s.node(p).copy(f)),h++):c++;n.step(new Ae(l,c,o,a,new R(u.append(f),d,h),u.size-d,!0))}function cf(n,e,t=null,i=n){let s=RE(n,e),r=s&&PE(i,e);return r?s.map(ip).concat({type:e,attrs:t}).concat(r.map(ip)):null}function ip(n){return{type:n,attrs:null}}function RE(n,e){let{parent:t,startIndex:i,endIndex:s}=n,r=t.contentMatchAt(i).findWrapping(e);if(!r)return null;let o=r.length?r[0]:e;return t.canReplaceWith(i,s,o)?r:null}function PE(n,e){let{parent:t,startIndex:i,endIndex:s}=n,r=t.child(i),o=e.contentMatch.findWrapping(r.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=i;l&&c<s;c++)l=l.matchType(t.child(c).type);return!l||!l.validEnd?null:o}function NE(n,e,t){let i=D.empty;for(let o=t.length-1;o>=0;o--){if(i.size){let a=t[o].type.contentMatch.matchFragment(i);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=D.from(t[o].type.create(t[o].attrs,i))}let s=e.start,r=e.end;n.step(new Ae(s,r,s,r,new R(i,0,0),t.length,!0))}function IE(n,e,t,i,s){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let r=n.steps.length;n.doc.nodesBetween(e,t,(o,a)=>{let l=typeof s=="function"?s(o):s;if(o.isTextblock&&!o.hasMarkup(i,l)&&FE(n.doc,n.mapping.slice(r).map(a),i)){let c=null;if(i.schema.linebreakReplacement){let h=i.whitespace=="pre",p=!!i.contentMatch.matchType(i.schema.linebreakReplacement);h&&!p?c=!1:!h&&p&&(c=!0)}c===!1&&BE(n,o,a,r),z0(n,n.mapping.slice(r).map(a,1),i,void 0,c===null);let u=n.mapping.slice(r),d=u.map(a,1),f=u.map(a+o.nodeSize,1);return n.step(new Ae(d,f,d+1,f-1,new R(D.from(i.create(l,null,o.marks)),0,0),1,!0)),c===!0&&LE(n,o,a,r),!1}})}function LE(n,e,t,i){e.forEach((s,r)=>{if(s.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(s.text);){let l=n.mapping.slice(i).map(t+1+r+o.index);n.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function BE(n,e,t,i){e.forEach((s,r)=>{if(s.type==s.type.schema.linebreakReplacement){let o=n.mapping.slice(i).map(t+1+r);n.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function FE(n,e,t){let i=n.resolve(e),s=i.index();return i.parent.canReplaceWith(s,s+1,t)}function zE(n,e,t,i,s){let r=n.doc.nodeAt(e);if(!r)throw new RangeError("No node at given position");t||(t=r.type);let o=t.create(i,null,s||r.marks);if(r.isLeaf)return n.replaceWith(e,e+r.nodeSize,o);if(!t.validContent(r.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Ae(e,e+r.nodeSize,e+1,e+r.nodeSize-1,new R(D.from(o),0,0),1,!0))}function es(n,e,t=1,i){let s=n.resolve(e),r=s.depth-t,o=i&&i[i.length-1]||s.parent;if(r<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,u=t-2;c>r;c--,u--){let d=s.node(c),f=s.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=i&&i[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=i&&i[u]||d;if(!d.canReplace(f+1,d.childCount)||!m.type.validContent(h))return!1}let a=s.indexAfter(r),l=i&&i[0];return s.node(r).canReplaceWith(a,a,l?l.type:s.node(r+1).type)}function HE(n,e,t=1,i){let s=n.doc.resolve(e),r=D.empty,o=D.empty;for(let a=s.depth,l=s.depth-t,c=t-1;a>l;a--,c--){r=D.from(s.node(a).copy(r));let u=i&&i[c];o=D.from(u?u.type.create(u.attrs,o):s.node(a).copy(o))}n.step(new _e(e,e,new R(r.append(o),t,t),!0))}function Fn(n,e){let t=n.resolve(e),i=t.index();return H0(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(i,i+1)}function H0(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}function jl(n,e,t=-1){let i=n.resolve(e);for(let s=i.depth;;s--){let r,o,a=i.index(s);if(s==i.depth?(r=i.nodeBefore,o=i.nodeAfter):t>0?(r=i.node(s+1),a++,o=i.node(s).maybeChild(a)):(r=i.node(s).maybeChild(a-1),o=i.node(s+1)),r&&!r.isTextblock&&H0(r,o)&&i.node(s).canReplace(a,a+1))return e;if(s==0)break;e=t<0?i.before(s):i.after(s)}}function VE(n,e,t){let i=new _e(e-t,e+t,R.empty,!0);n.step(i)}function jE(n,e,t){let i=n.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),t))return e;if(i.parentOffset==0)for(let s=i.depth-1;s>=0;s--){let r=i.index(s);if(i.node(s).canReplaceWith(r,r,t))return i.before(s+1);if(r>0)return null}if(i.parentOffset==i.parent.content.size)for(let s=i.depth-1;s>=0;s--){let r=i.indexAfter(s);if(i.node(s).canReplaceWith(r,r,t))return i.after(s+1);if(r<i.node(s).childCount)return null}return null}function V0(n,e,t){let i=n.resolve(e);if(!t.content.size)return e;let s=t.content;for(let r=0;r<t.openStart;r++)s=s.firstChild.content;for(let r=1;r<=(t.openStart==0&&t.size?2:1);r++)for(let o=i.depth;o>=0;o--){let a=o==i.depth?0:i.pos<=(i.start(o+1)+i.end(o+1))/2?-1:1,l=i.index(o)+(a>0?1:0),c=i.node(o),u=!1;if(r==1)u=c.canReplace(l,l,s);else{let d=c.contentMatchAt(l).findWrapping(s.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?i.pos:a<0?i.before(o+1):i.after(o+1)}return null}function Wl(n,e,t=e,i=R.empty){if(e==t&&!i.size)return null;let s=n.resolve(e),r=n.resolve(t);return j0(s,r,i)?new _e(e,t,i):new WE(s,r,i).fit()}function j0(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class WE{constructor(e,t,i){this.$from=e,this.$to=t,this.unplaced=i,this.frontier=[],this.placed=D.empty;for(let s=0;s<=e.depth;s++){let r=e.node(s);this.frontier.push({type:r.type,match:r.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=D.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,i=this.$from,s=this.close(e<0?this.$to:i.doc.resolve(e));if(!s)return null;let r=this.placed,o=i.depth,a=s.depth;for(;o&&a&&r.childCount==1;)r=r.firstChild.content,o--,a--;let l=new R(r,o,a);return e>-1?new Ae(i.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||i.pos!=this.$to.pos?new _e(i.pos,s.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,i=0,s=this.unplaced.openEnd;i<e;i++){let r=t.firstChild;if(t.childCount>1&&(s=0),r.type.spec.isolating&&s<=i){e=i;break}t=r.content}for(let t=1;t<=2;t++)for(let i=t==1?e:this.unplaced.openStart;i>=0;i--){let s,r=null;i?(r=xc(this.unplaced.content,i-1).firstChild,s=r.content):s=this.unplaced.content;let o=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(t==1&&(o?c.matchType(o.type)||(d=c.fillBefore(D.from(o),!1)):r&&l.compatibleContent(r.type)))return{sliceDepth:i,frontierDepth:a,parent:r,inject:d};if(t==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:i,frontierDepth:a,parent:r,wrap:u};if(r&&c.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:i}=this.unplaced,s=xc(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new R(e,t+1,Math.max(i,s.size+t>=e.size-i?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:i}=this.unplaced,s=xc(e,t);if(s.childCount<=1&&t>0){let r=e.size-t<=t+s.size;this.unplaced=new R(Vs(e,t-1,1),t-1,r?t-1:i)}else this.unplaced=new R(Vs(e,t,1),t,i)}placeNodes({sliceDepth:e,frontierDepth:t,parent:i,inject:s,wrap:r}){for(;this.depth>t;)this.closeFrontierNode();if(r)for(let m=0;m<r.length;m++)this.openFrontierNode(r[m]);let o=this.unplaced,a=i?i.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[t];if(s){for(let m=0;m<s.childCount;m++)u.push(s.child(m));d=d.matchFragment(s)}let h=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),g=d.matchType(m.type);if(!g)break;c++,(c>1||l==0||m.content.size)&&(d=g,u.push(W0(m.mark(f.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=js(this.placed,t,D.from(u)),this.frontier[t].match=d,p&&h<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<h;m++){let b=g.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),g=b.content}this.unplaced=p?e==0?R.empty:new R(Vs(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new R(Vs(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!_c(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:i}=this.$to,s=this.$to.after(i);for(;i>1&&s==this.$to.end(--i);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:i,type:s}=this.frontier[t],r=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=_c(e,t,s,i,r);if(o){for(let a=t-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=_c(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:o,move:r?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=js(this.placed,t.depth,t.fit)),e=t.move;for(let i=t.depth+1;i<=e.depth;i++){let s=e.node(i),r=s.type.contentMatch.fillBefore(s.content,!0,e.index(i));this.openFrontierNode(s.type,s.attrs,r)}return e}openFrontierNode(e,t=null,i){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=js(this.placed,this.depth,D.from(e.create(t,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(D.empty,!0);t.childCount&&(this.placed=js(this.placed,this.frontier.length,t))}}function Vs(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Vs(n.firstChild.content,e-1,t)))}function js(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(js(n.lastChild.content,e-1,t)))}function xc(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function W0(n,e,t){if(e<=0)return n;let i=n.content;return e>1&&(i=i.replaceChild(0,W0(i.firstChild,e-1,i.childCount==1?t-1:0))),e>0&&(i=n.type.contentMatch.fillBefore(i).append(i),t<=0&&(i=i.append(n.type.contentMatch.matchFragment(i).fillBefore(D.empty,!0)))),n.copy(i)}function _c(n,e,t,i,s){let r=n.node(e),o=s?n.indexAfter(e):n.index(e);if(o==r.childCount&&!t.compatibleContent(r.type))return null;let a=i.fillBefore(r.content,!0,o);return a&&!UE(t,r.content,o)?a:null}function UE(n,e,t){for(let i=t;i<e.childCount;i++)if(!n.allowsMarks(e.child(i).marks))return!0;return!1}function $E(n){return n.spec.defining||n.spec.definingForContent}function qE(n,e,t,i){if(!i.size)return n.deleteRange(e,t);let s=n.doc.resolve(e),r=n.doc.resolve(t);if(j0(s,r,i))return n.step(new _e(e,t,i));let o=$0(s,n.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let f=s.depth,h=s.pos-1;f>0;f--,h--){let p=s.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(f)>-1?a=f:s.before(f)==h&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],u=i.openStart;for(let f=i.content,h=0;;h++){let p=f.firstChild;if(c.push(p),h==i.openStart)break;f=p.content}for(let f=u-1;f>=0;f--){let h=c[f],p=$E(h.type);if(p&&!h.sameMarkup(s.node(Math.abs(a)-1)))u=f;else if(p||!h.type.isTextblock)break}for(let f=i.openStart;f>=0;f--){let h=(f+u+1)%(i.openStart+1),p=c[h];if(p)for(let m=0;m<o.length;m++){let g=o[(m+l)%o.length],b=!0;g<0&&(b=!1,g=-g);let y=s.node(g-1),v=s.index(g-1);if(y.canReplaceWith(v,v,p.type,p.marks))return n.replace(s.before(g),b?r.after(g):t,new R(U0(i.content,0,i.openStart,h),h,i.openEnd))}}let d=n.steps.length;for(let f=o.length-1;f>=0&&(n.replace(e,t,i),!(n.steps.length>d));f--){let h=o[f];h<0||(e=s.before(h),t=r.after(h))}}function U0(n,e,t,i,s){if(e<t){let r=n.firstChild;n=n.replaceChild(0,r.copy(U0(r.content,e+1,t,i,r)))}if(e>i){let r=s.contentMatchAt(0),o=r.fillBefore(n).append(n);n=o.append(r.matchFragment(o).fillBefore(D.empty,!0))}return n}function GE(n,e,t,i){if(!i.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let s=jE(n.doc,e,i.type);s!=null&&(e=t=s)}n.replaceRange(e,t,new R(D.from(i),0,0))}function KE(n,e,t){let i=n.doc.resolve(e),s=n.doc.resolve(t),r=$0(i,s);for(let o=0;o<r.length;o++){let a=r[o],l=o==r.length-1;if(l&&a==0||i.node(a).type.contentMatch.validEnd)return n.delete(i.start(a),s.end(a));if(a>0&&(l||i.node(a-1).canReplace(i.index(a-1),s.indexAfter(a-1))))return n.delete(i.before(a),s.after(a))}for(let o=1;o<=i.depth&&o<=s.depth;o++)if(e-i.start(o)==i.depth-o&&t>i.end(o)&&s.end(o)-t!=s.depth-o)return n.delete(i.before(o),t);n.delete(e,t)}function $0(n,e){let t=[],i=Math.min(n.depth,e.depth);for(let s=i;s>=0;s--){let r=n.start(s);if(r<n.pos-(n.depth-s)||e.end(s)>e.pos+(e.depth-s)||n.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(r==e.start(s)||s==n.depth&&s==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==r-1)&&t.push(s)}return t}class ts extends je{constructor(e,t,i){super(),this.pos=e,this.attr=t,this.value=i}apply(e){let t=e.nodeAt(this.pos);if(!t)return pe.fail("No node at attribute step's position");let i=Object.create(null);for(let r in t.attrs)i[r]=t.attrs[r];i[this.attr]=this.value;let s=t.type.create(i,null,t.marks);return pe.fromReplace(e,this.pos,this.pos+1,new R(D.from(s),0,t.isLeaf?0:1))}getMap(){return st.empty}invert(e){return new ts(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ts(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ts(t.pos,t.attr,t.value)}}je.jsonID("attr",ts);class br extends je{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let s in e.attrs)t[s]=e.attrs[s];t[this.attr]=this.value;let i=e.type.create(t,e.content,e.marks);return pe.ok(i)}getMap(){return st.empty}invert(e){return new br(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new br(t.attr,t.value)}}je.jsonID("docAttr",br);let us=class extends Error{};us=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};us.prototype=Object.create(Error.prototype);us.prototype.constructor=us;us.prototype.name="TransformError";class q0{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Xi}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new us(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,i=R.empty){let s=Wl(this.doc,e,t,i);return s&&this.step(s),this}replaceWith(e,t,i){return this.replace(e,t,new R(D.from(i),0,0))}delete(e,t){return this.replace(e,t,R.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,i){return qE(this,e,t,i),this}replaceRangeWith(e,t,i){return GE(this,e,t,i),this}deleteRange(e,t){return KE(this,e,t),this}lift(e,t){return OE(this,e,t),this}join(e,t=1){return VE(this,e,t),this}wrap(e,t){return NE(this,e,t),this}setBlockType(e,t=e,i,s=null){return IE(this,e,t,i,s),this}setNodeMarkup(e,t,i=null,s){return zE(this,e,t,i,s),this}setNodeAttribute(e,t,i){return this.step(new ts(e,t,i)),this}setDocAttribute(e,t){return this.step(new br(e,t)),this}addNodeMark(e,t){return this.step(new pn(e,t)),this}removeNodeMark(e,t){if(!(t instanceof X)){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(t=t.isInSet(i.marks),!t)return this}return this.step(new cs(e,t)),this}split(e,t=1,i){return HE(this,e,t,i),this}addMark(e,t,i){return ME(this,e,t,i),this}removeMark(e,t,i){return DE(this,e,t,i),this}clearIncompatible(e,t,i){return z0(this,e,t,i),this}}const Sc=Object.create(null);class V{constructor(e,t,i){this.$anchor=e,this.$head=t,this.ranges=i||[new YE(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=R.empty){let i=t.content.lastChild,s=null;for(let a=0;a<t.openEnd;a++)s=i,i=i.lastChild;let r=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(r);e.replaceRange(u.map(l.pos),u.map(c.pos),a?R.empty:t),a==0&&op(e,r,(i?i.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let i=e.steps.length,s=this.ranges;for(let r=0;r<s.length;r++){let{$from:o,$to:a}=s[r],l=e.mapping.slice(i),c=l.map(o.pos),u=l.map(a.pos);r?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),op(e,i,t.isInline?-1:1))}}static findFrom(e,t,i=!1){let s=e.parent.inlineContent?new F(e):Gi(e.node(0),e.parent,e.pos,e.index(),t,i);if(s)return s;for(let r=e.depth-1;r>=0;r--){let o=t<0?Gi(e.node(0),e.node(r),e.before(r+1),e.index(r),t,i):Gi(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,i);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new xt(e.node(0))}static atStart(e){return Gi(e,e,0,0,1)||new xt(e)}static atEnd(e){return Gi(e,e,e.content.size,e.childCount,-1)||new xt(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=Sc[t.type];if(!i)throw new RangeError(`No selection type ${t.type} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in Sc)throw new RangeError("Duplicate use of selection JSON ID "+e);return Sc[e]=t,t.prototype.jsonID=e,t}getBookmark(){return F.between(this.$anchor,this.$head).getBookmark()}}V.prototype.visible=!0;class YE{constructor(e,t){this.$from=e,this.$to=t}}let sp=!1;function rp(n){!sp&&!n.parent.inlineContent&&(sp=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class F extends V{constructor(e,t=e){rp(e),rp(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let i=e.resolve(t.map(this.head));if(!i.parent.inlineContent)return V.near(i);let s=e.resolve(t.map(this.anchor));return new F(s.parent.inlineContent?s:i,i)}replace(e,t=R.empty){if(super.replace(e,t),t==R.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof F&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ul(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new F(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,i=t){let s=e.resolve(t);return new this(s,i==t?s:e.resolve(i))}static between(e,t,i){let s=e.pos-t.pos;if((!i||s)&&(i=s>=0?1:-1),!t.parent.inlineContent){let r=V.findFrom(t,i,!0)||V.findFrom(t,-i,!0);if(r)t=r.$head;else return V.near(t,i)}return e.parent.inlineContent||(s==0?e=t:(e=(V.findFrom(e,-i,!0)||V.findFrom(e,i,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new F(e,t)}}V.jsonID("text",F);class Ul{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Ul(e.map(this.anchor),e.map(this.head))}resolve(e){return F.between(e.resolve(this.anchor),e.resolve(this.head))}}class L extends V{constructor(e){let t=e.nodeAfter,i=e.node(0).resolve(e.pos+t.nodeSize);super(e,i),this.node=t}map(e,t){let{deleted:i,pos:s}=t.mapResult(this.anchor),r=e.resolve(s);return i?V.near(r):new L(r)}content(){return new R(D.from(this.node),0,0)}eq(e){return e instanceof L&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new uf(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new L(e.resolve(t.anchor))}static create(e,t){return new L(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}L.prototype.visible=!1;V.jsonID("node",L);class uf{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:i}=e.mapResult(this.anchor);return t?new Ul(i,i):new uf(i)}resolve(e){let t=e.resolve(this.anchor),i=t.nodeAfter;return i&&L.isSelectable(i)?new L(t):V.near(t)}}class xt extends V{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=R.empty){if(t==R.empty){e.delete(0,e.doc.content.size);let i=V.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new xt(e)}map(e){return new xt(e)}eq(e){return e instanceof xt}getBookmark(){return JE}}V.jsonID("all",xt);const JE={map(){return this},resolve(n){return new xt(n)}};function Gi(n,e,t,i,s,r=!1){if(e.inlineContent)return F.create(n,t);for(let o=i-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let a=e.child(o);if(a.isAtom){if(!r&&L.isSelectable(a))return L.create(n,t-(s<0?a.nodeSize:0))}else{let l=Gi(n,a,t+s,s<0?a.childCount:0,s,r);if(l)return l}t+=a.nodeSize*s}return null}function op(n,e,t){let i=n.steps.length-1;if(i<e)return;let s=n.steps[i];if(!(s instanceof _e||s instanceof Ae))return;let r=n.mapping.maps[i],o;r.forEach((a,l,c,u)=>{o==null&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const ap=1,lo=2,lp=4;class QE extends q0{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|ap)&~lo,this.storedMarks=null,this}get selectionSet(){return(this.updated&ap)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=lo,this}ensureMarks(e){return X.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&lo)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~lo,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let i=this.selection;return t&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||X.none))),i.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,i){let s=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(i==null&&(i=t),i=i??t,!e)return this.deleteRange(t,i);let r=this.storedMarks;if(!r){let o=this.doc.resolve(t);r=i==t?o.marks():o.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(t,i,s.text(e,r)),this.selection.empty||this.setSelection(V.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=lp,this}get scrolledIntoView(){return(this.updated&lp)>0}}function cp(n,e){return!e||!n?n:n.bind(e)}class Ws{constructor(e,t,i){this.name=e,this.init=cp(t.init,i),this.apply=cp(t.apply,i)}}const ZE=[new Ws("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Ws("selection",{init(n,e){return n.selection||V.atStart(e.doc)},apply(n){return n.selection}}),new Ws("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,i){return i.selection.$cursor?n.storedMarks:null}}),new Ws("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class wc{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=ZE.slice(),t&&t.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new Ws(i.key,i.spec.state,i))})}}class Qi{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=t){let s=this.config.plugins[i];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],i=this.applyInner(e),s=null;for(;;){let r=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=s?s[o].n:0,c=s?s[o].state:this,u=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,c,i);if(u&&i.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!s){s=[];for(let d=0;d<this.config.plugins.length;d++)s.push(d<o?{state:i,n:t.length}:{state:this,n:0})}t.push(u),i=i.applyInner(u),r=!0}s&&(s[o]={state:i,n:t.length})}}if(!r)return{state:i,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Qi(this.config),i=this.config.fields;for(let s=0;s<i.length;s++){let r=i[s];t[r.name]=r.apply(e,this[r.name],this,t)}return t}get tr(){return new QE(this)}static create(e){let t=new wc(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new Qi(t);for(let s=0;s<t.fields.length;s++)i[t.fields[s].name]=t.fields[s].init(e,i);return i}reconfigure(e){let t=new wc(this.schema,e.plugins),i=t.fields,s=new Qi(t);for(let r=0;r<i.length;r++){let o=i[r].name;s[o]=this.hasOwnProperty(o)?this[o]:i[r].init(e,s)}return s}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&typeof e=="object")for(let i in e){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[i],r=s.spec.state;r&&r.toJSON&&(t[i]=r.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,i){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new wc(e.schema,e.plugins),r=new Qi(s);return s.fields.forEach(o=>{if(o.name=="doc")r.doc=yi.fromJSON(e.schema,t.doc);else if(o.name=="selection")r.selection=V.fromJSON(r.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(r.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let a in i){let l=i[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){r[o.name]=c.fromJSON.call(l,e,t[a],r);return}}r[o.name]=o.init(e,r)}}),r}}function G0(n,e,t){for(let i in n){let s=n[i];s instanceof Function?s=s.bind(e):i=="handleDOMEvents"&&(s=G0(s,e,{})),t[i]=s}return t}class Re{constructor(e){this.spec=e,this.props={},e.props&&G0(e.props,this,this.props),this.key=e.key?e.key.key:K0("plugin")}getState(e){return e[this.key]}}const Ac=Object.create(null);function K0(n){return n in Ac?n+"$"+ ++Ac[n]:(Ac[n]=0,n+"$")}class at{constructor(e="key"){this.key=K0(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Te=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},yr=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Vu=null;const $t=function(n,e,t){let i=Vu||(Vu=document.createRange());return i.setEnd(n,t??n.nodeValue.length),i.setStart(n,e||0),i},XE=function(){Vu=null},Ei=function(n,e,t,i){return t&&(up(n,e,t,i,-1)||up(n,e,t,i,1))},eC=/^(img|br|input|textarea|hr)$/i;function up(n,e,t,i,s){for(;;){if(n==t&&e==i)return!0;if(e==(s<0?0:ft(n))){let r=n.parentNode;if(!r||r.nodeType!=1||Ur(n)||eC.test(n.nodeName)||n.contentEditable=="false")return!1;e=Te(n)+(s<0?0:1),n=r}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.contentEditable=="false")return!1;e=s<0?ft(n):0}else return!1}}function ft(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function tC(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=ft(n)}else if(n.parentNode&&!Ur(n))e=Te(n),n=n.parentNode;else return null}}function nC(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Ur(n))e=Te(n)+1,n=n.parentNode;else return null}}function iC(n,e,t){for(let i=e==0,s=e==ft(n);i||s;){if(n==t)return!0;let r=Te(n);if(n=n.parentNode,!n)return!1;i=i&&r==0,s=s&&r==ft(n)}}function Ur(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const $l=function(n){return n.focusNode&&Ei(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function ei(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function sC(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function rC(n,e,t){if(n.caretPositionFromPoint)try{let i=n.caretPositionFromPoint(e,t);if(i)return{node:i.offsetNode,offset:Math.min(ft(i.offsetNode),i.offset)}}catch{}if(n.caretRangeFromPoint){let i=n.caretRangeFromPoint(e,t);if(i)return{node:i.startContainer,offset:Math.min(ft(i.startContainer),i.startOffset)}}}const Lt=typeof navigator<"u"?navigator:null,dp=typeof document<"u"?document:null,zn=Lt&&Lt.userAgent||"",ju=/Edge\/(\d+)/.exec(zn),Y0=/MSIE \d/.exec(zn),Wu=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(zn),et=!!(Y0||Wu||ju),An=Y0?document.documentMode:Wu?+Wu[1]:ju?+ju[1]:0,wt=!et&&/gecko\/(\d+)/i.test(zn);wt&&+(/Firefox\/(\d+)/.exec(zn)||[0,0])[1];const Uu=!et&&/Chrome\/(\d+)/.exec(zn),Be=!!Uu,J0=Uu?+Uu[1]:0,$e=!et&&!!Lt&&/Apple Computer/.test(Lt.vendor),ds=$e&&(/Mobile\/\w+/.test(zn)||!!Lt&&Lt.maxTouchPoints>2),dt=ds||(Lt?/Mac/.test(Lt.platform):!1),oC=Lt?/Win/.test(Lt.platform):!1,bt=/Android \d/.test(zn),$r=!!dp&&"webkitFontSmoothing"in dp.documentElement.style,aC=$r?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function lC(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Ht(n,e){return typeof n=="number"?n:n[e]}function cC(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,i=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*i}}function fp(n,e,t){let i=n.someProp("scrollThreshold")||0,s=n.someProp("scrollMargin")||5,r=n.dom.ownerDocument;for(let o=t||n.dom;o;o=yr(o)){if(o.nodeType!=1)continue;let a=o,l=a==r.body,c=l?lC(r):cC(a),u=0,d=0;if(e.top<c.top+Ht(i,"top")?d=-(c.top-e.top+Ht(s,"top")):e.bottom>c.bottom-Ht(i,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Ht(s,"top")-c.top:e.bottom-c.bottom+Ht(s,"bottom")),e.left<c.left+Ht(i,"left")?u=-(c.left-e.left+Ht(s,"left")):e.right>c.right-Ht(i,"right")&&(u=e.right-c.right+Ht(s,"right")),u||d)if(l)r.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,h=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let p=a.scrollLeft-f,m=a.scrollTop-h;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function uC(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),i,s;for(let r=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=n.root.elementFromPoint(r,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){i=a,s=l.top;break}}return{refDOM:i,refTop:s,stack:Q0(n.dom)}}function Q0(n){let e=[],t=n.ownerDocument;for(let i=n;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),n!=t);i=yr(i));return e}function dC({refDOM:n,refTop:e,stack:t}){let i=n?n.getBoundingClientRect().top:0;Z0(t,i==0?0:i-e)}function Z0(n,e){for(let t=0;t<n.length;t++){let{dom:i,top:s,left:r}=n[t];i.scrollTop!=s+e&&(i.scrollTop=s+e),i.scrollLeft!=r&&(i.scrollLeft=r)}}let ji=null;function fC(n){if(n.setActive)return n.setActive();if(ji)return n.focus(ji);let e=Q0(n);n.focus(ji==null?{get preventScroll(){return ji={preventScroll:!0},!0}}:void 0),ji||(ji=!1,Z0(e,0))}function X0(n,e){let t,i=2e8,s,r=0,o=e.top,a=e.top,l,c;for(let u=n.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=$t(u).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<i){t=u,i=m,s=m&&t.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(r=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!t&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(r=d+1)}}return!t&&l&&(t=l,s=c,i=0),t&&t.nodeType==3?hC(t,s):!t||i&&t.nodeType==1?{node:n,offset:r}:X0(t,s)}function hC(n,e){let t=n.nodeValue.length,i=document.createRange();for(let s=0;s<t;s++){i.setEnd(n,s+1),i.setStart(n,s);let r=an(i,1);if(r.top!=r.bottom&&df(e,r))return{node:n,offset:s+(e.left>=(r.left+r.right)/2?1:0)}}return{node:n,offset:0}}function df(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function pC(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function gC(n,e,t){let{node:i,offset:s}=X0(e,t),r=-1;if(i.nodeType==1&&!i.firstChild){let o=i.getBoundingClientRect();r=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(i,s,r)}function mC(n,e,t,i){let s=-1;for(let r=e,o=!1;r!=n.dom;){let a=n.docView.nearestDesc(r,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&(!o&&l.left>i.left||l.top>i.top?s=a.posBefore:(!o&&l.right<i.left||l.bottom<i.top)&&(s=a.posAfter),o=!0),!a.contentDOM&&s<0&&!a.node.isText)return(a.node.isBlock?i.top<(l.top+l.bottom)/2:i.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}r=a.dom.parentNode}return s>-1?s:n.docView.posFromDOM(e,t,-1)}function ev(n,e,t){let i=n.childNodes.length;if(i&&t.top<t.bottom)for(let s=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-t.top)/(t.bottom-t.top))-2)),r=s;;){let o=n.childNodes[r];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(df(e,c))return ev(o,e,c)}}if((r=(r+1)%i)==s)break}return n}function bC(n,e){let t=n.dom.ownerDocument,i,s=0,r=rC(t,e.left,e.top);r&&({node:i,offset:s}=r);let o=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),a;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=n.dom.getBoundingClientRect();if(!df(e,c)||(o=ev(n.dom,e,c),!o))return null}if($e)for(let c=o;i&&c;c=yr(c))c.draggable&&(i=void 0);if(o=pC(o,e),i){if(wt&&i.nodeType==1&&(s=Math.min(s,i.childNodes.length),s<i.childNodes.length)){let u=i.childNodes[s],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&s++}let c;$r&&s&&i.nodeType==1&&(c=i.childNodes[s-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&s--,i==n.dom&&s==i.childNodes.length-1&&i.lastChild.nodeType==1&&e.top>i.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(s==0||i.nodeType!=1||i.childNodes[s-1].nodeName!="BR")&&(a=mC(n,i,s,e))}a==null&&(a=gC(n,o,e));let l=n.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function hp(n){return n.top<n.bottom||n.left<n.right}function an(n,e){let t=n.getClientRects();if(t.length){let i=t[e<0?0:t.length-1];if(hp(i))return i}return Array.prototype.find.call(t,hp)||n.getBoundingClientRect()}const yC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function tv(n,e,t){let{node:i,offset:s,atom:r}=n.docView.domFromPos(e,t<0?-1:1),o=$r||wt;if(i.nodeType==3)if(o&&(yC.test(i.nodeValue)||(t<0?!s:s==i.nodeValue.length))){let l=an($t(i,s,s),t);if(wt&&s&&/\s/.test(i.nodeValue[s-1])&&s<i.nodeValue.length){let c=an($t(i,s-1,s-1),-1);if(c.top==l.top){let u=an($t(i,s,s+1),-1);if(u.top!=l.top)return Ns(u,u.left<c.left)}}return l}else{let l=s,c=s,u=t<0?1:-1;return t<0&&!s?(c++,u=-1):t>=0&&s==i.nodeValue.length?(l--,u=1):t<0?l--:c++,Ns(an($t(i,l,c),u),u<0)}if(!n.state.doc.resolve(e-(r||0)).parent.inlineContent){if(r==null&&s&&(t<0||s==ft(i))){let l=i.childNodes[s-1];if(l.nodeType==1)return kc(l.getBoundingClientRect(),!1)}if(r==null&&s<ft(i)){let l=i.childNodes[s];if(l.nodeType==1)return kc(l.getBoundingClientRect(),!0)}return kc(i.getBoundingClientRect(),t>=0)}if(r==null&&s&&(t<0||s==ft(i))){let l=i.childNodes[s-1],c=l.nodeType==3?$t(l,ft(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Ns(an(c,1),!1)}if(r==null&&s<ft(i)){let l=i.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?$t(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return Ns(an(c,-1),!0)}return Ns(an(i.nodeType==3?$t(i):i,-t),t>=0)}function Ns(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function kc(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function nv(n,e,t){let i=n.state,s=n.root.activeElement;i!=e&&n.updateState(e),s!=n.dom&&n.focus();try{return t()}finally{i!=e&&n.updateState(i),s!=n.dom&&s&&s.focus()}}function vC(n,e,t){let i=e.selection,s=t=="up"?i.$from:i.$to;return nv(n,e,()=>{let{node:r}=n.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(r,!0);if(!a)break;if(a.node.isBlock){r=a.contentDOM||a.dom;break}r=a.dom.parentNode}let o=tv(n,s.pos,1);for(let a=r.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=$t(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(t=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const xC=/[\u0590-\u08ac]/;function _C(n,e,t){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let s=i.parentOffset,r=!s,o=s==i.parent.content.size,a=n.domSelection();return a?!xC.test(i.parent.textContent)||!a.modify?t=="left"||t=="backward"?r:o:nv(n,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=n.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",t,"character");let h=i.depth?n.docView.domAfterPos(i.before()):n.dom,{focusNode:p,focusOffset:m}=n.domSelectionRange(),g=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),g}):i.pos==i.start()||i.pos==i.end()}let pp=null,gp=null,mp=!1;function SC(n,e,t){return pp==e&&gp==t?mp:(pp=e,gp=t,mp=t=="up"||t=="down"?vC(n,e,t):_C(n,e,t))}const mt=0,bp=1,ri=2,Bt=3;class qr{constructor(e,t,i,s){this.parent=e,this.children=t,this.dom=i,this.contentDOM=s,this.dirty=mt,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,i){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,i=this.posAtStart;;t++){let s=this.children[t];if(s==e)return i;i+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,i){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(i<0){let r,o;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&!((o=r.pmViewDesc)&&o.parent==this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}else{let r,o;if(e==this.contentDOM)r=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.nextSibling}for(;r&&!((o=r.pmViewDesc)&&o.parent==this);)r=r.nextSibling;return r?this.posBeforeChild(o):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=t>Te(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let r=e;;r=r.parentNode){if(r==this.dom){s=!1;break}if(r.previousSibling)break}if(s==null&&t==e.childNodes.length)for(let r=e;;r=r.parentNode){if(r==this.dom){s=!0;break}if(r.nextSibling)break}}return s??i>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let i=!0,s=e;s;s=s.parentNode){let r=this.getDesc(s),o;if(r&&(!t||r.node))if(i&&(o=r.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))i=!1;else return r}}getDesc(e){let t=e.pmViewDesc;for(let i=t;i;i=i.parent)if(i==this)return t}posFromDOM(e,t,i){for(let s=e;s;s=s.parentNode){let r=this.getDesc(s);if(r)return r.localPosFromDOM(e,t,i)}return-1}descAt(e){for(let t=0,i=0;t<this.children.length;t++){let s=this.children[t],r=i+s.size;if(i==e&&r!=i){for(;!s.border&&s.children.length;)s=s.children[0];return s}if(e<r)return s.descAt(e-i-s.border);i=r}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let i=0,s=0;for(let r=0;i<this.children.length;i++){let o=this.children[i],a=r+o.size;if(a>e||o instanceof sv){s=e-r;break}r=a}if(s)return this.children[i].domFromPos(s-this.children[i].border,t);for(let r;i&&!(r=this.children[i-1]).size&&r instanceof iv&&r.side>=0;i--);if(t<=0){let r,o=!0;for(;r=i?this.children[i-1]:null,!(!r||r.dom.parentNode==this.contentDOM);i--,o=!1);return r&&t&&o&&!r.border&&!r.domAtom?r.domFromPos(r.size,t):{node:this.contentDOM,offset:r?Te(r.dom)+1:0}}else{let r,o=!0;for(;r=i<this.children.length?this.children[i]:null,!(!r||r.dom.parentNode==this.contentDOM);i++,o=!1);return r&&o&&!r.border&&!r.domAtom?r.domFromPos(0,t):{node:this.contentDOM,offset:r?Te(r.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,i=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,r=-1;for(let o=i,a=0;;a++){let l=this.children[a],c=o+l.size;if(s==-1&&e<=c){let u=o+l.border;if(e>=u&&t<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,u);e=o;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){s=Te(f.dom)+1;break}e-=f.size}s==-1&&(s=0)}if(s>-1&&(c>t||a==this.children.length-1)){t=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){r=Te(d.dom);break}t+=d.size}r==-1&&(r=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:s,toOffset:r}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:i}=this.domFromPos(e,0);if(t.nodeType!=1||i==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[i]}setSelection(e,t,i,s=!1){let r=Math.min(e,t),o=Math.max(e,t);for(let f=0,h=0;f<this.children.length;f++){let p=this.children[f],m=h+p.size;if(r>h&&o<m)return p.setSelection(e-h-p.border,t-h-p.border,i,s);h=m}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=i.getSelection(),u=!1;if((wt||$e)&&e==t){let{node:f,offset:h}=a;if(f.nodeType==3){if(u=!!(h&&f.nodeValue[h-1]==`
`),u&&h==f.nodeValue.length)for(let p=f,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:Te(m)+1});break}let g=p.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let p=f.childNodes[h-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(wt&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(s=!0)}if(!(s||u&&$e)&&Ei(a.node,a.offset,c.anchorNode,c.anchorOffset)&&Ei(l.node,l.offset,c.focusNode,c.focusOffset))return;let d=!1;if((c.extend||e==t)&&!u){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(e>t){let h=a;a=l,l=h}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let i=0,s=0;s<this.children.length;s++){let r=this.children[s],o=i+r.size;if(i==o?e<=o&&t>=i:e<o&&t>i){let a=i+r.border,l=o-r.border;if(e>=a&&t<=l){this.dirty=e==i||t==o?ri:bp,e==a&&t==l&&(r.contentLost||r.dom.parentNode!=this.contentDOM)?r.dirty=Bt:r.markDirty(e-a,t-a);return}else r.dirty=r.dom==r.contentDOM&&r.dom.parentNode==this.contentDOM&&!r.children.length?ri:Bt}i=o}this.dirty=ri}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let i=e==1?ri:bp;t.dirty<i&&(t.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class iv extends qr{constructor(e,t,i,s){let r,o=t.type.toDOM;if(typeof o=="function"&&(o=o(i,()=>{if(!r)return s;if(r.parent)return r.parent.posBeforeChild(r)})),!t.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,r=this}matchesWidget(e){return this.dirty==mt&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class wC extends qr{constructor(e,t,i,s){super(e,[],t,null),this.textDOM=i,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ci extends qr{constructor(e,t,i,s){super(e,[],i,s),this.mark=t}static create(e,t,i,s){let r=s.nodeViews[t.type.name],o=r&&r(t,s,i);return(!o||!o.dom)&&(o=Pi.renderSpec(document,t.type.spec.toDOM(t,i),null,t.attrs)),new Ci(e,t,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&Bt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Bt&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=mt){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=mt}}slice(e,t,i){let s=Ci.create(this.parent,this.mark,!0,i),r=this.children,o=this.size;t<o&&(r=qu(r,t,o,i)),e>0&&(r=qu(r,0,e,i));for(let a=0;a<r.length;a++)r[a].parent=s;return s.children=r,s}}class kn extends qr{constructor(e,t,i,s,r,o,a,l,c){super(e,[],r,o),this.node=t,this.outerDeco=i,this.innerDeco=s,this.nodeDOM=a}static create(e,t,i,s,r,o){let a=r.nodeViews[t.type.name],l,c=a&&a(t,r,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},i,s),u=c&&c.dom,d=c&&c.contentDOM;if(t.isText){if(!u)u=document.createTextNode(t.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Pi.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!d&&!t.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let f=u;return u=av(u,i,t),c?l=new AC(e,t,i,s,u,d||null,f,c,r,o+1):t.isText?new ql(e,t,i,s,u,f,r):new kn(e,t,i,s,u,d||null,f,r,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let i=this.children[t];if(this.dom.contains(i.dom.parentNode)){e.contentElement=i.dom.parentNode;break}}e.contentElement||(e.getContent=()=>D.empty)}return e}matchesNode(e,t,i){return this.dirty==mt&&e.eq(this.node)&&Aa(t,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let i=this.node.inlineContent,s=t,r=e.composing?this.localCompositionInfo(e,t):null,o=r&&r.pos>-1?r:null,a=r&&r.pos<0,l=new EC(this,o&&o.node,e);DC(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,i,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?X.none:this.node.child(u).marks,i,e),l.placeWidget(c,e,s)},(c,u,d,f)=>{l.syncToMarks(c.marks,i,e);let h;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>s&&e.state.selection.to<s+c.nodeSize&&(h=l.findIndexWithChild(r.node))>-1&&l.updateNodeAt(c,u,d,h,e)||l.updateNextNode(c,u,d,e,f,s)||l.addNode(c,u,d,e,s),s+=c.nodeSize}),l.syncToMarks([],i,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==ri)&&(o&&this.protectLocalComposition(e,o),rv(this.contentDOM,this.children,e),ds&&TC(this.dom))}localCompositionInfo(e,t){let{from:i,to:s}=e.state.selection;if(!(e.state.selection instanceof F)||i<t||s>t+this.node.content.size)return null;let r=e.input.compositionNode;if(!r||!this.dom.contains(r.parentNode))return null;if(this.node.inlineContent){let o=r.nodeValue,a=OC(this.node.content,o,i-t,s-t);return a<0?null:{node:r,pos:a,text:o}}else return{node:r,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:i,text:s}){if(this.getDesc(t))return;let r=t;for(;r.parentNode!=this.contentDOM;r=r.parentNode){for(;r.previousSibling;)r.parentNode.removeChild(r.previousSibling);for(;r.nextSibling;)r.parentNode.removeChild(r.nextSibling);r.pmViewDesc&&(r.pmViewDesc=void 0)}let o=new wC(this,r,t,s);e.input.compositionNodes.push(o),this.children=qu(this.children,i,i+s.length,e,o)}update(e,t,i,s){return this.dirty==Bt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,i,s),!0)}updateInner(e,t,i,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=mt}updateOuterDeco(e){if(Aa(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=ov(this.dom,this.nodeDOM,$u(this.outerDeco,this.node,t),$u(e,this.node,t)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function yp(n,e,t,i,s){av(i,e,n);let r=new kn(void 0,n,e,t,i,i,i,s,0);return r.contentDOM&&r.updateChildren(s,0),r}class ql extends kn{constructor(e,t,i,s,r,o,a){super(e,t,i,s,r,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,i,s){return this.dirty==Bt||this.dirty!=mt&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=mt||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=mt,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,i){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,i)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,i){let s=this.node.cut(e,t),r=document.createTextNode(s.text);return new ql(this.parent,s,this.outerDeco,this.innerDeco,r,r,i)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Bt)}get domAtom(){return!1}isText(e){return this.node.text==e}}class sv extends qr{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==mt&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class AC extends kn{constructor(e,t,i,s,r,o,a,l,c,u){super(e,t,i,s,r,o,a,c,u),this.spec=l}update(e,t,i,s){if(this.dirty==Bt)return!1;if(this.spec.update){let r=this.spec.update(e,t,i);return r&&this.updateInner(e,t,i,s),r}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,i,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,i,s){this.spec.setSelection?this.spec.setSelection(e,t,i):super.setSelection(e,t,i,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function rv(n,e,t){let i=n.firstChild,s=!1;for(let r=0;r<e.length;r++){let o=e[r],a=o.dom;if(a.parentNode==n){for(;a!=i;)i=vp(i),s=!0;i=i.nextSibling}else s=!0,n.insertBefore(a,i);if(o instanceof Ci){let l=i?i.previousSibling:n.lastChild;rv(o.contentDOM,o.children,t),i=l?l.nextSibling:n.firstChild}}for(;i;)i=vp(i),s=!0;s&&t.trackWrites==n&&(t.trackWrites=null)}const er=function(n){n&&(this.nodeName=n)};er.prototype=Object.create(null);const oi=[new er];function $u(n,e,t){if(n.length==0)return oi;let i=t?oi[0]:new er,s=[i];for(let r=0;r<n.length;r++){let o=n[r].type.attrs;if(o){o.nodeName&&s.push(i=new er(o.nodeName));for(let a in o){let l=o[a];l!=null&&(t&&s.length==1&&s.push(i=new er(e.isInline?"span":"div")),a=="class"?i.class=(i.class?i.class+" ":"")+l:a=="style"?i.style=(i.style?i.style+";":"")+l:a!="nodeName"&&(i[a]=l))}}}return s}function ov(n,e,t,i){if(t==oi&&i==oi)return e;let s=e;for(let r=0;r<i.length;r++){let o=i[r],a=t[r];if(r){let l;a&&a.nodeName==o.nodeName&&s!=n&&(l=s.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(s),a=oi[0]),s=l}kC(s,a||oi[0],o)}return s}function kC(n,e,t){for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&!(i in t)&&n.removeAttribute(i);for(let i in t)i!="class"&&i!="style"&&i!="nodeName"&&t[i]!=e[i]&&n.setAttribute(i,t[i]);if(e.class!=t.class){let i=e.class?e.class.split(" ").filter(Boolean):[],s=t.class?t.class.split(" ").filter(Boolean):[];for(let r=0;r<i.length;r++)s.indexOf(i[r])==-1&&n.classList.remove(i[r]);for(let r=0;r<s.length;r++)i.indexOf(s[r])==-1&&n.classList.add(s[r]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=i.exec(e.style);)n.style.removeProperty(s[1])}t.style&&(n.style.cssText+=t.style)}}function av(n,e,t){return ov(n,n,oi,$u(e,t,n.nodeType!=1))}function Aa(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function vp(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class EC{constructor(e,t,i){this.lock=t,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=CC(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let i=e;i<t;i++)this.top.children[i].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,i){let s=0,r=this.stack.length>>1,o=Math.min(r,e.length);for(;s<o&&(s==r-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<r;)this.destroyRest(),this.top.dirty=mt,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[r])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Ci.create(this.top,e[r],t,i);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,r++}}findNodeMatch(e,t,i,s){let r=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,i))r=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,t,i)&&!this.preMatch.matched.has(c)){r=a;break}}return r<0?!1:(this.destroyBetween(this.index,r),this.index++,!0)}updateNodeAt(e,t,i,s,r){let o=this.top.children[s];return o.dirty==Bt&&o.dom==o.contentDOM&&(o.dirty=ri),o.update(e,t,i,r)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let i=e.pmViewDesc;if(i){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==i)return s}return-1}e=t}}updateNextNode(e,t,i,s,r,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof kn){let c=this.preMatch.matched.get(l);if(c!=null&&c!=r)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Bt&&Aa(t,l.outerDeco));if(!f&&l.update(e,t,i,s))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,t,i,s,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=ri,d.updateChildren(s,o+1),d.dirty=mt),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,i,s,r,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Aa(i,e.outerDeco)||!s.eq(e.innerDeco))return null;let a=kn.create(this.top,t,i,s,r,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,t,i,s,r){let o=kn.create(this.top,e,t,i,s,r);o.contentDOM&&o.updateChildren(s,r+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,i){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let r=new iv(this.top,e,t,i);this.top.children.splice(this.index++,0,r),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Ci;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof ql)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&(($e||Be)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let i=document.createElement(e);e=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),e=="BR"&&(i.className="ProseMirror-trailingBreak");let s=new sv(this.top,[],i,null);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function CC(n,e){let t=e,i=t.children.length,s=n.childCount,r=new Map,o=[];e:for(;s>0;){let a;for(;;)if(i){let c=t.children[i-1];if(c instanceof Ci)t=c,i=c.children.length;else{a=c,i--;break}}else{if(t==e)break e;i=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=n.child(s-1))break;--s,r.set(a,s),o.push(a)}}return{index:s,matched:r,matches:o.reverse()}}function MC(n,e){return n.type.side-e.type.side}function DC(n,e,t,i){let s=e.locals(n),r=0;if(s.length==0){for(let c=0;c<n.childCount;c++){let u=n.child(c);i(u,s,e.forChild(r,u),c),r+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<s.length&&s[o].to==r;){let g=s[o++];g.widget&&(u?(d||(d=[u])).push(g):u=g)}if(u)if(d){d.sort(MC);for(let g=0;g<d.length;g++)t(d[g],c,!!l)}else t(u,c,!!l);let f,h;if(l)h=-1,f=l,l=null;else if(c<n.childCount)h=c,f=n.child(c++);else break;for(let g=0;g<a.length;g++)a[g].to<=r&&a.splice(g--,1);for(;o<s.length&&s[o].from<=r&&s[o].to>r;)a.push(s[o++]);let p=r+f.nodeSize;if(f.isText){let g=p;o<s.length&&s[o].from<g&&(g=s[o].from);for(let b=0;b<a.length;b++)a[b].to<g&&(g=a[b].to);g<p&&(l=f.cut(g-r),f=f.cut(0,g-r),p=g,h=-1)}else for(;o<s.length&&s[o].to<p;)o++;let m=f.isInline&&!f.isLeaf?a.filter(g=>!g.inline):a.slice();i(f,m,e.forChild(r,f),h),r=p}}function TC(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function OC(n,e,t,i){for(let s=0,r=0;s<n.childCount&&r<=i;){let o=n.child(s++),a=r;if(r+=o.nodeSize,!o.isText)continue;let l=o.text;for(;s<n.childCount;){let c=n.child(s++);if(r+=c.nodeSize,!c.isText)break;l+=c.text}if(r>=t){if(r>=i&&l.slice(i-e.length-a,i-a)==e)return i-e.length;let c=a<i?l.lastIndexOf(e,i-a-1):-1;if(c>=0&&c+e.length+a>=t)return a+c;if(t==i&&l.length>=i+e.length-a&&l.slice(i-a,i-a+e.length)==e)return i}}return-1}function qu(n,e,t,i,s){let r=[];for(let o=0,a=0;o<n.length;o++){let l=n[o],c=a,u=a+=l.size;c>=t||u<=e?r.push(l):(c<e&&r.push(l.slice(0,e-c,i)),s&&(r.push(s),s=void 0),u>t&&r.push(l.slice(t-c,l.size,i)))}return r}function ff(n,e=null){let t=n.domSelectionRange(),i=n.state.doc;if(!t.focusNode)return null;let s=n.docView.nearestDesc(t.focusNode),r=s&&s.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=i.resolve(o),l,c;if($l(t)){for(l=o;s&&!s.node;)s=s.parent;let d=s.node;if(s&&d.isAtom&&L.isSelectable(d)&&s.parent&&!(d.isInline&&iC(t.focusNode,t.focusOffset,s.dom))){let f=s.posBefore;c=new L(o==f?a:i.resolve(f))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let d=o,f=o;for(let h=0;h<t.rangeCount;h++){let p=t.getRangeAt(h);d=Math.min(d,n.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,n.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[l,o]=f==n.state.selection.anchor?[f,d]:[d,f],a=i.resolve(o)}else l=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(l<0)return null}let u=i.resolve(l);if(!c){let d=e=="pointer"||n.state.selection.head<a.pos&&!r?1:-1;c=hf(n,u,a,d)}return c}function lv(n){return n.editable?n.hasFocus():uv(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Qt(n,e=!1){let t=n.state.selection;if(cv(n,t),!!lv(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Be){let i=n.domSelectionRange(),s=n.domObserver.currentSelection;if(i.anchorNode&&s.anchorNode&&Ei(i.anchorNode,i.anchorOffset,s.anchorNode,s.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)PC(n);else{let{anchor:i,head:s}=t,r,o;xp&&!(t instanceof F)&&(t.$from.parent.inlineContent||(r=_p(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=_p(n,t.to))),n.docView.setSelection(i,s,n.root,e),xp&&(r&&Sp(r),o&&Sp(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&RC(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const xp=$e||Be&&J0<63;function _p(n,e){let{node:t,offset:i}=n.docView.domFromPos(e,0),s=i<t.childNodes.length?t.childNodes[i]:null,r=i?t.childNodes[i-1]:null;if($e&&s&&s.contentEditable=="false")return Ec(s);if((!s||s.contentEditable=="false")&&(!r||r.contentEditable=="false")){if(s)return Ec(s);if(r)return Ec(r)}}function Ec(n){return n.contentEditable="true",$e&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Sp(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function RC(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),i=t.anchorNode,s=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=i||t.anchorOffset!=s)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!lv(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function PC(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let i=n.cursorWrapper.dom,s=i.nodeName=="IMG";s?t.setStart(i.parentNode,Te(i)+1):t.setStart(i,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!s&&!n.state.selection.visible&&et&&An<=11&&(i.disabled=!0,i.disabled=!1)}function cv(n,e){if(e instanceof L){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(wp(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else wp(n)}function wp(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function hf(n,e,t,i){return n.someProp("createSelectionBetween",s=>s(n,e,t))||F.between(e,t,i)}function Ap(n){return n.editable&&!n.hasFocus()?!1:uv(n)}function uv(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function NC(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Ei(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Gu(n,e){let{$anchor:t,$head:i}=n.selection,s=e>0?t.max(i):t.min(i),r=s.parent.inlineContent?s.depth?n.doc.resolve(e>0?s.after():s.before()):null:s;return r&&V.findFrom(r,e)}function ln(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function kp(n,e,t){let i=n.state.selection;if(i instanceof F)if(t.indexOf("s")>-1){let{$head:s}=i,r=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!r||r.isText||!r.isLeaf)return!1;let o=n.state.doc.resolve(s.pos+r.nodeSize*(e<0?-1:1));return ln(n,new F(i.$anchor,o))}else if(i.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let s=Gu(n.state,e);return s&&s instanceof L?ln(n,s):!1}else if(!(dt&&t.indexOf("m")>-1)){let s=i.$head,r=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,o;if(!r||r.isText)return!1;let a=e<0?s.pos-r.nodeSize:s.pos;return r.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?L.isSelectable(r)?ln(n,new L(e<0?n.state.doc.resolve(s.pos-r.nodeSize):s)):$r?ln(n,new F(n.state.doc.resolve(e<0?a:a+r.nodeSize))):!1:!1}}else return!1;else{if(i instanceof L&&i.node.isInline)return ln(n,new F(e>0?i.$to:i.$from));{let s=Gu(n.state,e);return s?ln(n,s):!1}}}function ka(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function tr(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Wi(n,e){return e<0?IC(n):LC(n)}function IC(n){let e=n.domSelectionRange(),t=e.focusNode,i=e.focusOffset;if(!t)return;let s,r,o=!1;for(wt&&t.nodeType==1&&i<ka(t)&&tr(t.childNodes[i],-1)&&(o=!0);;)if(i>0){if(t.nodeType!=1)break;{let a=t.childNodes[i-1];if(tr(a,-1))s=t,r=--i;else if(a.nodeType==3)t=a,i=t.nodeValue.length;else break}}else{if(dv(t))break;{let a=t.previousSibling;for(;a&&tr(a,-1);)s=t.parentNode,r=Te(a),a=a.previousSibling;if(a)t=a,i=ka(t);else{if(t=t.parentNode,t==n.dom)break;i=0}}}o?Ku(n,t,i):s&&Ku(n,s,r)}function LC(n){let e=n.domSelectionRange(),t=e.focusNode,i=e.focusOffset;if(!t)return;let s=ka(t),r,o;for(;;)if(i<s){if(t.nodeType!=1)break;let a=t.childNodes[i];if(tr(a,1))r=t,o=++i;else break}else{if(dv(t))break;{let a=t.nextSibling;for(;a&&tr(a,1);)r=a.parentNode,o=Te(a)+1,a=a.nextSibling;if(a)t=a,i=0,s=ka(t);else{if(t=t.parentNode,t==n.dom)break;i=s=0}}}r&&Ku(n,r,o)}function dv(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function BC(n,e){for(;n&&e==n.childNodes.length&&!Ur(n);)e=Te(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function FC(n,e){for(;n&&!e&&!Ur(n);)e=Te(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Ku(n,e,t){if(e.nodeType!=3){let r,o;(o=BC(e,t))?(e=o,t=0):(r=FC(e,t))&&(e=r,t=r.nodeValue.length)}let i=n.domSelection();if(!i)return;if($l(i)){let r=document.createRange();r.setEnd(e,t),r.setStart(e,t),i.removeAllRanges(),i.addRange(r)}else i.extend&&i.extend(e,t);n.domObserver.setCurSelection();let{state:s}=n;setTimeout(()=>{n.state==s&&Qt(n)},50)}function Ep(n,e){let t=n.state.doc.resolve(e);if(!(Be||oC)&&t.parent.inlineContent){let s=n.coordsAtPos(e);if(e>t.start()){let r=n.coordsAtPos(e-1),o=(r.top+r.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(r.left-s.left)>1)return r.left<s.left?"ltr":"rtl"}if(e<t.end()){let r=n.coordsAtPos(e+1),o=(r.top+r.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(r.left-s.left)>1)return r.left>s.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Cp(n,e,t){let i=n.state.selection;if(i instanceof F&&!i.empty||t.indexOf("s")>-1||dt&&t.indexOf("m")>-1)return!1;let{$from:s,$to:r}=i;if(!s.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=Gu(n.state,e);if(o&&o instanceof L)return ln(n,o)}if(!s.parent.inlineContent){let o=e<0?s:r,a=i instanceof xt?V.near(o,e):V.findFrom(o,e);return a?ln(n,a):!1}return!1}function Mp(n,e){if(!(n.state.selection instanceof F))return!0;let{$head:t,$anchor:i,empty:s}=n.state.selection;if(!t.sameParent(i))return!0;if(!s)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let r=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(r&&!r.isText){let o=n.state.tr;return e<0?o.delete(t.pos-r.nodeSize,t.pos):o.delete(t.pos,t.pos+r.nodeSize),n.dispatch(o),!0}return!1}function Dp(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function zC(n){if(!$e||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let i=e.firstChild;Dp(n,i,"true"),setTimeout(()=>Dp(n,i,"false"),20)}return!1}function HC(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function VC(n,e){let t=e.keyCode,i=HC(e);if(t==8||dt&&t==72&&i=="c")return Mp(n,-1)||Wi(n,-1);if(t==46&&!e.shiftKey||dt&&t==68&&i=="c")return Mp(n,1)||Wi(n,1);if(t==13||t==27)return!0;if(t==37||dt&&t==66&&i=="c"){let s=t==37?Ep(n,n.state.selection.from)=="ltr"?-1:1:-1;return kp(n,s,i)||Wi(n,s)}else if(t==39||dt&&t==70&&i=="c"){let s=t==39?Ep(n,n.state.selection.from)=="ltr"?1:-1:1;return kp(n,s,i)||Wi(n,s)}else{if(t==38||dt&&t==80&&i=="c")return Cp(n,-1,i)||Wi(n,-1);if(t==40||dt&&t==78&&i=="c")return zC(n)||Cp(n,1,i)||Wi(n,1);if(i==(dt?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function fv(n,e){n.someProp("transformCopied",h=>{e=h(e,n)});let t=[],{content:i,openStart:s,openEnd:r}=e;for(;s>1&&r>1&&i.childCount==1&&i.firstChild.childCount==1;){s--,r--;let h=i.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),i=h.content}let o=n.someProp("clipboardSerializer")||Pi.fromSchema(n.state.schema),a=yv(),l=a.createElement("div");l.appendChild(o.serializeFragment(i,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=bv[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${s} ${r}${d?` -${d}`:""} ${JSON.stringify(t)}`);let f=n.someProp("clipboardTextSerializer",h=>h(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function hv(n,e,t,i,s){let r=s.parent.type.spec.code,o,a;if(!t&&!e)return null;let l=e&&(i||r||!t);if(l){if(n.someProp("transformPastedText",f=>{e=f(e,r||i,n)}),r)return e?new R(D.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):R.empty;let d=n.someProp("clipboardTextParser",f=>f(e,s,i,n));if(d)a=d;else{let f=s.marks(),{schema:h}=n.state,p=Pi.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(h.text(m,f)))})}}else n.someProp("transformPastedHTML",d=>{t=d(t,n)}),o=$C(t),$r&&qC(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||wn.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:s,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!jC.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=GC(Tp(a,+u[1],+u[2]),u[4]);else if(a=R.maxOpen(WC(a.content,s),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=Tp(a,d,f)}return n.someProp("transformPasted",d=>{a=d(a,n)}),a}const jC=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function WC(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.index(t)),r,o=[];if(n.forEach(a=>{if(!o)return;let l=s.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&r.length&&gv(l,r,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=mv(o[o.length-1],r.length));let u=pv(a,l);o.push(u),s=s.matchType(u.type),r=l}}),o)return D.from(o)}return n}function pv(n,e,t=0){for(let i=e.length-1;i>=t;i--)n=e[i].create(null,D.from(n));return n}function gv(n,e,t,i,s){if(s<n.length&&s<e.length&&n[s]==e[s]){let r=gv(n,e,t,i.lastChild,s+1);if(r)return i.copy(i.content.replaceChild(i.childCount-1,r));if(i.contentMatchAt(i.childCount).matchType(s==n.length-1?t.type:n[s+1]))return i.copy(i.content.append(D.from(pv(t,n,s+1))))}}function mv(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,mv(n.lastChild,e-1)),i=n.contentMatchAt(n.childCount).fillBefore(D.empty,!0);return n.copy(t.append(i))}function Yu(n,e,t,i,s,r){let o=e<0?n.firstChild:n.lastChild,a=o.content;return n.childCount>1&&(r=0),s<i-1&&(a=Yu(a,e,t,i,s+1,r)),s>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,r<=s).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(D.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(a))}function Tp(n,e,t){return e<n.openStart&&(n=new R(Yu(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new R(Yu(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const bv={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Op=null;function yv(){return Op||(Op=document.implementation.createHTMLDocument("title"))}function UC(n){let e=window.trustedTypes;return e?e.createPolicy("detachedDocument",{createHTML:t=>t}).createHTML(n):n}function $C(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=yv().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(n),s;if((s=i&&bv[i[1].toLowerCase()])&&(n=s.map(r=>"<"+r+">").join("")+n+s.map(r=>"</"+r+">").reverse().join("")),t.innerHTML=UC(n),s)for(let r=0;r<s.length;r++)t=t.querySelector(s[r])||t;return t}function qC(n){let e=n.querySelectorAll(Be?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let i=e[t];i.childNodes.length==1&&i.textContent==""&&i.parentNode&&i.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),i)}}function GC(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,i;try{i=JSON.parse(e)}catch{return n}let{content:s,openStart:r,openEnd:o}=n;for(let a=i.length-2;a>=0;a-=2){let l=t.nodes[i[a]];if(!l||l.hasRequiredAttrs())break;s=D.from(l.create(i[a+1],s)),r++,o++}return new R(s,r,o)}const qe={},Ge={},KC={touchstart:!0,touchmove:!0};class YC{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function JC(n){for(let e in qe){let t=qe[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=i=>{ZC(n,i)&&!pf(n,i)&&(n.editable||!(i.type in Ge))&&t(n,i)},KC[e]?{passive:!0}:void 0)}$e&&n.dom.addEventListener("input",()=>null),Ju(n)}function gn(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function QC(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Ju(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=i=>pf(n,i))})}function pf(n,e){return n.someProp("handleDOMEvents",t=>{let i=t[e.type];return i?i(n,e)||e.defaultPrevented:!1})}function ZC(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function XC(n,e){!pf(n,e)&&qe[e.type]&&(n.editable||!(e.type in Ge))&&qe[e.type](n,e)}Ge.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!xv(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(bt&&Be&&t.keyCode==13)))if(n.domObserver.selectionChanged(n.domSelectionRange())?n.domObserver.flush():t.keyCode!=229&&n.domObserver.forceFlush(),ds&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let i=Date.now();n.input.lastIOSEnter=i,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==i&&(n.someProp("handleKeyDown",s=>s(n,ei(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",i=>i(n,t))||VC(n,t)?t.preventDefault():gn(n,"key")};Ge.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Ge.keypress=(n,e)=>{let t=e;if(xv(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||dt&&t.metaKey)return;if(n.someProp("handleKeyPress",s=>s(n,t))){t.preventDefault();return}let i=n.state.selection;if(!(i instanceof F)||!i.$from.sameParent(i.$to)){let s=String.fromCharCode(t.charCode);!/[\r\n]/.test(s)&&!n.someProp("handleTextInput",r=>r(n,i.$from.pos,i.$to.pos,s))&&n.dispatch(n.state.tr.insertText(s).scrollIntoView()),t.preventDefault()}};function Gl(n){return{left:n.clientX,top:n.clientY}}function e1(n,e){let t=e.x-n.clientX,i=e.y-n.clientY;return t*t+i*i<100}function gf(n,e,t,i,s){if(i==-1)return!1;let r=n.state.doc.resolve(i);for(let o=r.depth+1;o>0;o--)if(n.someProp(e,a=>o>r.depth?a(n,t,r.nodeAfter,r.before(o),s,!0):a(n,t,r.node(o),r.before(o),s,!1)))return!0;return!1}function ns(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let i=n.state.tr.setSelection(e);i.setMeta("pointer",!0),n.dispatch(i)}function t1(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),i=t.nodeAfter;return i&&i.isAtom&&L.isSelectable(i)?(ns(n,new L(t)),!0):!1}function n1(n,e){if(e==-1)return!1;let t=n.state.selection,i,s;t instanceof L&&(i=t.node);let r=n.state.doc.resolve(e);for(let o=r.depth+1;o>0;o--){let a=o>r.depth?r.nodeAfter:r.node(o);if(L.isSelectable(a)){i&&t.$from.depth>0&&o>=t.$from.depth&&r.before(t.$from.depth+1)==t.$from.pos?s=r.before(t.$from.depth):s=r.before(o);break}}return s!=null?(ns(n,L.create(n.state.doc,s)),!0):!1}function i1(n,e,t,i,s){return gf(n,"handleClickOn",e,t,i)||n.someProp("handleClick",r=>r(n,e,i))||(s?n1(n,t):t1(n,t))}function s1(n,e,t,i){return gf(n,"handleDoubleClickOn",e,t,i)||n.someProp("handleDoubleClick",s=>s(n,e,i))}function r1(n,e,t,i){return gf(n,"handleTripleClickOn",e,t,i)||n.someProp("handleTripleClick",s=>s(n,e,i))||o1(n,t,i)}function o1(n,e,t){if(t.button!=0)return!1;let i=n.state.doc;if(e==-1)return i.inlineContent?(ns(n,F.create(i,0,i.content.size)),!0):!1;let s=i.resolve(e);for(let r=s.depth+1;r>0;r--){let o=r>s.depth?s.nodeAfter:s.node(r),a=s.before(r);if(o.inlineContent)ns(n,F.create(i,a+1,a+1+o.content.size));else if(L.isSelectable(o))ns(n,L.create(i,a));else continue;return!0}}function mf(n){return Ea(n)}const vv=dt?"metaKey":"ctrlKey";qe.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let i=mf(n),s=Date.now(),r="singleClick";s-n.input.lastClick.time<500&&e1(t,n.input.lastClick)&&!t[vv]&&(n.input.lastClick.type=="singleClick"?r="doubleClick":n.input.lastClick.type=="doubleClick"&&(r="tripleClick")),n.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:r};let o=n.posAtCoords(Gl(t));o&&(r=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new a1(n,o,t,!!i)):(r=="doubleClick"?s1:r1)(n,o.pos,o.inside,t)?t.preventDefault():gn(n,"pointer"))};class a1{constructor(e,t,i,s){this.view=e,this.pos=t,this.event=i,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!i[vv],this.allowDefault=i.shiftKey;let r,o;if(t.inside>-1)r=e.state.doc.nodeAt(t.inside),o=t.inside;else{let u=e.state.doc.resolve(t.pos);r=u.parent,o=u.depth?u.before():0}const a=s?null:i.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(i.button==0&&r.type.spec.draggable&&r.type.spec.selectable!==!1||c instanceof L&&c.from<=o&&c.to>o)&&(this.mightDrag={node:r,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&wt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),gn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Qt(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Gl(e))),this.updateAllowDefault(e),this.allowDefault||!t?gn(this.view,"pointer"):i1(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||$e&&this.mightDrag&&!this.mightDrag.node.isAtom||Be&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(ns(this.view,V.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):gn(this.view,"pointer")}move(e){this.updateAllowDefault(e),gn(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}qe.touchstart=n=>{n.input.lastTouch=Date.now(),mf(n),gn(n,"pointer")};qe.touchmove=n=>{n.input.lastTouch=Date.now(),gn(n,"pointer")};qe.contextmenu=n=>mf(n);function xv(n,e){return n.composing?!0:$e&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const l1=bt?5e3:-1;Ge.compositionstart=Ge.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof F&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Ea(n,!0),n.markCursor=null;else if(Ea(n,!e.selection.empty),wt&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let i=n.domSelectionRange();for(let s=i.focusNode,r=i.focusOffset;s&&s.nodeType==1&&r!=0;){let o=r<0?s.lastChild:s.childNodes[r-1];if(!o)break;if(o.nodeType==3){let a=n.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else s=o,r=-1}}n.input.composing=!0}_v(n,l1)};Ge.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,_v(n,20))};function _v(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Ea(n),e))}function Sv(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=u1());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function c1(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=tC(e.focusNode,e.focusOffset),i=nC(e.focusNode,e.focusOffset);if(t&&i&&t!=i){let s=i.pmViewDesc,r=n.domObserver.lastChangedTextNode;if(t==r||i==r)return r;if(!s||!s.isText(i.nodeValue))return i;if(n.input.compositionNode==i){let o=t.pmViewDesc;if(!(!o||!o.isText(t.nodeValue)))return i}}return t||i}function u1(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Ea(n,e=!1){if(!(bt&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),Sv(n),e||n.docView&&n.docView.dirty){let t=ff(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function d1(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),s=document.createRange();s.selectNodeContents(e),n.dom.blur(),i.removeAllRanges(),i.addRange(s),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const vr=et&&An<15||ds&&aC<604;qe.copy=Ge.cut=(n,e)=>{let t=e,i=n.state.selection,s=t.type=="cut";if(i.empty)return;let r=vr?null:t.clipboardData,o=i.content(),{dom:a,text:l}=fv(n,o);r?(t.preventDefault(),r.clearData(),r.setData("text/html",a.innerHTML),r.setData("text/plain",l)):d1(n,a),s&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function f1(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function h1(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,i=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let s=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),i.parentNode&&i.parentNode.removeChild(i),t?xr(n,i.value,null,s,e):xr(n,i.textContent,i.innerHTML,s,e)},50)}function xr(n,e,t,i,s){let r=hv(n,e,t,i,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,s,r||R.empty)))return!0;if(!r)return!1;let o=f1(r),a=o?n.state.tr.replaceSelectionWith(o,i):n.state.tr.replaceSelection(r);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function wv(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Ge.paste=(n,e)=>{let t=e;if(n.composing&&!bt)return;let i=vr?null:t.clipboardData,s=n.input.shiftKey&&n.input.lastKeyCode!=45;i&&xr(n,wv(i),i.getData("text/html"),s,t)?t.preventDefault():h1(n,t)};class Av{constructor(e,t,i){this.slice=e,this.move=t,this.node=i}}const kv=dt?"altKey":"ctrlKey";qe.dragstart=(n,e)=>{let t=e,i=n.input.mouseDown;if(i&&i.done(),!t.dataTransfer)return;let s=n.state.selection,r=s.empty?null:n.posAtCoords(Gl(t)),o;if(!(r&&r.pos>=s.from&&r.pos<=(s instanceof L?s.to-1:s.to))){if(i&&i.mightDrag)o=L.create(n.state.doc,i.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let d=n.docView.nearestDesc(t.target,!0);d&&d.node.type.spec.draggable&&d!=n.docView&&(o=L.create(n.state.doc,d.posBefore))}}let a=(o||n.state.selection).content(),{dom:l,text:c,slice:u}=fv(n,a);(!t.dataTransfer.files.length||!Be||J0>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(vr?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",vr||t.dataTransfer.setData("text/plain",c),n.dragging=new Av(u,!t[kv],o)};qe.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Ge.dragover=Ge.dragenter=(n,e)=>e.preventDefault();Ge.drop=(n,e)=>{let t=e,i=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let s=n.posAtCoords(Gl(t));if(!s)return;let r=n.state.doc.resolve(s.pos),o=i&&i.slice;o?n.someProp("transformPasted",p=>{o=p(o,n)}):o=hv(n,wv(t.dataTransfer),vr?null:t.dataTransfer.getData("text/html"),!1,r);let a=!!(i&&!t[kv]);if(n.someProp("handleDrop",p=>p(n,t,o||R.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let l=o?V0(n.state.doc,r.pos,o):r.pos;l==null&&(l=r.pos);let c=n.state.tr;if(a){let{node:p}=i;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&L.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new L(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,b,y)=>p=y),c.setSelection(hf(n,h,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};qe.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Qt(n)},20))};qe.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};qe.beforeinput=(n,e)=>{if(Be&&bt&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:i}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=i||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",r=>r(n,ei(8,"Backspace")))))return;let{$cursor:s}=n.state.selection;s&&s.pos>0&&n.dispatch(n.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let n in Ge)qe[n]=Ge[n];function _r(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Ca{constructor(e,t){this.toDOM=e,this.spec=t||vi,this.side=this.spec.side||0}map(e,t,i,s){let{pos:r,deleted:o}=e.mapResult(t.from+s,this.side<0?-1:1);return o?null:new pt(r-i,r-i,this)}valid(){return!0}eq(e){return this==e||e instanceof Ca&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&_r(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class En{constructor(e,t){this.attrs=e,this.spec=t||vi}map(e,t,i,s){let r=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-i,o=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-i;return r>=o?null:new pt(r,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof En&&_r(this.attrs,e.attrs)&&_r(this.spec,e.spec)}static is(e){return e.type instanceof En}destroy(){}}class bf{constructor(e,t){this.attrs=e,this.spec=t||vi}map(e,t,i,s){let r=e.mapResult(t.from+s,1);if(r.deleted)return null;let o=e.mapResult(t.to+s,-1);return o.deleted||o.pos<=r.pos?null:new pt(r.pos-i,o.pos-i,this)}valid(e,t){let{index:i,offset:s}=e.content.findIndex(t.from),r;return s==t.from&&!(r=e.child(i)).isText&&s+r.nodeSize==t.to}eq(e){return this==e||e instanceof bf&&_r(this.attrs,e.attrs)&&_r(this.spec,e.spec)}destroy(){}}class pt{constructor(e,t,i){this.from=e,this.to=t,this.type=i}copy(e,t){return new pt(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,i){return this.type.map(e,this,t,i)}static widget(e,t,i){return new pt(e,e,new Ca(t,i))}static inline(e,t,i,s){return new pt(e,t,new En(i,s))}static node(e,t,i,s){return new pt(e,t,new bf(i,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof En}get widget(){return this.type instanceof Ca}}const Ki=[],vi={};class be{constructor(e,t){this.local=e.length?e:Ki,this.children=t.length?t:Ki}static create(e,t){return t.length?Ma(t,e,0,vi):Le}find(e,t,i){let s=[];return this.findInner(e??0,t??1e9,s,0,i),s}findInner(e,t,i,s,r){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!r||r(a.spec))&&i.push(a.copy(a.from+s,a.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,i,s+a,r)}}map(e,t,i){return this==Le||e.maps.length==0?this:this.mapInner(e,t,0,0,i||vi)}mapInner(e,t,i,s,r){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,i,s);l&&l.type.valid(t,l)?(o||(o=[])).push(l):r.onRemove&&r.onRemove(this.local[a].spec)}return this.children.length?p1(this.children,o||[],e,t,i,s,r):o?new be(o.sort(xi),Ki):Le}add(e,t){return t.length?this==Le?be.create(e,t):this.addInner(e,t,0):this}addInner(e,t,i){let s,r=0;e.forEach((a,l)=>{let c=l+i,u;if(u=Cv(t,a,c)){for(s||(s=this.children.slice());r<s.length&&s[r]<l;)r+=3;s[r]==l?s[r+2]=s[r+2].addInner(a,u,c+1):s.splice(r,0,l,l+a.nodeSize,Ma(u,a,c+1,vi)),r+=3}});let o=Ev(r?Mv(t):t,-i);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new be(o.length?this.local.concat(o).sort(xi):this.local,s||this.children)}remove(e){return e.length==0||this==Le?this:this.removeInner(e,0)}removeInner(e,t){let i=this.children,s=this.local;for(let r=0;r<i.length;r+=3){let o,a=i[r]+t,l=i[r+1]+t;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;i==this.children&&(i=this.children.slice());let c=i[r+2].removeInner(o,a+1);c!=Le?i[r+2]=c:(i.splice(r,3),r-=3)}if(s.length){for(let r=0,o;r<e.length;r++)if(o=e[r])for(let a=0;a<s.length;a++)s[a].eq(o,t)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return i==this.children&&s==this.local?this:s.length||i.length?new be(s,i):Le}forChild(e,t){if(this==Le)return this;if(t.isLeaf)return be.empty;let i,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(i=this.children[a+2]);break}let r=e+1,o=r+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>r&&l.type instanceof En){let c=Math.max(r,l.from)-r,u=Math.min(o,l.to)-r;c<u&&(s||(s=[])).push(l.copy(c,u))}}if(s){let a=new be(s.sort(xi),Ki);return i?new dn([a,i]):a}return i||Le}eq(e){if(this==e)return!0;if(!(e instanceof be)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return yf(this.localsInner(e))}localsInner(e){if(this==Le)return Ki;if(e.inlineContent||!this.local.some(En.is))return this.local;let t=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof En||t.push(this.local[i]);return t}forEachSet(e){e(this)}}be.empty=new be([],[]);be.removeOverlap=yf;const Le=be.empty;class dn{constructor(e){this.members=e}map(e,t){const i=this.members.map(s=>s.map(e,t,vi));return dn.from(i)}forChild(e,t){if(t.isLeaf)return be.empty;let i=[];for(let s=0;s<this.members.length;s++){let r=this.members[s].forChild(e,t);r!=Le&&(r instanceof dn?i=i.concat(r.members):i.push(r))}return dn.from(i)}eq(e){if(!(e instanceof dn)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,i=!0;for(let s=0;s<this.members.length;s++){let r=this.members[s].localsInner(e);if(r.length)if(!t)t=r;else{i&&(t=t.slice(),i=!1);for(let o=0;o<r.length;o++)t.push(r[o])}}return t?yf(i?t:t.sort(xi)):Ki}static from(e){switch(e.length){case 0:return Le;case 1:return e[0];default:return new dn(e.every(t=>t instanceof be)?e:e.reduce((t,i)=>t.concat(i instanceof be?i:i.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function p1(n,e,t,i,s,r,o){let a=n.slice();for(let c=0,u=r;c<t.maps.length;c++){let d=0;t.maps[c].forEach((f,h,p,m)=>{let g=m-p-(h-f);for(let b=0;b<a.length;b+=3){let y=a[b+1];if(y<0||f>y+u-d)continue;let v=a[b]+u-d;h>=v?a[b+1]=f<=v?-2:-1:f>=u&&g&&(a[b]+=g,a[b+1]+=g)}d+=g}),u=t.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=t.map(n[c]+r),d=u-s;if(d<0||d>=i.content.size){l=!0;continue}let f=t.map(n[c+1]+r,-1),h=f-s,{index:p,offset:m}=i.content.findIndex(d),g=i.maybeChild(p);if(g&&m==d&&m+g.nodeSize==h){let b=a[c+2].mapInner(t,g,u+1,n[c]+r+1,o);b!=Le?(a[c]=d,a[c+1]=h,a[c+2]=b):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=g1(a,n,e,t,s,r,o),u=Ma(c,i,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new be(e.sort(xi),a)}function Ev(n,e){if(!e||!n.length)return n;let t=[];for(let i=0;i<n.length;i++){let s=n[i];t.push(new pt(s.from+e,s.to+e,s.type))}return t}function g1(n,e,t,i,s,r,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(i,s,c);d?t.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+r+1);return t}function Cv(n,e,t){if(e.isLeaf)return null;let i=t+e.nodeSize,s=null;for(let r=0,o;r<n.length;r++)(o=n[r])&&o.from>t&&o.to<i&&((s||(s=[])).push(o),n[r]=null);return s}function Mv(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Ma(n,e,t,i){let s=[],r=!1;e.forEach((a,l)=>{let c=Cv(n,a,l+t);if(c){r=!0;let u=Ma(c,a,t+l+1,i);u!=Le&&s.push(l,l+a.nodeSize,u)}});let o=Ev(r?Mv(n):n,-t).sort(xi);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(i.onRemove&&i.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new be(o,s):Le}function xi(n,e){return n.from-e.from||n.to-e.to}function yf(n){let e=n;for(let t=0;t<e.length-1;t++){let i=e[t];if(i.from!=i.to)for(let s=t+1;s<e.length;s++){let r=e[s];if(r.from==i.from){r.to!=i.to&&(e==n&&(e=n.slice()),e[s]=r.copy(r.from,i.to),Rp(e,s+1,r.copy(i.to,r.to)));continue}else{r.from<i.to&&(e==n&&(e=n.slice()),e[t]=i.copy(i.from,r.from),Rp(e,s,i.copy(r.from,i.to)));break}}}return e}function Rp(n,e,t){for(;e<n.length&&xi(t,n[e])>0;)e++;n.splice(e,0,t)}function Cc(n){let e=[];return n.someProp("decorations",t=>{let i=t(n.state);i&&i!=Le&&e.push(i)}),n.cursorWrapper&&e.push(be.create(n.state.doc,[n.cursorWrapper.deco])),dn.from(e)}const m1={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},b1=et&&An<=11;class y1{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class v1{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new y1,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let s=0;s<i.length;s++)this.queue.push(i[s]);et&&An<=11&&i.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),b1&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,m1)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Ap(this.view)){if(this.suppressingSelectionUpdates)return Qt(this.view);if(et&&An<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ei(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,i;for(let r=e.focusNode;r;r=yr(r))t.add(r);for(let r=e.anchorNode;r;r=yr(r))if(t.has(r)){i=r;break}let s=i&&this.view.docView.nearestDesc(i);if(s&&s.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}selectionChanged(e){return!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&Ap(this.view)&&!this.ignoreSelectionChange(e)}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let i=e.domSelectionRange(),s=this.selectionChanged(i),r=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<t.length;u++){let d=this.registerMutation(t[u],l);d&&(r=r<0?d.from:Math.min(d.from,r),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(wt&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let h=f.parentNode;h&&h.nodeName=="LI"&&(!d||S1(e,d)!=h)&&f.remove()}}}let c=null;r<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&$l(i)&&(c=ff(e))&&c.eq(V.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Qt(e),this.currentSelection.set(i),e.scrollToSelection()):(r>-1||s)&&(r>-1&&(e.docView.markDirty(r,o),x1(e)),this.handleDOMChange(r,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(i)||Qt(e),this.currentSelection.set(i))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let i=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(i==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!i||i.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];t.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};let s=e.previousSibling,r=e.nextSibling;if(et&&An<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(r=f)}let o=s&&s.parentNode==e.target?Te(s)+1:0,a=i.localPosFromDOM(e.target,o,-1),l=r&&r.parentNode==e.target?Te(r):e.target.childNodes.length,c=i.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:(this.lastChangedTextNode=e.target,{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Pp=new WeakMap,Np=!1;function x1(n){if(!Pp.has(n)&&(Pp.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=wt,Np)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Np=!0}}function Ip(n,e){let t=e.startContainer,i=e.startOffset,s=e.endContainer,r=e.endOffset,o=n.domAtPos(n.state.selection.anchor);return Ei(o.node,o.offset,s,r)&&([t,i,s,r]=[s,r,t,i]),{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:r}}function _1(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return Ip(n,s)}let t;function i(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",i,!0),t?Ip(n,t):null}function S1(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let i=n.docView.nearestDesc(t,!0);if(i&&i.node.isBlock)return t}return null}function w1(n,e,t){let{node:i,fromOffset:s,toOffset:r,from:o,to:a}=n.docView.parseRange(e,t),l=n.domSelectionRange(),c,u=l.anchorNode;if(u&&n.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],$l(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Be&&n.input.lastKeyCode===8)for(let g=r;g>s;g--){let b=i.childNodes[g-1],y=b.pmViewDesc;if(b.nodeName=="BR"&&!y){r=g;break}if(!y||y.size)break}let d=n.state.doc,f=n.someProp("domParser")||wn.fromSchema(n.state.schema),h=d.resolve(o),p=null,m=f.parse(i,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:s,to:r,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:A1,context:h});if(c&&c[0].pos!=null){let g=c[0].pos,b=c[1]&&c[1].pos;b==null&&(b=g),p={anchor:g+o,head:b+o}}return{doc:m,sel:p,from:o,to:a}}function A1(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if($e&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||$e&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const k1=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function E1(n,e,t,i,s){let r=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let M=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,N=ff(n,M);if(N&&!n.state.selection.eq(N)){if(Be&&bt&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",W=>W(n,ei(13,"Enter"))))return;let B=n.state.tr.setSelection(N);M=="pointer"?B.setMeta("pointer",!0):M=="key"&&B.scrollIntoView(),r&&B.setMeta("composition",r),n.dispatch(B)}return}let o=n.state.doc.resolve(e),a=o.sharedDepth(t);e=o.before(a+1),t=n.state.doc.resolve(t).after(a+1);let l=n.state.selection,c=w1(n,e,t),u=n.state.doc,d=u.slice(c.from,c.to),f,h;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(f=n.state.selection.to,h="end"):(f=n.state.selection.from,h="start"),n.input.lastKeyCode=null;let p=D1(d.content,c.doc.content,c.from,f,h);if(p&&n.input.domChangeCount++,(ds&&n.input.lastIOSEnter>Date.now()-225||bt)&&s.some(M=>M.nodeType==1&&!k1.test(M.nodeName))&&(!p||p.endA>=p.endB)&&n.someProp("handleKeyDown",M=>M(n,ei(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!p)if(i&&l instanceof F&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let M=Lp(n,n.state.doc,c.sel);if(M&&!M.eq(n.state.selection)){let N=n.state.tr.setSelection(M);r&&N.setMeta("composition",r),n.dispatch(N)}}return}n.state.selection.from<n.state.selection.to&&p.start==p.endB&&n.state.selection instanceof F&&(p.start>n.state.selection.from&&p.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?p.start=n.state.selection.from:p.endA<n.state.selection.to&&p.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(p.endB+=n.state.selection.to-p.endA,p.endA=n.state.selection.to)),et&&An<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),b=u.resolve(p.start),y=m.sameParent(g)&&m.parent.inlineContent&&b.end()>=p.endA,v;if((ds&&n.input.lastIOSEnter>Date.now()-225&&(!y||s.some(M=>M.nodeName=="DIV"||M.nodeName=="P"))||!y&&m.pos<c.doc.content.size&&!m.sameParent(g)&&(v=V.findFrom(c.doc.resolve(m.pos+1),1,!0))&&v.head==g.pos)&&n.someProp("handleKeyDown",M=>M(n,ei(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>p.start&&M1(u,p.start,p.endA,m,g)&&n.someProp("handleKeyDown",M=>M(n,ei(8,"Backspace")))){bt&&Be&&n.domObserver.suppressSelectionUpdates();return}Be&&bt&&p.endB==p.start&&(n.input.lastAndroidDelete=Date.now()),bt&&!y&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(M){return M(n,ei(13,"Enter"))})},20));let x=p.start,_=p.endA,S,C,E;if(y){if(m.pos==g.pos)et&&An<=11&&m.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Qt(n),20)),S=n.state.tr.delete(x,_),C=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(E=C1(m.parent.content.cut(m.parentOffset,g.parentOffset),b.parent.content.cut(b.parentOffset,p.endA-b.start()))))S=n.state.tr,E.type=="add"?S.addMark(x,_,E.mark):S.removeMark(x,_,E.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let M=m.parent.textBetween(m.parentOffset,g.parentOffset);if(n.someProp("handleTextInput",N=>N(n,x,_,M)))return;S=n.state.tr.insertText(M,x,_)}}if(S||(S=n.state.tr.replace(x,_,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let M=Lp(n,S.doc,c.sel);M&&!(Be&&bt&&n.composing&&M.empty&&(p.start!=p.endB||n.input.lastAndroidDelete<Date.now()-100)&&(M.head==x||M.head==S.mapping.map(_)-1)||et&&M.empty&&M.head==x)&&S.setSelection(M)}C&&S.ensureMarks(C),r&&S.setMeta("composition",r),n.dispatch(S.scrollIntoView())}function Lp(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:hf(n,e.resolve(t.anchor),e.resolve(t.head))}function C1(n,e){let t=n.firstChild.marks,i=e.firstChild.marks,s=t,r=i,o,a,l;for(let u=0;u<i.length;u++)s=i[u].removeFromSet(s);for(let u=0;u<t.length;u++)r=t[u].removeFromSet(r);if(s.length==1&&r.length==0)a=s[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(s.length==0&&r.length==1)a=r[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(D.from(c).eq(n))return{mark:a,type:o}}function M1(n,e,t,i,s){if(t-e<=s.pos-i.pos||Mc(i,!0,!1)<s.pos)return!1;let r=n.resolve(e);if(!i.parent.isTextblock){let a=r.nodeAfter;return a!=null&&t==e+a.nodeSize}if(r.parentOffset<r.parent.content.size||!r.parent.isTextblock)return!1;let o=n.resolve(Mc(r,!0,!0));return!o.parent.isTextblock||o.pos>t||Mc(o,!0,!1)<t?!1:i.parent.content.cut(i.parentOffset).eq(o.parent.content)}function Mc(n,e,t){let i=n.depth,s=e?n.end():n.pos;for(;i>0&&(e||n.indexAfter(i)==n.node(i).childCount);)i--,s++,e=!1;if(t){let r=n.node(i).maybeChild(n.indexAfter(i));for(;r&&!r.isLeaf;)r=r.firstChild,s++}return s}function D1(n,e,t,i,s){let r=n.findDiffStart(e,t);if(r==null)return null;let{a:o,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(s=="end"){let l=Math.max(0,r-Math.min(o,a));i-=o+l-r}if(o<r&&n.size<e.size){let l=i<=r&&i>=o?r-i:0;r-=l,r&&r<e.size&&Bp(e.textBetween(r-1,r+1))&&(r+=l?1:-1),a=r+(a-o),o=r}else if(a<r){let l=i<=r&&i>=a?r-i:0;r-=l,r&&r<n.size&&Bp(n.textBetween(r-1,r+1))&&(r+=l?1:-1),o=r+(o-a),a=r}return{start:r,endA:o,endB:a}}function Bp(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class T1{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new YC,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(jp),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Hp(this),zp(this),this.nodeViews=Vp(this),this.docView=yp(this.state.doc,Fp(this),Cc(this),this.dom,this),this.domObserver=new v1(this,(i,s,r,o)=>E1(this,i,s,r,o)),this.domObserver.start(),JC(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ju(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(jp),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let i in this._props)t[i]=this._props[i];t.state=this.state;for(let i in e)t[i]=e[i];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var i;let s=this.state,r=!1,o=!1;e.storedMarks&&this.composing&&(Sv(this),o=!0),this.state=e;let a=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let h=Vp(this);R1(h,this.nodeViews)&&(this.nodeViews=h,r=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&Ju(this),this.editable=Hp(this),zp(this);let l=Cc(this),c=Fp(this),u=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",d=r||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(s.selection))&&(o=!0);let f=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&uC(this);if(o){this.domObserver.stop();let h=d&&(et||Be)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&O1(s.selection,e.selection);if(d){let p=Be?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=c1(this)),(r||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=yp(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&NC(this))?Qt(this,h):(cv(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((i=this.dragging)===null||i===void 0)&&i.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&dC(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof L){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&fp(this,t.getBoundingClientRect(),e)}else fp(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let i=this.directPlugins[t];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let i=this.state.plugins[t];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let i=this.pluginViews[t];i.update&&i.update(this,e)}}updateDraggedNode(e,t){let i=e.node,s=-1;if(this.state.doc.nodeAt(i.from)==i.node)s=i.from;else{let r=i.from+(this.state.doc.content.size-t.doc.content.size);(r>0&&this.state.doc.nodeAt(r))==i.node&&(s=r)}this.dragging=new Av(e.slice,e.move,s<0?void 0:L.create(this.state.doc,s))}someProp(e,t){let i=this._props&&this._props[e],s;if(i!=null&&(s=t?t(i):i))return s;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(s=t?t(a):a))return s}let r=this.state.plugins;if(r)for(let o=0;o<r.length;o++){let a=r[o].props[e];if(a!=null&&(s=t?t(a):a))return s}}hasFocus(){if(et){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&fC(this.dom),Qt(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return bC(this,e)}coordsAtPos(e,t=1){return tv(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,i=-1){let s=this.docView.posFromDOM(e,t,i);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,t){return SC(this,t||this.state,e)}pasteHTML(e,t){return xr(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return xr(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(QC(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Cc(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,XE())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return XC(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?$e&&this.root.nodeType===11&&sC(this.dom.ownerDocument)==this.dom&&_1(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Fp(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let i in t)i=="class"?e.class+=" "+t[i]:i=="style"?e.style=(e.style?e.style+";":"")+t[i]:!e[i]&&i!="contenteditable"&&i!="nodeName"&&(e[i]=String(t[i]))}),e.translate||(e.translate="no"),[pt.node(0,n.state.doc.content.size,e)]}function zp(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:pt.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Hp(n){return!n.someProp("editable",e=>e(n.state)===!1)}function O1(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Vp(n){let e=Object.create(null);function t(i){for(let s in i)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=i[s])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function R1(n,e){let t=0,i=0;for(let s in n){if(n[s]!=e[s])return!0;t++}for(let s in e)i++;return t!=i}function jp(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Rn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Da={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},P1=typeof navigator<"u"&&/Mac/.test(navigator.platform),N1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Oe=0;Oe<10;Oe++)Rn[48+Oe]=Rn[96+Oe]=String(Oe);for(var Oe=1;Oe<=24;Oe++)Rn[Oe+111]="F"+Oe;for(var Oe=65;Oe<=90;Oe++)Rn[Oe]=String.fromCharCode(Oe+32),Da[Oe]=String.fromCharCode(Oe);for(var Dc in Rn)Da.hasOwnProperty(Dc)||(Da[Dc]=Rn[Dc]);function I1(n){var e=P1&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||N1&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Da:Rn)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const L1=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function B1(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let i,s,r,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))r=!0;else if(/^mod$/i.test(l))L1?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return i&&(t="Alt-"+t),s&&(t="Ctrl-"+t),o&&(t="Meta-"+t),r&&(t="Shift-"+t),t}function F1(n){let e=Object.create(null);for(let t in n)e[B1(t)]=n[t];return e}function Tc(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function z1(n){return new Re({props:{handleKeyDown:Dv(n)}})}function Dv(n){let e=F1(n);return function(t,i){let s=I1(i),r,o=e[Tc(s,i)];if(o&&o(t.state,t.dispatch,t))return!0;if(s.length==1&&s!=" "){if(i.shiftKey){let a=e[Tc(s,i,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((i.shiftKey||i.altKey||i.metaKey||s.charCodeAt(0)>127)&&(r=Rn[i.keyCode])&&r!=s){let a=e[Tc(r,i)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}const H1=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function Tv(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const V1=(n,e,t)=>{let i=Tv(n,t);if(!i)return!1;let s=vf(i);if(!s){let o=i.blockRange(),a=o&&Es(o);return a==null?!1:(e&&e(n.tr.lift(o,a).scrollIntoView()),!0)}let r=s.nodeBefore;if(Nv(n,s,e,-1))return!0;if(i.parent.content.size==0&&(fs(r,"end")||L.isSelectable(r)))for(let o=i.depth;;o--){let a=Wl(n.doc,i.before(o),i.after(o),R.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(fs(r,"end")?V.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):L.create(l.doc,s.pos-r.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||i.node(o-1).childCount>1)break}return r.isAtom&&s.depth==i.depth-1?(e&&e(n.tr.delete(s.pos-r.nodeSize,s.pos).scrollIntoView()),!0):!1},j1=(n,e,t)=>{let i=Tv(n,t);if(!i)return!1;let s=vf(i);return s?Ov(n,s,e):!1},W1=(n,e,t)=>{let i=Rv(n,t);if(!i)return!1;let s=xf(i);return s?Ov(n,s,e):!1};function Ov(n,e,t){let i=e.nodeBefore,s=i,r=e.pos-1;for(;!s.isTextblock;r--){if(s.type.spec.isolating)return!1;let u=s.lastChild;if(!u)return!1;s=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Wl(n.doc,r,l,R.empty);if(!c||c.from!=r||c instanceof _e&&c.slice.size>=l-r)return!1;if(t){let u=n.tr.step(c);u.setSelection(F.create(u.doc,r)),t(u.scrollIntoView())}return!0}function fs(n,e,t=!1){for(let i=n;i;i=e=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(t&&i.childCount!=1)return!1}return!1}const U1=(n,e,t)=>{let{$head:i,empty:s}=n.selection,r=i;if(!s)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):i.parentOffset>0)return!1;r=vf(i)}let o=r&&r.nodeBefore;return!o||!L.isSelectable(o)?!1:(e&&e(n.tr.setSelection(L.create(n.doc,r.pos-o.nodeSize)).scrollIntoView()),!0)};function vf(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function Rv(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const $1=(n,e,t)=>{let i=Rv(n,t);if(!i)return!1;let s=xf(i);if(!s)return!1;let r=s.nodeAfter;if(Nv(n,s,e,1))return!0;if(i.parent.content.size==0&&(fs(r,"start")||L.isSelectable(r))){let o=Wl(n.doc,i.before(),i.after(),R.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(fs(r,"start")?V.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):L.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return r.isAtom&&s.depth==i.depth-1?(e&&e(n.tr.delete(s.pos,s.pos+r.nodeSize).scrollIntoView()),!0):!1},q1=(n,e,t)=>{let{$head:i,empty:s}=n.selection,r=i;if(!s)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size)return!1;r=xf(i)}let o=r&&r.nodeAfter;return!o||!L.isSelectable(o)?!1:(e&&e(n.tr.setSelection(L.create(n.doc,r.pos)).scrollIntoView()),!0)};function xf(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const G1=(n,e)=>{let t=n.selection,i=t instanceof L,s;if(i){if(t.node.isTextblock||!Fn(n.doc,t.from))return!1;s=t.from}else if(s=jl(n.doc,t.from,-1),s==null)return!1;if(e){let r=n.tr.join(s);i&&r.setSelection(L.create(r.doc,s-n.doc.resolve(s).nodeBefore.nodeSize)),e(r.scrollIntoView())}return!0},K1=(n,e)=>{let t=n.selection,i;if(t instanceof L){if(t.node.isTextblock||!Fn(n.doc,t.to))return!1;i=t.to}else if(i=jl(n.doc,t.to,1),i==null)return!1;return e&&e(n.tr.join(i).scrollIntoView()),!0},Y1=(n,e)=>{let{$from:t,$to:i}=n.selection,s=t.blockRange(i),r=s&&Es(s);return r==null?!1:(e&&e(n.tr.lift(s,r).scrollIntoView()),!0)},J1=(n,e)=>{let{$head:t,$anchor:i}=n.selection;return!t.parent.type.spec.code||!t.sameParent(i)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Pv(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const Q1=(n,e)=>{let{$head:t,$anchor:i}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(i))return!1;let s=t.node(-1),r=t.indexAfter(-1),o=Pv(s.contentMatchAt(r));if(!o||!s.canReplaceWith(r,r,o))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,o.createAndFill());l.setSelection(V.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Z1=(n,e)=>{let t=n.selection,{$from:i,$to:s}=t;if(t instanceof xt||i.parent.inlineContent||s.parent.inlineContent)return!1;let r=Pv(s.parent.contentMatchAt(s.indexAfter()));if(!r||!r.isTextblock)return!1;if(e){let o=(!i.parentOffset&&s.index()<s.parent.childCount?i:s).pos,a=n.tr.insert(o,r.createAndFill());a.setSelection(F.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},X1=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let r=t.before();if(es(n.doc,r))return e&&e(n.tr.split(r).scrollIntoView()),!0}let i=t.blockRange(),s=i&&Es(i);return s==null?!1:(e&&e(n.tr.lift(i,s).scrollIntoView()),!0)},eM=(n,e)=>{let{$from:t,to:i}=n.selection,s,r=t.sharedDepth(i);return r==0?!1:(s=t.before(r),e&&e(n.tr.setSelection(L.create(n.doc,s))),!0)};function tM(n,e,t){let i=e.nodeBefore,s=e.nodeAfter,r=e.index();return!i||!s||!i.type.compatibleContent(s.type)?!1:!i.content.size&&e.parent.canReplace(r-1,r)?(t&&t(n.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(r,r+1)||!(s.isTextblock||Fn(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,i.type,i.contentMatchAt(i.childCount)).join(e.pos).scrollIntoView()),!0)}function Nv(n,e,t,i){let s=e.nodeBefore,r=e.nodeAfter,o,a,l=s.type.spec.isolating||r.type.spec.isolating;if(!l&&tM(n,e,t))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=s.contentMatchAt(s.childCount)).findWrapping(r.type))&&a.matchType(o[0]||r.type).validEnd){if(t){let h=e.pos+r.nodeSize,p=D.empty;for(let b=o.length-1;b>=0;b--)p=D.from(o[b].create(null,p));p=D.from(s.copy(p));let m=n.tr.step(new Ae(e.pos-1,h,e.pos,h,new R(p,1,0),o.length,!0)),g=h+2*o.length;Fn(m.doc,g)&&m.join(g),t(m.scrollIntoView())}return!0}let u=r.type.spec.isolating||i>0&&l?null:V.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),f=d&&Es(d);if(f!=null&&f>=e.depth)return t&&t(n.tr.lift(d,f).scrollIntoView()),!0;if(c&&fs(r,"start",!0)&&fs(s,"end")){let h=s,p=[];for(;p.push(h),!h.isTextblock;)h=h.lastChild;let m=r,g=1;for(;!m.isTextblock;m=m.firstChild)g++;if(h.canReplace(h.childCount,h.childCount,m.content)){if(t){let b=D.empty;for(let v=p.length-1;v>=0;v--)b=D.from(p[v].copy(b));let y=n.tr.step(new Ae(e.pos-p.length,e.pos+r.nodeSize,e.pos+g,e.pos+r.nodeSize-g,new R(b,p.length,0),0,!0));t(y.scrollIntoView())}return!0}}return!1}function Iv(n){return function(e,t){let i=e.selection,s=n<0?i.$from:i.$to,r=s.depth;for(;s.node(r).isInline;){if(!r)return!1;r--}return s.node(r).isTextblock?(t&&t(e.tr.setSelection(F.create(e.doc,n<0?s.start(r):s.end(r)))),!0):!1}}const nM=Iv(-1),iM=Iv(1);function sM(n,e=null){return function(t,i){let{$from:s,$to:r}=t.selection,o=s.blockRange(r),a=o&&cf(o,n,e);return a?(i&&i(t.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Wp(n,e=null){return function(t,i){let s=!1;for(let r=0;r<t.selection.ranges.length&&!s;r++){let{$from:{pos:o},$to:{pos:a}}=t.selection.ranges[r];t.doc.nodesBetween(o,a,(l,c)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(n,e)))if(l.type==n)s=!0;else{let u=t.doc.resolve(c),d=u.index();s=u.parent.canReplaceWith(d,d+1,n)}})}if(!s)return!1;if(i){let r=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[o];r.setBlockType(a,l,n,e)}i(r.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function rM(n,e=null){return function(t,i){let{$from:s,$to:r}=t.selection,o=s.blockRange(r),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&s.node(o.depth-1).type.compatibleContent(n)&&o.startIndex==0){if(s.index(o.depth-1)==0)return!1;let u=t.doc.resolve(o.start-2);l=new xa(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new xa(s,t.doc.resolve(r.end(o.depth)),o.depth)),a=!0}let c=cf(l,n,e,o);return c?(i&&i(oM(t.tr,o,c,a,n).scrollIntoView()),!0):!1}}function oM(n,e,t,i,s){let r=D.empty;for(let u=t.length-1;u>=0;u--)r=D.from(t[u].type.create(t[u].attrs,r));n.step(new Ae(e.start-(i?2:0),e.end,e.start,e.end,new R(r,0,0),t.length,!0));let o=0;for(let u=0;u<t.length;u++)t[u].type==s&&(o=u+1);let a=t.length-o,l=e.start+t.length-(i?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&es(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return n}function aM(n){return function(e,t){let{$from:i,$to:s}=e.selection,r=i.blockRange(s,o=>o.childCount>0&&o.firstChild.type==n);return r?t?i.node(r.depth-1).type==n?lM(e,t,n,r):cM(e,t,r):!0:!1}}function lM(n,e,t,i){let s=n.tr,r=i.end,o=i.$to.end(i.depth);r<o&&(s.step(new Ae(r-1,o,r,o,new R(D.from(t.create(null,i.parent.copy())),1,0),1,!0)),i=new xa(s.doc.resolve(i.$from.pos),s.doc.resolve(o),i.depth));const a=Es(i);if(a==null)return!1;s.lift(i,a);let l=s.mapping.map(r,-1)-1;return Fn(s.doc,l)&&s.join(l),e(s.scrollIntoView()),!0}function cM(n,e,t){let i=n.tr,s=t.parent;for(let h=t.end,p=t.endIndex-1,m=t.startIndex;p>m;p--)h-=s.child(p).nodeSize,i.delete(h-1,h+1);let r=i.doc.resolve(t.start),o=r.nodeAfter;if(i.mapping.map(t.end)!=t.start+r.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==s.childCount,c=r.node(-1),u=r.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?D.empty:D.from(s))))return!1;let d=r.pos,f=d+o.nodeSize;return i.step(new Ae(d-(a?1:0),f+(l?1:0),d+1,f-1,new R((a?D.empty:D.from(s.copy(D.empty))).append(l?D.empty:D.from(s.copy(D.empty))),a?0:1,l?0:1),a?0:1)),e(i.scrollIntoView()),!0}function uM(n){return function(e,t){let{$from:i,$to:s}=e.selection,r=i.blockRange(s,c=>c.childCount>0&&c.firstChild.type==n);if(!r)return!1;let o=r.startIndex;if(o==0)return!1;let a=r.parent,l=a.child(o-1);if(l.type!=n)return!1;if(t){let c=l.lastChild&&l.lastChild.type==a.type,u=D.from(c?n.create():null),d=new R(D.from(n.create(null,D.from(a.type.create(null,u)))),c?3:1,0),f=r.start,h=r.end;t(e.tr.step(new Ae(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function Kl(n){const{state:e,transaction:t}=n;let{selection:i}=t,{doc:s}=t,{storedMarks:r}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return r},get selection(){return i},get doc(){return s},get tr(){return i=t.selection,s=t.doc,r=t.storedMarks,t}}}class Yl{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:i}=this,{view:s}=t,{tr:r}=i,o=this.buildProps(r);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!r.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(r),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:i,editor:s,state:r}=this,{view:o}=s,a=[],l=!!e,c=e||r.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(i).map(([f,h])=>[f,(...m)=>{const g=this.buildProps(c,t),b=h(...m)(g);return a.push(b),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:i}=this,s=!1,r=e||i.tr,o=this.buildProps(r,s);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(r,s)}}buildProps(e,t=!0){const{rawCommands:i,editor:s,state:r}=this,{view:o}=s,a={tr:e,editor:s,view:o,state:Kl({state:r,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(i).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class dM{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const i=this.callbacks[e];return i&&i.forEach(s=>s.apply(this,t)),this}off(e,t){const i=this.callbacks[e];return i&&(t?this.callbacks[e]=i.filter(s=>s!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function P(n,e,t){return n.config[e]===void 0&&n.parent?P(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?P(n.parent,e,t):null}):n.config[e]}function Jl(n){const e=n.filter(s=>s.type==="extension"),t=n.filter(s=>s.type==="node"),i=n.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:i}}function Lv(n){const e=[],{nodeExtensions:t,markExtensions:i}=Jl(n),s=[...t,...i],r={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:s},l=P(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...r,...h}})})})})}),s.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=P(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const f={...r,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:u,attribute:f})})}),e}function Ee(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function Ce(...n){return n.filter(e=>!!e).reduce((e,t)=>{const i={...e};return Object.entries(t).forEach(([s,r])=>{if(!i[s]){i[s]=r;return}if(s==="class"){const a=r?r.split(" "):[],l=i[s]?i[s].split(" "):[],c=a.filter(u=>!l.includes(u));i[s]=[...l,...c].join(" ")}else if(s==="style"){const a=r?r.split(";").map(u=>u.trim()).filter(Boolean):[],l=i[s]?i[s].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,f]=u.split(":").map(h=>h.trim());c.set(d,f)}),a.forEach(u=>{const[d,f]=u.split(":").map(h=>h.trim());c.set(d,f)}),i[s]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else i[s]=r}),i},{})}function Qu(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,i)=>Ce(t,i),{})}function Bv(n){return typeof n=="function"}function U(n,e=void 0,...t){return Bv(n)?e?n.bind(e)(...t):n(...t):n}function fM(n={}){return Object.keys(n).length===0&&n.constructor===Object}function hM(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Up(n,e){return"style"in n?n:{...n,getAttrs:t=>{const i=n.getAttrs?n.getAttrs(t):n.attrs;if(i===!1)return!1;const s=e.reduce((r,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(t):hM(t.getAttribute(o.name));return a==null?r:{...r,[o.name]:a}},{});return{...i,...s}}}}function $p(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&fM(t)?!1:t!=null))}function pM(n,e){var t;const i=Lv(n),{nodeExtensions:s,markExtensions:r}=Jl(n),o=(t=s.find(c=>P(c,"topNode")))===null||t===void 0?void 0:t.name,a=Object.fromEntries(s.map(c=>{const u=i.filter(b=>b.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=n.reduce((b,y)=>{const v=P(y,"extendNodeSchema",d);return{...b,...v?v(c):{}}},{}),h=$p({...f,content:U(P(c,"content",d)),marks:U(P(c,"marks",d)),group:U(P(c,"group",d)),inline:U(P(c,"inline",d)),atom:U(P(c,"atom",d)),selectable:U(P(c,"selectable",d)),draggable:U(P(c,"draggable",d)),code:U(P(c,"code",d)),whitespace:U(P(c,"whitespace",d)),defining:U(P(c,"defining",d)),isolating:U(P(c,"isolating",d)),attrs:Object.fromEntries(u.map(b=>{var y;return[b.name,{default:(y=b==null?void 0:b.attribute)===null||y===void 0?void 0:y.default}]}))}),p=U(P(c,"parseHTML",d));p&&(h.parseDOM=p.map(b=>Up(b,u)));const m=P(c,"renderHTML",d);m&&(h.toDOM=b=>m({node:b,HTMLAttributes:Qu(b,u)}));const g=P(c,"renderText",d);return g&&(h.toText=g),[c.name,h]})),l=Object.fromEntries(r.map(c=>{const u=i.filter(g=>g.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=n.reduce((g,b)=>{const y=P(b,"extendMarkSchema",d);return{...g,...y?y(c):{}}},{}),h=$p({...f,inclusive:U(P(c,"inclusive",d)),excludes:U(P(c,"excludes",d)),group:U(P(c,"group",d)),spanning:U(P(c,"spanning",d)),code:U(P(c,"code",d)),attrs:Object.fromEntries(u.map(g=>{var b;return[g.name,{default:(b=g==null?void 0:g.attribute)===null||b===void 0?void 0:b.default}]}))}),p=U(P(c,"parseHTML",d));p&&(h.parseDOM=p.map(g=>Up(g,u)));const m=P(c,"renderHTML",d);return m&&(h.toDOM=g=>m({mark:g,HTMLAttributes:Qu(g,u)})),[c.name,h]}));return new O0({topNode:o,nodes:a,marks:l})}function Oc(n,e){return e.nodes[n]||e.marks[n]||null}function qp(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}const gM=(n,e=500)=>{let t="";const i=n.parentOffset;return n.parent.nodesBetween(Math.max(0,i-e),i,(s,r,o,a)=>{var l,c;const u=((c=(l=s.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:s,pos:r,parent:o,index:a}))||s.textContent||"%leaf%";t+=s.isAtom&&!s.isText?u:u.slice(0,Math.max(0,i-r))}),t};function _f(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class Ql{constructor(e){this.find=e.find,this.handler=e.handler}}const mM=(n,e)=>{if(_f(e))return e.exec(n);const t=e(n);if(!t)return null;const i=[t.text];return i.index=t.index,i.input=n,i.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(t.replaceWith)),i};function co(n){var e;const{editor:t,from:i,to:s,text:r,rules:o,plugin:a}=n,{view:l}=t;if(l.composing)return!1;const c=l.state.doc.resolve(i);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=gM(c)+r;return o.forEach(f=>{if(u)return;const h=mM(d,f.find);if(!h)return;const p=l.state.tr,m=Kl({state:l.state,transaction:p}),g={from:i-(h[0].length-r.length),to:s},{commands:b,chain:y,can:v}=new Yl({editor:t,state:m});f.handler({state:m,range:g,match:h,commands:b,chain:y,can:v})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:i,to:s,text:r}),l.dispatch(p),u=!0)}),u}function bM(n){const{editor:e,rules:t}=n,i=new Re({state:{init(){return null},apply(s,r){const o=s.getMeta(i);if(o)return o;const a=s.getMeta("applyInputRules");return!!a&&setTimeout(()=>{const{from:c,text:u}=a,d=c+u.length;co({editor:e,from:c,to:d,text:u,rules:t,plugin:i})}),s.selectionSet||s.docChanged?null:r}},props:{handleTextInput(s,r,o,a){return co({editor:e,from:r,to:o,text:a,rules:t,plugin:i})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:r}=s.state.selection;r&&co({editor:e,from:r.pos,to:r.pos,text:"",rules:t,plugin:i})}),!1)},handleKeyDown(s,r){if(r.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?co({editor:e,from:o.pos,to:o.pos,text:`
`,rules:t,plugin:i}):!1}},isInputRules:!0});return i}function yM(n){return Object.prototype.toString.call(n).slice(8,-1)}function uo(n){return yM(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Zl(n,e){const t={...n};return uo(n)&&uo(e)&&Object.keys(e).forEach(i=>{uo(e[i])&&uo(n[i])?t[i]=Zl(n[i],e[i]):t[i]=e[i]}),t}class Ft{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=U(P(this,"addOptions",{name:this.name}))),this.storage=U(P(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ft(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Zl(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Ft(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=U(P(t,"addOptions",{name:t.name})),t.storage=U(P(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:i}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&i.removeStoredMark(l),i.insertText(" ",s.pos),e.view.dispatch(i),!0}return!1}}function vM(n){return typeof n=="number"}class xM{constructor(e){this.find=e.find,this.handler=e.handler}}const _M=(n,e,t)=>{if(_f(e))return[...n.matchAll(e)];const i=e(n,t);return i?i.map(s=>{const r=[s.text];return r.index=s.index,r.input=n,r.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),r.push(s.replaceWith)),r}):[]};function SM(n){const{editor:e,state:t,from:i,to:s,rule:r,pasteEvent:o,dropEvent:a}=n,{commands:l,chain:c,can:u}=new Yl({editor:e,state:t}),d=[];return t.doc.nodesBetween(i,s,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const m=Math.max(i,p),g=Math.min(s,p+h.content.size),b=h.textBetween(m-p,g-p,void 0,"");_M(b,r.find,o).forEach(v=>{if(v.index===void 0)return;const x=m+v.index+1,_=x+v[0].length,S={from:t.tr.mapping.map(x),to:t.tr.mapping.map(_)},C=r.handler({state:t,range:S,match:v,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(C)})}),d.every(h=>h!==null)}const wM=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function AM(n){const{editor:e,rules:t}=n;let i=null,s=!1,r=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a=typeof DragEvent<"u"?new DragEvent("drop"):null;const l=({state:u,from:d,to:f,rule:h,pasteEvt:p})=>{const m=u.tr,g=Kl({state:u,transaction:m});if(!(!SM({editor:e,state:g,from:Math.max(d-1,0),to:f.b-1,rule:h,pasteEvent:p,dropEvent:a})||!m.steps.length))return a=typeof DragEvent<"u"?new DragEvent("drop"):null,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m};return t.map(u=>new Re({view(d){const f=h=>{var p;i=!((p=d.dom.parentElement)===null||p===void 0)&&p.contains(h.target)?d.dom.parentElement:null};return window.addEventListener("dragstart",f),{destroy(){window.removeEventListener("dragstart",f)}}},props:{handleDOMEvents:{drop:(d,f)=>(r=i===d.dom.parentElement,a=f,!1),paste:(d,f)=>{var h;const p=(h=f.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return o=f,s=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,h)=>{const p=d[0],m=p.getMeta("uiEvent")==="paste"&&!s,g=p.getMeta("uiEvent")==="drop"&&!r,b=p.getMeta("applyPasteRules"),y=!!b;if(!m&&!g&&!y)return;if(y){const{from:_,text:S}=b,C=_+S.length,E=wM(S);return l({rule:u,state:h,from:_,to:{b:C},pasteEvt:E})}const v=f.doc.content.findDiffStart(h.doc.content),x=f.doc.content.findDiffEnd(h.doc.content);if(!(!vM(v)||!x||v===x.b))return l({rule:u,state:h,from:v,to:x,pasteEvt:o})}}))}function kM(n){const e=n.filter((t,i)=>n.indexOf(t)!==i);return Array.from(new Set(e))}class Zi{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Zi.resolve(e),this.schema=pM(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Zi.sort(Zi.flatten(e)),i=kM(t.map(s=>s.name));return i.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${i.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const i={name:t.name,options:t.options,storage:t.storage},s=P(t,"addExtensions",i);return s?[t,...this.flatten(s())]:t}).flat(10)}static sort(e){return e.sort((i,s)=>{const r=P(i,"priority")||100,o=P(s,"priority")||100;return r>o?-1:r<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const i={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Oc(t.name,this.schema)},s=P(t,"addCommands",i);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this,t=Zi.sort([...this.extensions].reverse()),i=[],s=[],r=t.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:Oc(o.name,this.schema)},l=[],c=P(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&P(o,"exitable",a)&&(u.ArrowRight=()=>Ft.handleExit({editor:e,mark:o})),c){const m=Object.fromEntries(Object.entries(c()).map(([g,b])=>[g,()=>b({editor:e})]));u={...u,...m}}const d=z1(u);l.push(d);const f=P(o,"addInputRules",a);qp(o,e.options.enableInputRules)&&f&&i.push(...f());const h=P(o,"addPasteRules",a);qp(o,e.options.enablePasteRules)&&h&&s.push(...h());const p=P(o,"addProseMirrorPlugins",a);if(p){const m=p();l.push(...m)}return l}).flat();return[bM({editor:e,rules:i}),...AM({editor:e,rules:s}),...r]}get attributes(){return Lv(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Jl(this.extensions);return Object.fromEntries(t.filter(i=>!!P(i,"addNodeView")).map(i=>{const s=this.attributes.filter(l=>l.type===i.name),r={name:i.name,options:i.options,storage:i.storage,editor:e,type:Ee(i.name,this.schema)},o=P(i,"addNodeView",r);if(!o)return[];const a=(l,c,u,d,f)=>{const h=Qu(l,s);return o()({node:l,view:c,getPos:u,decorations:d,innerDecorations:f,editor:e,extension:i,HTMLAttributes:h})};return[i.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const i={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Oc(e.name,this.schema)};e.type==="mark"&&(!((t=U(P(e,"keepOnSplit",i)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const s=P(e,"onBeforeCreate",i),r=P(e,"onCreate",i),o=P(e,"onUpdate",i),a=P(e,"onSelectionUpdate",i),l=P(e,"onTransaction",i),c=P(e,"onFocus",i),u=P(e,"onBlur",i),d=P(e,"onDestroy",i);s&&this.editor.on("beforeCreate",s),r&&this.editor.on("create",r),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class He{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=U(P(this,"addOptions",{name:this.name}))),this.storage=U(P(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new He(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Zl(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new He({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=U(P(t,"addOptions",{name:t.name})),t.storage=U(P(t,"addStorage",{name:t.name,options:t.options})),t}}function Fv(n,e,t){const{from:i,to:s}=e,{blockSeparator:r=`

`,textSerializers:o={}}=t||{};let a="";return n.nodesBetween(i,s,(l,c,u,d)=>{var f;l.isBlock&&c>i&&(a+=r);const h=o==null?void 0:o[l.type.name];if(h)return u&&(a+=h({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)===null||f===void 0?void 0:f.slice(Math.max(i,c)-c,s-c))}),a}function zv(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const EM=He.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Re({key:new at("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:i,selection:s}=e,{ranges:r}=s,o=Math.min(...r.map(u=>u.$from.pos)),a=Math.max(...r.map(u=>u.$to.pos)),l=zv(t);return Fv(i,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),CM=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),MM=(n=!1)=>({commands:e})=>e.setContent("",n),DM=()=>({state:n,tr:e,dispatch:t})=>{const{selection:i}=e,{ranges:s}=i;return t&&s.forEach(({$from:r,$to:o})=>{n.doc.nodesBetween(r.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=Es(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},TM=n=>e=>n(e),OM=()=>({state:n,dispatch:e})=>Z1(n,e),RM=(n,e)=>({editor:t,tr:i})=>{const{state:s}=t,r=s.doc.slice(n.from,n.to);i.deleteRange(n.from,n.to);const o=i.mapping.map(e);return i.insert(o,r.content),i.setSelection(new F(i.doc.resolve(o-1))),!0},PM=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,i=t.$anchor.node();if(i.content.size>0)return!1;const s=n.selection.$anchor;for(let r=s.depth;r>0;r-=1)if(s.node(r).type===i.type){if(e){const a=s.before(r),l=s.after(r);n.delete(a,l).scrollIntoView()}return!0}return!1},NM=n=>({tr:e,state:t,dispatch:i})=>{const s=Ee(n,t.schema),r=e.selection.$anchor;for(let o=r.depth;o>0;o-=1)if(r.node(o).type===s){if(i){const l=r.before(o),c=r.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},IM=n=>({tr:e,dispatch:t})=>{const{from:i,to:s}=n;return t&&e.delete(i,s),!0},LM=()=>({state:n,dispatch:e})=>H1(n,e),BM=()=>({commands:n})=>n.keyboardShortcut("Enter"),FM=()=>({state:n,dispatch:e})=>Q1(n,e);function Ta(n,e,t={strict:!0}){const i=Object.keys(e);return i.length?i.every(s=>t.strict?e[s]===n[s]:_f(e[s])?e[s].test(n[s]):e[s]===n[s]):!0}function Zu(n,e,t={}){return n.find(i=>i.type===e&&Ta(i.attrs,t))}function zM(n,e,t={}){return!!Zu(n,e,t)}function Sf(n,e,t={}){if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if(n.parentOffset===i.offset&&i.offset!==0&&(i=n.parent.childBefore(n.parentOffset)),!i.node)return;const s=Zu([...i.node.marks],e,t);if(!s)return;let r=i.index,o=n.start()+i.offset,a=r+1,l=o+i.node.nodeSize;for(Zu([...i.node.marks],e,t);r>0&&s.isInSet(n.parent.child(r-1).marks);)r-=1,o-=n.parent.child(r).nodeSize;for(;a<n.parent.childCount&&zM([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Hn(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const HM=(n,e={})=>({tr:t,state:i,dispatch:s})=>{const r=Hn(n,i.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(s){const d=Sf(l,r,e);if(d&&d.from<=c&&d.to>=u){const f=F.create(o,d.from,d.to);t.setSelection(f)}}return!0},VM=n=>e=>{const t=typeof n=="function"?n(e):n;for(let i=0;i<t.length;i+=1)if(t[i](e))return!0;return!1};function Hv(n){return n instanceof F}function ai(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Vv(n,e=null){if(!e)return null;const t=V.atStart(n),i=V.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return i;const s=t.from,r=i.to;return e==="all"?F.create(n,ai(0,s,r),ai(n.content.size,s,r)):F.create(n,ai(e,s,r),ai(e,s,r))}function wf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const jM=(n=null,e={})=>({editor:t,view:i,tr:s,dispatch:r})=>{e={scrollIntoView:!0,...e};const o=()=>{wf()&&i.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(i.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(i.hasFocus()&&n===null||n===!1)return!0;if(r&&n===null&&!Hv(t.state.selection))return o(),!0;const a=Vv(s.doc,n)||t.state.selection,l=t.state.selection.eq(a);return r&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},WM=(n,e)=>t=>n.every((i,s)=>e(i,{...t,index:s})),UM=(n,e)=>({tr:t,commands:i})=>i.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),jv=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const i=e[t];i.nodeType===3&&i.nodeValue&&/^(\n\s\s|\n)$/.test(i.nodeValue)?n.removeChild(i):i.nodeType===1&&jv(i)}return n};function fo(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return jv(t)}function Oa(n,e,t){t={slice:!0,parseOptions:{},...t};const i=typeof n=="object"&&n!==null,s=typeof n=="string";if(i)try{if(Array.isArray(n)&&n.length>0)return D.fromArray(n.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(n);return t.errorOnInvalidContent&&o.check(),o}catch(r){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:r});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),Oa("",e,t)}if(s){if(t.errorOnInvalidContent){let o=!1,a="";const l=new O0({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(t.slice?wn.fromSchema(l).parseSlice(fo(n),t.parseOptions):wn.fromSchema(l).parse(fo(n),t.parseOptions),t.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const r=wn.fromSchema(e);return t.slice?r.parseSlice(fo(n),t.parseOptions).content:r.parse(fo(n),t.parseOptions)}return Oa("",e,t)}function $M(n,e,t){const i=n.steps.length-1;if(i<e)return;const s=n.steps[i];if(!(s instanceof _e||s instanceof Ae))return;const r=n.mapping.maps[i];let o=0;r.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(V.near(n.doc.resolve(o),t))}const qM=n=>!("type"in n),GM=(n,e,t)=>({tr:i,dispatch:s,editor:r})=>{var o;if(s){t={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let a;try{a=Oa(e,r.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(o=t.errorOnInvalidContent)!==null&&o!==void 0?o:r.options.enableContentCheck})}catch(p){return r.emit("contentError",{editor:r,error:p,disableCollaboration:()=>{console.error("[tiptap error]: Unable to disable collaboration at this point in time")}}),!1}let{from:l,to:c}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},u=!0,d=!0;if((qM(a)?a:[a]).forEach(p=>{p.check(),u=u?p.isText&&p.marks.length===0:!1,d=d?p.isBlock:!1}),l===c&&d){const{parent:p}=i.doc.resolve(l);p.isTextblock&&!p.type.spec.code&&!p.childCount&&(l-=1,c+=1)}let h;u?(Array.isArray(e)?h=e.map(p=>p.text||"").join(""):typeof e=="object"&&e&&e.text?h=e.text:h=e,i.insertText(h,l,c)):(h=a,i.replaceWith(l,c,h)),t.updateSelection&&$M(i,i.steps.length-1,-1),t.applyInputRules&&i.setMeta("applyInputRules",{from:l,text:h}),t.applyPasteRules&&i.setMeta("applyPasteRules",{from:l,text:h})}return!0},KM=()=>({state:n,dispatch:e})=>G1(n,e),YM=()=>({state:n,dispatch:e})=>K1(n,e),JM=()=>({state:n,dispatch:e})=>V1(n,e),QM=()=>({state:n,dispatch:e})=>$1(n,e),ZM=()=>({state:n,dispatch:e,tr:t})=>{try{const i=jl(n.doc,n.selection.$from.pos,-1);return i==null?!1:(t.join(i,2),e&&e(t),!0)}catch{return!1}},XM=()=>({state:n,dispatch:e,tr:t})=>{try{const i=jl(n.doc,n.selection.$from.pos,1);return i==null?!1:(t.join(i,2),e&&e(t),!0)}catch{return!1}},eD=()=>({state:n,dispatch:e})=>j1(n,e),tD=()=>({state:n,dispatch:e})=>W1(n,e);function Wv(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function nD(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let i,s,r,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))r=!0;else if(/^mod$/i.test(l))wf()||Wv()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return i&&(t=`Alt-${t}`),s&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),r&&(t=`Shift-${t}`),t}const iD=n=>({editor:e,view:t,tr:i,dispatch:s})=>{const r=nD(n).split(/-(?!$)/),o=r.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:r.includes("Alt"),ctrlKey:r.includes("Ctrl"),metaKey:r.includes("Meta"),shiftKey:r.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(i.mapping);u&&s&&i.maybeStep(u)}),!0};function Sr(n,e,t={}){const{from:i,to:s,empty:r}=n.selection,o=e?Ee(e,n.schema):null,a=[];n.doc.nodesBetween(i,s,(d,f)=>{if(d.isText)return;const h=Math.max(i,f),p=Math.min(s,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=s-i,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Ta(d.node.attrs,t,{strict:!1}));return r?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const sD=(n,e={})=>({state:t,dispatch:i})=>{const s=Ee(n,t.schema);return Sr(t,s,e)?Y1(t,i):!1},rD=()=>({state:n,dispatch:e})=>X1(n,e),oD=n=>({state:e,dispatch:t})=>{const i=Ee(n,e.schema);return aM(i)(e,t)},aD=()=>({state:n,dispatch:e})=>J1(n,e);function Xl(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function Gp(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((i,s)=>(t.includes(s)||(i[s]=n[s]),i),{})}const lD=(n,e)=>({tr:t,state:i,dispatch:s})=>{let r=null,o=null;const a=Xl(typeof n=="string"?n:n.name,i.schema);return a?(a==="node"&&(r=Ee(n,i.schema)),a==="mark"&&(o=Hn(n,i.schema)),s&&t.selection.ranges.forEach(l=>{i.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{r&&r===c.type&&t.setNodeMarkup(u,void 0,Gp(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(Gp(d.attrs,e)))})})}),!0):!1},cD=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),uD=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),dD=()=>({state:n,dispatch:e})=>U1(n,e),fD=()=>({state:n,dispatch:e})=>q1(n,e),hD=()=>({state:n,dispatch:e})=>eM(n,e),pD=()=>({state:n,dispatch:e})=>iM(n,e),gD=()=>({state:n,dispatch:e})=>nM(n,e);function Xu(n,e,t={},i={}){return Oa(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:i.errorOnInvalidContent})}const mD=(n,e=!1,t={},i={})=>({editor:s,tr:r,dispatch:o,commands:a})=>{var l,c;const{doc:u}=r;if(t.preserveWhitespace!=="full"){const d=Xu(n,s.schema,t,{errorOnInvalidContent:(l=i.errorOnInvalidContent)!==null&&l!==void 0?l:s.options.enableContentCheck});return o&&r.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return o&&r.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},n,{parseOptions:t,errorOnInvalidContent:(c=i.errorOnInvalidContent)!==null&&c!==void 0?c:s.options.enableContentCheck})};function Af(n,e){const t=Hn(e,n.schema),{from:i,to:s,empty:r}=n.selection,o=[];r?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(i,s,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function bD(n,e){const t=new q0(n);return e.forEach(i=>{i.steps.forEach(s=>{t.step(s)})}),t}function yD(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function vD(n,e,t){const i=[];return n.nodesBetween(e.from,e.to,(s,r)=>{t(s)&&i.push({node:s,pos:r})}),i}function xD(n,e){for(let t=n.depth;t>0;t-=1){const i=n.node(t);if(e(i))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:i}}}function kf(n){return e=>xD(e.$from,n)}function _D(n,e){const t=Pi.fromSchema(e).serializeFragment(n),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(t),s.innerHTML}function SD(n,e){const t={from:0,to:n.content.size};return Fv(n,t,e)}function wD(n,e){const t=Ee(e,n.schema),{from:i,to:s}=n.selection,r=[];n.doc.nodesBetween(i,s,a=>{r.push(a)});const o=r.reverse().find(a=>a.type.name===t.name);return o?{...o.attrs}:{}}function Uv(n,e){const t=Xl(typeof e=="string"?e:e.name,n.schema);return t==="node"?wD(n,e):t==="mark"?Af(n,e):{}}function AD(n,e=JSON.stringify){const t={};return n.filter(i=>{const s=e(i);return Object.prototype.hasOwnProperty.call(t,s)?!1:t[s]=!0})}function kD(n){const e=AD(n);return e.length===1?e:e.filter((t,i)=>!e.filter((r,o)=>o!==i).some(r=>t.oldRange.from>=r.oldRange.from&&t.oldRange.to<=r.oldRange.to&&t.newRange.from>=r.newRange.from&&t.newRange.to<=r.newRange.to))}function ED(n){const{mapping:e,steps:t}=n,i=[];return e.maps.forEach((s,r)=>{const o=[];if(s.ranges.length)s.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=t[r];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(r).map(a,-1),u=e.slice(r).map(l),d=e.invert().map(c,-1),f=e.invert().map(u);i.push({oldRange:{from:d,to:f},newRange:{from:c,to:u}})})}),kD(i)}function Ef(n,e,t){const i=[];return n===e?t.resolve(n).marks().forEach(s=>{const r=t.resolve(n),o=Sf(r,s.type);o&&i.push({mark:s,...o})}):t.nodesBetween(n,e,(s,r)=>{!s||(s==null?void 0:s.nodeSize)===void 0||i.push(...s.marks.map(o=>({from:r,to:r+s.nodeSize,mark:o})))}),i}function Ko(n,e,t){return Object.fromEntries(Object.entries(t).filter(([i])=>{const s=n.find(r=>r.type===e&&r.name===i);return s?s.attribute.keepOnSplit:!1}))}function ed(n,e,t={}){const{empty:i,ranges:s}=n.selection,r=e?Hn(e,n.schema):null;if(i)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>r?r.name===d.type.name:!0).find(d=>Ta(d.attrs,t,{strict:!1}));let o=0;const a=[];if(s.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const b=Math.max(h,g),y=Math.min(p,g+m.nodeSize),v=y-b;o+=v,a.push(...m.marks.map(x=>({mark:x,from:b,to:y})))})}),o===0)return!1;const l=a.filter(d=>r?r.name===d.mark.type.name:!0).filter(d=>Ta(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>r?d.mark.type!==r&&d.mark.type.excludes(r):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function CD(n,e,t={}){if(!e)return Sr(n,null,t)||ed(n,null,t);const i=Xl(e,n.schema);return i==="node"?Sr(n,e,t):i==="mark"?ed(n,e,t):!1}function Kp(n,e){const{nodeExtensions:t}=Jl(e),i=t.find(o=>o.name===n);if(!i)return!1;const s={name:i.name,options:i.options,storage:i.storage},r=U(P(i,"group",s));return typeof r!="string"?!1:r.split(" ").includes("list")}function Cf(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var i;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((i=n.text)!==null&&i!==void 0?i:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let s=!0;return n.content.forEach(r=>{s!==!1&&(Cf(r,{ignoreWhitespace:t,checkChildren:e})||(s=!1))}),s}return!1}function MD(n){return n instanceof L}function DD(n,e,t){var i;const{selection:s}=e;let r=null;if(Hv(s)&&(r=s.$cursor),r){const a=(i=n.storedMarks)!==null&&i!==void 0?i:r.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=s;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=h&&p}return!c}),c})}const TD=(n,e={})=>({tr:t,state:i,dispatch:s})=>{const{selection:r}=t,{empty:o,ranges:a}=r,l=Hn(n,i.schema);if(s)if(o){const c=Af(i,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;i.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),m=Math.min(h+f.nodeSize,d);f.marks.find(b=>b.type===l)?f.marks.forEach(b=>{l===b.type&&t.addMark(p,m,l.create({...b.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return DD(i,t,l)},OD=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),RD=(n,e={})=>({state:t,dispatch:i,chain:s})=>{const r=Ee(n,t.schema);return r.isTextblock?s().command(({commands:o})=>Wp(r,e)(t)?!0:o.clearNodes()).command(({state:o})=>Wp(r,e)(o,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},PD=n=>({tr:e,dispatch:t})=>{if(t){const{doc:i}=e,s=ai(n,0,i.content.size),r=L.create(i,s);e.setSelection(r)}return!0},ND=n=>({tr:e,dispatch:t})=>{if(t){const{doc:i}=e,{from:s,to:r}=typeof n=="number"?{from:n,to:n}:n,o=F.atStart(i).from,a=F.atEnd(i).to,l=ai(s,o,a),c=ai(r,o,a),u=F.create(i,l,c);e.setSelection(u)}return!0},ID=n=>({state:e,dispatch:t})=>{const i=Ee(n,e.schema);return uM(i)(e,t)};function Yp(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const i=t.filter(s=>e==null?void 0:e.includes(s.type.name));n.tr.ensureMarks(i)}}const LD=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:i,editor:s})=>{const{selection:r,doc:o}=e,{$from:a,$to:l}=r,c=s.extensionManager.attributes,u=Ko(c,a.node().type.name,a.node().attrs);if(r instanceof L&&r.node.isBlock)return!a.parentOffset||!es(o,a.pos)?!1:(i&&(n&&Yp(t,s.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:yD(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=es(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&es(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),i){if(p&&(r instanceof F&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&Yp(t,s.extensionManager.splittableMarks),e.scrollIntoView()}return p},BD=(n,e={})=>({tr:t,state:i,dispatch:s,editor:r})=>{var o;const a=Ee(n,i.schema),{$from:l,$to:c}=i.selection,u=i.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const f=r.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let b=D.empty;const y=l.index(-1)?1:l.index(-2)?2:3;for(let E=l.depth-y;E>=l.depth-3;E-=1)b=D.from(l.node(E).copy(b));const v=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,x={...Ko(f,l.node().type.name,l.node().attrs),...e},_=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(x))||void 0;b=b.append(D.from(a.createAndFill(null,_)||void 0));const S=l.before(l.depth-(y-1));t.replace(S,l.after(-v),new R(b,4-y,0));let C=-1;t.doc.nodesBetween(S,t.doc.content.size,(E,M)=>{if(C>-1)return!1;E.isTextblock&&E.content.size===0&&(C=M+1)}),C>-1&&t.setSelection(F.near(t.doc.resolve(C))),t.scrollIntoView()}return!0}const h=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,p={...Ko(f,d.type.name,d.attrs),...e},m={...Ko(f,l.node().type.name,l.node().attrs),...e};t.delete(l.pos,c.pos);const g=h?[{type:a,attrs:p},{type:h,attrs:m}]:[{type:a,attrs:p}];if(!es(t.doc,l.pos,2))return!1;if(s){const{selection:b,storedMarks:y}=i,{splittableMarks:v}=r.extensionManager,x=y||b.$to.parentOffset&&b.$from.marks();if(t.split(l.pos,2,g).scrollIntoView(),!x||!s)return!0;const _=x.filter(S=>v.includes(S.type.name));t.ensureMarks(_)}return!0},Rc=(n,e)=>{const t=kf(o=>o.type===e)(n.selection);if(!t)return!0;const i=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(i===void 0)return!0;const s=n.doc.nodeAt(i);return t.node.type===(s==null?void 0:s.type)&&Fn(n.doc,t.pos)&&n.join(t.pos),!0},Pc=(n,e)=>{const t=kf(o=>o.type===e)(n.selection);if(!t)return!0;const i=n.doc.resolve(t.start).after(t.depth);if(i===void 0)return!0;const s=n.doc.nodeAt(i);return t.node.type===(s==null?void 0:s.type)&&Fn(n.doc,i)&&n.join(i),!0},FD=(n,e,t,i={})=>({editor:s,tr:r,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=s.extensionManager,h=Ee(n,o.schema),p=Ee(e,o.schema),{selection:m,storedMarks:g}=o,{$from:b,$to:y}=m,v=b.blockRange(y),x=g||m.$to.parentOffset&&m.$from.marks();if(!v)return!1;const _=kf(S=>Kp(S.type.name,d))(m);if(v.depth>=1&&_&&v.depth-_.depth<=1){if(_.node.type===h)return c.liftListItem(p);if(Kp(_.node.type.name,d)&&h.validContent(_.node.content)&&a)return l().command(()=>(r.setNodeMarkup(_.pos,h),!0)).command(()=>Rc(r,h)).command(()=>Pc(r,h)).run()}return!t||!x||!a?l().command(()=>u().wrapInList(h,i)?!0:c.clearNodes()).wrapInList(h,i).command(()=>Rc(r,h)).command(()=>Pc(r,h)).run():l().command(()=>{const S=u().wrapInList(h,i),C=x.filter(E=>f.includes(E.type.name));return r.ensureMarks(C),S?!0:c.clearNodes()}).wrapInList(h,i).command(()=>Rc(r,h)).command(()=>Pc(r,h)).run()},zD=(n,e={},t={})=>({state:i,commands:s})=>{const{extendEmptyMarkRange:r=!1}=t,o=Hn(n,i.schema);return ed(i,o,e)?s.unsetMark(o,{extendEmptyMarkRange:r}):s.setMark(o,e)},HD=(n,e,t={})=>({state:i,commands:s})=>{const r=Ee(n,i.schema),o=Ee(e,i.schema),a=Sr(i,r,t);let l;return i.selection.$anchor.sameParent(i.selection.$head)&&(l=i.selection.$anchor.parent.attrs),a?s.setNode(o,l):s.setNode(r,{...l,...t})},VD=(n,e={})=>({state:t,commands:i})=>{const s=Ee(n,t.schema);return Sr(t,s,e)?i.lift(s):i.wrapIn(s,e)},jD=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let i=0;i<t.length;i+=1){const s=t[i];let r;if(s.spec.isInputRules&&(r=s.getState(n))){if(e){const o=n.tr,a=r.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(r.text){const l=o.doc.resolve(r.from).marks();o.replaceWith(r.from,r.to,n.schema.text(r.text,l))}else o.delete(r.from,r.to)}return!0}}return!1},WD=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:i,ranges:s}=t;return i||e&&s.forEach(r=>{n.removeMark(r.$from.pos,r.$to.pos)}),!0},UD=(n,e={})=>({tr:t,state:i,dispatch:s})=>{var r;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=Hn(n,i.schema),{$from:c,empty:u,ranges:d}=a;if(!s)return!0;if(u&&o){let{from:f,to:h}=a;const p=(r=c.marks().find(g=>g.type===l))===null||r===void 0?void 0:r.attrs,m=Sf(c,l,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},$D=(n,e={})=>({tr:t,state:i,dispatch:s})=>{let r=null,o=null;const a=Xl(typeof n=="string"?n:n.name,i.schema);return a?(a==="node"&&(r=Ee(n,i.schema)),a==="mark"&&(o=Hn(n,i.schema)),s&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;i.doc.nodesBetween(c,u,(d,f)=>{r&&r===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),m=Math.min(f+d.nodeSize,u);t.addMark(p,m,o.create({...h.attrs,...e}))}})})}),!0):!1},qD=(n,e={})=>({state:t,dispatch:i})=>{const s=Ee(n,t.schema);return sM(s,e)(t,i)},GD=(n,e={})=>({state:t,dispatch:i})=>{const s=Ee(n,t.schema);return rM(s,e)(t,i)};var KD=Object.freeze({__proto__:null,blur:CM,clearContent:MM,clearNodes:DM,command:TM,createParagraphNear:OM,cut:RM,deleteCurrentNode:PM,deleteNode:NM,deleteRange:IM,deleteSelection:LM,enter:BM,exitCode:FM,extendMarkRange:HM,first:VM,focus:jM,forEach:WM,insertContent:UM,insertContentAt:GM,joinBackward:JM,joinDown:YM,joinForward:QM,joinItemBackward:ZM,joinItemForward:XM,joinTextblockBackward:eD,joinTextblockForward:tD,joinUp:KM,keyboardShortcut:iD,lift:sD,liftEmptyBlock:rD,liftListItem:oD,newlineInCode:aD,resetAttributes:lD,scrollIntoView:cD,selectAll:uD,selectNodeBackward:dD,selectNodeForward:fD,selectParentNode:hD,selectTextblockEnd:pD,selectTextblockStart:gD,setContent:mD,setMark:TD,setMeta:OD,setNode:RD,setNodeSelection:PD,setTextSelection:ND,sinkListItem:ID,splitBlock:LD,splitListItem:BD,toggleList:FD,toggleMark:zD,toggleNode:HD,toggleWrap:VD,undoInputRule:jD,unsetAllMarks:WD,unsetMark:UD,updateAttributes:$D,wrapIn:qD,wrapInList:GD});const YD=He.create({name:"commands",addCommands(){return{...KD}}}),JD=He.create({name:"drop",addProseMirrorPlugins(){return[new Re({key:new at("tiptapDrop"),props:{handleDrop:(n,e,t,i)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:i})}}})]}}),QD=He.create({name:"editable",addProseMirrorPlugins(){return[new Re({key:new at("editable"),props:{editable:()=>this.editor.options.editable}})]}}),ZD=He.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Re({key:new at("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const i=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(i),!1},blur:(e,t)=>{n.isFocused=!1;const i=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(i),!1}}}})]}}),XD=He.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock&&f>0?a.doc.resolve(f-1):d,m=p.parent.type.spec.isolating,g=d.pos-d.parentOffset,b=m&&p.parent.childCount===1?g===d.pos:V.atStart(c).from===f;return!u||!h.type.isTextblock||h.textContent.length||!b||b&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...i},r={...i,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return wf()||Wv()?r:s},addProseMirrorPlugins(){return[new Re({key:new at("clearDocument"),appendTransaction:(n,e,t)=>{const i=n.some(m=>m.docChanged)&&!e.doc.eq(t.doc),s=n.some(m=>m.getMeta("preventClearDocument"));if(!i||s)return;const{empty:r,from:o,to:a}=e.selection,l=V.atStart(e.doc).from,c=V.atEnd(e.doc).to;if(r||!(o===l&&a===c)||!Cf(t.doc))return;const f=t.tr,h=Kl({state:t,transaction:f}),{commands:p}=new Yl({editor:this.editor,state:h});if(p.clearNodes(),!!f.steps.length)return f}})]}}),eT=He.create({name:"paste",addProseMirrorPlugins(){return[new Re({key:new at("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),tT=He.create({name:"tabindex",addProseMirrorPlugins(){return[new Re({key:new at("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class ti{get name(){return this.node.type.name}constructor(e,t,i=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=i,this.resolvedPos=e,this.editor=t,this.currentNode=s}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,i=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,i=this.to-1}this.editor.commands.insertContentAt({from:t,to:i},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new ti(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new ti(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new ti(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,i)=>{const s=t.isBlock&&!t.isTextblock,r=this.pos+i+1,o=this.resolvedPos.doc.resolve(r);if(!s&&o.depth<=this.depth)return;const a=new ti(o,this.editor,s,s?t:null);s&&(a.actualDepth=this.depth+1),e.push(new ti(o,this.editor,s,s?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let i=null,s=this.parent;for(;s&&!i;){if(s.node.type.name===e)if(Object.keys(t).length>0){const r=s.node.attrs,o=Object.keys(t);for(let a=0;a<o.length;a+=1){const l=o[a];if(r[l]!==t[l])break}}else i=s;s=s.parent}return i}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},i=!1){let s=[];if(!this.children||this.children.length===0)return s;const r=Object.keys(t);return this.children.forEach(o=>{i&&s.length>0||(o.node.type.name===e&&r.every(l=>t[l]===o.node.attrs[l])&&s.push(o),!(i&&s.length>0)&&(s=s.concat(o.querySelectorAll(e,t,i))))}),s}setAttribute(e){const t=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(t.from).run()}}const nT=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function iT(n,e,t){const i=document.querySelector("style[data-tiptap-style]");if(i!==null)return i;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(s),s}class sT extends dM{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:i,moved:s})=>this.options.onDrop(t,i,s)),this.on("paste",({event:t,slice:i})=>this.options.onPaste(t,i)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=iT(nT,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const i=Bv(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:i});return this.view.updateState(s),s}unregisterPlugin(e){if(this.isDestroyed)return;const t=typeof e=="string"?`${e}$`:e.key,i=this.state.reconfigure({plugins:this.state.plugins.filter(s=>!s.key.startsWith(t))});return this.view.updateState(i),i}createExtensionManager(){var e,t;const s=[...this.options.enableCoreExtensions?[QD,EM.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),YD,ZD,XD,tT,JD,eT].filter(r=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[r.name]!==!1:!0):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new Zi(s,this)}createCommandManager(){this.commandManager=new Yl({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let e;try{e=Xu(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(r){if(!(r instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(r.message))throw r;this.emit("contentError",{editor:this,error:r,disableCollaboration:()=>{this.options.extensions=this.options.extensions.filter(o=>o.name!=="collaboration"),this.createExtensionManager()}}),e=Xu(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const t=Vv(e,this.options.autofocus);this.view=new T1(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:Qi.create({doc:e,selection:t||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const t=this.state.apply(e),i=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),i&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),r=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),r&&this.emit("blur",{editor:this,event:r.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Uv(this.state,e)}isActive(e,t){const i=typeof e=="string"?e:null,s=typeof e=="string"?t:e;return CD(this.state,i,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return _D(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:i={}}=e||{};return SD(this.state.doc,{blockSeparator:t,textSerializers:{...zv(this.schema),...i}})}get isEmpty(){return Cf(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var i;return((i=this.$doc)===null||i===void 0?void 0:i.querySelector(e,t))||null}$nodes(e,t){var i;return((i=this.$doc)===null||i===void 0?void 0:i.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new ti(t,this)}get $doc(){return this.$pos(0)}}function hs(n){return new Ql({find:n.find,handler:({state:e,range:t,match:i})=>{const s=U(n.getAttributes,void 0,i);if(s===!1||s===null)return null;const{tr:r}=e,o=i[i.length-1],a=i[0];if(o){const l=a.search(/\S/),c=t.from+a.indexOf(o),u=c+o.length;if(Ef(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===n.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;u<t.to&&r.delete(u,t.to),c>t.from&&r.delete(t.from+l,c);const f=t.from+l+o.length;r.addMark(t.from+l,f,n.type.create(s||{})),r.removeStoredMark(n.type)}}})}function rT(n){return new Ql({find:n.find,handler:({state:e,range:t,match:i})=>{const s=U(n.getAttributes,void 0,i)||{},{tr:r}=e,o=t.from;let a=t.to;const l=n.type.create(s);if(i[1]){const c=i[0].lastIndexOf(i[1]);let u=o+c;u>a?u=a:a=u+i[1].length;const d=i[0][i[0].length-1];r.insertText(d,o+i[0].length-1),r.replaceWith(u,a,l)}else if(i[0]){const c=n.type.isInline?o:o-1;r.insert(c,n.type.create(s)).delete(r.mapping.map(o),r.mapping.map(a))}r.scrollIntoView()}})}function td(n){return new Ql({find:n.find,handler:({state:e,range:t,match:i})=>{const s=e.doc.resolve(t.from),r=U(n.getAttributes,void 0,i)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,r)}})}function wr(n){return new Ql({find:n.find,handler:({state:e,range:t,match:i,chain:s})=>{const r=U(n.getAttributes,void 0,i)||{},o=e.tr.delete(t.from,t.to),l=o.doc.resolve(t.from).blockRange(),c=l&&cf(l,n.type,r);if(!c)return null;if(o.wrap(l,c),n.keepMarks&&n.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:h}=n.editor.extensionManager,p=f||d.$to.parentOffset&&d.$from.marks();if(p){const m=p.filter(g=>h.includes(g.type.name));o.ensureMarks(m)}}if(n.keepAttributes){const d=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(d,r).run()}const u=o.doc.resolve(t.from-1).nodeBefore;u&&u.type===n.type&&Fn(o.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(i,u))&&o.join(t.from-1)}})}class tt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=U(P(this,"addOptions",{name:this.name}))),this.storage=U(P(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new tt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Zl(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new tt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=U(P(t,"addOptions",{name:t.name})),t.storage=U(P(t,"addStorage",{name:t.name,options:t.options})),t}}function Mi(n){return new xM({find:n.find,handler:({state:e,range:t,match:i,pasteEvent:s})=>{const r=U(n.getAttributes,void 0,i,s);if(r===!1||r===null)return null;const{tr:o}=e,a=i[i.length-1],l=i[0];let c=t.to;if(a){const u=l.search(/\S/),d=t.from+l.indexOf(a),f=d+a.length;if(Ef(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===n.type&&g!==p.mark.type)).filter(p=>p.to>d).length)return null;f<t.to&&o.delete(f,t.to),d>t.from&&o.delete(t.from+u,d),c=t.from+u+a.length,o.addMark(t.from+u,c,n.type.create(r||{})),o.removeStoredMark(n.type)}}})}const oT=/^\s*>\s$/,aT=tt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",Ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wr({find:oT,type:this.type})]}}),lT=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,cT=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,uT=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,dT=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,fT=Ft.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",Ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[hs({find:lT,type:this.type}),hs({find:uT,type:this.type})]},addPasteRules(){return[Mi({find:cT,type:this.type}),Mi({find:dT,type:this.type})]}}),Mf=tt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Ce(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Ra=Ft.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",Ce(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:e})=>{const t=Af(n,this.type);return Object.entries(t).some(([,s])=>!!s)?!0:e.unsetMark(this.name)}}}}),Jp=/^\s*([-+*])\s$/,hT=tt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Ce(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Mf.name,this.editor.getAttributes(Ra.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=wr({find:Jp,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=wr({find:Jp,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Ra.name),editor:this.editor})),[n]}}),pT=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,gT=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,mT=Ft.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[hs({find:pT,type:this.type})]},addPasteRules(){return[Mi({find:gT,type:this.type})]}}),bT=/^```([a-z]+)?[\s\n]$/,yT=/^~~~([a-z]+)?[\s\n]$/,vT=tt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,r=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(t)).map(o=>o.replace(t,""))[0];return r||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Ce(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:i,empty:s}=t;if(!s||i.parent.type!==this.type)return!1;const r=i.parentOffset===i.parent.nodeSize-2,o=i.parent.textContent.endsWith(`

`);return!r||!o?!1:n.chain().command(({tr:a})=>(a.delete(i.pos-2,i.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:i}=e,{$from:s,empty:r}=t;if(!r||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:i.nodeAt(a)?n.commands.command(({tr:c})=>(c.setSelection(V.near(i.resolve(a))),!0)):n.commands.exitCode()}}},addInputRules(){return[td({find:bT,type:this.type,getAttributes:n=>({language:n[1]})}),td({find:yT,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Re({key:new at("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),i=e.clipboardData.getData("vscode-editor-data"),s=i?JSON.parse(i):void 0,r=s==null?void 0:s.mode;if(!t||!r)return!1;const{tr:o,schema:a}=n.state,l=a.text(t.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:r},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(F.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}}),xT=tt.create({name:"doc",topNode:!0,content:"block+"});function _T(n={}){return new Re({view(e){return new ST(e,n)}})}class ST{constructor(e,t){var i;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(i=t.width)!==null&&i!==void 0?i:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let r=o=>{this[s](o)};return e.dom.addEventListener(s,r),{name:s,handler:r}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,i;if(t){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),i={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!i){let a=this.editorView.coordsAtPos(this.cursorPos);i={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let s=this.editorView.dom.offsetParent;this.element||(this.element=s.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let r,o;if(!s||s==document.body&&getComputedStyle(s).position=="static")r=-pageXOffset,o=-pageYOffset;else{let a=s.getBoundingClientRect();r=a.left-s.scrollLeft,o=a.top-s.scrollTop}this.element.style.left=i.left-r+"px",this.element.style.top=i.top-o+"px",this.element.style.width=i.right-i.left+"px",this.element.style.height=i.bottom-i.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),i=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),s=i&&i.type.spec.disableDropCursor,r=typeof s=="function"?s(this.editorView,t,e):s;if(t&&!r){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=V0(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const wT=He.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[_T(this.options)]}});class le extends V{constructor(e){super(e,e)}map(e,t){let i=e.resolve(t.map(this.head));return le.valid(i)?new le(i):V.near(i)}content(){return R.empty}eq(e){return e instanceof le&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new le(e.resolve(t.pos))}getBookmark(){return new Df(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!AT(e)||!kT(e))return!1;let i=t.type.spec.allowGapCursor;if(i!=null)return i;let s=t.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,t,i=!1){e:for(;;){if(!i&&le.valid(e))return e;let s=e.pos,r=null;for(let o=e.depth;;o--){let a=e.node(o);if(t>0?e.indexAfter(o)<a.childCount:e.index(o)>0){r=a.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;s+=t;let l=e.doc.resolve(s);if(le.valid(l))return l}for(;;){let o=t>0?r.firstChild:r.lastChild;if(!o){if(r.isAtom&&!r.isText&&!L.isSelectable(r)){e=e.doc.resolve(s+r.nodeSize*t),i=!1;continue e}break}r=o,s+=t;let a=e.doc.resolve(s);if(le.valid(a))return a}return null}}}le.prototype.visible=!1;le.findFrom=le.findGapCursorFrom;V.jsonID("gapcursor",le);class Df{constructor(e){this.pos=e}map(e){return new Df(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return le.valid(t)?new le(t):V.near(t)}}function AT(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),i=n.node(e);if(t==0){if(i.type.spec.isolating)return!0;continue}for(let s=i.child(t-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function kT(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),i=n.node(e);if(t==i.childCount){if(i.type.spec.isolating)return!0;continue}for(let s=i.child(t);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function ET(){return new Re({props:{decorations:TT,createSelectionBetween(n,e,t){return e.pos==t.pos&&le.valid(t)?new le(t):null},handleClick:MT,handleKeyDown:CT,handleDOMEvents:{beforeinput:DT}}})}const CT=Dv({ArrowLeft:ho("horiz",-1),ArrowRight:ho("horiz",1),ArrowUp:ho("vert",-1),ArrowDown:ho("vert",1)});function ho(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(i,s,r){let o=i.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof F){if(!r.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=i.doc.resolve(e>0?a.after():a.before())}let c=le.findGapCursorFrom(a,e,l);return c?(s&&s(i.tr.setSelection(new le(c))),!0):!1}}function MT(n,e,t){if(!n||!n.editable)return!1;let i=n.state.doc.resolve(e);if(!le.valid(i))return!1;let s=n.posAtCoords({left:t.clientX,top:t.clientY});return s&&s.inside>-1&&L.isSelectable(n.state.doc.nodeAt(s.inside))?!1:(n.dispatch(n.state.tr.setSelection(new le(i))),!0)}function DT(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof le))return!1;let{$from:t}=n.state.selection,i=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!i)return!1;let s=D.empty;for(let o=i.length-1;o>=0;o--)s=D.from(i[o].createAndFill(null,s));let r=n.state.tr.replace(t.pos,t.pos,new R(s,0,0));return r.setSelection(F.near(r.doc.resolve(t.pos+1))),n.dispatch(r),!1}function TT(n){if(!(n.selection instanceof le))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",be.create(n.doc,[pt.widget(n.selection.head,e,{key:"gapcursor"})])}const OT=He.create({name:"gapCursor",addProseMirrorPlugins(){return[ET()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=U(P(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),RT=tt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Ce(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:i})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:s,storedMarks:r}=t;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=i.extensionManager,l=r||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const d=l.filter(f=>a.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),PT=tt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Ce(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>td({find:new RegExp(`^(#{1,${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Pa=200,ke=function(){};ke.prototype.append=function(e){return e.length?(e=ke.from(e),!this.length&&e||e.length<Pa&&this.leafAppend(e)||this.length<Pa&&e.leafPrepend(this)||this.appendInner(e)):this};ke.prototype.prepend=function(e){return e.length?ke.from(e).append(this):this};ke.prototype.appendInner=function(e){return new NT(this,e)};ke.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?ke.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};ke.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ke.prototype.forEach=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=this.length),t<=i?this.forEachInner(e,t,i,0):this.forEachInvertedInner(e,t,i,0)};ke.prototype.map=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=this.length);var s=[];return this.forEach(function(r,o){return s.push(e(r,o))},t,i),s};ke.from=function(e){return e instanceof ke?e:e&&e.length?new $v(e):ke.empty};var $v=function(n){function e(i){n.call(this),this.values=i}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,r){return s==0&&r==this.length?this:new e(this.values.slice(s,r))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,r,o,a){for(var l=r;l<o;l++)if(s(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(s,r,o,a){for(var l=r-1;l>=o;l--)if(s(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=Pa)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=Pa)return new e(s.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(ke);ke.empty=new $v([]);var NT=function(n){function e(t,i){n.call(this),this.left=t,this.right=i,this.length=t.length+i.length,this.depth=Math.max(t.depth,i.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},e.prototype.forEachInner=function(i,s,r,o){var a=this.left.length;if(s<a&&this.left.forEachInner(i,s,Math.min(r,a),o)===!1||r>a&&this.right.forEachInner(i,Math.max(s-a,0),Math.min(this.length,r)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,r,o){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(i,s-a,Math.max(r,a)-a,o+a)===!1||r<a&&this.left.forEachInvertedInner(i,Math.min(s,a),r,o)===!1)return!1},e.prototype.sliceInner=function(i,s){if(i==0&&s==this.length)return this;var r=this.left.length;return s<=r?this.left.slice(i,s):i>=r?this.right.slice(i-r,s-r):this.left.slice(i,r).append(this.right.slice(0,s-r))},e.prototype.leafAppend=function(i){var s=this.right.leafAppend(i);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(i){var s=this.left.leafPrepend(i);if(s)return new e(s,this.right)},e.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new e(this.left,new e(this.right,i)):new e(this,i)},e}(ke);const IT=500;class yt{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let s,r;t&&(s=this.remapping(i,this.items.length),r=s.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){s||(s=this.remapping(i,f+1),r=s.maps.length),r--,u.push(d);return}if(s){u.push(new Ct(d.map));let h=d.step.map(s.slice(r)),p;h&&o.maybeStep(h).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new Ct(p,void 0,void 0,c.length+u.length))),r--,p&&s.appendMap(p,r)}else o.maybeStep(d.step);if(d.selection)return a=s?d.selection.map(s.slice(r)):d.selection,l=new yt(this.items.slice(0,i).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,t,i,s){let r=[],o=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new Ct(e.mapping.maps[u],d,t),h;(h=l&&l.merge(f))&&(f=h,u?r.pop():a=a.slice(0,a.length-1)),r.push(f),t&&(o++,t=void 0),s||(l=f)}let c=o-i.depth;return c>BT&&(a=LT(a,c),o-=c),new yt(a.append(r),o)}remapping(e,t){let i=new Xi;return this.items.forEach((s,r)=>{let o=s.mirrorOffset!=null&&r-s.mirrorOffset>=e?i.maps.length-s.mirrorOffset:void 0;i.appendMap(s.map,o)},e,t),i}addMaps(e){return this.eventCount==0?this:new yt(this.items.append(e.map(t=>new Ct(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let i=[],s=Math.max(0,this.items.length-t),r=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},s);let l=t;this.items.forEach(f=>{let h=r.getMirror(--l);if(h==null)return;o=Math.min(o,h);let p=r.maps[h];if(f.step){let m=e.steps[h].invert(e.docs[h]),g=f.selection&&f.selection.map(r.slice(l+1,h));g&&a++,i.push(new Ct(p,m,g))}else i.push(new Ct(p))},s);let c=[];for(let f=t;f<o;f++)c.push(new Ct(r.maps[f]));let u=this.items.slice(0,s).append(c).append(i),d=new yt(u,a);return d.emptyItemCount()>IT&&(d=d.compress(this.items.length-i.length)),d}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),i=t.maps.length,s=[],r=0;return this.items.forEach((o,a)=>{if(a>=e)s.push(o),o.selection&&r++;else if(o.step){let l=o.step.map(t.slice(i)),c=l&&l.getMap();if(i--,c&&t.appendMap(c,i),l){let u=o.selection&&o.selection.map(t.slice(i));u&&r++;let d=new Ct(c.invert(),l,u),f,h=s.length-1;(f=s.length&&s[h].merge(d))?s[h]=f:s.push(d)}}else o.map&&i--},this.items.length,0),new yt(ke.from(s.reverse()),r)}}yt.empty=new yt(ke.empty,0);function LT(n,e){let t;return n.forEach((i,s)=>{if(i.selection&&e--==0)return t=s,!1}),n.slice(t)}class Ct{constructor(e,t,i,s){this.map=e,this.step=t,this.selection=i,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Ct(t.getMap().invert(),t,this.selection)}}}class cn{constructor(e,t,i,s,r){this.done=e,this.undone=t,this.prevRanges=i,this.prevTime=s,this.prevComposition=r}}const BT=20;function FT(n,e,t,i){let s=t.getMeta(_i),r;if(s)return s.historyState;t.getMeta(VT)&&(n=new cn(n.done,n.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(_i))return o.getMeta(_i).redo?new cn(n.done.addTransform(t,void 0,i,Yo(e)),n.undone,Qp(t.mapping.maps),n.prevTime,n.prevComposition):new cn(n.done,n.undone.addTransform(t,void 0,i,Yo(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),l=n.prevTime==0||!o&&n.prevComposition!=a&&(n.prevTime<(t.time||0)-i.newGroupDelay||!zT(t,n.prevRanges)),c=o?Nc(n.prevRanges,t.mapping):Qp(t.mapping.maps);return new cn(n.done.addTransform(t,l?e.selection.getBookmark():void 0,i,Yo(e)),yt.empty,c,t.time,a??n.prevComposition)}else return(r=t.getMeta("rebased"))?new cn(n.done.rebased(t,r),n.undone.rebased(t,r),Nc(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new cn(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Nc(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function zT(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((i,s)=>{for(let r=0;r<e.length;r+=2)i<=e[r+1]&&s>=e[r]&&(t=!0)}),t}function Qp(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((i,s,r,o)=>e.push(r,o));return e}function Nc(n,e){if(!n)return null;let t=[];for(let i=0;i<n.length;i+=2){let s=e.map(n[i],1),r=e.map(n[i+1],-1);s<=r&&t.push(s,r)}return t}function HT(n,e,t){let i=Yo(e),s=_i.get(e).spec.config,r=(t?n.undone:n.done).popEvent(e,i);if(!r)return null;let o=r.selection.resolve(r.transform.doc),a=(t?n.done:n.undone).addTransform(r.transform,e.selection.getBookmark(),s,i),l=new cn(t?a:r.remaining,t?r.remaining:a,null,0,-1);return r.transform.setSelection(o).setMeta(_i,{redo:t,historyState:l})}let Ic=!1,Zp=null;function Yo(n){let e=n.plugins;if(Zp!=e){Ic=!1,Zp=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Ic=!0;break}}return Ic}const _i=new at("history"),VT=new at("closeHistory");function jT(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Re({key:_i,state:{init(){return new cn(yt.empty,yt.empty,null,0,-1)},apply(e,t,i){return FT(t,i,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let i=t.inputType,s=i=="historyUndo"?Gv:i=="historyRedo"?Kv:null;return s?(t.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function qv(n,e){return(t,i)=>{let s=_i.getState(t);if(!s||(n?s.undone:s.done).eventCount==0)return!1;if(i){let r=HT(s,t,n);r&&i(e?r.scrollIntoView():r)}return!0}}const Gv=qv(!1,!0),Kv=qv(!0,!0),WT=He.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>Gv(n,e),redo:()=>({state:n,dispatch:e})=>Kv(n,e)}},addProseMirrorPlugins(){return[jT(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),UT=tt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Ce(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:i,$to:s}=t,r=n();return i.parentOffset===0?r.insertContentAt({from:Math.max(i.pos-1,0),to:s.pos},{type:this.name}):MD(t)?r.insertContentAt(s.pos,{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:o,dispatch:a})=>{var l;if(a){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(F.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(L.create(o.doc,c.pos)):o.setSelection(F.create(o.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(o.insert(u,d),o.setSelection(F.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[rT({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),$T=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,qT=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,GT=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,KT=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,YT=Ft.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[hs({find:$T,type:this.type}),hs({find:GT,type:this.type})]},addPasteRules(){return[Mi({find:qT,type:this.type}),Mi({find:KT,type:this.type})]}}),Xp=/^(\d+)\.\s$/,JT=tt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Ce(this.options.HTMLAttributes,t),0]:["ol",Ce(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Mf.name,this.editor.getAttributes(Ra.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=wr({find:Xp,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=wr({find:Xp,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Ra.name)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),QT=tt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),ZT=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,XT=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,eO=Ft.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Ce(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[hs({find:ZT,type:this.type})]},addPasteRules(){return[Mi({find:XT,type:this.type})]}}),tO=tt.create({name:"text",group:"inline"}),nO=He.create({name:"starterKit",addExtensions(){var n,e,t,i,s,r,o,a,l,c,u,d,f,h,p,m,g,b;const y=[];return this.options.bold!==!1&&y.push(fT.configure((n=this.options)===null||n===void 0?void 0:n.bold)),this.options.blockquote!==!1&&y.push(aT.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&y.push(hT.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&y.push(mT.configure((i=this.options)===null||i===void 0?void 0:i.code)),this.options.codeBlock!==!1&&y.push(vT.configure((s=this.options)===null||s===void 0?void 0:s.codeBlock)),this.options.document!==!1&&y.push(xT.configure((r=this.options)===null||r===void 0?void 0:r.document)),this.options.dropcursor!==!1&&y.push(wT.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&y.push(OT.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&y.push(RT.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&y.push(PT.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&y.push(WT.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&y.push(UT.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&y.push(YT.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&y.push(Mf.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&y.push(JT.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&y.push(QT.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&y.push(eO.configure((g=this.options)===null||g===void 0?void 0:g.strike)),this.options.text!==!1&&y.push(tO.configure((b=this.options)===null||b===void 0?void 0:b.text)),y}}),iO="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",sO="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",ps=(n,e)=>{for(const t in e)n[t]=e[t];return n},nd="numeric",id="ascii",sd="alpha",Jo="asciinumeric",po="alphanumeric",rd="domain",Yv="emoji",rO="scheme",oO="slashscheme",eg="whitespace";function aO(n,e){return n in e||(e[n]=[]),e[n]}function li(n,e,t){e[nd]&&(e[Jo]=!0,e[po]=!0),e[id]&&(e[Jo]=!0,e[sd]=!0),e[Jo]&&(e[po]=!0),e[sd]&&(e[po]=!0),e[po]&&(e[rd]=!0),e[Yv]&&(e[rd]=!0);for(const i in e){const s=aO(i,t);s.indexOf(n)<0&&s.push(n)}}function lO(n,e){const t={};for(const i in e)e[i].indexOf(n)>=0&&(t[i]=!0);return t}function Ye(n){n===void 0&&(n=null),this.j={},this.jr=[],this.jd=null,this.t=n}Ye.groups={};Ye.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let i=0;i<e.jr.length;i++){const s=e.jr[i][0],r=e.jr[i][1];if(r&&s.test(n))return r}return e.jd},has(n,e){return e===void 0&&(e=!1),e?n in this.j:!!this.go(n)},ta(n,e,t,i){for(let s=0;s<n.length;s++)this.tt(n[s],e,t,i)},tr(n,e,t,i){i=i||Ye.groups;let s;return e&&e.j?s=e:(s=new Ye(e),t&&i&&li(e,t,i)),this.jr.push([n,s]),s},ts(n,e,t,i){let s=this;const r=n.length;if(!r)return s;for(let o=0;o<r-1;o++)s=s.tt(n[o]);return s.tt(n[r-1],e,t,i)},tt(n,e,t,i){i=i||Ye.groups;const s=this;if(e&&e.j)return s.j[n]=e,e;const r=e;let o,a=s.go(n);if(a?(o=new Ye,ps(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Ye,r){if(i)if(o.t&&typeof o.t=="string"){const l=ps(lO(o.t,i),t);li(r,l,i)}else t&&li(r,t,i);o.t=r}return s.j[n]=o,o}};const j=(n,e,t,i,s)=>n.ta(e,t,i,s),lt=(n,e,t,i,s)=>n.tr(e,t,i,s),tg=(n,e,t,i,s)=>n.ts(e,t,i,s),O=(n,e,t,i,s)=>n.tt(e,t,i,s),jt="WORD",od="UWORD",Ar="LOCALHOST",ad="TLD",ld="UTLD",Qo="SCHEME",Yi="SLASH_SCHEME",Tf="NUM",Jv="WS",Of="NL",nr="OPENBRACE",ir="CLOSEBRACE",Na="OPENBRACKET",Ia="CLOSEBRACKET",La="OPENPAREN",Ba="CLOSEPAREN",Fa="OPENANGLEBRACKET",za="CLOSEANGLEBRACKET",Ha="FULLWIDTHLEFTPAREN",Va="FULLWIDTHRIGHTPAREN",ja="LEFTCORNERBRACKET",Wa="RIGHTCORNERBRACKET",Ua="LEFTWHITECORNERBRACKET",$a="RIGHTWHITECORNERBRACKET",qa="FULLWIDTHLESSTHAN",Ga="FULLWIDTHGREATERTHAN",Ka="AMPERSAND",Ya="APOSTROPHE",Ja="ASTERISK",un="AT",Qa="BACKSLASH",Za="BACKTICK",Xa="CARET",fn="COLON",Rf="COMMA",el="DOLLAR",Mt="DOT",tl="EQUALS",Pf="EXCLAMATION",Dt="HYPHEN",nl="PERCENT",il="PIPE",sl="PLUS",rl="POUND",ol="QUERY",Nf="QUOTE",If="SEMI",Tt="SLASH",sr="TILDE",al="UNDERSCORE",Qv="EMOJI",ll="SYM";var Zv=Object.freeze({__proto__:null,WORD:jt,UWORD:od,LOCALHOST:Ar,TLD:ad,UTLD:ld,SCHEME:Qo,SLASH_SCHEME:Yi,NUM:Tf,WS:Jv,NL:Of,OPENBRACE:nr,CLOSEBRACE:ir,OPENBRACKET:Na,CLOSEBRACKET:Ia,OPENPAREN:La,CLOSEPAREN:Ba,OPENANGLEBRACKET:Fa,CLOSEANGLEBRACKET:za,FULLWIDTHLEFTPAREN:Ha,FULLWIDTHRIGHTPAREN:Va,LEFTCORNERBRACKET:ja,RIGHTCORNERBRACKET:Wa,LEFTWHITECORNERBRACKET:Ua,RIGHTWHITECORNERBRACKET:$a,FULLWIDTHLESSTHAN:qa,FULLWIDTHGREATERTHAN:Ga,AMPERSAND:Ka,APOSTROPHE:Ya,ASTERISK:Ja,AT:un,BACKSLASH:Qa,BACKTICK:Za,CARET:Xa,COLON:fn,COMMA:Rf,DOLLAR:el,DOT:Mt,EQUALS:tl,EXCLAMATION:Pf,HYPHEN:Dt,PERCENT:nl,PIPE:il,PLUS:sl,POUND:rl,QUERY:ol,QUOTE:Nf,SEMI:If,SLASH:Tt,TILDE:sr,UNDERSCORE:al,EMOJI:Qv,SYM:ll});const Ui=/[a-z]/,Lc=new RegExp("\\p{L}","u"),Bc=new RegExp("\\p{Emoji}","u"),Fc=/\d/,ng=/\s/,ig=`
`,cO="",uO="";let go=null,mo=null;function dO(n){n===void 0&&(n=[]);const e={};Ye.groups=e;const t=new Ye;go==null&&(go=sg(iO)),mo==null&&(mo=sg(sO)),O(t,"'",Ya),O(t,"{",nr),O(t,"}",ir),O(t,"[",Na),O(t,"]",Ia),O(t,"(",La),O(t,")",Ba),O(t,"<",Fa),O(t,">",za),O(t,"",Ha),O(t,"",Va),O(t,"",ja),O(t,"",Wa),O(t,"",Ua),O(t,"",$a),O(t,"",qa),O(t,"",Ga),O(t,"&",Ka),O(t,"*",Ja),O(t,"@",un),O(t,"`",Za),O(t,"^",Xa),O(t,":",fn),O(t,",",Rf),O(t,"$",el),O(t,".",Mt),O(t,"=",tl),O(t,"!",Pf),O(t,"-",Dt),O(t,"%",nl),O(t,"|",il),O(t,"+",sl),O(t,"#",rl),O(t,"?",ol),O(t,'"',Nf),O(t,"/",Tt),O(t,";",If),O(t,"~",sr),O(t,"_",al),O(t,"\\",Qa);const i=lt(t,Fc,Tf,{[nd]:!0});lt(i,Fc,i);const s=lt(t,Ui,jt,{[id]:!0});lt(s,Ui,s);const r=lt(t,Lc,od,{[sd]:!0});lt(r,Ui),lt(r,Lc,r);const o=lt(t,ng,Jv,{[eg]:!0});O(t,ig,Of,{[eg]:!0}),O(o,ig),lt(o,ng,o);const a=lt(t,Bc,Qv,{[Yv]:!0});lt(a,Bc,a),O(a,cO,a);const l=O(a,uO);lt(l,Bc,a);const c=[[Ui,s]],u=[[Ui,null],[Lc,r]];for(let d=0;d<go.length;d++)on(t,go[d],ad,jt,c);for(let d=0;d<mo.length;d++)on(t,mo[d],ld,od,u);li(ad,{tld:!0,ascii:!0},e),li(ld,{utld:!0,alpha:!0},e),on(t,"file",Qo,jt,c),on(t,"mailto",Qo,jt,c),on(t,"http",Yi,jt,c),on(t,"https",Yi,jt,c),on(t,"ftp",Yi,jt,c),on(t,"ftps",Yi,jt,c),li(Qo,{scheme:!0,ascii:!0},e),li(Yi,{slashscheme:!0,ascii:!0},e),n=n.sort((d,f)=>d[0]>f[0]?1:-1);for(let d=0;d<n.length;d++){const f=n[d][0],p=n[d][1]?{[rO]:!0}:{[oO]:!0};f.indexOf("-")>=0?p[rd]=!0:Ui.test(f)?Fc.test(f)?p[Jo]=!0:p[id]=!0:p[nd]=!0,tg(t,f,f,p)}return tg(t,"localhost",Ar,{ascii:!0}),t.jd=new Ye(ll),{start:t,tokens:ps({groups:e},Zv)}}function fO(n,e){const t=hO(e.replace(/[A-Z]/g,a=>a.toLowerCase())),i=t.length,s=[];let r=0,o=0;for(;o<i;){let a=n,l=null,c=0,u=null,d=-1,f=-1;for(;o<i&&(l=a.go(t[o]));)a=l,a.accepts()?(d=0,f=0,u=a):d>=0&&(d+=t[o].length,f++),c+=t[o].length,r+=t[o].length,o++;r-=d,o-=f,c-=d,s.push({t:u.t,v:e.slice(r-c,r),s:r-c,e:r})}return s}function hO(n){const e=[],t=n.length;let i=0;for(;i<t;){let s=n.charCodeAt(i),r,o=s<55296||s>56319||i+1===t||(r=n.charCodeAt(i+1))<56320||r>57343?n[i]:n.slice(i,i+2);e.push(o),i+=o.length}return e}function on(n,e,t,i,s){let r;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];n.j[l]?r=n.j[l]:(r=new Ye(i),r.jr=s.slice(),n.j[l]=r),n=r}return r=new Ye(t),r.jr=s.slice(),n.j[e[o-1]]=r,r}function sg(n){const e=[],t=[];let i=0,s="0123456789";for(;i<n.length;){let r=0;for(;s.indexOf(n[i+r])>=0;)r++;if(r>0){e.push(t.join(""));for(let o=parseInt(n.substring(i,i+r),10);o>0;o--)t.pop();i+=r}else t.push(n[i]),i++}return e}const kr={defaultProtocol:"http",events:null,format:rg,formatHref:rg,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Lf(n,e){e===void 0&&(e=null);let t=ps({},kr);n&&(t=ps(t,n instanceof Lf?n.o:n));const i=t.ignoreTags,s=[];for(let r=0;r<i.length;r++)s.push(i[r].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=s}Lf.prototype={o:kr,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const i=e!=null;let s=this.o[n];return s&&(typeof s=="object"?(s=t.t in s?s[t.t]:kr[n],typeof s=="function"&&i&&(s=s(e,t))):typeof s=="function"&&i&&(s=s(e,t.t,t)),s)},getObj(n,e,t){let i=this.o[n];return typeof i=="function"&&e!=null&&(i=i(e,t.t,t)),i},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function rg(n){return n}function Xv(n,e){this.t="token",this.v=n,this.tk=e}Xv.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),i=n.get("format",e,this);return t&&i.length>t?i.substring(0,t)+"":i},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n){return n===void 0&&(n=kr.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),i=n.get("formatHref",t,this),s=n.get("tagName",t,e),r=this.toFormattedString(n),o={},a=n.get("className",t,e),l=n.get("target",t,e),c=n.get("rel",t,e),u=n.getObj("attributes",t,e),d=n.getObj("events",t,e);return o.href=i,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&ps(o,u),{tagName:s,attributes:o,content:r,eventListeners:d}}};function ec(n,e){class t extends Xv{constructor(s,r){super(s,r),this.t=n}}for(const i in e)t.prototype[i]=e[i];return t.t=n,t}const og=ec("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),ag=ec("text"),pO=ec("nl"),bo=ec("url",{isLink:!0,toHref(n){return n===void 0&&(n=kr.defaultProtocol),this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Ar&&n[1].t===fn}}),ct=n=>new Ye(n);function gO(n){let{groups:e}=n;const t=e.domain.concat([Ka,Ja,un,Qa,Za,Xa,el,tl,Dt,Tf,nl,il,sl,rl,Tt,ll,sr,al]),i=[Ya,fn,Rf,Mt,Pf,ol,Nf,If,Fa,za,nr,ir,Ia,Na,La,Ba,Ha,Va,ja,Wa,Ua,$a,qa,Ga],s=[Ka,Ya,Ja,Qa,Za,Xa,el,tl,Dt,nr,ir,nl,il,sl,rl,ol,Tt,ll,sr,al],r=ct(),o=O(r,sr);j(o,s,o),j(o,e.domain,o);const a=ct(),l=ct(),c=ct();j(r,e.domain,a),j(r,e.scheme,l),j(r,e.slashscheme,c),j(a,s,o),j(a,e.domain,a);const u=O(a,un);O(o,un,u),O(l,un,u),O(c,un,u);const d=O(o,Mt);j(d,s,o),j(d,e.domain,o);const f=ct();j(u,e.domain,f),j(f,e.domain,f);const h=O(f,Mt);j(h,e.domain,f);const p=ct(og);j(h,e.tld,p),j(h,e.utld,p),O(u,Ar,p);const m=O(f,Dt);j(m,e.domain,f),j(p,e.domain,f),O(p,Mt,h),O(p,Dt,m);const g=O(p,fn);j(g,e.numeric,og);const b=O(a,Dt),y=O(a,Mt);j(b,e.domain,a),j(y,s,o),j(y,e.domain,a);const v=ct(bo);j(y,e.tld,v),j(y,e.utld,v),j(v,e.domain,a),j(v,s,o),O(v,Mt,y),O(v,Dt,b),O(v,un,u);const x=O(v,fn),_=ct(bo);j(x,e.numeric,_);const S=ct(bo),C=ct();j(S,t,S),j(S,i,C),j(C,t,S),j(C,i,C),O(v,Tt,S),O(_,Tt,S);const E=O(l,fn),M=O(c,fn),N=O(M,Tt),B=O(N,Tt);j(l,e.domain,a),O(l,Mt,y),O(l,Dt,b),j(c,e.domain,a),O(c,Mt,y),O(c,Dt,b),j(E,e.domain,S),O(E,Tt,S),j(B,e.domain,S),j(B,t,S),O(B,Tt,S);const W=[[nr,ir],[Na,Ia],[La,Ba],[Fa,za],[Ha,Va],[ja,Wa],[Ua,$a],[qa,Ga]];for(let de=0;de<W.length;de++){const[Pe,G]=W[de],Y=O(S,Pe);O(C,Pe,Y),O(Y,G,S);const Z=ct(bo);j(Y,t,Z);const Me=ct();j(Y,i),j(Z,t,Z),j(Z,i,Me),j(Me,t,Z),j(Me,i,Me),O(Z,G,S),O(Me,G,S)}return O(r,Ar,v),O(r,Of,pO),{start:r,tokens:Zv}}function mO(n,e,t){let i=t.length,s=0,r=[],o=[];for(;s<i;){let a=n,l=null,c=null,u=0,d=null,f=-1;for(;s<i&&!(l=a.go(t[s].t));)o.push(t[s++]);for(;s<i&&(c=l||a.go(t[s].t));)l=null,a=c,a.accepts()?(f=0,d=a):f>=0&&f++,s++,u++;if(f<0)s-=u,s<i&&(o.push(t[s]),s++);else{o.length>0&&(r.push(zc(ag,e,o)),o=[]),s-=f,u-=f;const h=d.t,p=t.slice(s-u,s);r.push(zc(h,e,p))}}return o.length>0&&r.push(zc(ag,e,o)),r}function zc(n,e,t){const i=t[0].s,s=t[t.length-1].e,r=e.slice(i,s);return new n(r,t)}const bO=typeof console<"u"&&console&&console.warn||(()=>{}),yO="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",re={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function vO(){Ye.groups={},re.scanner=null,re.parser=null,re.tokenQueue=[],re.pluginQueue=[],re.customSchemes=[],re.initialized=!1}function lg(n,e){if(e===void 0&&(e=!1),re.initialized&&bO(`linkifyjs: already initialized - will not register custom scheme "${n}" ${yO}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);re.customSchemes.push([n,e])}function xO(){re.scanner=dO(re.customSchemes);for(let n=0;n<re.tokenQueue.length;n++)re.tokenQueue[n][1]({scanner:re.scanner});re.parser=gO(re.scanner.tokens);for(let n=0;n<re.pluginQueue.length;n++)re.pluginQueue[n][1]({scanner:re.scanner,parser:re.parser});re.initialized=!0}function ex(n){return re.initialized||xO(),mO(re.parser.start,n,fO(re.scanner.start,n))}function tx(n,e,t){if(e===void 0&&(e=null),t===void 0&&(t=null),e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const i=new Lf(t),s=ex(n),r=[];for(let o=0;o<s.length;o++){const a=s[o];a.isLink&&(!e||a.t===e)&&i.check(a)&&r.push(a.toFormattedObject(i))}return r}function _O(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function SO(n){return new Re({key:new at("autolink"),appendTransaction:(e,t,i)=>{const s=e.some(c=>c.docChanged)&&!t.doc.eq(i.doc),r=e.some(c=>c.getMeta("preventAutolink"));if(!s||r)return;const{tr:o}=i,a=bD(t.doc,[...e]);if(ED(a).forEach(({newRange:c})=>{const u=vD(i.doc,c,h=>h.isTextblock);let d,f;if(u.length>1?(d=u[0],f=i.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ")):u.length&&i.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(d=u[0],f=i.doc.textBetween(d.pos,c.to,void 0," ")),d&&f){const h=f.split(" ").filter(b=>b!=="");if(h.length<=0)return!1;const p=h[h.length-1],m=d.pos+f.lastIndexOf(p);if(!p)return!1;const g=ex(p).map(b=>b.toObject(n.defaultProtocol));if(!_O(g))return!1;g.filter(b=>b.isLink).map(b=>({...b,from:m+b.start+1,to:m+b.end+1})).filter(b=>i.schema.marks.code?!i.doc.rangeHasMark(b.from,b.to,i.schema.marks.code):!0).filter(b=>n.validate(b.value)).forEach(b=>{Ef(b.from,b.to,i.doc).some(y=>y.mark.type===n.type)||o.addMark(b.from,b.to,n.type.create({href:b.href}))})}}),!!o.steps.length)return o}})}function wO(n){return new Re({key:new at("handleClickLink"),props:{handleClick:(e,t,i)=>{var s,r;if(i.button!==0||!e.editable)return!1;let o=i.target;const a=[];for(;o.nodeName!=="DIV";)a.push(o),o=o.parentNode;if(!a.find(f=>f.nodeName==="A"))return!1;const l=Uv(e.state,n.type.name),c=i.target,u=(s=c==null?void 0:c.href)!==null&&s!==void 0?s:l.href,d=(r=c==null?void 0:c.target)!==null&&r!==void 0?r:l.target;return c&&u?(window.open(u,d),!0):!1}}})}function AO(n){return new Re({key:new at("handlePasteLink"),props:{handlePaste:(e,t,i)=>{const{state:s}=e,{selection:r}=s,{empty:o}=r;if(o)return!1;let a="";i.content.forEach(c=>{a+=c.textContent});const l=tx(a,{defaultProtocol:n.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:(n.editor.commands.setMark(n.type,{href:l.href}),!0)}}})}const kO=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function cg(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(i=>{const s=typeof i=="string"?i:i.scheme;s&&t.push(s)}),!n||n.replace(kO,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))`,"i"))}const EO=Ft.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.protocols.forEach(n=>{if(typeof n=="string"){lg(n);return}lg(n.scheme,n.optionalSlashes)})},onDestroy(){vO()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!cg(e,this.options.protocols)?!1:null}}]},renderHTML({HTMLAttributes:n}){return cg(n.href,this.options.protocols)?["a",Ce(this.options.HTMLAttributes,n),0]:["a",Ce(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>e().setMark(this.name,n).setMeta("preventAutolink",!0).run(),toggleLink:n=>({chain:e})=>e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Mi({find:n=>{const e=[];if(n){const{validate:t}=this.options,i=tx(n).filter(s=>s.isLink&&t(s.value));i.length&&i.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[];return this.options.autolink&&n.push(SO({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:this.options.validate})),this.options.openOnClick===!0&&n.push(wO({type:this.type})),this.options.linkOnPaste&&n.push(AO({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),CO=He.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:n=>{const e=n.style.textAlign||this.options.defaultAlignment;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:n=>n.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${n.textAlign}`}}}}]},addCommands(){return{setTextAlign:n=>({commands:e})=>this.options.alignments.includes(n)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:n})).every(t=>t):!1,unsetTextAlign:()=>({commands:n})=>this.options.types.map(e=>n.resetAttributes(e,"textAlign")).every(e=>e)}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});String.prototype.deentitize=function(){var n=this.replace(/&amp;/g,"&");return n=n.replace(/&gt;/g,">"),n=n.replace(/&lt;/g,"<"),n=n.replace(/&quot;/g,'"'),n=n.replace(/&apos;/g,"'"),n=n.replace(/&amp;/g,"&"),n};const MO=(n,e=!0)=>{let t;return{updatedAt:Date.now(),init(){const i=this;t=new sT({element:this.$refs.element,extensions:[nO.configure({heading:{HTMLAttributes:{class:"text-2xl font-bold"}}}),EO.configure({openOnClick:!1,autolink:!1,defaultProtocol:"https"}),CO.configure({types:["heading","paragraph"]})],content:n.deentitize(),editable:e,autofocus:!0,editorProps:{attributes:{class:"w-full border-background-300 dark:border-background-700 dark:bg-background-900 dark:text-background-300 focus:outline-none focus:border-primary-500 dark:focus:border-primary-600 focus:ring-primary-500 dark:focus:ring-primary-600 rounded-md shadow-sm"}},onCreate({editor:s}){i.updatedAt=Date.now()},onUpdate({editor:s}){i.updatedAt=Date.now();const r=s.getHTML(),o=document.querySelector("#editor-content");o.value=r},onSelectionUpdate({editor:s}){i.updatedAt=Date.now()}})},isLoaded(){return t},isActive(i,s={}){return t.isActive(i,s)},toggleHeading(i){t.chain().toggleHeading(i).focus().run()},toggleTextAlign(i){console.log(i),t.chain().focus().setTextAlign(i).run()},toggleBold(){t.chain().focus().toggleBold().run()},toggleItalic(){t.chain().focus().toggleItalic().run()},toggleStrike(){t.chain().focus().toggleStrike().run()},toggleParagraph(){t.chain().focus().toggleParagraph().run()},toggleBulletList(){t.chain().focus().toggleBulletList().run()},toggleOrderedList(){t.chain().focus().toggleOrderedList().run()},toggleBlockquote(){t.chain().focus().toggleBlockquote().run()},toggleHorizontalRule(){t.chain().focus().setHorizontalRule().run()},toggleLink(){const i=t.getAttributes("link").href,s=window.prompt("URL",i);if(s!==null){if(s===""){t.chain().focus().extendMarkRange("link").unsetLink().run();return}t.chain().focus().extendMarkRange("link").setLink({href:s}).run()}},undo(){t.chain().focus().undo().run()},redo(){t.chain().focus().redo().run()},getActiveHeadingLevel(i){if(this.updatedAt===i)return t.isActive("heading",{level:1})?1:t.isActive("heading",{level:2})?2:t.isActive("heading",{level:3})?3:t.isActive("heading",{level:4})?4:t.isActive("heading",{level:5})?5:t.isActive("heading",{level:6})?6:0},getActiveTextalign(i){if(this.updatedAt===i){if(t.isActive({textAlign:"left"}))return"left";if(t.isActive({textAlign:"center"}))return"center";if(t.isActive({textAlign:"right"}))return"right";if(t.isActive({textAlign:"justify"}))return"justify"}}}},DO=n=>{const e=async i=>await(await fetch(`/events/location?location=${i}`)).json(),t=async i=>await(await fetch(`/events/coordinates?address=${i}`)).json();return{location:n||JSON.stringify({lat:0,lng:0}),city:"",address:"",postal_code:"",country:"",map:null,marker:null,init(){e(this.location).then(i=>{i.address_components.forEach(s=>{s.types.includes("route")&&(this.address=s.long_name+", "+this.address),s.types.includes("street_number")&&(this.address+=s.long_name),this.address===""&&s.types.includes("sublocality_level_2")&&(this.address=s.long_name),s.types.includes("locality")&&(this.city=s.long_name),this.city===""&&s.types.includes("postal_town")&&(this.city=s.long_name),this.city===""&&s.types.includes("administrative_area_level_2")&&(this.city=s.long_name),s.types.includes("country")&&(this.country=s.long_name),s.types.includes("postal_code")&&(this.postal_code=s.long_name)}),this.map=new google.maps.Map(document.getElementById("eventGoogleMap"),{center:i.geometry.location,zoom:15,height:"400px"}),this.marker=new google.maps.Marker({position:i.geometry.location,map:this.map})})},updateMap:function(){let i=this.address+", "+this.city+", "+this.postal_code+", "+this.country;t(i).then(s=>{this.map.setCenter(s),this.map.setZoom(15),this.marker!==null&&this.marker.setMap(null),this.marker=new google.maps.Marker({position:s,map:this.map}),this.location=JSON.stringify({lat:s.lat,lng:s.lng})})}}};var tc,I,nx,ix,gs,ni,ug,sx,rx,cl={},ox=[],TO=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function mn(n,e){for(var t in e)n[t]=e[t];return n}function ax(n){var e=n.parentNode;e&&e.removeChild(n)}function w(n,e,t){var i,s,r,o={};for(r in e)r=="key"?i=e[r]:r=="ref"?s=e[r]:o[r]=e[r];if(arguments.length>2&&(o.children=arguments.length>3?tc.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(r in n.defaultProps)o[r]===void 0&&(o[r]=n.defaultProps[r]);return Zo(n,o,i,s,null)}function Zo(n,e,t,i,s){var r={type:n,props:e,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s??++nx};return s==null&&I.vnode!=null&&I.vnode(r),r}function Xt(){return{current:null}}function fe(n){return n.children}function OO(n,e,t,i,s){var r;for(r in t)r==="children"||r==="key"||r in e||ul(n,r,null,t[r],i);for(r in e)s&&typeof e[r]!="function"||r==="children"||r==="key"||r==="value"||r==="checked"||t[r]===e[r]||ul(n,r,e[r],t[r],i)}function dg(n,e,t){e[0]==="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||TO.test(e)?t:t+"px"}function ul(n,e,t,i,s){var r;e:if(e==="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)t&&e in t||dg(n.style,e,"");if(t)for(e in t)i&&t[e]===i[e]||dg(n.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")r=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+r]=t,t?i||n.addEventListener(e,r?hg:fg,r):n.removeEventListener(e,r?hg:fg,r);else if(e!=="dangerouslySetInnerHTML"){if(s)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e.indexOf("-")==-1?n.removeAttribute(e):n.setAttribute(e,t))}}function fg(n){gs=!0;try{return this.l[n.type+!1](I.event?I.event(n):n)}finally{gs=!1}}function hg(n){gs=!0;try{return this.l[n.type+!0](I.event?I.event(n):n)}finally{gs=!1}}function ot(n,e){this.props=n,this.context=e}function Er(n,e){if(e==null)return n.__?Er(n.__,n.__.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?Er(n):null}function lx(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return lx(n)}}function RO(n){gs?setTimeout(n):sx(n)}function cd(n){(!n.__d&&(n.__d=!0)&&ni.push(n)&&!dl.__r++||ug!==I.debounceRendering)&&((ug=I.debounceRendering)||RO)(dl)}function dl(){var n,e,t,i,s,r,o,a;for(ni.sort(function(l,c){return l.__v.__b-c.__v.__b});n=ni.shift();)n.__d&&(e=ni.length,i=void 0,s=void 0,o=(r=(t=n).__v).__e,(a=t.__P)&&(i=[],(s=mn({},r)).__v=r.__v+1,Bf(a,r,s,t.__n,a.ownerSVGElement!==void 0,r.__h!=null?[o]:null,i,o??Er(r),r.__h),hx(i,r),r.__e!=o&&lx(r)),ni.length>e&&ni.sort(function(l,c){return l.__v.__b-c.__v.__b}));dl.__r=0}function cx(n,e,t,i,s,r,o,a,l,c){var u,d,f,h,p,m,g,b=i&&i.__k||ox,y=b.length;for(t.__k=[],u=0;u<e.length;u++)if((h=t.__k[u]=(h=e[u])==null||typeof h=="boolean"?null:typeof h=="string"||typeof h=="number"||typeof h=="bigint"?Zo(null,h,null,null,h):Array.isArray(h)?Zo(fe,{children:h},null,null,null):h.__b>0?Zo(h.type,h.props,h.key,h.ref?h.ref:null,h.__v):h)!=null){if(h.__=t,h.__b=t.__b+1,(f=b[u])===null||f&&h.key==f.key&&h.type===f.type)b[u]=void 0;else for(d=0;d<y;d++){if((f=b[d])&&h.key==f.key&&h.type===f.type){b[d]=void 0;break}f=null}Bf(n,h,f=f||cl,s,r,o,a,l,c),p=h.__e,(d=h.ref)&&f.ref!=d&&(g||(g=[]),f.ref&&g.push(f.ref,null,h),g.push(d,h.__c||p,h)),p!=null?(m==null&&(m=p),typeof h.type=="function"&&h.__k===f.__k?h.__d=l=ux(h,l,n):l=dx(n,h,f,b,p,l),typeof t.type=="function"&&(t.__d=l)):l&&f.__e==l&&l.parentNode!=n&&(l=Er(f))}for(t.__e=m,u=y;u--;)b[u]!=null&&(typeof t.type=="function"&&b[u].__e!=null&&b[u].__e==t.__d&&(t.__d=fx(i).nextSibling),gx(b[u],b[u]));if(g)for(u=0;u<g.length;u++)px(g[u],g[++u],g[++u])}function ux(n,e,t){for(var i,s=n.__k,r=0;s&&r<s.length;r++)(i=s[r])&&(i.__=n,e=typeof i.type=="function"?ux(i,e,t):dx(t,i,i,s,i.__e,e));return e}function fl(n,e){return e=e||[],n==null||typeof n=="boolean"||(Array.isArray(n)?n.some(function(t){fl(t,e)}):e.push(n)),e}function dx(n,e,t,i,s,r){var o,a,l;if(e.__d!==void 0)o=e.__d,e.__d=void 0;else if(t==null||s!=r||s.parentNode==null)e:if(r==null||r.parentNode!==n)n.appendChild(s),o=null;else{for(a=r,l=0;(a=a.nextSibling)&&l<i.length;l+=1)if(a==s)break e;n.insertBefore(s,r),o=r}return o!==void 0?o:s.nextSibling}function fx(n){var e,t,i;if(n.type==null||typeof n.type=="string")return n.__e;if(n.__k){for(e=n.__k.length-1;e>=0;e--)if((t=n.__k[e])&&(i=fx(t)))return i}return null}function Bf(n,e,t,i,s,r,o,a,l){var c,u,d,f,h,p,m,g,b,y,v,x,_,S,C,E=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(l=t.__h,a=e.__e=t.__e,e.__h=null,r=[a]),(c=I.__b)&&c(e);try{e:if(typeof E=="function"){if(g=e.props,b=(c=E.contextType)&&i[c.__c],y=c?b?b.props.value:c.__:i,t.__c?m=(u=e.__c=t.__c).__=u.__E:("prototype"in E&&E.prototype.render?e.__c=u=new E(g,y):(e.__c=u=new ot(g,y),u.constructor=E,u.render=NO),b&&b.sub(u),u.props=g,u.state||(u.state={}),u.context=y,u.__n=i,d=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),E.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=mn({},u.__s)),mn(u.__s,E.getDerivedStateFromProps(g,u.__s))),f=u.props,h=u.state,u.__v=e,d)E.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(E.getDerivedStateFromProps==null&&g!==f&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(g,y),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(g,u.__s,y)===!1||e.__v===t.__v){for(e.__v!==t.__v&&(u.props=g,u.state=u.__s,u.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(M){M&&(M.__=e)}),v=0;v<u._sb.length;v++)u.__h.push(u._sb[v]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(g,u.__s,y),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(f,h,p)})}if(u.context=y,u.props=g,u.__P=n,x=I.__r,_=0,"prototype"in E&&E.prototype.render){for(u.state=u.__s,u.__d=!1,x&&x(e),c=u.render(u.props,u.state,u.context),S=0;S<u._sb.length;S++)u.__h.push(u._sb[S]);u._sb=[]}else do u.__d=!1,x&&x(e),c=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++_<25);u.state=u.__s,u.getChildContext!=null&&(i=mn(mn({},i),u.getChildContext())),d||u.getSnapshotBeforeUpdate==null||(p=u.getSnapshotBeforeUpdate(f,h)),C=c!=null&&c.type===fe&&c.key==null?c.props.children:c,cx(n,Array.isArray(C)?C:[C],e,t,i,s,r,o,a,l),u.base=e.__e,e.__h=null,u.__h.length&&o.push(u),m&&(u.__E=u.__=null),u.__e=!1}else r==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=PO(t.__e,e,t,i,s,r,o,l);(c=I.diffed)&&c(e)}catch(M){e.__v=null,(l||r!=null)&&(e.__e=a,e.__h=!!l,r[r.indexOf(a)]=null),I.__e(M,e,t)}}function hx(n,e){I.__c&&I.__c(e,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(i){i.call(t)})}catch(i){I.__e(i,t.__v)}})}function PO(n,e,t,i,s,r,o,a){var l,c,u,d=t.props,f=e.props,h=e.type,p=0;if(h==="svg"&&(s=!0),r!=null){for(;p<r.length;p++)if((l=r[p])&&"setAttribute"in l==!!h&&(h?l.localName===h:l.nodeType===3)){n=l,r[p]=null;break}}if(n==null){if(h===null)return document.createTextNode(f);n=s?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h,f.is&&f),r=null,a=!1}if(h===null)d===f||a&&n.data===f||(n.data=f);else{if(r=r&&tc.call(n.childNodes),c=(d=t.props||cl).dangerouslySetInnerHTML,u=f.dangerouslySetInnerHTML,!a){if(r!=null)for(d={},p=0;p<n.attributes.length;p++)d[n.attributes[p].name]=n.attributes[p].value;(u||c)&&(u&&(c&&u.__html==c.__html||u.__html===n.innerHTML)||(n.innerHTML=u&&u.__html||""))}if(OO(n,f,d,s,a),u)e.__k=[];else if(p=e.props.children,cx(n,Array.isArray(p)?p:[p],e,t,i,s&&h!=="foreignObject",r,o,r?r[0]:t.__k&&Er(t,0),a),r!=null)for(p=r.length;p--;)r[p]!=null&&ax(r[p]);a||("value"in f&&(p=f.value)!==void 0&&(p!==n.value||h==="progress"&&!p||h==="option"&&p!==d.value)&&ul(n,"value",p,d.value,!1),"checked"in f&&(p=f.checked)!==void 0&&p!==n.checked&&ul(n,"checked",p,d.checked,!1))}return n}function px(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(i){I.__e(i,t)}}function gx(n,e,t){var i,s;if(I.unmount&&I.unmount(n),(i=n.ref)&&(i.current&&i.current!==n.__e||px(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){I.__e(r,e)}i.base=i.__P=null,n.__c=void 0}if(i=n.__k)for(s=0;s<i.length;s++)i[s]&&gx(i[s],e,t||typeof n.type!="function");t||n.__e==null||ax(n.__e),n.__=n.__e=n.__d=void 0}function NO(n,e,t){return this.constructor(n,t)}function Cr(n,e,t){var i,s,r;I.__&&I.__(n,e),s=(i=typeof t=="function")?null:e.__k,r=[],Bf(e,n=(!i&&t||e).__k=w(fe,null,[n]),s||cl,cl,e.ownerSVGElement!==void 0,!i&&t?[t]:s?null:e.firstChild?tc.call(e.childNodes):null,r,!i&&t?t:s?s.__e:e.firstChild,i),hx(r,n)}function IO(n,e){var t={__c:e="__cC"+rx++,__:n,Consumer:function(i,s){return i.children(s)},Provider:function(i){var s,r;return this.getChildContext||(s=[],(r={})[e]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&s.some(function(a){a.__e=!0,cd(a)})},this.sub=function(o){s.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){s.splice(s.indexOf(o),1),a&&a.call(o)}}),i.children}};return t.Provider.__=t.Consumer.contextType=t}tc=ox.slice,I={__e:function(n,e,t,i){for(var s,r,o;e=e.__;)if((s=e.__c)&&!s.__)try{if((r=s.constructor)&&r.getDerivedStateFromError!=null&&(s.setState(r.getDerivedStateFromError(n)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(n,i||{}),o=s.__d),o)return s.__E=s}catch(a){n=a}throw n}},nx=0,ix=function(n){return n!=null&&n.constructor===void 0},gs=!1,ot.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=mn({},this.state),typeof n=="function"&&(n=n(mn({},t),this.props)),n&&mn(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),cd(this))},ot.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),cd(this))},ot.prototype.render=fe,ni=[],sx=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,dl.__r=0,rx=0;var Pt,Hc,pg,mx=[],Vc=[],gg=I.__b,mg=I.__r,bg=I.diffed,yg=I.__c,vg=I.unmount;function LO(){for(var n;n=mx.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Xo),n.__H.__h.forEach(ud),n.__H.__h=[]}catch(e){n.__H.__h=[],I.__e(e,n.__v)}}I.__b=function(n){Pt=null,gg&&gg(n)},I.__r=function(n){mg&&mg(n);var e=(Pt=n.__c).__H;e&&(Hc===Pt?(e.__h=[],Pt.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=Vc,t.__N=t.i=void 0})):(e.__h.forEach(Xo),e.__h.forEach(ud),e.__h=[])),Hc=Pt},I.diffed=function(n){bg&&bg(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(mx.push(e)!==1&&pg===I.requestAnimationFrame||((pg=I.requestAnimationFrame)||BO)(LO)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==Vc&&(t.__=t.__V),t.i=void 0,t.__V=Vc})),Hc=Pt=null},I.__c=function(n,e){e.some(function(t){try{t.__h.forEach(Xo),t.__h=t.__h.filter(function(i){return!i.__||ud(i)})}catch(i){e.some(function(s){s.__h&&(s.__h=[])}),e=[],I.__e(i,t.__v)}}),yg&&yg(n,e)},I.unmount=function(n){vg&&vg(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(i){try{Xo(i)}catch(s){e=s}}),t.__H=void 0,e&&I.__e(e,t.__v))};var xg=typeof requestAnimationFrame=="function";function BO(n){var e,t=function(){clearTimeout(i),xg&&cancelAnimationFrame(e),setTimeout(n)},i=setTimeout(t,100);xg&&(e=requestAnimationFrame(t))}function Xo(n){var e=Pt,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Pt=e}function ud(n){var e=Pt;n.__c=n.__(),Pt=e}function FO(n,e){for(var t in e)n[t]=e[t];return n}function _g(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var i in e)if(i!=="__source"&&n[i]!==e[i])return!0;return!1}function Sg(n){this.props=n}(Sg.prototype=new ot).isPureReactComponent=!0,Sg.prototype.shouldComponentUpdate=function(n,e){return _g(this.props,n)||_g(this.state,e)};var wg=I.__b;I.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),wg&&wg(n)};var zO=I.__e;I.__e=function(n,e,t,i){if(n.then){for(var s,r=e;r=r.__;)if((s=r.__c)&&s.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),s.__c(n,e)}zO(n,e,t,i)};var Ag=I.unmount;function bx(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),n.__c.__H=null),(n=FO({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c=null),n.__k=n.__k&&n.__k.map(function(i){return bx(i,e,t)})),n}function yx(n,e,t){return n&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(i){return yx(i,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.insertBefore(n.__e,n.__d),n.__c.__e=!0,n.__c.__P=t)),n}function jc(){this.__u=0,this.t=null,this.__b=null}function vx(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function yo(){this.u=null,this.o=null}I.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&n.__h===!0&&(n.type=null),Ag&&Ag(n)},(jc.prototype=new ot).__c=function(n,e){var t=e.__c,i=this;i.t==null&&(i.t=[]),i.t.push(t);var s=vx(i.__v),r=!1,o=function(){r||(r=!0,t.__R=null,s?s(a):a())};t.__R=o;var a=function(){if(!--i.__u){if(i.state.__a){var c=i.state.__a;i.__v.__k[0]=yx(c,c.__c.__P,c.__c.__O)}var u;for(i.setState({__a:i.__b=null});u=i.t.pop();)u.forceUpdate()}},l=e.__h===!0;i.__u++||l||i.setState({__a:i.__b=i.__v.__k[0]}),n.then(o,o)},jc.prototype.componentWillUnmount=function(){this.t=[]},jc.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=bx(this.__b,t,i.__O=i.__P)}this.__b=null}var s=e.__a&&w(fe,null,n.fallback);return s&&(s.__h=null),[w(fe,null,e.__a?null:n.children),s]};var kg=function(n,e,t){if(++t[1]===t[0]&&n.o.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.o.size))for(t=n.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.u=t=t[2]}};function HO(n){return this.getChildContext=function(){return n.context},n.children}function VO(n){var e=this,t=n.i;e.componentWillUnmount=function(){Cr(null,e.l),e.l=null,e.i=null},e.i&&e.i!==t&&e.componentWillUnmount(),n.__v?(e.l||(e.i=t,e.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(i){this.childNodes.push(i),e.i.appendChild(i)},insertBefore:function(i,s){this.childNodes.push(i),e.i.appendChild(i)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),e.i.removeChild(i)}}),Cr(w(HO,{context:e.context},n.__v),e.l)):e.l&&e.componentWillUnmount()}function jO(n,e){var t=w(VO,{__v:n,i:e});return t.containerInfo=e,t}(yo.prototype=new ot).__a=function(n){var e=this,t=vx(e.__v),i=e.o.get(n);return i[0]++,function(s){var r=function(){e.props.revealOrder?(i.push(s),kg(e,n,i)):s()};t?t(r):r()}},yo.prototype.render=function(n){this.u=null,this.o=new Map;var e=fl(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return n.children},yo.prototype.componentDidUpdate=yo.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(e,t){kg(n,t,e)})};var WO=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,UO=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,$O=typeof document<"u",qO=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(n)};ot.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(ot.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var Eg=I.event;function GO(){}function KO(){return this.cancelBubble}function YO(){return this.defaultPrevented}I.event=function(n){return Eg&&(n=Eg(n)),n.persist=GO,n.isPropagationStopped=KO,n.isDefaultPrevented=YO,n.nativeEvent=n};var Cg={configurable:!0,get:function(){return this.class}},Mg=I.vnode;I.vnode=function(n){var e=n.type,t=n.props,i=t;if(typeof e=="string"){var s=e.indexOf("-")===-1;for(var r in i={},t){var o=t[r];$O&&r==="children"&&e==="noscript"||r==="value"&&"defaultValue"in t&&o==null||(r==="defaultValue"&&"value"in t&&t.value==null?r="value":r==="download"&&o===!0?o="":/ondoubleclick/i.test(r)?r="ondblclick":/^onchange(textarea|input)/i.test(r+e)&&!qO(t.type)?r="oninput":/^onfocus$/i.test(r)?r="onfocusin":/^onblur$/i.test(r)?r="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(r)?r=r.toLowerCase():s&&UO.test(r)?r=r.replace(/[A-Z0-9]/g,"-$&").toLowerCase():o===null&&(o=void 0),/^oninput$/i.test(r)&&(r=r.toLowerCase(),i[r]&&(r="oninputCapture")),i[r]=o)}e=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=fl(t.children).forEach(function(a){a.props.selected=i.value.indexOf(a.props.value)!=-1})),e=="select"&&i.defaultValue!=null&&(i.value=fl(t.children).forEach(function(a){a.props.selected=i.multiple?i.defaultValue.indexOf(a.props.value)!=-1:i.defaultValue==a.props.value})),n.props=i,t.class!=t.className&&(Cg.enumerable="className"in t,t.className!=null&&(i.class=t.className),Object.defineProperty(i,"className",Cg))}n.$$typeof=WO,Mg&&Mg(n)};var Dg=I.__r;I.__r=function(n){Dg&&Dg(n),n.__c};const xx=[],dd=new Map;function _x(n){xx.push(n),dd.forEach(e=>{wx(e,n)})}function JO(n){n.isConnected&&n.getRootNode&&Sx(n.getRootNode())}function Sx(n){let e=dd.get(n);if(!e||!e.isConnected){if(e=n.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const t=ZO();t&&(e.nonce=t);const i=n===document?document.head:n,s=n===document?i.querySelector("script,link[rel=stylesheet],link[as=style],style"):i.firstChild;i.insertBefore(e,s)}dd.set(n,e),QO(e)}}function QO(n){for(const e of xx)wx(n,e)}function wx(n,e){const{sheet:t}=n,i=t.cssRules.length;e.split("}").forEach((s,r)=>{s=s.trim(),s&&t.insertRule(s+"}",i+r)})}let Wc;function ZO(){return Wc===void 0&&(Wc=XO()),Wc}function XO(){const n=document.querySelector('meta[name="csp-nonce"]');if(n&&n.hasAttribute("content"))return n.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&Sx(document);var eR=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';_x(eR);class Ff{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:t}=this;t[e]=(t[e]||0)+1,this.clearTimeout()}resume(e="",t){let{pauseDepths:i}=this;e in i&&(t?delete i[e]:(i[e]-=1,i[e]<=0&&delete i[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function tR(n){n.parentNode&&n.parentNode.removeChild(n)}function Gt(n,e){if(n.closest)return n.closest(e);if(!document.documentElement.contains(n))return null;do{if(nR(n,e))return n;n=n.parentElement||n.parentNode}while(n!==null&&n.nodeType===1);return null}function nR(n,e){return(n.matches||n.matchesSelector||n.msMatchesSelector).call(n,e)}function iR(n,e){let t=n instanceof HTMLElement?[n]:n,i=[];for(let s=0;s<t.length;s+=1){let r=t[s].querySelectorAll(e);for(let o=0;o<r.length;o+=1)i.push(r[o])}return i}const sR=/(top|left|right|bottom|width|height)$/i;function rR(n,e){for(let t in e)Ax(n,t,e[t])}function Ax(n,e,t){t==null?n.style[e]="":typeof t=="number"&&sR.test(e)?n.style[e]=`${t}px`:n.style[e]=t}function oR(n){var e,t;return(t=(e=n.composedPath)===null||e===void 0?void 0:e.call(n)[0])!==null&&t!==void 0?t:n.target}let Tg=0;function nc(){return Tg+=1,"fc-dom-"+Tg}function aR(n,e){return t=>{let i=Gt(t.target,n);i&&e.call(i,t,i)}}function kx(n,e,t,i){let s=aR(t,i);return n.addEventListener(e,s),()=>{n.removeEventListener(e,s)}}function lR(n,e,t,i){let s;return kx(n,"mouseover",e,(r,o)=>{if(o!==s){s=o,t(r,o);let a=l=>{s=null,i(l,o),o.removeEventListener("mouseleave",a)};o.addEventListener("mouseleave",a)}})}function Ex(n){return Object.assign({onClick:n},Cx(n))}function Cx(n){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(n(e),e.preventDefault())}}}let Og=0;function Ni(){return Og+=1,String(Og)}function cR(n){let e=[],t=[],i,s;for(typeof n=="string"?t=n.split(/\s*,\s*/):typeof n=="function"?t=[n]:Array.isArray(n)&&(t=n),i=0;i<t.length;i+=1)s=t[i],typeof s=="string"?e.push(s.charAt(0)==="-"?{field:s.substring(1),order:-1}:{field:s,order:1}):typeof s=="function"&&e.push({func:s});return e}function uR(n,e,t){let i,s;for(i=0;i<t.length;i+=1)if(s=dR(n,e,t[i]),s)return s;return 0}function dR(n,e,t){return t.func?t.func(n,e):fR(n[t.field],e[t.field])*(t.order||1)}function fR(n,e){return!n&&!e?0:e==null?-1:n==null?1:typeof n=="string"||typeof e=="string"?String(n).localeCompare(String(e)):n-e}function Uc(n,e){let t=String(n);return"000".substr(0,e-t.length)+t}function rr(n,e,t){return typeof n=="function"?n(...e):typeof n=="string"?e.reduce((i,s,r)=>i.replace("$"+r,s||""),n):t}function $c(n){return n%1===0}function hR(n){let e=n.querySelector(".fc-scrollgrid-shrink-frame"),t=n.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!t)throw new Error("needs fc-scrollgrid-shrink-cushion className");return n.getBoundingClientRect().width-e.getBoundingClientRect().width+t.getBoundingClientRect().width}const pR=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function J(n,e){return typeof n=="string"?gR(n):typeof n=="object"&&n?Rg(n):typeof n=="number"?Rg({[e||"milliseconds"]:n}):null}function gR(n){let e=pR.exec(n);if(e){let t=e[1]?-1:1;return{years:0,months:0,days:t*(e[2]?parseInt(e[2],10):0),milliseconds:t*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function Rg(n){let e={years:n.years||n.year||0,months:n.months||n.month||0,days:n.days||n.day||0,milliseconds:(n.hours||n.hour||0)*60*60*1e3+(n.minutes||n.minute||0)*60*1e3+(n.seconds||n.second||0)*1e3+(n.milliseconds||n.millisecond||n.ms||0)},t=n.weeks||n.week;return t&&(e.days+=t*7,e.specifiedWeeks=!0),e}function mR(n,e){return n.years===e.years&&n.months===e.months&&n.days===e.days&&n.milliseconds===e.milliseconds}function bR(n,e){return{years:n.years-e.years,months:n.months-e.months,days:n.days-e.days,milliseconds:n.milliseconds-e.milliseconds}}function yR(n){return is(n)/365}function vR(n){return is(n)/30}function is(n){return Mr(n)/864e5}function Mr(n){return n.years*(365*864e5)+n.months*(30*864e5)+n.days*864e5+n.milliseconds}function fd(n){let e=n.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return n.days?n.specifiedWeeks&&n.days%7===0?{unit:"week",value:n.days/7}:{unit:"day",value:n.days}:n.months?{unit:"month",value:n.months}:n.years?{unit:"year",value:n.years}:{unit:"millisecond",value:0}}function Pn(n,e,t){if(n===e)return!0;let i=n.length,s;if(i!==e.length)return!1;for(s=0;s<i;s+=1)if(!(t?t(n[s],e[s]):n[s]===e[s]))return!1;return!0}const xR=["sun","mon","tue","wed","thu","fri","sat"];function Pg(n,e){let t=bn(n);return t[2]+=e*7,Qe(t)}function ze(n,e){let t=bn(n);return t[2]+=e,Qe(t)}function Nn(n,e){let t=bn(n);return t[6]+=e,Qe(t)}function _R(n,e){return Cs(n,e)/7}function Cs(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60*24)}function SR(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60)}function wR(n,e){return(e.valueOf()-n.valueOf())/(1e3*60)}function AR(n,e){return(e.valueOf()-n.valueOf())/1e3}function kR(n,e){let t=oe(n),i=oe(e);return{years:0,months:0,days:Math.round(Cs(t,i)),milliseconds:e.valueOf()-i.valueOf()-(n.valueOf()-t.valueOf())}}function ER(n,e){let t=hl(n,e);return t!==null&&t%7===0?t/7:null}function hl(n,e){return yn(n)===yn(e)?Math.round(Cs(n,e)):null}function oe(n){return Qe([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()])}function CR(n){return Qe([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours()])}function MR(n){return Qe([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes()])}function DR(n){return Qe([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds()])}function TR(n,e,t){let i=n.getUTCFullYear(),s=qc(n,i,e,t);if(s<1)return qc(n,i-1,e,t);let r=qc(n,i+1,e,t);return r>=1?Math.min(s,r):s}function qc(n,e,t,i){let s=Qe([e,0,1+OR(e,t,i)]),r=oe(n),o=Math.round(Cs(s,r));return Math.floor(o/7)+1}function OR(n,e,t){let i=7+e-t;return-((7+Qe([n,0,i]).getUTCDay()-e)%7)+i-1}function Ng(n){return[n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()]}function Ig(n){return new Date(n[0],n[1]||0,n[2]==null?1:n[2],n[3]||0,n[4]||0,n[5]||0)}function bn(n){return[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]}function Qe(n){return n.length===1&&(n=n.concat([0])),new Date(Date.UTC(...n))}function Mx(n){return!isNaN(n.valueOf())}function yn(n){return n.getUTCHours()*1e3*60*60+n.getUTCMinutes()*1e3*60+n.getUTCSeconds()*1e3+n.getUTCMilliseconds()}function RR(n,e,t=!1){let i=n.toISOString();return i=i.replace(".000",""),t&&(i=i.replace("T00:00:00Z","")),i.length>10&&(e==null?i=i.replace("Z",""):e!==0&&(i=i.replace("Z",Hf(e,!0)))),i}function zf(n){return n.toISOString().replace(/T.*$/,"")}function PR(n){return n.toISOString().match(/^\d{4}-\d{2}/)[0]}function Hf(n,e=!1){let t=n<0?"-":"+",i=Math.abs(n),s=Math.floor(i/60),r=Math.round(i%60);return e?`${t+Uc(s,2)}:${Uc(r,2)}`:`GMT${t}${s}${r?`:${Uc(r,2)}`:""}`}function K(n,e,t){let i,s;return function(...r){if(!i)s=n.apply(this,r);else if(!Pn(i,r)){let o=n.apply(this,r);(!e||!e(o,s))&&(s=o)}return i=r,s}}function ea(n,e,t){let i,s;return r=>(i?zt(i,r)||(s=n.call(this,r)):s=n.call(this,r),i=r,s)}const Lg={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},pl={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},vo=/\s*([ap])\.?m\.?/i,NR=/,/g,IR=/\s+/g,LR=/\u200e/g,BR=/UTC|GMT/;class FR{constructor(e){let t={},i={},s=0;for(let r in e)r in Lg?(i[r]=e[r],s=Math.max(Lg[r],s)):(t[r]=e[r],r in pl&&(s=Math.max(pl[r],s)));this.standardDateProps=t,this.extendedSettings=i,this.severity=s,this.buildFormattingFunc=K(Bg)}format(e,t){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,t)(e)}formatRange(e,t,i,s){let{standardDateProps:r,extendedSettings:o}=this,a=UR(e.marker,t.marker,i.calendarSystem);if(!a)return this.format(e,i);let l=a;l>1&&(r.year==="numeric"||r.year==="2-digit")&&(r.month==="numeric"||r.month==="2-digit")&&(r.day==="numeric"||r.day==="2-digit")&&(l=1);let c=this.format(e,i),u=this.format(t,i);if(c===u)return c;let d=$R(r,l),f=Bg(d,o,i),h=f(e),p=f(t),m=qR(c,h,u,p),g=o.separator||s||i.defaultSeparator||"";return m?m.before+h+g+p+m.after:c+g+u}getLargestUnit(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function Bg(n,e,t){let i=Object.keys(n).length;return i===1&&n.timeZoneName==="short"?s=>Hf(s.timeZoneOffset):i===0&&e.week?s=>WR(t.computeWeekNumber(s.marker),t.weekText,t.weekTextLong,t.locale,e.week):zR(n,e,t)}function zR(n,e,t){n=Object.assign({},n),e=Object.assign({},e),HR(n,e),n.timeZone="UTC";let i=new Intl.DateTimeFormat(t.locale.codes,n),s;if(e.omitZeroMinute){let r=Object.assign({},n);delete r.minute,s=new Intl.DateTimeFormat(t.locale.codes,r)}return r=>{let{marker:o}=r,a;s&&!o.getUTCMinutes()?a=s:a=i;let l=a.format(o);return VR(l,r,n,e,t)}}function HR(n,e){n.timeZoneName&&(n.hour||(n.hour="2-digit"),n.minute||(n.minute="2-digit")),n.timeZoneName==="long"&&(n.timeZoneName="short"),e.omitZeroMinute&&(n.second||n.millisecond)&&delete e.omitZeroMinute}function VR(n,e,t,i,s){return n=n.replace(LR,""),t.timeZoneName==="short"&&(n=jR(n,s.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":Hf(e.timeZoneOffset))),i.omitCommas&&(n=n.replace(NR,"").trim()),i.omitZeroMinute&&(n=n.replace(":00","")),i.meridiem===!1?n=n.replace(vo,"").trim():i.meridiem==="narrow"?n=n.replace(vo,(r,o)=>o.toLocaleLowerCase()):i.meridiem==="short"?n=n.replace(vo,(r,o)=>`${o.toLocaleLowerCase()}m`):i.meridiem==="lowercase"&&(n=n.replace(vo,r=>r.toLocaleLowerCase())),n=n.replace(IR," "),n=n.trim(),n}function jR(n,e){let t=!1;return n=n.replace(BR,()=>(t=!0,e)),t||(n+=` ${e}`),n}function WR(n,e,t,i,s){let r=[];return s==="long"?r.push(t):(s==="short"||s==="narrow")&&r.push(e),(s==="long"||s==="short")&&r.push(" "),r.push(i.simpleNumberFormat.format(n)),i.options.direction==="rtl"&&r.reverse(),r.join("")}function UR(n,e,t){return t.getMarkerYear(n)!==t.getMarkerYear(e)?5:t.getMarkerMonth(n)!==t.getMarkerMonth(e)?4:t.getMarkerDay(n)!==t.getMarkerDay(e)?2:yn(n)!==yn(e)?1:0}function $R(n,e){let t={};for(let i in n)(!(i in pl)||pl[i]<=e)&&(t[i]=n[i]);return t}function qR(n,e,t,i){let s=0;for(;s<n.length;){let r=n.indexOf(e,s);if(r===-1)break;let o=n.substr(0,r);s=r+e.length;let a=n.substr(s),l=0;for(;l<t.length;){let c=t.indexOf(i,l);if(c===-1)break;let u=t.substr(0,c);l=c+i.length;let d=t.substr(l);if(o===u&&a===d)return{before:o,after:a}}}return null}function Fg(n,e){let t=e.markerToArray(n.marker);return{marker:n.marker,timeZoneOffset:n.timeZoneOffset,array:t,year:t[0],month:t[1],day:t[2],hour:t[3],minute:t[4],second:t[5],millisecond:t[6]}}function gl(n,e,t,i){let s=Fg(n,t.calendarSystem),r=e?Fg(e,t.calendarSystem):null;return{date:s,start:s,end:r,timeZone:t.timeZone,localeCodes:t.locale.codes,defaultSeparator:i||t.defaultSeparator}}class GR{constructor(e){this.cmdStr=e}format(e,t,i){return t.cmdFormatter(this.cmdStr,gl(e,null,t,i))}formatRange(e,t,i,s){return i.cmdFormatter(this.cmdStr,gl(e,t,i,s))}}class KR{constructor(e){this.func=e}format(e,t,i){return this.func(gl(e,null,t,i))}formatRange(e,t,i,s){return this.func(gl(e,t,i,s))}}function Se(n){return typeof n=="object"&&n?new FR(n):typeof n=="string"?new GR(n):typeof n=="function"?new KR(n):null}const zg={navLinkDayClick:k,navLinkWeekClick:k,duration:J,bootstrapFontAwesome:k,buttonIcons:k,customButtons:k,defaultAllDayEventDuration:J,defaultTimedEventDuration:J,nextDayThreshold:J,scrollTime:J,scrollTimeReset:Boolean,slotMinTime:J,slotMaxTime:J,dayPopoverFormat:Se,slotDuration:J,snapDuration:J,headerToolbar:k,footerToolbar:k,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Se,dayHeaderClassNames:k,dayHeaderContent:k,dayHeaderDidMount:k,dayHeaderWillUnmount:k,dayCellClassNames:k,dayCellContent:k,dayCellDidMount:k,dayCellWillUnmount:k,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:k,weekNumbers:Boolean,weekNumberClassNames:k,weekNumberContent:k,weekNumberDidMount:k,weekNumberWillUnmount:k,editable:Boolean,viewClassNames:k,viewDidMount:k,viewWillUnmount:k,nowIndicator:Boolean,nowIndicatorClassNames:k,nowIndicatorContent:k,nowIndicatorDidMount:k,nowIndicatorWillUnmount:k,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:k,locale:k,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:k,eventOrder:cR,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:k,contentHeight:k,direction:String,weekNumberFormat:Se,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:k,initialDate:k,now:k,eventDataTransform:k,stickyHeaderDates:k,stickyFooterScrollbar:k,viewHeight:k,defaultAllDay:Boolean,eventSourceFailure:k,eventSourceSuccess:k,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:k,eventConstraint:k,eventAllow:k,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:k,eventContent:k,eventDidMount:k,eventWillUnmount:k,selectConstraint:k,selectOverlap:k,selectAllow:k,droppable:Boolean,unselectCancel:String,slotLabelFormat:k,slotLaneClassNames:k,slotLaneContent:k,slotLaneDidMount:k,slotLaneWillUnmount:k,slotLabelClassNames:k,slotLabelContent:k,slotLabelDidMount:k,slotLabelWillUnmount:k,dayMaxEvents:k,dayMaxEventRows:k,dayMinWidth:Number,slotLabelInterval:J,allDayText:String,allDayClassNames:k,allDayContent:k,allDayDidMount:k,allDayWillUnmount:k,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Se,rerenderDelay:Number,moreLinkText:k,moreLinkHint:k,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:k,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:J,hiddenDays:k,fixedWeekCount:Boolean,validRange:k,visibleRange:k,titleFormat:k,eventInteractive:Boolean,noEventsText:String,viewHint:k,navLinkHint:k,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:k,moreLinkClassNames:k,moreLinkContent:k,moreLinkDidMount:k,moreLinkWillUnmount:k,monthStartFormat:Se,handleCustomRendering:k,customRenderingMetaMap:k,customRenderingReplaces:Boolean},or={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"}},Hg={datesSet:k,eventsSet:k,eventAdd:k,eventChange:k,eventRemove:k,windowResize:k,eventClick:k,eventMouseEnter:k,eventMouseLeave:k,select:k,unselect:k,loading:k,_unmount:k,_beforeprint:k,_afterprint:k,_noEventDrop:k,_noEventResize:k,_resize:k,_scrollRequest:k},Vg={buttonText:k,buttonHints:k,views:k,plugins:k,initialEvents:k,events:k,eventSources:k},Jn={headerToolbar:Qn,footerToolbar:Qn,buttonText:Qn,buttonHints:Qn,buttonIcons:Qn,dateIncrement:Qn,plugins:xo,events:xo,eventSources:xo,resources:xo};function Qn(n,e){return typeof n=="object"&&typeof e=="object"&&n&&e?zt(n,e):n===e}function xo(n,e){return Array.isArray(n)&&Array.isArray(e)?Pn(n,e):n===e}const YR={type:String,component:k,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:k,usesMinMaxTime:Boolean,classNames:k,content:k,didMount:k,willUnmount:k};function Gc(n){return jf(n,Jn)}function Vf(n,e){let t={},i={};for(let s in e)s in n&&(t[s]=e[s](n[s]));for(let s in n)s in e||(i[s]=n[s]);return{refined:t,extra:i}}function k(n){return n}const{hasOwnProperty:ml}=Object.prototype;function jf(n,e){let t={};if(e){for(let i in e)if(e[i]===Qn){let s=[];for(let r=n.length-1;r>=0;r-=1){let o=n[r][i];if(typeof o=="object"&&o)s.unshift(o);else if(o!==void 0){t[i]=o;break}}s.length&&(t[i]=jf(s))}}for(let i=n.length-1;i>=0;i-=1){let s=n[i];for(let r in s)r in t||(t[r]=s[r])}return t}function ms(n,e){let t={};for(let i in n)e(n[i],i)&&(t[i]=n[i]);return t}function Gr(n,e){let t={};for(let i in n)t[i]=e(n[i],i);return t}function Dx(n){let e={};for(let t of n)e[t]=!0;return e}function Wf(n){let e=[];for(let t in n)e.push(n[t]);return e}function zt(n,e){if(n===e)return!0;for(let t in n)if(ml.call(n,t)&&!(t in e))return!1;for(let t in e)if(ml.call(e,t)&&n[t]!==e[t])return!1;return!0}const JR=/^on[A-Z]/;function QR(n,e){const t=hd(n,e);for(let i of t)if(!JR.test(i))return!1;return!0}function hd(n,e){let t=[];for(let i in n)ml.call(n,i)&&(i in e||t.push(i));for(let i in e)ml.call(e,i)&&n[i]!==e[i]&&t.push(i);return t}function Kc(n,e,t={}){if(n===e)return!0;for(let i in e)if(!(i in n&&ZR(n[i],e[i],t[i])))return!1;for(let i in n)if(!(i in e))return!1;return!0}function ZR(n,e,t){return n===e||t===!0?!0:t?t(n,e):!1}function XR(n,e=0,t,i=1){let s=[];t==null&&(t=Object.keys(n).length);for(let r=e;r<t;r+=i){let o=n[r];o!==void 0&&s.push(o)}return s}let Tx={};function eP(n,e){Tx[n]=e}function tP(n){return new Tx[n]}class nP{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return Qe(e)}markerToArray(e){return bn(e)}}eP("gregory",nP);const iP=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function sP(n){let e=iP.exec(n);if(e){let t=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(Mx(t)){let i=null;return e[13]&&(i=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:t,isTimeUnspecified:!e[6],timeZoneOffset:i}}}return null}class rP{constructor(e){let t=this.timeZone=e.timeZone,i=t!=="local"&&t!=="UTC";e.namedTimeZoneImpl&&i&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(t)),this.canComputeOffset=!!(!i||this.namedTimeZoneImpl),this.calendarSystem=tP(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let t=this.createMarkerMeta(e);return t===null?null:t.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):Qe(Ng(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let t=null;return typeof e=="number"?t=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(t=this.timestampToMarker(e))):Array.isArray(e)&&(t=Qe(e)),t===null||!Mx(t)?null:{marker:t,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let t=sP(e);if(t===null)return null;let{marker:i}=t,s=null;return t.timeZoneOffset!==null&&(this.canComputeOffset?i=this.timestampToMarker(i.valueOf()-t.timeZoneOffset*60*1e3):s=t.timeZoneOffset),{marker:i,isTimeUnspecified:t.isTimeUnspecified,forcedTzo:s}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,t){let i=this.calendarSystem.markerToArray(e);return i[0]+=t.years,i[1]+=t.months,i[2]+=t.days,i[6]+=t.milliseconds,this.calendarSystem.arrayToMarker(i)}subtract(e,t){let i=this.calendarSystem.markerToArray(e);return i[0]-=t.years,i[1]-=t.months,i[2]-=t.days,i[6]-=t.milliseconds,this.calendarSystem.arrayToMarker(i)}addYears(e,t){let i=this.calendarSystem.markerToArray(e);return i[0]+=t,this.calendarSystem.arrayToMarker(i)}addMonths(e,t){let i=this.calendarSystem.markerToArray(e);return i[1]+=t,this.calendarSystem.arrayToMarker(i)}diffWholeYears(e,t){let{calendarSystem:i}=this;return yn(e)===yn(t)&&i.getMarkerDay(e)===i.getMarkerDay(t)&&i.getMarkerMonth(e)===i.getMarkerMonth(t)?i.getMarkerYear(t)-i.getMarkerYear(e):null}diffWholeMonths(e,t){let{calendarSystem:i}=this;return yn(e)===yn(t)&&i.getMarkerDay(e)===i.getMarkerDay(t)?i.getMarkerMonth(t)-i.getMarkerMonth(e)+(i.getMarkerYear(t)-i.getMarkerYear(e))*12:null}greatestWholeUnit(e,t){let i=this.diffWholeYears(e,t);return i!==null?{unit:"year",value:i}:(i=this.diffWholeMonths(e,t),i!==null?{unit:"month",value:i}:(i=ER(e,t),i!==null?{unit:"week",value:i}:(i=hl(e,t),i!==null?{unit:"day",value:i}:(i=SR(e,t),$c(i)?{unit:"hour",value:i}:(i=wR(e,t),$c(i)?{unit:"minute",value:i}:(i=AR(e,t),$c(i)?{unit:"second",value:i}:{unit:"millisecond",value:t.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,t,i){let s;return i.years&&(s=this.diffWholeYears(e,t),s!==null)?s/yR(i):i.months&&(s=this.diffWholeMonths(e,t),s!==null)?s/vR(i):i.days&&(s=hl(e,t),s!==null)?s/is(i):(t.valueOf()-e.valueOf())/Mr(i)}startOf(e,t){return t==="year"?this.startOfYear(e):t==="month"?this.startOfMonth(e):t==="week"?this.startOfWeek(e):t==="day"?oe(e):t==="hour"?CR(e):t==="minute"?MR(e):t==="second"?DR(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):TR(e,this.weekDow,this.weekDoy)}format(e,t,i={}){return t.format({marker:e,timeZoneOffset:i.forcedTzo!=null?i.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,t,i,s={}){return s.isEndExclusive&&(t=Nn(t,-1)),i.formatRange({marker:e,timeZoneOffset:s.forcedStartTzo!=null?s.forcedStartTzo:this.offsetForMarker(e)},{marker:t,timeZoneOffset:s.forcedEndTzo!=null?s.forcedEndTzo:this.offsetForMarker(t)},this,s.defaultSeparator)}formatIso(e,t={}){let i=null;return t.omitTimeZoneOffset||(t.forcedTzo!=null?i=t.forcedTzo:i=this.offsetForMarker(e)),RR(e,i,t.omitTime)}timestampToMarker(e){return this.timeZone==="local"?Qe(Ng(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):Qe(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-Ig(bn(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(bn(e)):null}toDate(e,t){return this.timeZone==="local"?Ig(bn(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(bn(e))*1e3*60):new Date(e.valueOf()-(t||0))}}class Kr{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let t,i;if(typeof e=="object"&&e){t=Object.assign({},this.iconClasses);for(i in e)t[i]=this.applyIconOverridePrefix(e[i]);this.iconClasses=t}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let t=this.iconOverridePrefix;return t&&e.indexOf(t)!==0&&(e=t+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,t){let i;return t&&this.rtlIconClasses?i=this.rtlIconClasses[e]||this.iconClasses[e]:i=this.iconClasses[e],i?`${this.baseIconClass} ${i}`:""}getCustomButtonIconClass(e){let t;return this.iconOverrideCustomButtonOption&&(t=e[this.iconOverrideCustomButtonOption],t)?`${this.baseIconClass} ${this.applyIconOverridePrefix(t)}`:""}}Kr.prototype.classes={};Kr.prototype.iconClasses={};Kr.prototype.baseIconClass="";Kr.prototype.iconOverridePrefix="";function bl(n){n();let e=I.debounceRendering,t=[];function i(s){t.push(s)}for(I.debounceRendering=i,Cr(w(oP,{}),document.createElement("div"));t.length;)t.shift()();I.debounceRendering=e}class oP extends ot{render(){return w("div",{})}componentDidMount(){this.setState({})}}function Ox(n){let e=IO(n),t=e.Provider;return e.Provider=function(){let i=!this.getChildContext,s=t.apply(this,arguments);if(i){let r=[];this.shouldComponentUpdate=o=>{this.props.value!==o.value&&r.forEach(a=>{a.context=o.value,a.forceUpdate()})},this.sub=o=>{r.push(o);let a=o.componentWillUnmount;o.componentWillUnmount=()=>{r.splice(r.indexOf(o),1),a&&a.call(o)}}}return s},e}class aP{constructor(e,t,i,s){this.execFunc=e,this.emitter=t,this.scrollTime=i,this.scrollTimeReset=s,this.handleScrollRequest=r=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},r),this.drain()},t.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const Ii=Ox({});function lP(n,e,t,i,s,r,o,a,l,c,u,d,f){return{dateEnv:s,options:t,pluginHooks:o,emitter:c,dispatch:a,getCurrentData:l,calendarApi:u,viewSpec:n,viewApi:e,dateProfileGenerator:i,theme:r,isRtl:t.direction==="rtl",addResizeHandler(h){c.on("_resize",h)},removeResizeHandler(h){c.off("_resize",h)},createScrollResponder(h){return new aP(h,c,J(t.scrollTime),t.scrollTimeReset)},registerInteractiveComponent:d,unregisterInteractiveComponent:f}}class Li extends ot{shouldComponentUpdate(e,t){return this.debug&&console.log(hd(e,this.props),hd(t,this.state)),!Kc(this.props,e,this.propEquality)||!Kc(this.state,t,this.stateEquality)}safeSetState(e){Kc(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}Li.addPropsEquality=cP;Li.addStateEquality=uP;Li.contextType=Ii;Li.prototype.propEquality={};Li.prototype.stateEquality={};class ae extends Li{}ae.contextType=Ii;function cP(n){let e=Object.create(this.prototype.propEquality);Object.assign(e,n),this.prototype.propEquality=e}function uP(n){let e=Object.create(this.prototype.stateEquality);Object.assign(e,n),this.prototype.stateEquality=e}function en(n,e){typeof n=="function"?n(e):n&&(n.current=e)}class Uf extends ae{constructor(){super(...arguments),this.id=Ni(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:t}=this.context,{generatorName:i}=this.props;(!t.customRenderingReplaces||!pd(i,t))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&en(this.props.elRef,e)}}render(){const{props:e,context:t}=this,{options:i}=t,{customGenerator:s,defaultGenerator:r,renderProps:o}=e,a=Rx(e,[],this.handleEl);let l=!1,c,u=[],d;if(s!=null){const f=typeof s=="function"?s(o,w):s;if(f===!0)l=!0;else{const h=f&&typeof f=="object";h&&"html"in f?a.dangerouslySetInnerHTML={__html:f.html}:h&&"domNodes"in f?u=Array.prototype.slice.call(f.domNodes):(h?ix(f):typeof f!="function")?c=f:d=f}}else l=!pd(e.generatorName,i);return l&&r&&(c=r(o)),this.queuedDomNodes=u,this.currentGeneratorMeta=d,w(e.elTag,a,c)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var t;const{props:i,context:s}=this,{handleCustomRendering:r,customRenderingMetaMap:o}=s.options;if(r){const a=(t=this.currentGeneratorMeta)!==null&&t!==void 0?t:o==null?void 0:o[i.generatorName];a&&r(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:a},i),{elClasses:(i.elClasses||[]).filter(dP)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:t}=this,i=this.base;if(!Pn(e,t)){t.forEach(tR);for(let s of e)i.appendChild(s);this.currentDomNodes=e}}}Uf.addPropsEquality({elClasses:Pn,elStyle:zt,elAttrs:QR,renderProps:zt});function pd(n,e){var t;return!!(e.handleCustomRendering&&n&&(!((t=e.customRenderingMetaMap)===null||t===void 0)&&t[n]))}function Rx(n,e,t){const i=Object.assign(Object.assign({},n.elAttrs),{ref:t});return(n.elClasses||e)&&(i.className=(n.elClasses||[]).concat(e||[]).concat(i.className||[]).filter(Boolean).join(" ")),n.elStyle&&(i.style=n.elStyle),i}function dP(n){return!!n}const Px=Ox(0);class tn extends ot{constructor(){super(...arguments),this.InnerContent=fP.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(en(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,t=hP(e.classNameGenerator,e.renderProps);if(e.children){const i=Rx(e,t,this.handleEl),s=e.children(this.InnerContent,e.renderProps,i);return e.elTag?w(e.elTag,i,s):s}else return w(Uf,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(t),renderId:this.context}))}componentDidMount(){var e,t;this.el?(t=(e=this.props).didMount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,t;(t=(e=this.props).willUnmount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}tn.contextType=Px;function fP(n,e){const t=n.props;return w(Uf,Object.assign({renderProps:t.renderProps,generatorName:t.generatorName,customGenerator:t.customGenerator,defaultGenerator:t.defaultGenerator,renderId:n.context},e))}function hP(n,e){const t=typeof n=="function"?n(e):n||[];return typeof t=="string"?[t]:t}class jg extends ae{render(){let{props:e,context:t}=this,{options:i}=t,s={view:t.viewApi};return w(tn,Object.assign({},e,{elTag:e.elTag||"div",elClasses:[...Nx(e.viewSpec),...e.elClasses||[]],renderProps:s,classNameGenerator:i.viewClassNames,generatorName:void 0,didMount:i.viewDidMount,willUnmount:i.viewWillUnmount}),()=>e.children)}}function Nx(n){return[`fc-${n.type}-view`,"fc-view"]}function pP(n,e){let t=null,i=null;return n.start&&(t=e.createMarker(n.start)),n.end&&(i=e.createMarker(n.end)),!t&&!i||t&&i&&i<t?null:{start:t,end:i}}function Wg(n,e){let t=[],{start:i}=e,s,r;for(n.sort(gP),s=0;s<n.length;s+=1)r=n[s],r.start>i&&t.push({start:i,end:r.start}),r.end>i&&(i=r.end);return i<e.end&&t.push({start:i,end:e.end}),t}function gP(n,e){return n.start.valueOf()-e.start.valueOf()}function bs(n,e){let{start:t,end:i}=n,s=null;return e.start!==null&&(t===null?t=e.start:t=new Date(Math.max(t.valueOf(),e.start.valueOf()))),e.end!=null&&(i===null?i=e.end:i=new Date(Math.min(i.valueOf(),e.end.valueOf()))),(t===null||i===null||t<i)&&(s={start:t,end:i}),s}function mP(n,e){return(n.end===null||e.start===null||n.end>e.start)&&(n.start===null||e.end===null||n.start<e.end)}function Cn(n,e){return(n.start===null||e>=n.start)&&(n.end===null||e<n.end)}function bP(n,e){return e.start!=null&&n<e.start?e.start:e.end!=null&&n>=e.end?new Date(e.end.valueOf()-1):n}function Ix(n){let e=Math.floor(Cs(n.start,n.end))||1,t=oe(n.start),i=ze(t,e);return{start:t,end:i}}function Lx(n,e=J(0)){let t=null,i=null;if(n.end){i=oe(n.end);let s=n.end.valueOf()-i.valueOf();s&&s>=Mr(e)&&(i=ze(i,1))}return n.start&&(t=oe(n.start),i&&i<=t&&(i=ze(t,1))),{start:t,end:i}}function _o(n,e,t,i){return i==="year"?J(t.diffWholeYears(n,e),"year"):i==="month"?J(t.diffWholeMonths(n,e),"month"):kR(n,e)}function yP(n,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return n}}function vP(n,e){let t=n.initialDate;return t!=null?e.createMarker(t):Yr(n.now,e)}function Yr(n,e){return typeof n=="function"&&(n=n()),n==null?e.createNowMarker():e.createMarker(n)}class Bx{constructor(e){this.props=e,this.nowDate=Yr(e.nowInput,e.dateEnv),this.initHiddenDays()}buildPrev(e,t,i){let{dateEnv:s}=this.props,r=s.subtract(s.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(r,-1,i)}buildNext(e,t,i){let{dateEnv:s}=this.props,r=s.add(s.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(r,1,i)}build(e,t,i=!0){let{props:s}=this,r,o,a,l,c,u;return r=this.buildValidRange(),r=this.trimHiddenDays(r),i&&(e=bP(e,r)),o=this.buildCurrentRangeInfo(e,t),a=/^(year|month|week|day)$/.test(o.unit),l=this.buildRenderRange(this.trimHiddenDays(o.range),o.unit,a),l=this.trimHiddenDays(l),c=l,s.showNonCurrentDates||(c=bs(c,o.range)),c=this.adjustActiveRange(c),c=bs(c,r),u=mP(o.range,r),Cn(l,e)||(e=l.start),{currentDate:e,validRange:r,currentRange:o.range,currentRangeUnit:o.unit,isRangeAllDay:a,activeRange:c,renderRange:l,slotMinTime:s.slotMinTime,slotMaxTime:s.slotMaxTime,isValid:u,dateIncrement:this.buildDateIncrement(o.duration)}}buildValidRange(){let e=this.props.validRangeInput,t=typeof e=="function"?e.call(this.props.calendarApi,this.nowDate):e;return this.refineRange(t)||{start:null,end:null}}buildCurrentRangeInfo(e,t){let{props:i}=this,s=null,r=null,o=null,a;return i.duration?(s=i.duration,r=i.durationUnit,o=this.buildRangeFromDuration(e,t,s,r)):(a=this.props.dayCount)?(r="day",o=this.buildRangeFromDayCount(e,t,a)):(o=this.buildCustomVisibleRange(e))?r=i.dateEnv.greatestWholeUnit(o.start,o.end).unit:(s=this.getFallbackDuration(),r=fd(s).unit,o=this.buildRangeFromDuration(e,t,s,r)),{duration:s,unit:r,range:o}}getFallbackDuration(){return J({day:1})}adjustActiveRange(e){let{dateEnv:t,usesMinMaxTime:i,slotMinTime:s,slotMaxTime:r}=this.props,{start:o,end:a}=e;return i&&(is(s)<0&&(o=oe(o),o=t.add(o,s)),is(r)>1&&(a=oe(a),a=ze(a,-1),a=t.add(a,r))),{start:o,end:a}}buildRangeFromDuration(e,t,i,s){let{dateEnv:r,dateAlignment:o}=this.props,a,l,c;if(!o){let{dateIncrement:d}=this.props;d&&Mr(d)<Mr(i)?o=fd(d).unit:o=s}is(i)<=1&&this.isHiddenDay(a)&&(a=this.skipHiddenDays(a,t),a=oe(a));function u(){a=r.startOf(e,o),l=r.add(a,i),c={start:a,end:l}}return u(),this.trimHiddenDays(c)||(e=this.skipHiddenDays(e,t),u()),c}buildRangeFromDayCount(e,t,i){let{dateEnv:s,dateAlignment:r}=this.props,o=0,a=e,l;r&&(a=s.startOf(a,r)),a=oe(a),a=this.skipHiddenDays(a,t),l=a;do l=ze(l,1),this.isHiddenDay(l)||(o+=1);while(o<i);return{start:a,end:l}}buildCustomVisibleRange(e){let{props:t}=this,i=t.visibleRangeInput,s=typeof i=="function"?i.call(t.calendarApi,t.dateEnv.toDate(e)):i,r=this.refineRange(s);return r&&(r.start==null||r.end==null)?null:r}buildRenderRange(e,t,i){return e}buildDateIncrement(e){let{dateIncrement:t}=this.props,i;return t||((i=this.props.dateAlignment)?J(1,i):e||J({days:1}))}refineRange(e){if(e){let t=pP(e,this.props.dateEnv);return t&&(t=Lx(t)),t}return null}initHiddenDays(){let e=this.props.hiddenDays||[],t=[],i=0,s;for(this.props.weekends===!1&&e.push(0,6),s=0;s<7;s+=1)(t[s]=e.indexOf(s)!==-1)||(i+=1);if(!i)throw new Error("invalid hiddenDays");this.isHiddenDayHash=t}trimHiddenDays(e){let{start:t,end:i}=e;return t&&(t=this.skipHiddenDays(t)),i&&(i=this.skipHiddenDays(i,-1,!0)),t==null||i==null||t<i?{start:t,end:i}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,t=1,i=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(i?t:0)+7)%7];)e=ze(e,t);return e}}function $f(n,e,t,i){return{instanceId:Ni(),defId:n,range:e,forcedStartTzo:t??null,forcedEndTzo:i??null}}function xP(n,e,t,i){for(let s=0;s<i.length;s+=1){let r=i[s].parse(n,t);if(r){let{allDay:o}=n;return o==null&&(o=e,o==null&&(o=r.allDayGuess,o==null&&(o=!1))),{allDay:o,duration:r.duration,typeData:r.typeData,typeId:s}}}return null}function Jr(n,e,t){let{dateEnv:i,pluginHooks:s,options:r}=t,{defs:o,instances:a}=n;a=ms(a,l=>!o[l.defId].recurringDef);for(let l in o){let c=o[l];if(c.recurringDef){let{duration:u}=c.recurringDef;u||(u=c.allDay?r.defaultAllDayEventDuration:r.defaultTimedEventDuration);let d=_P(c,u,e,i,s.recurringTypes);for(let f of d){let h=$f(l,{start:f,end:i.add(f,u)});a[h.instanceId]=h}}}return{defs:o,instances:a}}function _P(n,e,t,i,s){let o=s[n.recurringDef.typeId].expand(n.recurringDef.typeData,{start:i.subtract(t.start,e),end:t.end},i);return n.allDay&&(o=o.map(oe)),o}const ta={id:String,groupId:String,title:String,url:String,interactive:Boolean},Fx={start:k,end:k,date:k,allDay:Boolean},SP=Object.assign(Object.assign(Object.assign({},ta),Fx),{extendedProps:k});function zx(n,e,t,i,s=qf(t),r,o){let{refined:a,extra:l}=Hx(n,t,s),c=AP(e,t),u=xP(a,c,t.dateEnv,t.pluginHooks.recurringTypes);if(u){let f=gd(a,l,e?e.sourceId:"",u.allDay,!!u.duration,t,r);return f.recurringDef={typeId:u.typeId,typeData:u.typeData,duration:u.duration},{def:f,instance:null}}let d=wP(a,c,t,i);if(d){let f=gd(a,l,e?e.sourceId:"",d.allDay,d.hasEnd,t,r),h=$f(f.defId,d.range,d.forcedStartTzo,d.forcedEndTzo);return o&&f.publicId&&o[f.publicId]&&(h.instanceId=o[f.publicId]),{def:f,instance:h}}return null}function Hx(n,e,t=qf(e)){return Vf(n,t)}function qf(n){return Object.assign(Object.assign(Object.assign({},yl),SP),n.pluginHooks.eventRefiners)}function gd(n,e,t,i,s,r,o){let a={title:n.title||"",groupId:n.groupId||"",publicId:n.id||"",url:n.url||"",recurringDef:null,defId:(o&&n.id?o[n.id]:"")||Ni(),sourceId:t,allDay:i,hasEnd:s,interactive:n.interactive,ui:vl(n,r),extendedProps:Object.assign(Object.assign({},n.extendedProps||{}),e)};for(let l of r.pluginHooks.eventDefMemberAdders)Object.assign(a,l(n));return Object.freeze(a.ui.classNames),Object.freeze(a.extendedProps),a}function wP(n,e,t,i){let{allDay:s}=n,r,o=null,a=!1,l,c=null,u=n.start!=null?n.start:n.date;if(r=t.dateEnv.createMarkerMeta(u),r)o=r.marker;else if(!i)return null;return n.end!=null&&(l=t.dateEnv.createMarkerMeta(n.end)),s==null&&(e!=null?s=e:s=(!r||r.isTimeUnspecified)&&(!l||l.isTimeUnspecified)),s&&o&&(o=oe(o)),l&&(c=l.marker,s&&(c=oe(c)),o&&c<=o&&(c=null)),c?a=!0:i||(a=t.options.forceEventDuration||!1,c=t.dateEnv.add(o,s?t.options.defaultAllDayEventDuration:t.options.defaultTimedEventDuration)),{allDay:s,hasEnd:a,range:{start:o,end:c},forcedStartTzo:r?r.forcedTzo:null,forcedEndTzo:l?l.forcedTzo:null}}function AP(n,e){let t=null;return n&&(t=n.defaultAllDay),t==null&&(t=e.options.defaultAllDay),t}function Dr(n,e,t,i,s,r){let o=Di(),a=qf(t);for(let l of n){let c=zx(l,e,t,i,a,s,r);c&&md(c,o)}return o}function md(n,e=Di()){return e.defs[n.def.defId]=n.def,n.instance&&(e.instances[n.instance.instanceId]=n.instance),e}function kP(n,e){let t=n.instances[e];if(t){let i=n.defs[t.defId],s=Kf(n,r=>EP(i,r));return s.defs[i.defId]=i,s.instances[t.instanceId]=t,s}return Di()}function EP(n,e){return!!(n.groupId&&n.groupId===e.groupId)}function Di(){return{defs:{},instances:{}}}function Gf(n,e){return{defs:Object.assign(Object.assign({},n.defs),e.defs),instances:Object.assign(Object.assign({},n.instances),e.instances)}}function Kf(n,e){let t=ms(n.defs,e),i=ms(n.instances,s=>t[s.defId]);return{defs:t,instances:i}}function CP(n,e){let{defs:t,instances:i}=n,s={},r={};for(let o in t)e.defs[o]||(s[o]=t[o]);for(let o in i)!e.instances[o]&&s[i[o].defId]&&(r[o]=i[o]);return{defs:s,instances:r}}function MP(n,e){return Array.isArray(n)?Dr(n,null,e,!0):typeof n=="object"&&n?Dr([n],null,e,!0):n!=null?String(n):null}function Ug(n){return Array.isArray(n)?n:typeof n=="string"?n.split(/\s+/):[]}const yl={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:k,overlap:k,allow:k,className:Ug,classNames:Ug,color:String,backgroundColor:String,borderColor:String,textColor:String},DP={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function vl(n,e){let t=MP(n.constraint,e);return{display:n.display||null,startEditable:n.startEditable!=null?n.startEditable:n.editable,durationEditable:n.durationEditable!=null?n.durationEditable:n.editable,constraints:t!=null?[t]:[],overlap:n.overlap!=null?n.overlap:null,allows:n.allow!=null?[n.allow]:[],backgroundColor:n.backgroundColor||n.color||"",borderColor:n.borderColor||n.color||"",textColor:n.textColor||"",classNames:(n.className||[]).concat(n.classNames||[])}}function TP(n){return n.reduce(OP,DP)}function OP(n,e){return{display:e.display!=null?e.display:n.display,startEditable:e.startEditable!=null?e.startEditable:n.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:n.durationEditable,constraints:n.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:n.overlap,allows:n.allows.concat(e.allows),backgroundColor:e.backgroundColor||n.backgroundColor,borderColor:e.borderColor||n.borderColor,textColor:e.textColor||n.textColor,classNames:n.classNames.concat(e.classNames)}}const RP={id:String,defaultAllDay:Boolean,url:String,format:String,events:k,eventDataTransform:k,success:k,failure:k};function Vx(n,e,t=jx(e)){let i;if(typeof n=="string"?i={url:n}:typeof n=="function"||Array.isArray(n)?i={events:n}:typeof n=="object"&&n&&(i=n),i){let{refined:s,extra:r}=Vf(i,t),o=PP(s,e);if(o)return{_raw:n,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:s.defaultAllDay,eventDataTransform:s.eventDataTransform,success:s.success,failure:s.failure,publicId:s.id||"",sourceId:Ni(),sourceDefId:o.sourceDefId,meta:o.meta,ui:vl(s,e),extendedProps:r}}return null}function jx(n){return Object.assign(Object.assign(Object.assign({},yl),RP),n.pluginHooks.eventSourceRefiners)}function PP(n,e){let t=e.pluginHooks.eventSourceDefs;for(let i=t.length-1;i>=0;i-=1){let r=t[i].parseMeta(n);if(r)return{sourceDefId:i,meta:r}}return null}function NP(n,e,t,i,s){switch(e.type){case"RECEIVE_EVENTS":return IP(n,t[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,s);case"RESET_RAW_EVENTS":return LP(n,t[e.sourceId],e.rawEvents,i.activeRange,s);case"ADD_EVENTS":return BP(n,e.eventStore,i?i.activeRange:null,s);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return Gf(n,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return i?Jr(n,i.activeRange,s):n;case"REMOVE_EVENTS":return CP(n,e.eventStore);case"REMOVE_EVENT_SOURCE":return Ux(n,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return Kf(n,r=>!r.sourceId);case"REMOVE_ALL_EVENTS":return Di();default:return n}}function IP(n,e,t,i,s,r){if(e&&t===e.latestFetchId){let o=Dr(Wx(s,e,r),e,r);return i&&(o=Jr(o,i,r)),Gf(Ux(n,e.sourceId),o)}return n}function LP(n,e,t,i,s){const{defIdMap:r,instanceIdMap:o}=FP(n);let a=Dr(Wx(t,e,s),e,s,!1,r,o);return Jr(a,i,s)}function Wx(n,e,t){let i=t.options.eventDataTransform,s=e?e.eventDataTransform:null;return s&&(n=$g(n,s)),i&&(n=$g(n,i)),n}function $g(n,e){let t;if(!e)t=n;else{t=[];for(let i of n){let s=e(i);s?t.push(s):s==null&&t.push(i)}}return t}function BP(n,e,t,i){return t&&(e=Jr(e,t,i)),Gf(n,e)}function qg(n,e,t){let{defs:i}=n,s=Gr(n.instances,r=>i[r.defId].allDay?r:Object.assign(Object.assign({},r),{range:{start:t.createMarker(e.toDate(r.range.start,r.forcedStartTzo)),end:t.createMarker(e.toDate(r.range.end,r.forcedEndTzo))},forcedStartTzo:t.canComputeOffset?null:r.forcedStartTzo,forcedEndTzo:t.canComputeOffset?null:r.forcedEndTzo}));return{defs:i,instances:s}}function Ux(n,e){return Kf(n,t=>t.sourceId!==e)}function FP(n){const{defs:e,instances:t}=n,i={},s={};for(let r in e){const o=e[r],{publicId:a}=o;a&&(i[a]=r)}for(let r in t){const o=t[r],a=e[o.defId],{publicId:l}=a;l&&(s[l]=r)}return{defIdMap:i,instanceIdMap:s}}class zP{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,t){HP(this.handlers,e,t)}off(e,t){VP(this.handlers,e,t)}trigger(e,...t){let i=this.handlers[e]||[],s=this.options&&this.options[e],r=[].concat(s||[],i);for(let o of r)o.apply(this.thisContext,t)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function HP(n,e,t){(n[e]||(n[e]=[])).push(t)}function VP(n,e,t){t?n[e]&&(n[e]=n[e].filter(i=>i!==t)):delete n[e]}const jP={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function WP(n,e){return Dr(UP(n),null,e)}function UP(n){let e;return n===!0?e=[{}]:Array.isArray(n)?e=n.filter(t=>t.daysOfWeek):typeof n=="object"&&n?e=[n]:e=[],e=e.map(t=>Object.assign(Object.assign({},jP),t)),e}function $P(n,e,t){t.emitter.trigger("select",Object.assign(Object.assign({},GP(n,t)),{jsEvent:null,view:t.viewApi||t.calendarApi.view}))}function qP(n,e){e.emitter.trigger("unselect",{jsEvent:n?n.origEvent:null,view:e.viewApi||e.calendarApi.view})}function GP(n,e){let t={};for(let i of e.pluginHooks.dateSpanTransforms)Object.assign(t,i(n,e));return Object.assign(t,aN(n,e.dateEnv)),t}function Gg(n,e,t){let{dateEnv:i,options:s}=t,r=e;return n?(r=oe(r),r=i.add(r,s.defaultAllDayEventDuration)):r=i.add(r,s.defaultTimedEventDuration),r}function KP(n,e,t,i){let s=qx(n.defs,e),r=Di();for(let o in n.defs){let a=n.defs[o];r.defs[o]=YP(a,s[o],t,i)}for(let o in n.instances){let a=n.instances[o],l=r.defs[a.defId];r.instances[o]=JP(a,l,s[a.defId],t,i)}return r}function YP(n,e,t,i){let s=t.standardProps||{};s.hasEnd==null&&e.durationEditable&&(t.startDelta||t.endDelta)&&(s.hasEnd=!0);let r=Object.assign(Object.assign(Object.assign({},n),s),{ui:Object.assign(Object.assign({},n.ui),s.ui)});t.extendedProps&&(r.extendedProps=Object.assign(Object.assign({},r.extendedProps),t.extendedProps));for(let o of i.pluginHooks.eventDefMutationAppliers)o(r,t,i);return!r.hasEnd&&i.options.forceEventDuration&&(r.hasEnd=!0),r}function JP(n,e,t,i,s){let{dateEnv:r}=s,o=i.standardProps&&i.standardProps.allDay===!0,a=i.standardProps&&i.standardProps.hasEnd===!1,l=Object.assign({},n);return o&&(l.range=Ix(l.range)),i.datesDelta&&t.startEditable&&(l.range={start:r.add(l.range.start,i.datesDelta),end:r.add(l.range.end,i.datesDelta)}),i.startDelta&&t.durationEditable&&(l.range={start:r.add(l.range.start,i.startDelta),end:l.range.end}),i.endDelta&&t.durationEditable&&(l.range={start:l.range.start,end:r.add(l.range.end,i.endDelta)}),a&&(l.range={start:l.range.start,end:Gg(e.allDay,l.range.start,s)}),e.allDay&&(l.range={start:oe(l.range.start),end:oe(l.range.end)}),l.range.end<l.range.start&&(l.range.end=Gg(e.allDay,l.range.start,s)),l}class Ji{constructor(e,t){this.context=e,this.internalEventSource=t}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class gt{constructor(e,t,i){this._context=e,this._def=t,this._instance=i||null}setProp(e,t){if(e in Fx)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")t=ta[e](t),this.mutate({standardProps:{publicId:t}});else if(e in ta)t=ta[e](t),this.mutate({standardProps:{[e]:t}});else if(e in yl){let i=yl[e](t);e==="color"?i={backgroundColor:t,borderColor:t}:e==="editable"?i={startEditable:t,durationEditable:t}:i={[e]:t},this.mutate({standardProps:{ui:i}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,t){this.mutate({extendedProps:{[e]:t}})}setStart(e,t={}){let{dateEnv:i}=this._context,s=i.createMarker(e);if(s&&this._instance){let r=this._instance.range,o=_o(r.start,s,i,t.granularity);t.maintainDuration?this.mutate({datesDelta:o}):this.mutate({startDelta:o})}}setEnd(e,t={}){let{dateEnv:i}=this._context,s;if(!(e!=null&&(s=i.createMarker(e),!s))&&this._instance)if(s){let r=_o(this._instance.range.end,s,i,t.granularity);this.mutate({endDelta:r})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,t,i={}){let{dateEnv:s}=this._context,r={allDay:i.allDay},o=s.createMarker(e),a;if(o&&!(t!=null&&(a=s.createMarker(t),!a))&&this._instance){let l=this._instance.range;i.allDay===!0&&(l=Ix(l));let c=_o(l.start,o,s,i.granularity);if(a){let u=_o(l.end,a,s,i.granularity);mR(c,u)?this.mutate({datesDelta:c,standardProps:r}):this.mutate({startDelta:c,endDelta:u,standardProps:r})}else r.hasEnd=!1,this.mutate({datesDelta:c,standardProps:r})}}moveStart(e){let t=J(e);t&&this.mutate({startDelta:t})}moveEnd(e){let t=J(e);t&&this.mutate({endDelta:t})}moveDates(e){let t=J(e);t&&this.mutate({datesDelta:t})}setAllDay(e,t={}){let i={allDay:e},{maintainDuration:s}=t;s==null&&(s=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(i.hasEnd=s),this.mutate({standardProps:i})}formatRange(e){let{dateEnv:t}=this._context,i=this._instance,s=Se(e);return this._def.hasEnd?t.formatRange(i.range.start,i.range.end,s,{forcedStartTzo:i.forcedStartTzo,forcedEndTzo:i.forcedEndTzo}):t.format(i.range.start,s,{forcedTzo:i.forcedStartTzo})}mutate(e){let t=this._instance;if(t){let i=this._def,s=this._context,{eventStore:r}=s.getCurrentData(),o=kP(r,t.instanceId);o=KP(o,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,s);let l=new gt(s,i,t);this._def=o.defs[i.defId],this._instance=o.instances[t.instanceId],s.dispatch({type:"MERGE_EVENTS",eventStore:o}),s.emitter.trigger("eventChange",{oldEvent:l,event:this,relatedEvents:Yf(o,s,t),revert(){s.dispatch({type:"RESET_EVENTS",eventStore:r})}})}}remove(){let e=this._context,t=$x(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:t}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:t})}})}get source(){let{sourceId:e}=this._def;return e?new Ji(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let t=this._def,{ui:i}=t,{startStr:s,endStr:r}=this,o={allDay:t.allDay};return t.title&&(o.title=t.title),s&&(o.start=s),r&&(o.end=r),t.publicId&&(o.id=t.publicId),t.groupId&&(o.groupId=t.groupId),t.url&&(o.url=t.url),i.display&&i.display!=="auto"&&(o.display=i.display),e.collapseColor&&i.backgroundColor&&i.backgroundColor===i.borderColor?o.color=i.backgroundColor:(i.backgroundColor&&(o.backgroundColor=i.backgroundColor),i.borderColor&&(o.borderColor=i.borderColor)),i.textColor&&(o.textColor=i.textColor),i.classNames.length&&(o.classNames=i.classNames),Object.keys(t.extendedProps).length&&(e.collapseExtendedProps?Object.assign(o,t.extendedProps):o.extendedProps=t.extendedProps),o}toJSON(){return this.toPlainObject()}}function $x(n){let e=n._def,t=n._instance;return{defs:{[e.defId]:e},instances:t?{[t.instanceId]:t}:{}}}function Yf(n,e,t){let{defs:i,instances:s}=n,r=[],o=t?t.instanceId:"";for(let a in s){let l=s[a],c=i[l.defId];l.instanceId!==o&&r.push(new gt(e,c,l))}return r}function Kg(n,e,t,i){let s={},r={},o={},a=[],l=[],c=qx(n.defs,e);for(let u in n.defs){let d=n.defs[u];c[d.defId].display==="inverse-background"&&(d.groupId?(s[d.groupId]=[],o[d.groupId]||(o[d.groupId]=d)):r[u]=[])}for(let u in n.instances){let d=n.instances[u],f=n.defs[d.defId],h=c[f.defId],p=d.range,m=!f.allDay&&i?Lx(p,i):p,g=bs(m,t);g&&(h.display==="inverse-background"?f.groupId?s[f.groupId].push(g):r[d.defId].push(g):h.display!=="none"&&(h.display==="background"?a:l).push({def:f,ui:h,instance:d,range:g,isStart:m.start&&m.start.valueOf()===g.start.valueOf(),isEnd:m.end&&m.end.valueOf()===g.end.valueOf()}))}for(let u in s){let d=s[u],f=Wg(d,t);for(let h of f){let p=o[u],m=c[p.defId];a.push({def:p,ui:m,instance:null,range:h,isStart:!1,isEnd:!1})}}for(let u in r){let d=r[u],f=Wg(d,t);for(let h of f)a.push({def:n.defs[u],ui:c[u],instance:null,range:h,isStart:!1,isEnd:!1})}return{bg:a,fg:l}}function Yg(n,e){n.fcSeg=e}function bd(n){return n.fcSeg||n.parentNode.fcSeg||null}function qx(n,e){return Gr(n,t=>Gx(t,e))}function Gx(n,e){let t=[];return e[""]&&t.push(e[""]),e[n.defId]&&t.push(e[n.defId]),t.push(n.ui),TP(t)}function QP(n,e){let t=n.map(ZP);return t.sort((i,s)=>uR(i,s,e)),t.map(i=>i._seg)}function ZP(n){let{eventRange:e}=n,t=e.def,i=e.instance?e.instance.range:e.range,s=i.start?i.start.valueOf():0,r=i.end?i.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},t.extendedProps),t),{id:t.publicId,start:s,end:r,duration:r-s,allDay:Number(t.allDay),_seg:n})}function XP(n,e){let{pluginHooks:t}=e,i=t.isDraggableTransformers,{def:s,ui:r}=n.eventRange,o=r.startEditable;for(let a of i)o=a(o,s,r,e);return o}function eN(n,e){return n.isStart&&n.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function tN(n,e){return n.isEnd&&n.eventRange.ui.durationEditable}function Kx(n,e,t,i,s,r,o){let{dateEnv:a,options:l}=t,{displayEventTime:c,displayEventEnd:u}=l,d=n.eventRange.def,f=n.eventRange.instance;c==null&&(c=i!==!1),u==null&&(u=s!==!1);let h=f.range.start,p=f.range.end,m=n.start||n.eventRange.range.start,g=n.end||n.eventRange.range.end,b=oe(h).valueOf()===oe(m).valueOf(),y=oe(Nn(p,-1)).valueOf()===oe(Nn(g,-1)).valueOf();return c&&!d.allDay&&(b||y)?(m=b?h:m,g=y?p:g,u&&d.hasEnd?a.formatRange(m,g,e,{forcedStartTzo:f.forcedStartTzo,forcedEndTzo:f.forcedEndTzo}):a.format(m,e,{forcedTzo:f.forcedStartTzo})):""}function ar(n,e,t){let i=n.eventRange.range;return{isPast:i.end<=e.start,isFuture:i.start>=e.end,isToday:e&&Cn(e,i.start)}}function nN(n){let e=["fc-event"];return n.isMirror&&e.push("fc-event-mirror"),n.isDraggable&&e.push("fc-event-draggable"),(n.isStartResizable||n.isEndResizable)&&e.push("fc-event-resizable"),n.isDragging&&e.push("fc-event-dragging"),n.isResizing&&e.push("fc-event-resizing"),n.isSelected&&e.push("fc-event-selected"),n.isStart&&e.push("fc-event-start"),n.isEnd&&e.push("fc-event-end"),n.isPast&&e.push("fc-event-past"),n.isToday&&e.push("fc-event-today"),n.isFuture&&e.push("fc-event-future"),e}function iN(n){return n.instance?n.instance.instanceId:`${n.def.defId}:${n.range.start.toISOString()}`}function Yx(n,e){let{def:t,instance:i}=n.eventRange,{url:s}=t;if(s)return{href:s};let{emitter:r,options:o}=e,{eventInteractive:a}=o;return a==null&&(a=t.interactive,a==null&&(a=!!r.hasHandlers("eventClick"))),a?Cx(l=>{r.trigger("eventClick",{el:l.target,event:new gt(e,t,i),jsEvent:l,view:e.viewApi})}):{}}const sN={start:k,end:k,allDay:Boolean};function rN(n,e,t){let i=oN(n,e),{range:s}=i;if(!s.start)return null;if(!s.end){if(t==null)return null;s.end=e.add(s.start,t)}return i}function oN(n,e){let{refined:t,extra:i}=Vf(n,sN),s=t.start?e.createMarkerMeta(t.start):null,r=t.end?e.createMarkerMeta(t.end):null,{allDay:o}=t;return o==null&&(o=s&&s.isTimeUnspecified&&(!r||r.isTimeUnspecified)),Object.assign({range:{start:s?s.marker:null,end:r?r.marker:null},allDay:o},i)}function aN(n,e){return Object.assign(Object.assign({},Qx(n.range,e,n.allDay)),{allDay:n.allDay})}function Jx(n,e,t){return Object.assign(Object.assign({},Qx(n,e,t)),{timeZone:e.timeZone})}function Qx(n,e,t){return{start:e.toDate(n.start),end:e.toDate(n.end),startStr:e.formatIso(n.start,{omitTime:t}),endStr:e.formatIso(n.end,{omitTime:t})}}function lN(n,e,t){let i=Hx({editable:!1},t),s=gd(i.refined,i.extra,"",n.allDay,!0,t);return{def:s,ui:Gx(s,e),instance:$f(s.defId,n.range),range:n.range,isStart:!0,isEnd:!0}}function cN(n,e,t){let i=!1,s=function(a){i||(i=!0,e(a))},r=function(a){i||(i=!0,t(a))},o=n(s,r);o&&typeof o.then=="function"&&o.then(s,r)}class Jg extends Error{constructor(e,t){super(e),this.response=t}}function uN(n,e,t){n=n.toUpperCase();const i={method:n};return n==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(t):(i.body=new URLSearchParams(t),i.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,i).then(s=>{if(s.ok)return s.json().then(r=>[r,s],()=>{throw new Jg("Failure parsing JSON",s)});throw new Jg("Request failed",s)})}let Yc;function Zx(){return Yc==null&&(Yc=dN()),Yc}function dN(){if(typeof document>"u")return!0;let n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.innerHTML="<table><tr><td><div></div></td></tr></table>",n.querySelector("table").style.height="100px",n.querySelector("div").style.height="100%",document.body.appendChild(n);let t=n.querySelector("div").offsetHeight>0;return document.body.removeChild(n),t}class fN extends ae{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{bl(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{bl(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:t}=e,{forPrint:i}=this.state,s=i||t.height==="auto"||t.contentHeight==="auto",r=!s&&t.height!=null?t.height:"",o=["fc",i?"fc-media-print":"fc-media-screen",`fc-direction-${t.direction}`,e.theme.getClass("root")];return Zx()||o.push("fc-liquid-hack"),e.children(o,r,s,i)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}let Xx=class{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}};function hN(n,e){return{component:n,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}const Qg={};class pN{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,t){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:t})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,t){let{currentDataManager:i}=this;i.currentCalendarOptionsRefiners[e]?i.emitter.on(e,t):console.warn(`Unknown listener name '${e}'`)}off(e,t){this.currentDataManager.emitter.off(e,t)}trigger(e,...t){this.currentDataManager.emitter.trigger(e,...t)}changeView(e,t){this.batchRendering(()=>{if(this.unselect(),t)if(t.start&&t.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:t});else{let{dateEnv:i}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:i.createMarker(t)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,t){let i=this.getCurrentData(),s;t=t||"day",s=i.viewSpecs[t]||this.getUnitViewSpec(t),this.unselect(),s?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:s.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:t,toolbarConfig:i}=this.getCurrentData(),s=[].concat(i.header?i.header.viewsWithButtons:[],i.footer?i.footer.viewsWithButtons:[]),r,o;for(let a in t)s.push(a);for(r=0;r<s.length;r+=1)if(o=t[s[r]],o&&o.singleUnit===e)return o;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:Yr(e.calendarOptions.now,e.dateEnv)})}gotoDate(e){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.createMarker(e)})}incrementDate(e){let t=this.getCurrentData(),i=J(e);i&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.add(t.currentDate,i)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,t){let{dateEnv:i}=this.getCurrentData();return i.format(i.createMarker(e),Se(t))}formatRange(e,t,i){let{dateEnv:s}=this.getCurrentData();return s.formatRange(s.createMarker(e),s.createMarker(t),Se(i),i)}formatIso(e,t){let{dateEnv:i}=this.getCurrentData();return i.formatIso(i.createMarker(e),{omitTime:t})}select(e,t){let i;t==null?e.start!=null?i=e:i={start:e,end:null}:i={start:e,end:t};let s=this.getCurrentData(),r=rN(i,s.dateEnv,J({days:1}));r&&(this.dispatch({type:"SELECT_DATES",selection:r}),$P(r,null,s))}unselect(e){let t=this.getCurrentData();t.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),qP(e,t))}addEvent(e,t){if(e instanceof gt){let o=e._def,a=e._instance;return this.getCurrentData().eventStore.defs[o.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:md({def:o,instance:a})}),this.triggerEventAdd(e)),e}let i=this.getCurrentData(),s;if(t instanceof Ji)s=t.internalEventSource;else if(typeof t=="boolean")t&&([s]=Wf(i.eventSources));else if(t!=null){let o=this.getEventSourceById(t);if(!o)return console.warn(`Could not find an event source with ID "${t}"`),null;s=o.internalEventSource}let r=zx(e,s,i,!1);if(r){let o=new gt(i,r.def,r.def.recurringDef?null:r.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:md(r)}),this.triggerEventAdd(o),o}return null}triggerEventAdd(e){let{emitter:t}=this.getCurrentData();t.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:$x(e)})}})}getEventById(e){let t=this.getCurrentData(),{defs:i,instances:s}=t.eventStore;e=String(e);for(let r in i){let o=i[r];if(o.publicId===e){if(o.recurringDef)return new gt(t,o,null);for(let a in s){let l=s[a];if(l.defId===o.defId)return new gt(t,o,l)}}}return null}getEvents(){let e=this.getCurrentData();return Yf(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),t=e.eventSources,i=[];for(let s in t)i.push(new Ji(e,t[s]));return i}getEventSourceById(e){let t=this.getCurrentData(),i=t.eventSources;e=String(e);for(let s in i)if(i[s].publicId===e)return new Ji(t,i[s]);return null}addEventSource(e){let t=this.getCurrentData();if(e instanceof Ji)return t.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let i=Vx(e,t);return i?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[i]}),new Ji(t,i)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let t=J(e);t&&this.trigger("_scrollRequest",{time:t})}}function gN(n,e){let t={left:Math.max(n.left,e.left),right:Math.min(n.right,e.right),top:Math.max(n.top,e.top),bottom:Math.min(n.bottom,e.bottom)};return t.left<t.right&&t.top<t.bottom?t:!1}function e_(n,e,t,i){return{dow:n.getUTCDay(),isDisabled:!!(i&&!Cn(i.activeRange,n)),isOther:!!(i&&!Cn(i.currentRange,n)),isToday:!!(e&&Cn(e,n)),isPast:!!(e&&n<e.start),isFuture:!!(e&&n>=e.end)}}function Jf(n,e){let t=["fc-day",`fc-day-${xR[n.dow]}`];return n.isDisabled?t.push("fc-day-disabled"):(n.isToday&&(t.push("fc-day-today"),t.push(e.getClass("today"))),n.isPast&&t.push("fc-day-past"),n.isFuture&&t.push("fc-day-future"),n.isOther&&t.push("fc-day-other")),t}const mN=Se({year:"numeric",month:"long",day:"numeric"}),bN=Se({week:"long"});function yd(n,e,t="day",i=!0){const{dateEnv:s,options:r,calendarApi:o}=n;let a=s.format(e,t==="week"?bN:mN);if(r.navLinks){let l=s.toDate(e);const c=u=>{let d=t==="day"?r.navLinkDayClick:t==="week"?r.navLinkWeekClick:null;typeof d=="function"?d.call(o,s.toDate(e),u):(typeof d=="string"&&(t=d),o.zoomTo(e,t))};return Object.assign({title:rr(r.navLinkHint,[a,l],a),"data-navlink":""},i?Ex(c):{onClick:c})}return{"aria-label":a}}let Jc;function yN(){return Jc||(Jc=vN()),Jc}function vN(){let n=document.createElement("div");n.style.overflow="scroll",n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",document.body.appendChild(n);let e=xN(n);return document.body.removeChild(n),e}function xN(n){return{x:n.offsetHeight-n.clientHeight,y:n.offsetWidth-n.clientWidth}}function _N(n){let e=SN(n),t=n.getBoundingClientRect();for(let i of e){let s=gN(t,i.getBoundingClientRect());if(s)t=s;else return null}return t}function SN(n){let e=[];for(;n instanceof HTMLElement;){let t=window.getComputedStyle(n);if(t.position==="fixed")break;/(auto|scroll)/.test(t.overflow+t.overflowY+t.overflowX)&&e.push(n),n=n.parentNode}return e}class xl{constructor(e,t,i,s){this.els=t;let r=this.originClientRect=e.getBoundingClientRect();i&&this.buildElHorizontals(r.left),s&&this.buildElVerticals(r.top)}buildElHorizontals(e){let t=[],i=[];for(let s of this.els){let r=s.getBoundingClientRect();t.push(r.left-e),i.push(r.right-e)}this.lefts=t,this.rights=i}buildElVerticals(e){let t=[],i=[];for(let s of this.els){let r=s.getBoundingClientRect();t.push(r.top-e),i.push(r.bottom-e)}this.tops=t,this.bottoms=i}leftToIndex(e){let{lefts:t,rights:i}=this,s=t.length,r;for(r=0;r<s;r+=1)if(e>=t[r]&&e<i[r])return r}topToIndex(e){let{tops:t,bottoms:i}=this,s=t.length,r;for(r=0;r<s;r+=1)if(e>=t[r]&&e<i[r])return r}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return So(this.tops||[],e.tops||[])&&So(this.bottoms||[],e.bottoms||[])&&So(this.lefts||[],e.lefts||[])&&So(this.rights||[],e.rights||[])}}function So(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(Math.round(n[i])!==Math.round(e[i]))return!1;return!0}class Bi extends ae{constructor(){super(...arguments),this.uid=Ni()}prepareHits(){}queryHit(e,t,i,s){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Gt(e,".fc-event-mirror")}isValidDateDownEl(e){return!Gt(e,".fc-event:not(.fc-bg-event)")&&!Gt(e,".fc-more-link")&&!Gt(e,"a[data-navlink]")&&!Gt(e,".fc-popover")}}class wN{constructor(e=t=>t.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let t=[];for(let i of e)this.insertEntry(i,t);return t}insertEntry(e,t){let i=this.findInsertion(e);this.isInsertionValid(i,e)?this.insertEntryAt(e,i):this.handleInvalidInsertion(i,e,t)}isInsertionValid(e,t){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(t)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,t,i){if(this.allowReslicing&&e.touchingEntry){const s=Object.assign(Object.assign({},t),{span:t_(t.span,e.touchingEntry.span)});i.push(s),this.splitEntry(t,e.touchingEntry,i)}else i.push(t)}splitEntry(e,t,i){let s=e.span,r=t.span;s.start<r.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:s.start,end:r.start}},i),s.end>r.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:r.end,end:s.end}},i)}insertEntryAt(e,t){let{entriesByLevel:i,levelCoords:s}=this;t.lateral===-1?(Qc(s,t.level,t.levelCoord),Qc(i,t.level,[e])):Qc(i[t.level],t.lateral,e),this.stackCnts[lr(e)]=t.stackCnt}findInsertion(e){let{levelCoords:t,entriesByLevel:i,strictOrder:s,stackCnts:r}=this,o=t.length,a=0,l=-1,c=-1,u=null,d=0;for(let p=0;p<o;p+=1){const m=t[p];if(!s&&m>=a+this.getEntryThickness(e))break;let g=i[p],b,y=Xg(g,e.span.start,Zg),v=y[0]+y[1];for(;(b=g[v])&&b.span.start<e.span.end;){let x=m+this.getEntryThickness(b);x>a&&(a=x,u=b,l=p,c=v),x===a&&(d=Math.max(d,r[lr(b)]+1)),v+=1}}let f=0;if(u)for(f=l+1;f<o&&t[f]<a;)f+=1;let h=-1;return f<o&&t[f]===a&&(h=Xg(i[f],e.span.end,Zg)[0]),{touchingLevel:l,touchingLateral:c,touchingEntry:u,stackCnt:d,levelCoord:a,level:f,lateral:h}}toRects(){let{entriesByLevel:e,levelCoords:t}=this,i=e.length,s=[];for(let r=0;r<i;r+=1){let o=e[r],a=t[r];for(let l of o)s.push(Object.assign(Object.assign({},l),{thickness:this.getEntryThickness(l),levelCoord:a}))}return s}}function Zg(n){return n.span.end}function lr(n){return n.index+":"+n.span.start}function t_(n,e){let t=Math.max(n.start,e.start),i=Math.min(n.end,e.end);return t<i?{start:t,end:i}:null}function Qc(n,e,t){n.splice(e,0,t)}function Xg(n,e,t){let i=0,s=n.length;if(!s||e<t(n[i]))return[0,0];if(e>t(n[s-1]))return[s,0];for(;i<s;){let r=Math.floor(i+(s-i)/2),o=t(n[r]);if(e<o)s=r;else if(e>o)i=r+1;else return[r,1]}return[i,0]}function AN(n,e){return!n||e>10?Se({weekday:"short"}):e>1?Se({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Se({weekday:"long"})}const n_="fc-col-header-cell";function i_(n){return n.text}class kN extends ae{render(){let{dateEnv:e,options:t,theme:i,viewApi:s}=this.context,{props:r}=this,{date:o,dateProfile:a}=r,l=e_(o,r.todayRange,null,a),c=[n_].concat(Jf(l,i)),u=e.format(o,r.dayHeaderFormat),d=!l.isDisabled&&r.colCnt>1?yd(this.context,o):{},f=Object.assign(Object.assign(Object.assign({date:e.toDate(o),view:s},r.extraRenderProps),{text:u}),l);return w(tn,{elTag:"th",elClasses:c,elAttrs:Object.assign({role:"columnheader",colSpan:r.colSpan,"data-date":l.isDisabled?void 0:zf(o)},r.extraDataAttrs),renderProps:f,generatorName:"dayHeaderContent",customGenerator:t.dayHeaderContent,defaultGenerator:i_,classNameGenerator:t.dayHeaderClassNames,didMount:t.dayHeaderDidMount,willUnmount:t.dayHeaderWillUnmount},h=>w("div",{className:"fc-scrollgrid-sync-inner"},!l.isDisabled&&w(h,{elTag:"a",elAttrs:d,elClasses:["fc-col-header-cell-cushion",r.isSticky&&"fc-sticky"]})))}}const EN=Se({weekday:"long"});class CN extends ae{render(){let{props:e}=this,{dateEnv:t,theme:i,viewApi:s,options:r}=this.context,o=ze(new Date(2592e5),e.dow),a={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},l=t.format(o,e.dayHeaderFormat),c=Object.assign(Object.assign(Object.assign(Object.assign({date:o},a),{view:s}),e.extraRenderProps),{text:l});return w(tn,{elTag:"th",elClasses:[n_,...Jf(a,i),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:c,generatorName:"dayHeaderContent",customGenerator:r.dayHeaderContent,defaultGenerator:i_,classNameGenerator:r.dayHeaderClassNames,didMount:r.dayHeaderDidMount,willUnmount:r.dayHeaderWillUnmount},u=>w("div",{className:"fc-scrollgrid-sync-inner"},w(u,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":t.format(o,EN)}})))}}class Qf extends ot{constructor(e,t){super(e,t),this.initialNowDate=Yr(t.options.now,t.dateEnv),this.initialNowQueriedMs=new Date().valueOf(),this.state=this.computeTiming().currentState}render(){let{props:e,state:t}=this;return e.children(t.nowDate,t.todayRange)}componentDidMount(){this.setTimeout()}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout()}computeTiming(){let{props:e,context:t}=this,i=Nn(this.initialNowDate,new Date().valueOf()-this.initialNowQueriedMs),s=t.dateEnv.startOf(i,e.unit),r=t.dateEnv.add(s,J(1,e.unit)),o=r.valueOf()-i.valueOf();return o=Math.min(1e3*60*60*24,o),{currentState:{nowDate:s,todayRange:em(s)},nextState:{nowDate:r,todayRange:em(r)},waitMs:o}}setTimeout(){let{nextState:e,waitMs:t}=this.computeTiming();this.timeoutId=setTimeout(()=>{this.setState(e,()=>{this.setTimeout()})},t)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}Qf.contextType=Ii;function em(n){let e=oe(n),t=ze(e,1);return{start:e,end:t}}class MN extends ae{constructor(){super(...arguments),this.createDayHeaderFormatter=K(DN)}render(){let{context:e}=this,{dates:t,dateProfile:i,datesRepDistinctDays:s,renderIntro:r}=this.props,o=this.createDayHeaderFormatter(e.options.dayHeaderFormat,s,t.length);return w(Qf,{unit:"day"},(a,l)=>w("tr",{role:"row"},r&&r("day"),t.map(c=>s?w(kN,{key:c.toISOString(),date:c,dateProfile:i,todayRange:l,colCnt:t.length,dayHeaderFormat:o}):w(CN,{key:c.getUTCDay(),dow:c.getUTCDay(),dayHeaderFormat:o}))))}}function DN(n,e,t){return n||AN(e,t)}class TN{constructor(e,t){let i=e.start,{end:s}=e,r=[],o=[],a=-1;for(;i<s;)t.isHiddenDay(i)?r.push(a+.5):(a+=1,r.push(a),o.push(i)),i=ze(i,1);this.dates=o,this.indices=r,this.cnt=o.length}sliceRange(e){let t=this.getDateDayIndex(e.start),i=this.getDateDayIndex(ze(e.end,-1)),s=Math.max(0,t),r=Math.min(this.cnt-1,i);return s=Math.ceil(s),r=Math.floor(r),s<=r?{firstIndex:s,lastIndex:r,isStart:t===s,isEnd:i===r}:null}getDateDayIndex(e){let{indices:t}=this,i=Math.floor(Cs(this.dates[0],e));return i<0?t[0]-1:i>=t.length?t[t.length-1]+1:t[i]}}class ON{constructor(e,t){let{dates:i}=e,s,r,o;if(t){for(r=i[0].getUTCDay(),s=1;s<i.length&&i[s].getUTCDay()!==r;s+=1);o=Math.ceil(i.length/s)}else o=1,s=i.length;this.rowCnt=o,this.colCnt=s,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let t=0;t<this.rowCnt;t+=1){let i=[];for(let s=0;s<this.colCnt;s+=1)i.push(this.buildCell(t,s));e.push(i)}return e}buildCell(e,t){let i=this.daySeries.dates[e*this.colCnt+t];return{key:i.toISOString(),date:i}}buildHeaderDates(){let e=[];for(let t=0;t<this.colCnt;t+=1)e.push(this.cells[0][t].date);return e}sliceRange(e){let{colCnt:t}=this,i=this.daySeries.sliceRange(e),s=[];if(i){let{firstIndex:r,lastIndex:o}=i,a=r;for(;a<=o;){let l=Math.floor(a/t),c=Math.min((l+1)*t,o+1);s.push({row:l,firstCol:a%t,lastCol:(c-1)%t,isStart:i.isStart&&a===r,isEnd:i.isEnd&&c-1===o}),a=c}}return s}}class RN{constructor(){this.sliceBusinessHours=K(this._sliceBusinessHours),this.sliceDateSelection=K(this._sliceDateSpan),this.sliceEventStore=K(this._sliceEventStore),this.sliceEventDrag=K(this._sliceInteraction),this.sliceEventResize=K(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,t,i,s,...r){let{eventUiBases:o}=e,a=this.sliceEventStore(e.eventStore,o,t,i,...r);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,t,i,o,s,...r),businessHourSegs:this.sliceBusinessHours(e.businessHours,t,i,s,...r),fgEventSegs:a.fg,bgEventSegs:a.bg,eventDrag:this.sliceEventDrag(e.eventDrag,o,t,i,...r),eventResize:this.sliceEventResize(e.eventResize,o,t,i,...r),eventSelection:e.eventSelection}}sliceNowDate(e,t,i,s,...r){return this._sliceDateSpan({range:{start:e,end:Nn(e,1)},allDay:!1},t,i,{},s,...r)}_sliceBusinessHours(e,t,i,s,...r){return e?this._sliceEventStore(Jr(e,wo(t,!!i),s),{},t,i,...r).bg:[]}_sliceEventStore(e,t,i,s,...r){if(e){let o=Kg(e,t,wo(i,!!s),s);return{bg:this.sliceEventRanges(o.bg,r),fg:this.sliceEventRanges(o.fg,r)}}return{bg:[],fg:[]}}_sliceInteraction(e,t,i,s,...r){if(!e)return null;let o=Kg(e.mutatedEvents,t,wo(i,!!s),s);return{segs:this.sliceEventRanges(o.fg,r),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,t,i,s,r,...o){if(!e)return[];let a=wo(t,!!i),l=bs(e.range,a);if(l){e=Object.assign(Object.assign({},e),{range:l});let c=lN(e,s,r),u=this.sliceRange(e.range,...o);for(let d of u)d.eventRange=c;return u}return[]}sliceEventRanges(e,t){let i=[];for(let s of e)i.push(...this.sliceEventRange(s,t));return i}sliceEventRange(e,t){let i=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(i={start:i.start,end:ze(i.start,1)});let s=this.sliceRange(i,...t);for(let r of s)r.eventRange=e,r.isStart=e.isStart&&r.isStart,r.isEnd=e.isEnd&&r.isEnd;return s}}function wo(n,e){let t=n.activeRange;return e?t:{start:Nn(t.start,n.slotMinTime.milliseconds),end:Nn(t.end,n.slotMaxTime.milliseconds-864e5)}}const Ao=/^(visible|hidden)$/;class PN extends ae{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,en(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:t,liquidIsAbsolute:i}=e,s=t&&i,r=["fc-scroller"];return t&&(i?r.push("fc-scroller-liquid-absolute"):r.push("fc-scroller-liquid")),w("div",{ref:this.handleEl,className:r.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:s&&-(e.overcomeLeft||0)||"",right:s&&-(e.overcomeRight||0)||"",bottom:s&&-(e.overcomeBottom||0)||"",marginLeft:!s&&-(e.overcomeLeft||0)||"",marginRight:!s&&-(e.overcomeRight||0)||"",marginBottom:!s&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(Ao.test(this.props.overflowX))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:i}=e;for(let s=0;s<i.length;s+=1)if(i[s].getBoundingClientRect().width>t)return!0;return!1}needsYScrolling(){if(Ao.test(this.props.overflowY))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:i}=e;for(let s=0;s<i.length;s+=1)if(i[s].getBoundingClientRect().height>t)return!0;return!1}getXScrollbarWidth(){return Ao.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Ao.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class ci{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(t,i)=>{let{depths:s,currentMap:r}=this,o=!1,a=!1;t!==null?(o=i in r,r[i]=t,s[i]=(s[i]||0)+1,a=!0):(s[i]-=1,s[i]||(delete r[i],delete this.callbackMap[i],o=!0)),this.masterCallback&&(o&&this.masterCallback(null,String(i)),a&&this.masterCallback(t,String(i)))}}createRef(e){let t=this.callbackMap[e];return t||(t=this.callbackMap[e]=i=>{this.handleValue(i,String(e))}),t}collect(e,t,i){return XR(this.currentMap,e,t,i)}getAll(){return Wf(this.currentMap)}}function NN(n){let e=iR(n,".fc-scrollgrid-shrink"),t=0;for(let i of e)t=Math.max(t,hR(i));return Math.ceil(t)}function s_(n,e){return n.liquid&&e.liquid}function IN(n,e){return e.maxHeight!=null||s_(n,e)}function LN(n,e,t,i){let{expandRows:s}=t;return typeof e.content=="function"?e.content(t):w("table",{role:"presentation",className:[e.tableClassName,n.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:t.tableMinWidth,width:t.clientWidth,height:s?t.clientHeight:""}},t.tableColGroupNode,w(i?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(t):e.rowContent))}function BN(n,e){return Pn(n,e,zt)}function FN(n,e){let t=[];for(let i of n){let s=i.span||1;for(let r=0;r<s;r+=1)t.push(w("col",{style:{width:i.width==="shrink"?zN(e):i.width||"",minWidth:i.minWidth||""}}))}return w("colgroup",{},...t)}function zN(n){return n??4}function HN(n){for(let e of n)if(e.width==="shrink")return!0;return!1}function VN(n,e){let t=["fc-scrollgrid",e.theme.getClass("table")];return n&&t.push("fc-scrollgrid-liquid"),t}function jN(n,e){let t=["fc-scrollgrid-section",`fc-scrollgrid-section-${n.type}`,n.className];return e&&n.liquid&&n.maxHeight==null&&t.push("fc-scrollgrid-section-liquid"),n.isSticky&&t.push("fc-scrollgrid-section-sticky"),t}function WN(n){return w("div",{className:"fc-scrollgrid-sticky-shim",style:{width:n.clientWidth,minWidth:n.tableMinWidth}})}function tm(n){let{stickyHeaderDates:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}function UN(n){let{stickyFooterScrollbar:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}class r_ extends ae{constructor(){super(...arguments),this.processCols=K(e=>e,BN),this.renderMicroColGroup=K(FN),this.scrollerRefs=new ci,this.scrollerElRefs=new ci(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:t,context:i}=this,s=e.sections||[],r=this.processCols(e.cols),o=this.renderMicroColGroup(r,t.shrinkWidth),a=VN(e.liquid,i);e.collapsibleWidth&&a.push("fc-scrollgrid-collapsible");let l=s.length,c=0,u,d=[],f=[],h=[];for(;c<l&&(u=s[c]).type==="header";)d.push(this.renderSection(u,o,!0)),c+=1;for(;c<l&&(u=s[c]).type==="body";)f.push(this.renderSection(u,o,!1)),c+=1;for(;c<l&&(u=s[c]).type==="footer";)h.push(this.renderSection(u,o,!0)),c+=1;let p=!Zx();const m={role:"rowgroup"};return w("table",{role:"grid",className:a.join(" "),style:{height:e.height}},!!(!p&&d.length)&&w("thead",m,...d),!!(!p&&f.length)&&w("tbody",m,...f),!!(!p&&h.length)&&w("tfoot",m,...h),p&&w("tbody",m,...d,...f,...h))}renderSection(e,t,i){return"outerContent"in e?w(fe,{key:e.key},e.outerContent):w("tr",{key:e.key,role:"presentation",className:jN(e,this.props.liquid).join(" ")},this.renderChunkTd(e,t,e.chunk,i))}renderChunkTd(e,t,i,s){if("outerContent"in i)return i.outerContent;let{props:r}=this,{forceYScrollbars:o,scrollerClientWidths:a,scrollerClientHeights:l}=this.state,c=IN(r,e),u=s_(r,e),d=r.liquid?o?"scroll":c?"auto":"hidden":"visible",f=e.key,h=LN(e,i,{tableColGroupNode:t,tableMinWidth:"",clientWidth:!r.collapsibleWidth&&a[f]!==void 0?a[f]:null,clientHeight:l[f]!==void 0?l[f]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},s);return w(s?"th":"td",{ref:i.elRef,role:"presentation"},w("div",{className:`fc-scroller-harness${u?" fc-scroller-harness-liquid":""}`},w(PN,{ref:this.scrollerRefs.createRef(f),elRef:this.scrollerElRefs.createRef(f),overflowY:d,overflowX:r.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:u,liquidIsAbsolute:!0},h)))}_handleScrollerEl(e,t){let i=$N(this.props.sections,t);i&&en(i.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return HN(this.props.cols)?NN(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=yN(),{scrollerRefs:t,scrollerElRefs:i}=this,s=!1,r={},o={};for(let a in t.currentMap){let l=t.currentMap[a];if(l&&l.needsYScrolling()){s=!0;break}}for(let a of this.props.sections){let l=a.key,c=i.currentMap[l];if(c){let u=c.parentNode;r[l]=Math.floor(u.getBoundingClientRect().width-(s?e.y:0)),o[l]=Math.floor(u.getBoundingClientRect().height)}}return{forceYScrollbars:s,scrollerClientWidths:r,scrollerClientHeights:o}}}r_.addStateEquality({scrollerClientWidths:zt,scrollerClientHeights:zt});function $N(n,e){for(let t of n)if(t.key===e)return t;return null}class Zf extends ae{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,e&&Yg(e,this.props.seg)}}render(){const{props:e,context:t}=this,{options:i}=t,{seg:s}=e,{eventRange:r}=s,{ui:o}=r,a={event:new gt(t,r.def,r.instance),view:t.viewApi,timeText:e.timeText,textColor:o.textColor,backgroundColor:o.backgroundColor,borderColor:o.borderColor,isDraggable:!e.disableDragging&&XP(s,t),isStartResizable:!e.disableResizing&&eN(s,t),isEndResizable:!e.disableResizing&&tN(s),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!s.isStart,isEnd:!!s.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return w(tn,Object.assign({},e,{elRef:this.handleEl,elClasses:[...nN(a),...s.eventRange.ui.classNames,...e.elClasses||[]],renderProps:a,generatorName:"eventContent",customGenerator:i.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.eventClassNames,didMount:i.eventDidMount,willUnmount:i.eventWillUnmount}))}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&Yg(this.el,this.props.seg)}}class qN extends ae{render(){let{props:e,context:t}=this,{options:i}=t,{seg:s}=e,{ui:r}=s.eventRange,o=i.eventTimeFormat||e.defaultTimeFormat,a=Kx(s,o,t,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return w(Zf,Object.assign({},e,{elTag:"a",elStyle:{borderColor:r.borderColor,backgroundColor:r.backgroundColor},elAttrs:Yx(s,t),defaultGenerator:GN,timeText:a}),(l,c)=>w(fe,null,w(l,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:c.textColor}}),!!c.isStartResizable&&w("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!c.isEndResizable&&w("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}function GN(n){return w("div",{className:"fc-event-main-frame"},n.timeText&&w("div",{className:"fc-event-time"},n.timeText),w("div",{className:"fc-event-title-container"},w("div",{className:"fc-event-title fc-sticky"},n.event.title||w(fe,null,""))))}const KN=Se({day:"numeric"});class o_ extends ae{constructor(){super(...arguments),this.refineRenderProps=ea(YN)}render(){let{props:e,context:t}=this,{options:i}=t,s=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:t.viewApi,dateEnv:t.dateEnv,monthStartFormat:i.monthStartFormat});return w(tn,Object.assign({},e,{elClasses:[...Jf(s,t.theme),...e.elClasses||[]],elAttrs:Object.assign(Object.assign({},e.elAttrs),s.isDisabled?{}:{"data-date":zf(e.date)}),renderProps:s,generatorName:"dayCellContent",customGenerator:i.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:s.isDisabled?void 0:i.dayCellClassNames,didMount:i.dayCellDidMount,willUnmount:i.dayCellWillUnmount}))}}function a_(n){return!!(n.dayCellContent||pd("dayCellContent",n))}function YN(n){let{date:e,dateEnv:t,dateProfile:i,isMonthStart:s}=n,r=e_(e,n.todayRange,null,i),o=n.showDayNumber?t.format(e,s?n.monthStartFormat:KN):"";return Object.assign(Object.assign(Object.assign({date:t.toDate(e),view:n.viewApi},r),{isMonthStart:s,dayNumberText:o}),n.extraRenderProps)}class JN extends ae{render(){let{props:e}=this,{seg:t}=e;return w(Zf,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:t.eventRange.ui.backgroundColor},defaultGenerator:QN,seg:t,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function QN(n){let{title:e}=n.event;return e&&w("div",{className:"fc-event-title"},n.event.title)}function ZN(n){return w("div",{className:`fc-${n}`})}const XN=n=>w(Ii.Consumer,null,e=>{let{dateEnv:t,options:i}=e,{date:s}=n,r=i.weekNumberFormat||n.defaultFormat,o=t.computeWeekNumber(s),a=t.format(s,r);return w(tn,Object.assign({},n,{renderProps:{num:o,text:a,date:s},generatorName:"weekNumberContent",customGenerator:i.weekNumberContent,defaultGenerator:eI,classNameGenerator:i.weekNumberClassNames,didMount:i.weekNumberDidMount,willUnmount:i.weekNumberWillUnmount}))});function eI(n){return n.text}const Zc=10;class tI extends ae{constructor(){super(...arguments),this.state={titleId:nc()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&en(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const t=oR(e);this.rootEl.contains(t)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:t}=this.context,{props:i,state:s}=this,r=["fc-popover",e.getClass("popover")].concat(i.extraClassNames||[]);return jO(w("div",Object.assign({},i.extraAttrs,{id:i.id,className:r.join(" "),"aria-labelledby":s.titleId,ref:this.handleRootEl}),w("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},w("span",{className:"fc-popover-title",id:s.titleId},i.title),w("span",{className:"fc-popover-close "+e.getIconClass("close"),title:t.closeHint,onClick:this.handleCloseClick})),w("div",{className:"fc-popover-body "+e.getClass("popoverContent")},i.children)),i.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:t,alignGridTop:i}=this.props,{rootEl:s}=this,r=_N(t);if(r){let o=s.getBoundingClientRect(),a=i?Gt(t,".fc-scrollgrid").getBoundingClientRect().top:r.top,l=e?r.right-o.width:r.left;a=Math.max(a,Zc),l=Math.min(l,document.documentElement.clientWidth-Zc-o.width),l=Math.max(l,Zc);let c=s.offsetParent.getBoundingClientRect();rR(s,{top:a-c.top,left:l-c.left})}}}class nI extends Bi{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:t}=this.context,{props:i}=this,{startDate:s,todayRange:r,dateProfile:o}=i,a=t.format(s,e.dayPopoverFormat);return w(o_,{elRef:this.handleRootEl,date:s,dateProfile:o,todayRange:r},(l,c,u)=>w(tI,{elRef:u.ref,id:i.id,title:a,extraClassNames:["fc-more-popover"].concat(u.className||[]),extraAttrs:u,parentEl:i.parentEl,alignmentEl:i.alignmentEl,alignGridTop:i.alignGridTop,onClose:i.onClose},a_(e)&&w(l,{elTag:"div",elClasses:["fc-more-popover-misc"]}),i.children))}queryHit(e,t,i,s){let{rootEl:r,props:o}=this;return e>=0&&e<i&&t>=0&&t<s?{dateProfile:o.dateProfile,dateSpan:Object.assign({allDay:!o.forceTimed,range:{start:o.startDate,end:o.endDate}},o.extraDateSpan),dayEl:r,rect:{left:0,top:0,right:i,bottom:s},layer:1}:null}}class iI extends ae{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:nc()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&en(this.props.elRef,e)},this.handleClick=e=>{let{props:t,context:i}=this,{moreLinkClick:s}=i.options,r=nm(t).start;function o(a){let{def:l,instance:c,range:u}=a.eventRange;return{event:new gt(i,l,c),start:i.dateEnv.toDate(u.start),end:i.dateEnv.toDate(u.end),isStart:a.isStart,isEnd:a.isEnd}}typeof s=="function"&&(s=s({date:r,allDay:!!t.allDayDate,allSegs:t.allSegs.map(o),hiddenSegs:t.hiddenSegs.map(o),jsEvent:e,view:i.viewApi})),!s||s==="popover"?this.setState({isPopoverOpen:!0}):typeof s=="string"&&i.calendarApi.zoomTo(r,s)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:t}=this;return w(Ii.Consumer,null,i=>{let{viewApi:s,options:r,calendarApi:o}=i,{moreLinkText:a}=r,{moreCnt:l}=e,c=nm(e),u=typeof a=="function"?a.call(o,l):`+${l} ${a}`,d=rr(r.moreLinkHint,[l],u),f={num:l,shortText:`+${l}`,text:u,view:s};return w(fe,null,!!e.moreCnt&&w(tn,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),Ex(this.handleClick)),{title:d,"aria-expanded":t.isPopoverOpen,"aria-controls":t.isPopoverOpen?t.popoverId:""}),renderProps:f,generatorName:"moreLinkContent",customGenerator:r.moreLinkContent,defaultGenerator:e.defaultGenerator||sI,classNameGenerator:r.moreLinkClassNames,didMount:r.moreLinkDidMount,willUnmount:r.moreLinkWillUnmount},e.children),t.isPopoverOpen&&w(nI,{id:t.popoverId,startDate:c.start,endDate:c.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Gt(this.linkEl,".fc-view-harness"))}}function sI(n){return n.text}function nm(n){if(n.allDayDate)return{start:n.allDayDate,end:ze(n.allDayDate,1)};let{hiddenSegs:e}=n;return{start:rI(e),end:aI(e)}}function rI(n){return n.reduce(oI).eventRange.range.start}function oI(n,e){return n.eventRange.range.start<e.eventRange.range.start?n:e}function aI(n){return n.reduce(lI).eventRange.range.end}function lI(n,e){return n.eventRange.range.end>e.eventRange.range.end?n:e}const cI=[],l_={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},c_=Object.assign(Object.assign({},l_),{buttonHints:{prev:"Previous $0",next:"Next $0",today(n,e){return e==="day"?"Today":`This ${n}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(n){return`Show ${n} more event${n===1?"":"s"}`}});function uI(n){let e=n.length>0?n[0].code:"en",t=cI.concat(n),i={en:c_};for(let s of t)i[s.code]=s;return{map:i,defaultCode:e}}function u_(n,e){return typeof n=="object"&&!Array.isArray(n)?d_(n.code,[n.code],n):dI(n,e)}function dI(n,e){let t=[].concat(n||[]),i=fI(t,e)||c_;return d_(n,t,i)}function fI(n,e){for(let t=0;t<n.length;t+=1){let i=n[t].toLocaleLowerCase().split("-");for(let s=i.length;s>0;s-=1){let r=i.slice(0,s).join("-");if(e[r])return e[r]}}return null}function d_(n,e,t){let i=jf([l_,t],["buttonText"]);delete i.code;let{week:s}=i;return delete i.week,{codeArg:n,codes:e,week:s,simpleNumberFormat:new Intl.NumberFormat(n),options:i}}function Fi(n){return{id:Ni(),name:n.name,premiumReleaseDate:n.premiumReleaseDate?new Date(n.premiumReleaseDate):void 0,deps:n.deps||[],reducers:n.reducers||[],isLoadingFuncs:n.isLoadingFuncs||[],contextInit:[].concat(n.contextInit||[]),eventRefiners:n.eventRefiners||{},eventDefMemberAdders:n.eventDefMemberAdders||[],eventSourceRefiners:n.eventSourceRefiners||{},isDraggableTransformers:n.isDraggableTransformers||[],eventDragMutationMassagers:n.eventDragMutationMassagers||[],eventDefMutationAppliers:n.eventDefMutationAppliers||[],dateSelectionTransformers:n.dateSelectionTransformers||[],datePointTransforms:n.datePointTransforms||[],dateSpanTransforms:n.dateSpanTransforms||[],views:n.views||{},viewPropsTransformers:n.viewPropsTransformers||[],isPropsValid:n.isPropsValid||null,externalDefTransforms:n.externalDefTransforms||[],viewContainerAppends:n.viewContainerAppends||[],eventDropTransformers:n.eventDropTransformers||[],componentInteractions:n.componentInteractions||[],calendarInteractions:n.calendarInteractions||[],themeClasses:n.themeClasses||{},eventSourceDefs:n.eventSourceDefs||[],cmdFormatter:n.cmdFormatter,recurringTypes:n.recurringTypes||[],namedTimeZonedImpl:n.namedTimeZonedImpl,initialView:n.initialView||"",elementDraggingImpl:n.elementDraggingImpl,optionChangeHandlers:n.optionChangeHandlers||{},scrollGridImpl:n.scrollGridImpl||null,listenerRefiners:n.listenerRefiners||{},optionRefiners:n.optionRefiners||{},propSetHandlers:n.propSetHandlers||{}}}function hI(n,e){let t={},i={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function s(r){for(let o of r){const a=o.name,l=t[a];l===void 0?(t[a]=o.id,s(o.deps),i=gI(i,o)):l!==o.id&&console.warn(`Duplicate plugin '${a}'`)}}return n&&s(n),s(e),i}function pI(){let n=[],e=[],t;return(i,s)=>((!t||!Pn(i,n)||!Pn(s,e))&&(t=hI(i,s)),n=i,e=s,t)}function gI(n,e){return{premiumReleaseDate:mI(n.premiumReleaseDate,e.premiumReleaseDate),reducers:n.reducers.concat(e.reducers),isLoadingFuncs:n.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:n.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},n.eventRefiners),e.eventRefiners),eventDefMemberAdders:n.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},n.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:n.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:n.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:n.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:n.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:n.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:n.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},n.views),e.views),viewPropsTransformers:n.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||n.isPropsValid,externalDefTransforms:n.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:n.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:n.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:n.calendarInteractions.concat(e.calendarInteractions),componentInteractions:n.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},n.themeClasses),e.themeClasses),eventSourceDefs:n.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||n.cmdFormatter,recurringTypes:n.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||n.namedTimeZonedImpl,initialView:n.initialView||e.initialView,elementDraggingImpl:n.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},n.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||n.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},n.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},n.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},n.propSetHandlers),e.propSetHandlers)}}function mI(n,e){return n===void 0?e:e===void 0?n:new Date(Math.max(n.valueOf(),e.valueOf()))}class Vn extends Kr{}Vn.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};Vn.prototype.baseIconClass="fc-icon";Vn.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};Vn.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};Vn.prototype.iconOverrideOption="buttonIcons";Vn.prototype.iconOverrideCustomButtonOption="icon";Vn.prototype.iconOverridePrefix="fc-icon-";function bI(n,e){let t={},i;for(i in n)vd(i,t,n,e);for(i in e)vd(i,t,n,e);return t}function vd(n,e,t,i){if(e[n])return e[n];let s=yI(n,e,t,i);return s&&(e[n]=s),s}function yI(n,e,t,i){let s=t[n],r=i[n],o=u=>s&&s[u]!==null?s[u]:r&&r[u]!==null?r[u]:null,a=o("component"),l=o("superType"),c=null;if(l){if(l===n)throw new Error("Can't have a custom view type that references itself");c=vd(l,e,t,i)}return!a&&c&&(a=c.component),a?{type:n,component:a,defaults:Object.assign(Object.assign({},c?c.defaults:{}),s?s.rawOptions:{}),overrides:Object.assign(Object.assign({},c?c.overrides:{}),r?r.rawOptions:{})}:null}function im(n){return Gr(n,vI)}function vI(n){let e=typeof n=="function"?{component:n}:n,{component:t}=e;return e.content?t=sm(e):t&&!(t.prototype instanceof ae)&&(t=sm(Object.assign(Object.assign({},e),{content:t}))),{superType:e.type,component:t,rawOptions:e}}function sm(n){return e=>w(Ii.Consumer,null,t=>w(tn,{elTag:"div",elClasses:Nx(t.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:t.options.nextDayThreshold}),generatorName:void 0,customGenerator:n.content,classNameGenerator:n.classNames,didMount:n.didMount,willUnmount:n.willUnmount}))}function xI(n,e,t,i){let s=im(n),r=im(e.views),o=bI(s,r);return Gr(o,a=>_I(a,r,e,t,i))}function _I(n,e,t,i,s){let r=n.overrides.duration||n.defaults.duration||i.duration||t.duration,o=null,a="",l="",c={};if(r&&(o=SI(r),o)){let f=fd(o);a=f.unit,f.value===1&&(l=a,c=e[a]?e[a].rawOptions:{})}let u=f=>{let h=f.buttonText||{},p=n.defaults.buttonTextKey;return p!=null&&h[p]!=null?h[p]:h[n.type]!=null?h[n.type]:h[l]!=null?h[l]:null},d=f=>{let h=f.buttonHints||{},p=n.defaults.buttonTextKey;return p!=null&&h[p]!=null?h[p]:h[n.type]!=null?h[n.type]:h[l]!=null?h[l]:null};return{type:n.type,component:n.component,duration:o,durationUnit:a,singleUnit:l,optionDefaults:n.defaults,optionOverrides:Object.assign(Object.assign({},c),n.overrides),buttonTextOverride:u(i)||u(t)||n.overrides.buttonText,buttonTextDefault:u(s)||n.defaults.buttonText||u(or)||n.type,buttonTitleOverride:d(i)||d(t)||n.overrides.buttonHint,buttonTitleDefault:d(s)||n.defaults.buttonHint||d(or)}}let rm={};function SI(n){let e=JSON.stringify(n),t=rm[e];return t===void 0&&(t=J(n),rm[e]=t),t}function wI(n,e){switch(e.type){case"CHANGE_VIEW_TYPE":n=e.viewType}return n}function AI(n,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},n),{[e.optionName]:e.rawOptionValue});default:return n}}function kI(n,e,t,i){let s;switch(e.type){case"CHANGE_VIEW_TYPE":return i.build(e.dateMarker||t);case"CHANGE_DATE":return i.build(e.dateMarker);case"PREV":if(s=i.buildPrev(n,t),s.isValid)return s;break;case"NEXT":if(s=i.buildNext(n,t),s.isValid)return s;break}return n}function EI(n,e,t){let i=e?e.activeRange:null;return h_({},PI(n,t),i,t)}function CI(n,e,t,i){let s=t?t.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return h_(n,e.sources,s,i);case"REMOVE_EVENT_SOURCE":return DI(n,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return t?p_(n,s,i):n;case"FETCH_EVENT_SOURCES":return Xf(n,e.sourceIds?Dx(e.sourceIds):g_(n,i),s,e.isRefetch||!1,i);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return RI(n,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return n}}function MI(n,e,t){let i=e?e.activeRange:null;return Xf(n,g_(n,t),i,!0,t)}function f_(n){for(let e in n)if(n[e].isFetching)return!0;return!1}function h_(n,e,t,i){let s={};for(let r of e)s[r.sourceId]=r;return t&&(s=p_(s,t,i)),Object.assign(Object.assign({},n),s)}function DI(n,e){return ms(n,t=>t.sourceId!==e)}function p_(n,e,t){return Xf(n,ms(n,i=>TI(i,e,t)),e,!1,t)}function TI(n,e,t){return m_(n,t)?!t.options.lazyFetching||!n.fetchRange||n.isFetching||e.start<n.fetchRange.start||e.end>n.fetchRange.end:!n.latestFetchId}function Xf(n,e,t,i,s){let r={};for(let o in n){let a=n[o];e[o]?r[o]=OI(a,t,i,s):r[o]=a}return r}function OI(n,e,t,i){let{options:s,calendarApi:r}=i,o=i.pluginHooks.eventSourceDefs[n.sourceDefId],a=Ni();return o.fetch({eventSource:n,range:e,isRefetch:t,context:i},l=>{let{rawEvents:c}=l;s.eventSourceSuccess&&(c=s.eventSourceSuccess.call(r,c,l.response)||c),n.success&&(c=n.success.call(r,c,l.response)||c),i.dispatch({type:"RECEIVE_EVENTS",sourceId:n.sourceId,fetchId:a,fetchRange:e,rawEvents:c})},l=>{let c=!1;s.eventSourceFailure&&(s.eventSourceFailure.call(r,l),c=!0),n.failure&&(n.failure(l),c=!0),c||console.warn(l.message,l),i.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:n.sourceId,fetchId:a,fetchRange:e,error:l})}),Object.assign(Object.assign({},n),{isFetching:!0,latestFetchId:a})}function RI(n,e,t,i){let s=n[e];return s&&t===s.latestFetchId?Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},s),{isFetching:!1,fetchRange:i})}):n}function g_(n,e){return ms(n,t=>m_(t,e))}function PI(n,e){let t=jx(e),i=[].concat(n.eventSources||[]),s=[];n.initialEvents&&i.unshift(n.initialEvents),n.events&&i.unshift(n.events);for(let r of i){let o=Vx(r,e,t);o&&s.push(o)}return s}function m_(n,e){return!e.pluginHooks.eventSourceDefs[n.sourceDefId].ignoreRange}function NI(n,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return n}}function II(n,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return n}}function LI(n,e){let t;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function BI(n,e){let t;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function FI(n,e,t,i,s){let r=n.headerToolbar?om(n.headerToolbar,n,e,t,i,s):null,o=n.footerToolbar?om(n.footerToolbar,n,e,t,i,s):null;return{header:r,footer:o}}function om(n,e,t,i,s,r){let o={},a=[],l=!1;for(let c in n){let u=n[c],d=zI(u,e,t,i,s,r);o[c]=d.widgets,a.push(...d.viewsWithButtons),l=l||d.hasTitle}return{sectionWidgets:o,viewsWithButtons:a,hasTitle:l}}function zI(n,e,t,i,s,r){let o=e.direction==="rtl",a=e.customButtons||{},l=t.buttonText||{},c=e.buttonText||{},u=t.buttonHints||{},d=e.buttonHints||{},f=n?n.split(" "):[],h=[],p=!1;return{widgets:f.map(g=>g.split(",").map(b=>{if(b==="title")return p=!0,{buttonName:b};let y,v,x,_,S,C;if(y=a[b])x=E=>{y.click&&y.click.call(E.target,E,E.target)},(_=i.getCustomButtonIconClass(y))||(_=i.getIconClass(b,o))||(S=y.text),C=y.hint||y.text;else if(v=s[b]){h.push(b),x=()=>{r.changeView(b)},(S=v.buttonTextOverride)||(_=i.getIconClass(b,o))||(S=v.buttonTextDefault);let E=v.buttonTextOverride||v.buttonTextDefault;C=rr(v.buttonTitleOverride||v.buttonTitleDefault||e.viewHint,[E,b],E)}else if(r[b])if(x=()=>{r[b]()},(S=l[b])||(_=i.getIconClass(b,o))||(S=c[b]),b==="prevYear"||b==="nextYear"){let E=b==="prevYear"?"prev":"next";C=rr(u[E]||d[E],[c.year||"year","year"],c[b])}else C=E=>rr(u[b]||d[b],[c[E]||E,E],c[b]);return{buttonName:b,buttonClick:x,buttonIcon:_,buttonText:S,buttonHint:C}})),viewsWithButtons:h,hasTitle:p}}class HI{constructor(e,t,i){this.type=e,this.getCurrentData=t,this.dateEnv=i}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let VI={ignoreRange:!0,parseMeta(n){return Array.isArray(n.events)?n.events:null},fetch(n,e){e({rawEvents:n.eventSource.meta})}};const jI=Fi({name:"array-event-source",eventSourceDefs:[VI]});let WI={parseMeta(n){return typeof n.events=="function"?n.events:null},fetch(n,e,t){const{dateEnv:i}=n.context,s=n.eventSource.meta;cN(s.bind(null,Jx(n.range,i)),r=>e({rawEvents:r}),t)}};const UI=Fi({name:"func-event-source",eventSourceDefs:[WI]}),$I={method:String,extraParams:k,startParam:String,endParam:String,timeZoneParam:String};let qI={parseMeta(n){return n.url&&(n.format==="json"||!n.format)?{url:n.url,format:"json",method:(n.method||"GET").toUpperCase(),extraParams:n.extraParams,startParam:n.startParam,endParam:n.endParam,timeZoneParam:n.timeZoneParam}:null},fetch(n,e,t){const{meta:i}=n.eventSource,s=KI(i,n.range,n.context);uN(i.method,i.url,s).then(([r,o])=>{e({rawEvents:r,response:o})},t)}};const GI=Fi({name:"json-event-source",eventSourceRefiners:$I,eventSourceDefs:[qI]});function KI(n,e,t){let{dateEnv:i,options:s}=t,r,o,a,l,c={};return r=n.startParam,r==null&&(r=s.startParam),o=n.endParam,o==null&&(o=s.endParam),a=n.timeZoneParam,a==null&&(a=s.timeZoneParam),typeof n.extraParams=="function"?l=n.extraParams():l=n.extraParams||{},Object.assign(c,l),c[r]=i.formatIso(e.start),c[o]=i.formatIso(e.end),i.timeZone!=="local"&&(c[a]=i.timeZone),c}const YI={daysOfWeek:k,startTime:J,endTime:J,duration:J,startRecur:k,endRecur:k};let JI={parse(n,e){if(n.daysOfWeek||n.startTime||n.endTime||n.startRecur||n.endRecur){let t={daysOfWeek:n.daysOfWeek||null,startTime:n.startTime||null,endTime:n.endTime||null,startRecur:n.startRecur?e.createMarker(n.startRecur):null,endRecur:n.endRecur?e.createMarker(n.endRecur):null},i;return n.duration&&(i=n.duration),!i&&n.startTime&&n.endTime&&(i=bR(n.endTime,n.startTime)),{allDayGuess:!n.startTime&&!n.endTime,duration:i,typeData:t}}return null},expand(n,e,t){let i=bs(e,{start:n.startRecur,end:n.endRecur});return i?ZI(n.daysOfWeek,n.startTime,i,t):[]}};const QI=Fi({name:"simple-recurring-event",recurringTypes:[JI],eventRefiners:YI});function ZI(n,e,t,i){let s=n?Dx(n):null,r=oe(t.start),o=t.end,a=[];for(;r<o;){let l;(!s||s[r.getUTCDay()])&&(e?l=i.add(r,e):l=r,a.push(l)),r=ze(r,1)}return a}const XI=Fi({name:"change-handler",optionChangeHandlers:{events(n,e){am([n],e)},eventSources:am}});function am(n,e){let t=Wf(e.getCurrentData().eventSources);if(t.length===1&&n.length===1&&Array.isArray(t[0]._raw)&&Array.isArray(n[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:t[0].sourceId,rawEvents:n[0]});return}let i=[];for(let s of n){let r=!1;for(let o=0;o<t.length;o+=1)if(t[o]._raw===s){t.splice(o,1),r=!0;break}r||i.push(s)}for(let s of t)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:s.sourceId});for(let s of i)e.calendarApi.addEventSource(s)}function eL(n,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},Jx(n.activeRange,e.dateEnv)),{view:e.viewApi}))}function tL(n,e){let{emitter:t}=e;t.hasHandlers("eventsSet")&&t.trigger("eventsSet",Yf(n,e))}const nL=[jI,UI,GI,QI,XI,Fi({name:"misc",isLoadingFuncs:[n=>f_(n.eventSources)],propSetHandlers:{dateProfile:eL,eventStore:tL}})];class iL{constructor(e,t){this.runTaskOption=e,this.drainedOption=t,this.queue=[],this.delayedRunner=new Ff(this.drain.bind(this))}request(e,t){this.queue.push(e),this.delayedRunner.request(t)}pause(e){this.delayedRunner.pause(e)}resume(e,t){this.delayedRunner.resume(e,t)}drain(){let{queue:e}=this;for(;e.length;){let t=[],i;for(;i=e.shift();)this.runTask(i),t.push(i);this.drained(t)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function sL(n,e,t){let i;return/^(year|month)$/.test(n.currentRangeUnit)?i=n.currentRange:i=n.activeRange,t.formatRange(i.start,i.end,Se(e.titleFormat||rL(n)),{isEndExclusive:n.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function rL(n){let{currentRangeUnit:e}=n;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let t=hl(n.currentRange.start,n.currentRange.end);return t!==null&&t>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class oL{constructor(e){this.computeCurrentViewData=K(this._computeCurrentViewData),this.organizeRawLocales=K(uI),this.buildLocale=K(u_),this.buildPluginHooks=pI(),this.buildDateEnv=K(aL),this.buildTheme=K(lL),this.parseToolbars=K(FI),this.buildViewSpecs=K(xI),this.buildDateProfileGenerator=ea(cL),this.buildViewApi=K(uL),this.buildViewUiProps=ea(hL),this.buildEventUiBySource=K(dL,zt),this.buildEventUiBases=K(fL),this.parseContextBusinessHours=ea(pL),this.buildTitle=K(sL),this.emitter=new zP,this.actionRunner=new iL(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=f=>{this.actionRunner.request(f)},this.props=e,this.actionRunner.pause();let t={},i=this.computeOptionsData(e.optionOverrides,t,e.calendarApi),s=i.calendarOptions.initialView||i.pluginHooks.initialView,r=this.computeCurrentViewData(s,i,e.optionOverrides,t);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(r.options);let o=vP(i.calendarOptions,i.dateEnv),a=r.dateProfileGenerator.build(o);Cn(a.activeRange,o)||(o=a.currentRange.start);let l={dateEnv:i.dateEnv,options:i.calendarOptions,pluginHooks:i.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData};for(let f of i.pluginHooks.contextInit)f(l);let c=EI(i.calendarOptions,a,l),u={dynamicOptionOverrides:t,currentViewType:s,currentDate:o,dateProfile:a,businessHours:this.parseContextBusinessHours(l),eventSources:c,eventUiBases:{},eventStore:Di(),renderableEventStore:Di(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(l).selectionConfig},d=Object.assign(Object.assign({},l),u);for(let f of i.pluginHooks.reducers)Object.assign(u,f(null,null,d));Xc(u,l)&&this.emitter.trigger("loading",!0),this.state=u,this.updateData(),this.actionRunner.resume()}resetOptions(e,t){let{props:i}=this;t===void 0?i.optionOverrides=e:(i.optionOverrides=Object.assign(Object.assign({},i.optionOverrides||{}),e),this.optionsForRefining.push(...t)),(t===void 0||t.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:t,state:i,emitter:s}=this,r=AI(i.dynamicOptionOverrides,e),o=this.computeOptionsData(t.optionOverrides,r,t.calendarApi),a=wI(i.currentViewType,e),l=this.computeCurrentViewData(a,o,t.optionOverrides,r);t.calendarApi.currentDataManager=this,s.setThisContext(t.calendarApi),s.setOptions(l.options);let c={dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:s,getCurrentData:this.getCurrentData},{currentDate:u,dateProfile:d}=i;this.data&&this.data.dateProfileGenerator!==l.dateProfileGenerator&&(d=l.dateProfileGenerator.build(u)),u=yP(u,e),d=kI(d,e,u,l.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!Cn(d.currentRange,u))&&(u=d.currentRange.start);let f=CI(i.eventSources,e,d,c),h=NP(i.eventStore,e,f,d,c),m=f_(f)&&!l.options.progressiveEventRendering&&i.renderableEventStore||h,{eventUiSingleBase:g,selectionConfig:b}=this.buildViewUiProps(c),y=this.buildEventUiBySource(f),v=this.buildEventUiBases(m.defs,g,y),x={dynamicOptionOverrides:r,currentViewType:a,currentDate:u,dateProfile:d,eventSources:f,eventStore:h,renderableEventStore:m,selectionConfig:b,eventUiBases:v,businessHours:this.parseContextBusinessHours(c),dateSelection:NI(i.dateSelection,e),eventSelection:II(i.eventSelection,e),eventDrag:LI(i.eventDrag,e),eventResize:BI(i.eventResize,e)},_=Object.assign(Object.assign({},c),x);for(let E of o.pluginHooks.reducers)Object.assign(x,E(i,e,_));let S=Xc(i,c),C=Xc(x,c);!S&&C?s.trigger("loading",!0):S&&!C&&s.trigger("loading",!1),this.state=x,t.onAction&&t.onAction(e)}updateData(){let{props:e,state:t}=this,i=this.data,s=this.computeOptionsData(e.optionOverrides,t.dynamicOptionOverrides,e.calendarApi),r=this.computeCurrentViewData(t.currentViewType,s,e.optionOverrides,t.dynamicOptionOverrides),o=this.data=Object.assign(Object.assign(Object.assign({viewTitle:this.buildTitle(t.dateProfile,r.options,s.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},s),r),t),a=s.pluginHooks.optionChangeHandlers,l=i&&i.calendarOptions,c=s.calendarOptions;if(l&&l!==c){l.timeZone!==c.timeZone&&(t.eventSources=o.eventSources=MI(o.eventSources,t.dateProfile,o),t.eventStore=o.eventStore=qg(o.eventStore,i.dateEnv,o.dateEnv),t.renderableEventStore=o.renderableEventStore=qg(o.renderableEventStore,i.dateEnv,o.dateEnv));for(let u in a)(this.optionsForHandling.indexOf(u)!==-1||l[u]!==c[u])&&a[u](c[u],o)}this.optionsForHandling=[],e.onData&&e.onData(o)}computeOptionsData(e,t,i){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&t===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:s,pluginHooks:r,localeDefaults:o,availableLocaleData:a,extra:l}=this.processRawCalendarOptions(e,t);lm(l);let c=this.buildDateEnv(s.timeZone,s.locale,s.weekNumberCalculation,s.firstDay,s.weekText,r,a,s.defaultRangeSeparator),u=this.buildViewSpecs(r.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,o),d=this.buildTheme(s,r),f=this.parseToolbars(s,this.stableOptionOverrides,d,u,i);return this.stableCalendarOptionsData={calendarOptions:s,pluginHooks:r,dateEnv:c,viewSpecs:u,theme:d,toolbarConfig:f,localeDefaults:o,availableRawLocales:a.map}}processRawCalendarOptions(e,t){let{locales:i,locale:s}=Gc([or,e,t]),r=this.organizeRawLocales(i),o=r.map,a=this.buildLocale(s||r.defaultCode,o).options,l=this.buildPluginHooks(e.plugins||[],nL),c=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},zg),Hg),Vg),l.listenerRefiners),l.optionRefiners),u={},d=Gc([or,a,e,t]),f={},h=this.currentCalendarOptionsInput,p=this.currentCalendarOptionsRefined,m=!1;for(let g in d)this.optionsForRefining.indexOf(g)===-1&&(d[g]===h[g]||Jn[g]&&g in h&&Jn[g](h[g],d[g]))?f[g]=p[g]:c[g]?(f[g]=c[g](d[g]),m=!0):u[g]=h[g];return m&&(this.currentCalendarOptionsInput=d,this.currentCalendarOptionsRefined=f,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=t),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:l,availableLocaleData:r,localeDefaults:a,extra:u}}_computeCurrentViewData(e,t,i,s){let r=t.viewSpecs[e];if(!r)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:o,extra:a}=this.processRawViewOptions(r,t.pluginHooks,t.localeDefaults,i,s);lm(a);let l=this.buildDateProfileGenerator({dateProfileGeneratorClass:r.optionDefaults.dateProfileGeneratorClass,duration:r.duration,durationUnit:r.durationUnit,usesMinMaxTime:r.optionDefaults.usesMinMaxTime,dateEnv:t.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,showNonCurrentDates:o.showNonCurrentDates,dayCount:o.dayCount,dateAlignment:o.dateAlignment,dateIncrement:o.dateIncrement,hiddenDays:o.hiddenDays,weekends:o.weekends,nowInput:o.now,validRangeInput:o.validRange,visibleRangeInput:o.visibleRange,fixedWeekCount:o.fixedWeekCount}),c=this.buildViewApi(e,this.getCurrentData,t.dateEnv);return{viewSpec:r,options:o,dateProfileGenerator:l,viewApi:c}}processRawViewOptions(e,t,i,s,r){let o=Gc([or,e.optionDefaults,i,s,e.optionOverrides,r]),a=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},zg),Hg),Vg),YR),t.listenerRefiners),t.optionRefiners),l={},c=this.currentViewOptionsInput,u=this.currentViewOptionsRefined,d=!1,f={};for(let h in o)o[h]===c[h]||Jn[h]&&Jn[h](o[h],c[h])?l[h]=u[h]:(o[h]===this.currentCalendarOptionsInput[h]||Jn[h]&&Jn[h](o[h],this.currentCalendarOptionsInput[h])?h in this.currentCalendarOptionsRefined&&(l[h]=this.currentCalendarOptionsRefined[h]):a[h]?l[h]=a[h](o[h]):f[h]=o[h],d=!0);return d&&(this.currentViewOptionsInput=o,this.currentViewOptionsRefined=l),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:f}}}function aL(n,e,t,i,s,r,o,a){let l=u_(e||o.defaultCode,o.map);return new rP({calendarSystem:"gregory",timeZone:n,namedTimeZoneImpl:r.namedTimeZonedImpl,locale:l,weekNumberCalculation:t,firstDay:i,weekText:s,cmdFormatter:r.cmdFormatter,defaultSeparator:a})}function lL(n,e){let t=e.themeClasses[n.themeSystem]||Vn;return new t(n)}function cL(n){let e=n.dateProfileGeneratorClass||Bx;return new e(n)}function uL(n,e,t){return new HI(n,e,t)}function dL(n){return Gr(n,e=>e.ui)}function fL(n,e,t){let i={"":e};for(let s in n){let r=n[s];r.sourceId&&t[r.sourceId]&&(i[s]=t[r.sourceId])}return i}function hL(n){let{options:e}=n;return{eventUiSingleBase:vl({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},n),selectionConfig:vl({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},n)}}function Xc(n,e){for(let t of e.pluginHooks.isLoadingFuncs)if(t(n))return!0;return!1}function pL(n){return WP(n.options.businessHours,n)}function lm(n,e){for(let t in n)console.warn(`Unknown option '${t}'`)}class gL extends ae{render(){let e=this.props.widgetGroups.map(t=>this.renderWidgetGroup(t));return w("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:t}=this,{theme:i}=this.context,s=[],r=!0;for(let o of e){let{buttonName:a,buttonClick:l,buttonText:c,buttonIcon:u,buttonHint:d}=o;if(a==="title")r=!1,s.push(w("h2",{className:"fc-toolbar-title",id:t.titleId},t.title));else{let f=a===t.activeButton,h=!t.isTodayEnabled&&a==="today"||!t.isPrevEnabled&&a==="prev"||!t.isNextEnabled&&a==="next",p=[`fc-${a}-button`,i.getClass("button")];f&&p.push(i.getClass("buttonActive")),s.push(w("button",{type:"button",title:typeof d=="function"?d(t.navUnit):d,disabled:h,"aria-pressed":f,className:p.join(" "),onClick:l},c||(u?w("span",{className:u,role:"img"}):"")))}}if(s.length>1){let o=r&&i.getClass("buttonGroup")||"";return w("div",{className:o},...s)}return s[0]}}class cm extends ae{render(){let{model:e,extraClassName:t}=this.props,i=!1,s,r,o=e.sectionWidgets,a=o.center;return o.left?(i=!0,s=o.left):s=o.start,o.right?(i=!0,r=o.right):r=o.end,w("div",{className:[t||"","fc-toolbar",i?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",s||[]),this.renderSection("center",a||[]),this.renderSection("end",r||[]))}renderSection(e,t){let{props:i}=this;return w(gL,{key:e,widgetGroups:t,title:i.title,navUnit:i.navUnit,activeButton:i.activeButton,isTodayEnabled:i.isTodayEnabled,isPrevEnabled:i.isPrevEnabled,isNextEnabled:i.isNextEnabled,titleId:i.titleId})}}class mL extends ae{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,en(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:t}=this,{aspectRatio:i}=e,s=["fc-view-harness",i||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],r="",o="";return i?t.availableWidth!==null?r=t.availableWidth/i:o=`${1/i*100}%`:r=e.height||"",w("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:s.join(" "),style:{height:r,paddingBottom:o}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class bL extends Xx{constructor(e){super(e),this.handleSegClick=(t,i)=>{let{component:s}=this,{context:r}=s,o=bd(i);if(o&&s.isValidSegDownEl(t.target)){let a=Gt(t.target,".fc-event-forced-url"),l=a?a.querySelector("a[href]").href:"";r.emitter.trigger("eventClick",{el:i,event:new gt(s.context,o.eventRange.def,o.eventRange.instance),jsEvent:t,view:r.viewApi}),l&&!t.defaultPrevented&&(window.location.href=l)}},this.destroy=kx(e.el,"click",".fc-event",this.handleSegClick)}}class yL extends Xx{constructor(e){super(e),this.handleEventElRemove=t=>{t===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(t,i)=>{bd(i)&&(this.currentSegEl=i,this.triggerEvent("eventMouseEnter",t,i))},this.handleSegLeave=(t,i)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",t,i))},this.removeHoverListeners=lR(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,t,i){let{component:s}=this,{context:r}=s,o=bd(i);(!t||s.isValidSegDownEl(t.target))&&r.emitter.trigger(e,{el:i,event:new gt(r,o.eventRange.def,o.eventRange.instance),jsEvent:t,view:r.viewApi})}}class vL extends Li{constructor(){super(...arguments),this.buildViewContext=K(lP),this.buildViewPropTransformers=K(_L),this.buildToolbarProps=K(xL),this.headerRef=Xt(),this.footerRef=Xt(),this.interactionsStore={},this.state={viewLabelId:nc()},this.registerInteractiveComponent=(e,t)=>{let i=hN(e,t),o=[bL,yL].concat(this.props.pluginHooks.componentInteractions).map(a=>new a(i));this.interactionsStore[e.uid]=o,Qg[e.uid]=i},this.unregisterInteractiveComponent=e=>{let t=this.interactionsStore[e.uid];if(t){for(let i of t)i.destroy();delete this.interactionsStore[e.uid]}delete Qg[e.uid]},this.resizeRunner=new Ff(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:t}=this.props;t.handleWindowResize&&e.target===window&&this.resizeRunner.request(t.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:t,options:i}=e,s=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,Yr(e.options.now,e.dateEnv),e.viewTitle),r=!1,o="",a;e.isHeightAuto||e.forPrint?o="":i.height!=null?r=!0:i.contentHeight!=null?o=i.contentHeight:a=Math.max(i.aspectRatio,.5);let l=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),c=t.header&&t.header.hasTitle?this.state.viewLabelId:void 0;return w(Ii.Provider,{value:l},t.header&&w(cm,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:t.header,titleId:c},s)),w(mL,{liquid:r,height:o,aspectRatio:a,labeledById:c},this.renderView(e),this.buildAppendContent()),t.footer&&w(cm,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:t.footer,titleId:""},s)))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(i=>new i(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:t}=e.pluginHooks;for(let i in t)t[i](e[i],e)}componentDidUpdate(e){let{props:t}=this,{propSetHandlers:i}=t.pluginHooks;for(let s in i)t[s]!==e[s]&&i[s](t[s],t)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,t=e.pluginHooks.viewContainerAppends.map(i=>i(e));return w(fe,{},...t)}renderView(e){let{pluginHooks:t}=e,{viewSpec:i}=e,s={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},r=this.buildViewPropTransformers(t.viewPropsTransformers);for(let a of r)Object.assign(s,a.transform(s,e));let o=i.component;return w(o,Object.assign({},s))}}function xL(n,e,t,i,s,r){let o=t.build(s,void 0,!1),a=t.buildPrev(e,i,!1),l=t.buildNext(e,i,!1);return{title:r,activeButton:n.type,navUnit:n.singleUnit,isTodayEnabled:o.isValid&&!Cn(e.currentRange,s),isPrevEnabled:a.isValid,isNextEnabled:l.isValid}}function _L(n){return n.map(e=>new e)}class SL extends pN{constructor(e,t={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=i=>{switch(i.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=i=>{this.currentData=i,this.renderRunner.request(i.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:i}=this;bl(()=>{Cr(w(fN,{options:i.calendarOptions,theme:i.theme,emitter:i.emitter},(s,r,o,a)=>(this.setClassNames(s),this.setHeight(r),w(Px.Provider,{value:this.customContentRenderId},w(vL,Object.assign({isHeightAuto:o,forPrint:a},i))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Cr(null,this.el),this.setClassNames([]),this.setHeight(""))},JO(e),this.el=e,this.renderRunner=new Ff(this.handleRenderRequest),new oL({optionOverrides:t,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){bl(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,t){this.currentDataManager.resetOptions(e,t)}setClassNames(e){if(!Pn(e,this.currentClassNames)){let{classList:t}=this.el;for(let i of this.currentClassNames)t.remove(i);for(let i of e)t.add(i);this.currentClassNames=e}}setHeight(e){Ax(this.el,"height",e)}}class wL extends Bi{constructor(){super(...arguments),this.headerElRef=Xt()}renderSimpleLayout(e,t){let{props:i,context:s}=this,r=[],o=tm(s.options);return e&&r.push({type:"header",key:"header",isSticky:o,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),r.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),w(jg,{elClasses:["fc-daygrid"],viewSpec:s.viewSpec},w(r_,{liquid:!i.isHeightAuto&&!i.forPrint,collapsibleWidth:i.forPrint,cols:[],sections:r}))}renderHScrollLayout(e,t,i,s){let r=this.context.pluginHooks.scrollGridImpl;if(!r)throw new Error("No ScrollGrid implementation");let{props:o,context:a}=this,l=!o.forPrint&&tm(a.options),c=!o.forPrint&&UN(a.options),u=[];return e&&u.push({type:"header",key:"header",isSticky:l,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),u.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),c&&u.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:WN}]}),w(jg,{elClasses:["fc-daygrid"],viewSpec:a.viewSpec},w(r,{liquid:!o.isHeightAuto&&!o.forPrint,forPrint:o.forPrint,collapsibleWidth:o.forPrint,colGroups:[{cols:[{span:i,minWidth:s}]}],sections:u}))}}function ko(n,e){let t=[];for(let i=0;i<e;i+=1)t[i]=[];for(let i of n)t[i.row].push(i);return t}function Eo(n,e){let t=[];for(let i=0;i<e;i+=1)t[i]=[];for(let i of n)t[i.firstCol].push(i);return t}function um(n,e){let t=[];if(n){for(let i=0;i<e;i+=1)t[i]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let i of n.segs)t[i.row].segs.push(i)}else for(let i=0;i<e;i+=1)t[i]=null;return t}const b_=Se({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function y_(n){let{display:e}=n.eventRange.ui;return e==="list-item"||e==="auto"&&!n.eventRange.def.allDay&&n.firstCol===n.lastCol&&n.isStart&&n.isEnd}class v_ extends ae{render(){let{props:e}=this;return w(qN,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:b_,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class x_ extends ae{render(){let{props:e,context:t}=this,{options:i}=t,{seg:s}=e,r=i.eventTimeFormat||b_,o=Kx(s,r,t,!0,e.defaultDisplayEventEnd);return w(Zf,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:Yx(e.seg,t),defaultGenerator:AL,timeText:o,isResizing:!1,isDateSelecting:!1}))}}function AL(n){return w(fe,null,w("div",{className:"fc-daygrid-event-dot",style:{borderColor:n.borderColor||n.backgroundColor}}),n.timeText&&w("div",{className:"fc-event-time"},n.timeText),w("div",{className:"fc-event-title"},n.event.title||w(fe,null,"")))}class kL extends ae{constructor(){super(...arguments),this.compileSegs=K(EL)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:i}=this.compileSegs(e.singlePlacements);return w(iI,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:i,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let s=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return w(fe,null,t.map(r=>{let o=r.eventRange.instance.instanceId;return w("div",{className:"fc-daygrid-event-harness",key:o,style:{visibility:s[o]?"hidden":""}},y_(r)?w(x_,Object.assign({seg:r,isDragging:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},ar(r,e.todayRange))):w(v_,Object.assign({seg:r,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},ar(r,e.todayRange))))}))}})}}function EL(n){let e=[],t=[];for(let i of n)e.push(i.seg),i.isVisible||t.push(i.seg);return{allSegs:e,invisibleSegs:t}}const CL=Se({week:"narrow"});class ML extends Bi{constructor(){super(...arguments),this.rootElRef=Xt(),this.state={dayNumberId:nc()},this.handleRootEl=e=>{en(this.rootElRef,e),en(this.props.elRef,e)}}render(){let{context:e,props:t,state:i,rootElRef:s}=this,{options:r,dateEnv:o}=e,{date:a,dateProfile:l}=t;const c=t.showDayNumber&&TL(a,l.currentRange,o);return w(o_,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":i.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:DL,date:a,dateProfile:l,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:c,extraRenderProps:t.extraRenderProps},(u,d)=>w("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&w(XN,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:yd(e,a,"week"),date:a,defaultFormat:CL}),!d.isDisabled&&(t.showDayNumber||a_(r)||t.forceDayTop)?w("div",{className:"fc-daygrid-day-top"},w(u,{elTag:"a",elClasses:["fc-daygrid-day-number",c&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},yd(e,a)),{id:i.dayNumberId})})):t.showDayNumber?w("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},w("a",{className:"fc-daygrid-day-number"},"")):void 0,w("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,w("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},w(kL,{allDayDate:a,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:s,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),w("div",{className:"fc-daygrid-day-bg"},t.bgContent)))}}function DL(n){return n.dayNumberText||w(fe,null,"")}function TL(n,e,t){const{start:i,end:s}=e,r=Nn(s,-1),o=t.getYear(i),a=t.getMonth(i),l=t.getYear(r),c=t.getMonth(r);return!(o===l&&a===c)&&(n.valueOf()===i.valueOf()||t.getDay(n)===1&&n.valueOf()<s.valueOf())}function __(n){return n.eventRange.instance.instanceId+":"+n.firstCol}function S_(n){return __(n)+":"+n.lastCol}function OL(n,e,t,i,s,r,o){let a=new NL(b=>{let y=n[b.index].eventRange.instance.instanceId+":"+b.span.start+":"+(b.span.end-1);return s[y]||1});a.allowReslicing=!0,a.strictOrder=i,e===!0||t===!0?(a.maxCoord=r,a.hiddenConsumes=!0):typeof e=="number"?a.maxStackCnt=e:typeof t=="number"&&(a.maxStackCnt=t,a.hiddenConsumes=!0);let l=[],c=[];for(let b=0;b<n.length;b+=1){let y=n[b],v=S_(y);s[v]!=null?l.push({index:b,span:{start:y.firstCol,end:y.lastCol+1}}):c.push(y)}let u=a.addSegs(l),d=a.toRects(),{singleColPlacements:f,multiColPlacements:h,leftoverMargins:p}=RL(d,n,o),m=[],g=[];for(let b of c){h[b.firstCol].push({seg:b,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let y=b.firstCol;y<=b.lastCol;y+=1)f[y].push({seg:ss(b,y,y+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let b=0;b<o.length;b+=1)m.push(0);for(let b of u){let y=n[b.index],v=b.span;h[v.start].push({seg:ss(y,v.start,v.end,o),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let x=v.start;x<v.end;x+=1)m[x]+=1,f[x].push({seg:ss(y,x,x+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let b=0;b<o.length;b+=1)g.push(p[b]);return{singleColPlacements:f,multiColPlacements:h,moreCnts:m,moreMarginTops:g}}function RL(n,e,t){let i=PL(n,t.length),s=[],r=[],o=[];for(let a=0;a<t.length;a+=1){let l=i[a],c=[],u=0,d=0;for(let h of l){let p=e[h.index];c.push({seg:ss(p,a,a+1,t),isVisible:!0,isAbsolute:!1,absoluteTop:h.levelCoord,marginTop:h.levelCoord-u}),u=h.levelCoord+h.thickness}let f=[];u=0,d=0;for(let h of l){let p=e[h.index],m=h.span.end-h.span.start>1,g=h.span.start===a;d+=h.levelCoord-u,u=h.levelCoord+h.thickness,m?(d+=h.thickness,g&&f.push({seg:ss(p,h.span.start,h.span.end,t),isVisible:!0,isAbsolute:!0,absoluteTop:h.levelCoord,marginTop:0})):g&&(f.push({seg:ss(p,h.span.start,h.span.end,t),isVisible:!0,isAbsolute:!1,absoluteTop:h.levelCoord,marginTop:d}),d=0)}s.push(c),r.push(f),o.push(d)}return{singleColPlacements:s,multiColPlacements:r,leftoverMargins:o}}function PL(n,e){let t=[];for(let i=0;i<e;i+=1)t.push([]);for(let i of n)for(let s=i.span.start;s<i.span.end;s+=1)t[s].push(i);return t}function ss(n,e,t,i){if(n.firstCol===e&&n.lastCol===t-1)return n;let s=n.eventRange,r=s.range,o=bs(r,{start:i[e].date,end:ze(i[t-1].date,1)});return Object.assign(Object.assign({},n),{firstCol:e,lastCol:t-1,eventRange:{def:s.def,ui:Object.assign(Object.assign({},s.ui),{durationEditable:!1}),instance:s.instance,range:o},isStart:n.isStart&&o.start.valueOf()===r.start.valueOf(),isEnd:n.isEnd&&o.end.valueOf()===r.end.valueOf()})}class NL extends wN{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const t=super.addSegs(e),{entriesByLevel:i}=this,s=r=>!this.forceHidden[lr(r)];for(let r=0;r<i.length;r+=1)i[r]=i[r].filter(s);return t}handleInvalidInsertion(e,t,i){const{entriesByLevel:s,forceHidden:r}=this,{touchingEntry:o,touchingLevel:a,touchingLateral:l}=e;if(this.hiddenConsumes&&o){const c=lr(o);if(!r[c])if(this.allowReslicing){const u=Object.assign(Object.assign({},o),{span:t_(o.span,t.span)}),d=lr(u);r[d]=!0,s[a][l]=u,i.push(u),this.splitEntry(o,t,i)}else r[c]=!0,i.push(o)}super.handleInvalidInsertion(e,t,i)}}class w_ extends Bi{constructor(){super(...arguments),this.cellElRefs=new ci,this.frameElRefs=new ci,this.fgElRefs=new ci,this.segHarnessRefs=new ci,this.rootElRef=Xt(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:i}=this,{options:s}=i,r=e.cells.length,o=Eo(e.businessHourSegs,r),a=Eo(e.bgEventSegs,r),l=Eo(this.getHighlightSegs(),r),c=Eo(this.getMirrorSegs(),r),{singleColPlacements:u,multiColPlacements:d,moreCnts:f,moreMarginTops:h}=OL(QP(e.fgEventSegs,s.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,s.eventOrderStrict,t.segHeights,t.maxContentHeight,e.cells),p=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return w("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((m,g)=>{let b=this.renderFgSegs(g,e.forPrint?u[g]:d[g],e.todayRange,p),y=this.renderFgSegs(g,IL(c[g],d),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return w(ML,{key:m.key,elRef:this.cellElRefs.createRef(m.key),innerElRef:this.frameElRefs.createRef(m.key),dateProfile:e.dateProfile,date:m.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&g===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:m.extraRenderProps,extraDataAttrs:m.extraDataAttrs,extraClassNames:m.extraClassNames,extraDateSpan:m.extraDateSpan,moreCnt:f[g],moreMarginTop:h[g],singlePlacements:u[g],fgContentElRef:this.fgElRefs.createRef(m.key),fgContent:w(fe,null,w(fe,null,b),w(fe,null,y)),bgContent:w(fe,null,this.renderFillSegs(l[g],"highlight"),this.renderFillSegs(o[g],"non-business"),this.renderFillSegs(a[g],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){let i=this.props;this.updateSizing(!zt(e,i))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,i,s,r,o,a){let{context:l}=this,{eventSelection:c}=this.props,{framePositions:u}=this.state,d=this.props.cells.length===1,f=r||o||a,h=[];if(u)for(let p of t){let{seg:m}=p,{instanceId:g}=m.eventRange.instance,b=p.isVisible&&!s[g],y=p.isAbsolute,v="",x="";y&&(l.isRtl?(x=0,v=u.lefts[m.lastCol]-u.lefts[m.firstCol]):(v=0,x=u.rights[m.firstCol]-u.rights[m.lastCol])),h.push(w("div",{className:"fc-daygrid-event-harness"+(y?" fc-daygrid-event-harness-abs":""),key:__(m),ref:f?null:this.segHarnessRefs.createRef(S_(m)),style:{visibility:b?"":"hidden",marginTop:y?"":p.marginTop,top:y?p.absoluteTop:"",left:v,right:x}},y_(m)?w(x_,Object.assign({seg:m,isDragging:r,isSelected:g===c,defaultDisplayEventEnd:d},ar(m,i))):w(v_,Object.assign({seg:m,isDragging:r,isResizing:o,isDateSelecting:a,isSelected:g===c,defaultDisplayEventEnd:d},ar(m,i)))))}return h}renderFillSegs(e,t){let{isRtl:i}=this.context,{todayRange:s}=this.props,{framePositions:r}=this.state,o=[];if(r)for(let a of e){let l=i?{right:0,left:r.lefts[a.lastCol]-r.lefts[a.firstCol]}:{left:0,right:r.rights[a.firstCol]-r.rights[a.lastCol]};o.push(w("div",{key:iN(a.eventRange),className:"fc-daygrid-bg-harness",style:l},t==="bg-event"?w(JN,Object.assign({seg:a},ar(a,s))):ZN(t)))}return w(fe,{},...o)}updateSizing(e){let{props:t,state:i,frameElRefs:s}=this;if(!t.forPrint&&t.clientWidth!==null){if(e){let l=t.cells.map(c=>s.currentMap[c.key]);if(l.length){let c=this.rootElRef.current,u=new xl(c,l,!0,!1);(!i.framePositions||!i.framePositions.similarTo(u))&&this.setState({framePositions:new xl(c,l,!0,!1)})}}const r=this.state.segHeights,o=this.querySegHeights(),a=t.dayMaxEvents===!0||t.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},r),o),maxContentHeight:a?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let i in e){let s=Math.round(e[i].getBoundingClientRect().height);t[i]=Math.max(t[i]||0,s)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],i=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-i.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(t=>e[t.key])}}w_.addStateEquality({segHeights:zt});function IL(n,e){if(!n.length)return[];let t=LL(e);return n.map(i=>({seg:i,isVisible:!0,isAbsolute:!0,absoluteTop:t[i.eventRange.instance.instanceId],marginTop:0}))}function LL(n){let e={};for(let t of n)for(let i of t)e[i.seg.eventRange.instance.instanceId]=i.absoluteTop;return e}class BL extends Bi{constructor(){super(...arguments),this.splitBusinessHourSegs=K(ko),this.splitBgEventSegs=K(ko),this.splitFgEventSegs=K(ko),this.splitDateSelectionSegs=K(ko),this.splitEventDrag=K(um),this.splitEventResize=K(um),this.rowRefs=new ci}render(){let{props:e,context:t}=this,i=e.cells.length,s=this.splitBusinessHourSegs(e.businessHourSegs,i),r=this.splitBgEventSegs(e.bgEventSegs,i),o=this.splitFgEventSegs(e.fgEventSegs,i),a=this.splitDateSelectionSegs(e.dateSelectionSegs,i),l=this.splitEventDrag(e.eventDrag,i),c=this.splitEventResize(e.eventResize,i),u=i>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return w(Qf,{unit:"day"},(d,f)=>w(fe,null,e.cells.map((h,p)=>w(w_,{ref:this.rowRefs.createRef(p),key:h.length?h[0].date.toISOString():p,showDayNumbers:i>1,showWeekNumbers:e.showWeekNumbers,todayRange:f,dateProfile:e.dateProfile,cells:h,renderIntro:e.renderRowIntro,businessHourSegs:s[p],eventSelection:e.eventSelection,bgEventSegs:r[p].filter(FL),fgEventSegs:o[p],dateSelectionSegs:a[p],eventDrag:l[p],eventResize:c[p],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:u,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],t=e?e.closest(".fc-daygrid-body"):null;t&&(this.rootEl=t,this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new xl(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new xl(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:i,rowPositions:s}=this,r=i.leftToIndex(e),o=s.topToIndex(t);if(o!=null&&r!=null){let a=this.props.cells[o][r];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(o,r),allDay:!0},a.extraDateSpan),dayEl:this.getCellEl(o,r),rect:{left:i.lefts[r],right:i.rights[r],top:s.tops[o],bottom:s.bottoms[o]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let i=this.props.cells[e][t].date,s=ze(i,1);return{start:i,end:s}}}function FL(n){return n.eventRange.def.allDay}class zL extends Bi{constructor(){super(...arguments),this.elRef=Xt(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:i,expandRows:s}=e,r=i===!0||t===!0;r&&!s&&(r=!1,t=null,i=null);let o=["fc-daygrid-body",r?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",s?"":"fc-daygrid-body-natural"];return w("div",{ref:this.elRef,className:o.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},w("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:s?e.clientHeight:""}},e.colGroupNode,w("tbody",{role:"presentation"},w(BL,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:i,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=HL(this.elRef.current,this.props.dateProfile);if(e){const t=e.closest(".fc-daygrid-body"),i=t.closest(".fc-scroller"),s=e.getBoundingClientRect().top-t.getBoundingClientRect().top;i.scrollTop=s?s+1:0}this.needsScrollReset=!1}}}function HL(n,e){let t;return e.currentRangeUnit.match(/year|month/)&&(t=n.querySelector(`[data-date="${PR(e.currentDate)}-01"]`)),t||(t=n.querySelector(`[data-date="${zf(e.currentDate)}"]`)),t}class VL extends RN{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}}class jL extends Bi{constructor(){super(...arguments),this.slicer=new VL,this.tableRef=Xt()}render(){let{props:e,context:t}=this;return w(zL,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class WL extends wL{constructor(){super(...arguments),this.buildDayTableModel=K(UL),this.headerRef=Xt(),this.tableRef=Xt()}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:i}=this,s=this.buildDayTableModel(i.dateProfile,t),r=e.dayHeaders&&w(MN,{ref:this.headerRef,dateProfile:i.dateProfile,dates:s.headerDates,datesRepDistinctDays:s.rowCnt===1}),o=a=>w(jL,{ref:this.tableRef,dateProfile:i.dateProfile,dayTableModel:s,businessHours:i.businessHours,dateSelection:i.dateSelection,eventStore:i.eventStore,eventUiBases:i.eventUiBases,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:a.tableColGroupNode,tableMinWidth:a.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!i.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:a.clientWidth,clientHeight:a.clientHeight,forPrint:i.forPrint});return e.dayMinWidth?this.renderHScrollLayout(r,o,s.colCnt,e.dayMinWidth):this.renderSimpleLayout(r,o)}}function UL(n,e){let t=new TN(n.renderRange,e);return new ON(t,/year|month|week/.test(n.currentRangeUnit))}class $L extends Bx{buildRenderRange(e,t,i){let s=super.buildRenderRange(e,t,i),{props:r}=this;return qL({currentRange:s,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:r.fixedWeekCount,dateEnv:r.dateEnv})}}function qL(n){let{dateEnv:e,currentRange:t}=n,{start:i,end:s}=t,r;if(n.snapToWeek&&(i=e.startOfWeek(i),r=e.startOfWeek(s),r.valueOf()!==s.valueOf()&&(s=Pg(r,1))),n.fixedWeekCount){let o=e.startOfWeek(e.startOfMonth(ze(t.end,-1))),a=Math.ceil(_R(o,s));s=Pg(s,6-a)}return{start:i,end:s}}var GL=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';_x(GL);var KL=Fi({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:WL,dateProfileGeneratorClass:$L},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});const YL=n=>({calendar:null,approved_events:[],pending_events:[],init(){this.calendar=new SL(this.$refs.calendar,{plugins:[KL],initialView:"dayGridMonth",events:n,height:"auto",eventClick:function(e){window.location.href=e.event.url},eventSourceSuccess:(e,t)=>(this.approved_events=[],this.pending_events=[],e.map(i=>{i.is_approved?this.approved_events.push(i):this.pending_events.push(i)}),e.eventArray)}),this.calendar.render()}}),JL=(n,e,t)=>({eventid:n,participants:[],filteredParticipants:[],availableUsers:[],paginatedUsers:[],currentPage:1,pageSize:10,totalPages:0,searchAvailablesValue:"",searchParticipantsValue:"",getAvailableUsers:async function(){console.log("getAvailableUsers");const i=`${e=="admin"?"":"/"+e}/events/${this.eventid}/available-users`,s=await fetch(i);if(s.ok){const r=await s.json();this.participants.length>0?this.availableUsers=r.filter(o=>!this.participants.some(a=>a.id===o.id)):this.availableUsers=r}},getParticipants:async function(){console.log("getParticipants");const i=`${e=="admin"?"":"/"+e}/events/${this.eventid}/participants`,s=await fetch(i);if(s.ok){const r=await s.json();Array.isArray(r)&&(this.participants=r,this.filteredParticipants=r,this.availableUsers.length>0&&(this.availableUsers=this.availableUsers.filter(o=>!this.participants.some(a=>a.id===o.id))))}},searchAvailableUsers:function(i){let s=i.target.value;if(s.length===0){this.paginateAvailableUsers();return}this.paginatedUsers=this.availableUsers.filter(r=>r.name.toLowerCase().includes(s.toLowerCase())||r.surname.toLowerCase().includes(s.toLowerCase()))},searchParticipants:function(i){console.log("searchParticipants");let s=i.target.value;return this.filteredParticipants=this.participants.filter(r=>r.name.toLowerCase().includes(s.toLowerCase())||r.surname.toLowerCase().includes(s.toLowerCase()))},addParticipant:async function(i){console.log("addParticipant");const s=this.availableUsers.find(l=>l.id===i);s&&this.participants.push(s);let r=JSON.stringify(this.participants.map(l=>l.id));const o=`${e=="admin"?"":"/"+e}/add-participants`,a=new FormData;a.append("event_id",this.eventid),a.append("participants",r),await fetch(o,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:a}),this.availableUsers=this.availableUsers.filter(l=>l.id!==i),this.searchAvailablesValue="",this.paginateAvailableUsers(),this.searchParticipantsValue="",this.searchParticipants({target:{value:""}})},hasRankingResult:function(i){let s=t.find(r=>r.user_id===i);return s?s.style_points>0||s.war_points>0:!1},removeParticipant:async function(i){console.log("removeParticipant");const s=this.participants.find(l=>l.id===i);s&&(this.participants=this.participants.filter(l=>l.id!==i));let r=JSON.stringify(this.participants.map(l=>l.id));const o=`${e=="admin"?"":"/"+e}/add-participants`,a=new FormData;a.append("event_id",this.eventid),a.append("participants",r),await fetch(o,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:a}),this.availableUsers.push(s),this.searchAvailablesValue="",this.paginateAvailableUsers(),this.searchParticipantsValue="",this.searchParticipants({target:{value:""}})},saveParticipants:async function(){console.log("saveParticipants")},paginateAvailableUsers:function(){const i=(this.currentPage-1)*this.pageSize,s=i+this.pageSize;this.paginatedUsers=this.availableUsers.slice(i,s),this.totalPages=Math.ceil(this.availableUsers.length/this.pageSize)},goToPage:function(i){i>=1&&i<=this.totalPages&&(this.currentPage=i,this.paginateAvailableUsers())},init:async function(){await this.getAvailableUsers(),await this.getParticipants(),this.paginateAvailableUsers()}}),QL=n=>({map:null,search:"",results:n,allResults:n,paginatedResults:[],currentPage:1,totalPages:0,nationFilter:"",markers:[],searchChanged:async function(){if(this.search.length<3)return;const e=await fetch(`/schools-search?location=${this.search}`);this.results=await e.json(),this.results.forEach(t=>{let i=JSON.parse(t.coordinates),s=new google.maps.Marker({position:i,map:this.map});this.markers.push({id:t.id,marker:s})}),this.results[0]&&this.results[0].id&&this.zoomToMarker(this.results[0].id)},zoomToMarker:function(e){let t=this.markers.find(i=>i.id===e);t&&(this.map.panTo(t.marker.getPosition()),this.map.setZoom(15))},paginateResults:function(){this.totalPages=Math.ceil(this.results.length/5),this.paginatedResults=this.results.slice((this.currentPage-1)*5,this.currentPage*5)},nextPage:function(){this.currentPage<this.totalPages&&(this.currentPage++,this.paginateResults())},prevPage:function(){this.currentPage>1&&(this.currentPage--,this.paginateResults())},fiterByNation:async function(e){this.results=n.filter(s=>s.nation_id==e),this.paginateResults();const t=this.results[0].coordinates;let i=new google.maps.Marker({position:t,map:this.map});this.map.panTo(i.getPosition()),this.map.setZoom(6),this.map.mapTypeId="roadmap"},async init(){const{Map:e}=await google.maps.importLibrary("maps");this.map=new e(document.getElementById("google-map"),{center:{lat:45.46404,lng:9.18938},zoom:2,mapTypeId:"satellite",mapTypeControlOptions:{mapTypeIds:["roadmap","satellite","hybrid","terrain"]}}),this.paginateResults(),this.results.forEach(t=>{let i=new google.maps.Marker({position:t.coordinates,map:this.map});console.log(t.nation_id),this.markers.push({id:t.id,marker:i})})}});/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Qr(n){return n+.5|0}const vn=(n,e,t)=>Math.max(Math.min(n,t),e);function Us(n){return vn(Qr(n*2.55),0,255)}function Mn(n){return vn(Qr(n*255),0,255)}function qt(n){return vn(Qr(n/2.55)/100,0,1)}function dm(n){return vn(Qr(n*100),0,100)}const ut={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},xd=[..."0123456789ABCDEF"],ZL=n=>xd[n&15],XL=n=>xd[(n&240)>>4]+xd[n&15],Co=n=>(n&240)>>4===(n&15),eB=n=>Co(n.r)&&Co(n.g)&&Co(n.b)&&Co(n.a);function tB(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&ut[n[1]]*17,g:255&ut[n[2]]*17,b:255&ut[n[3]]*17,a:e===5?ut[n[4]]*17:255}:(e===7||e===9)&&(t={r:ut[n[1]]<<4|ut[n[2]],g:ut[n[3]]<<4|ut[n[4]],b:ut[n[5]]<<4|ut[n[6]],a:e===9?ut[n[7]]<<4|ut[n[8]]:255})),t}const nB=(n,e)=>n<255?e(n):"";function iB(n){var e=eB(n)?ZL:XL;return n?"#"+e(n.r)+e(n.g)+e(n.b)+nB(n.a,e):void 0}const sB=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function A_(n,e,t){const i=e*Math.min(t,1-t),s=(r,o=(r+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function rB(n,e,t){const i=(s,r=(s+n/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function oB(n,e,t){const i=A_(n,1,.5);let s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)i[s]*=1-e-t,i[s]+=e;return i}function aB(n,e,t,i,s){return n===s?(e-t)/i+(e<t?6:0):e===s?(t-n)/i+2:(n-e)/i+4}function eh(n){const t=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(t,i,s),o=Math.min(t,i,s),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=aB(t,i,s,u,r),l=l*60+.5),[l|0,c||0,a]}function th(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Mn)}function nh(n,e,t){return th(A_,n,e,t)}function lB(n,e,t){return th(oB,n,e,t)}function cB(n,e,t){return th(rB,n,e,t)}function k_(n){return(n%360+360)%360}function uB(n){const e=sB.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?Us(+e[5]):Mn(+e[5]));const s=k_(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=lB(s,r,o):e[1]==="hsv"?i=cB(s,r,o):i=nh(s,r,o),{r:i[0],g:i[1],b:i[2],a:t}}function dB(n,e){var t=eh(n);t[0]=k_(t[0]+e),t=nh(t),n.r=t[0],n.g=t[1],n.b=t[2]}function fB(n){if(!n)return;const e=eh(n),t=e[0],i=dm(e[1]),s=dm(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${s}%, ${qt(n.a)})`:`hsl(${t}, ${i}%, ${s}%)`}const fm={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},hm={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function hB(){const n={},e=Object.keys(hm),t=Object.keys(fm);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<t.length;s++)r=t[s],a=a.replace(r,fm[r]);r=parseInt(hm[o],16),n[a]=[r>>16&255,r>>8&255,r&255]}return n}let Mo;function pB(n){Mo||(Mo=hB(),Mo.transparent=[0,0,0,0]);const e=Mo[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const gB=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function mB(n){const e=gB.exec(n);let t=255,i,s,r;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?Us(o):vn(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?Us(i):vn(i,0,255)),s=255&(e[4]?Us(s):vn(s,0,255)),r=255&(e[6]?Us(r):vn(r,0,255)),{r:i,g:s,b:r,a:t}}}function bB(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${qt(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const eu=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,$i=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function yB(n,e,t){const i=$i(qt(n.r)),s=$i(qt(n.g)),r=$i(qt(n.b));return{r:Mn(eu(i+t*($i(qt(e.r))-i))),g:Mn(eu(s+t*($i(qt(e.g))-s))),b:Mn(eu(r+t*($i(qt(e.b))-r))),a:n.a+t*(e.a-n.a)}}function Do(n,e,t){if(n){let i=eh(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=nh(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function E_(n,e){return n&&Object.assign(e||{},n)}function pm(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Mn(n[3]))):(e=E_(n,{r:0,g:0,b:0,a:1}),e.a=Mn(e.a)),e}function vB(n){return n.charAt(0)==="r"?mB(n):uB(n)}class Tr{constructor(e){if(e instanceof Tr)return e;const t=typeof e;let i;t==="object"?i=pm(e):t==="string"&&(i=tB(e)||pB(e)||vB(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=E_(this._rgb);return e&&(e.a=qt(e.a)),e}set rgb(e){this._rgb=pm(e)}rgbString(){return this._valid?bB(this._rgb):void 0}hexString(){return this._valid?iB(this._rgb):void 0}hslString(){return this._valid?fB(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,s=e.rgb;let r;const o=t===r?.5:t,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=yB(this._rgb,e._rgb,t)),this}clone(){return new Tr(this.rgb)}alpha(e){return this._rgb.a=Mn(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Qr(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Do(this._rgb,2,e),this}darken(e){return Do(this._rgb,2,-e),this}saturate(e){return Do(this._rgb,1,e),this}desaturate(e){return Do(this._rgb,1,-e),this}rotate(e){return dB(this._rgb,e),this}}/*!
 * Chart.js v4.4.4
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Vt(){}const xB=(()=>{let n=0;return()=>n++})();function q(n){return n===null||typeof n>"u"}function se(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function $(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ce(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function nt(n,e){return ce(n)?n:e}function H(n,e){return typeof n>"u"?e:n}const _B=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,C_=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function ee(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Q(n,e,t,i){let s,r,o;if(se(n))for(r=n.length,s=0;s<r;s++)e.call(t,n[s],s);else if($(n))for(o=Object.keys(n),r=o.length,s=0;s<r;s++)e.call(t,n[o[s]],o[s])}function _l(n,e){let t,i,s,r;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(s=n[t],r=e[t],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Sl(n){if(se(n))return n.map(Sl);if($(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let s=0;for(;s<i;++s)e[t[s]]=Sl(n[t[s]]);return e}return n}function M_(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function SB(n,e,t,i){if(!M_(n))return;const s=e[n],r=t[n];$(s)&&$(r)?Or(s,r,i):e[n]=Sl(r)}function Or(n,e,t){const i=se(e)?e:[e],s=i.length;if(!$(n))return n;t=t||{};const r=t.merger||SB;let o;for(let a=0;a<s;++a){if(o=i[a],!$(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],n,o,t)}return n}function cr(n,e){return Or(n,e,{merger:wB})}function wB(n,e,t){if(!M_(n))return;const i=e[n],s=t[n];$(i)&&$(s)?cr(i,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Sl(s))}const gm={"":n=>n,x:n=>n.x,y:n=>n.y};function AB(n){const e=n.split("."),t=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function kB(n){const e=AB(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function In(n,e){return(gm[e]||(gm[e]=kB(e)))(n)}function ih(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Rr=n=>typeof n<"u",Ln=n=>typeof n=="function",mm=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function EB(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const ie=Math.PI,te=2*ie,CB=te+ie,wl=Number.POSITIVE_INFINITY,MB=ie/180,he=ie/2,$n=ie/4,bm=ie*2/3,xn=Math.log10,It=Math.sign;function ur(n,e,t){return Math.abs(n-e)<t}function ym(n){const e=Math.round(n);n=ur(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(xn(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function DB(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((s,r)=>s-r).pop(),e}function ys(n){return!isNaN(parseFloat(n))&&isFinite(n)}function TB(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function D_(n,e,t){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function vt(n){return n*(ie/180)}function sh(n){return n*(180/ie)}function vm(n){if(!ce(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function T_(n,e){const t=e.x-n.x,i=e.y-n.y,s=Math.sqrt(t*t+i*i);let r=Math.atan2(i,t);return r<-.5*ie&&(r+=te),{angle:r,distance:s}}function _d(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function OB(n,e){return(n-e+CB)%te-ie}function it(n){return(n%te+te)%te}function Pr(n,e,t,i){const s=it(n),r=it(e),o=it(t),a=it(r-s),l=it(o-s),c=it(s-r),u=it(s-o);return s===r||s===o||i&&r===o||a>l&&c<u}function we(n,e,t){return Math.max(e,Math.min(t,n))}function RB(n){return we(n,-32768,32767)}function Kt(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function rh(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,t(r)?s=r:i=r;return{lo:s,hi:i}}const Yt=(n,e,t,i)=>rh(n,t,i?s=>{const r=n[s][e];return r<t||r===t&&n[s+1][e]===t}:s=>n[s][e]<t),PB=(n,e,t)=>rh(n,t,i=>n[i][e]>=t);function NB(n,e,t){let i=0,s=n.length;for(;i<s&&n[i]<e;)i++;for(;s>i&&n[s-1]>t;)s--;return i>0||s<n.length?n.slice(i,s):n}const O_=["push","pop","shift","splice","unshift"];function IB(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),O_.forEach(t=>{const i="_onData"+ih(t),s=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function xm(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(O_.forEach(r=>{delete n[r]}),delete n._chartjs)}function R_(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const P_=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function N_(n,e){let t=[],i=!1;return function(...s){t=s,i||(i=!0,P_.call(window,()=>{i=!1,n.apply(e,t)}))}}function LB(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const oh=n=>n==="start"?"left":n==="end"?"right":"center",Ie=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,BB=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function I_(n,e,t){const i=e.length;let s=0,r=i;if(n._sorted){const{iScale:o,_parsed:a}=n,l=o.axis,{min:c,max:u,minDefined:d,maxDefined:f}=o.getUserBounds();d&&(s=we(Math.min(Yt(a,l,c).lo,t?i:Yt(e,l,o.getPixelForValue(c)).lo),0,i-1)),f?r=we(Math.max(Yt(a,o.axis,u,!0).hi+1,t?0:Yt(e,l,o.getPixelForValue(u),!0).hi+1),s,i)-s:r=i-s}return{start:s,count:r}}function L_(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,s={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,s),r}const To=n=>n===0||n===1,_m=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*te/t)),Sm=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*te/t)+1,dr={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*he)+1,easeOutSine:n=>Math.sin(n*he),easeInOutSine:n=>-.5*(Math.cos(ie*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>To(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>To(n)?n:_m(n,.075,.3),easeOutElastic:n=>To(n)?n:Sm(n,.075,.3),easeInOutElastic(n){return To(n)?n:n<.5?.5*_m(n*2,.1125,.45):.5+.5*Sm(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-dr.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?dr.easeInBounce(n*2)*.5:dr.easeOutBounce(n*2-1)*.5+.5};function ah(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function wm(n){return ah(n)?n:new Tr(n)}function tu(n){return ah(n)?n:new Tr(n).saturate(.5).darken(.1).hexString()}const FB=["x","y","borderWidth","radius","tension"],zB=["color","borderColor","backgroundColor"];function HB(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:zB},numbers:{type:"number",properties:FB}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function VB(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Am=new Map;function jB(n,e){e=e||{};const t=n+JSON.stringify(e);let i=Am.get(t);return i||(i=new Intl.NumberFormat(n,e),Am.set(t,i)),i}function Zr(n,e,t){return jB(e,t).format(n)}const B_={values(n){return se(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let s,r=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=WB(n,t)}const o=xn(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Zr(n,i,l)},logarithmic(n,e,t){if(n===0)return"0";const i=t[e].significand||n/Math.pow(10,Math.floor(xn(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?B_.numeric.call(this,n,e,t):""}};function WB(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var ic={formatters:B_};function UB(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ic.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ti=Object.create(null),Sd=Object.create(null);function fr(n,e){if(!e)return n;const t=e.split(".");for(let i=0,s=t.length;i<s;++i){const r=t[i];n=n[r]||(n[r]=Object.create(null))}return n}function nu(n,e,t){return typeof e=="string"?Or(fr(n,e),t):Or(fr(n,""),e)}class $B{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>tu(s.backgroundColor),this.hoverBorderColor=(i,s)=>tu(s.borderColor),this.hoverColor=(i,s)=>tu(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return nu(this,e,t)}get(e){return fr(this,e)}describe(e,t){return nu(Sd,e,t)}override(e,t){return nu(Ti,e,t)}route(e,t,i,s){const r=fr(this,e),o=fr(this,i),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],c=o[s];return $(l)?Object.assign({},c,l):H(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var ue=new $B({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[HB,VB,UB]);function qB(n){return!n||q(n.size)||q(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Al(n,e,t,i,s){let r=e[s];return r||(r=e[s]=n.measureText(s).width,t.push(s)),r>i&&(i=r),i}function GB(n,e,t,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0;const a=t.length;let l,c,u,d,f;for(l=0;l<a;l++)if(d=t[l],d!=null&&!se(d))o=Al(n,s,r,o,d);else if(se(d))for(c=0,u=d.length;c<u;c++)f=d[c],f!=null&&!se(f)&&(o=Al(n,s,r,o,f));n.restore();const h=r.length/2;if(h>t.length){for(l=0;l<h;l++)delete s[r[l]];r.splice(0,h)}return o}function qn(n,e,t){const i=n.currentDevicePixelRatio,s=t!==0?Math.max(t/2,.5):0;return Math.round((e-s)*i)/i+s}function km(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function wd(n,e,t,i){F_(n,e,t,i,null)}function F_(n,e,t,i,s){let r,o,a,l,c,u,d,f;const h=e.pointStyle,p=e.rotation,m=e.radius;let g=(p||0)*MB;if(h&&typeof h=="object"&&(r=h.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(g),n.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),n.restore();return}if(!(isNaN(m)||m<=0)){switch(n.beginPath(),h){default:s?n.ellipse(t,i,s/2,m,0,0,te):n.arc(t,i,m,0,te),n.closePath();break;case"triangle":u=s?s/2:m,n.moveTo(t+Math.sin(g)*u,i-Math.cos(g)*m),g+=bm,n.lineTo(t+Math.sin(g)*u,i-Math.cos(g)*m),g+=bm,n.lineTo(t+Math.sin(g)*u,i-Math.cos(g)*m),n.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(g+$n)*l,d=Math.cos(g+$n)*(s?s/2-c:l),a=Math.sin(g+$n)*l,f=Math.sin(g+$n)*(s?s/2-c:l),n.arc(t-d,i-a,c,g-ie,g-he),n.arc(t+f,i-o,c,g-he,g),n.arc(t+d,i+a,c,g,g+he),n.arc(t-f,i+o,c,g+he,g+ie),n.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=s?s/2:l,n.rect(t-u,i-l,2*u,2*l);break}g+=$n;case"rectRot":d=Math.cos(g)*(s?s/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,f=Math.sin(g)*(s?s/2:m),n.moveTo(t-d,i-a),n.lineTo(t+f,i-o),n.lineTo(t+d,i+a),n.lineTo(t-f,i+o),n.closePath();break;case"crossRot":g+=$n;case"cross":d=Math.cos(g)*(s?s/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,f=Math.sin(g)*(s?s/2:m),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+f,i-o),n.lineTo(t-f,i+o);break;case"star":d=Math.cos(g)*(s?s/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,f=Math.sin(g)*(s?s/2:m),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+f,i-o),n.lineTo(t-f,i+o),g+=$n,d=Math.cos(g)*(s?s/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,f=Math.sin(g)*(s?s/2:m),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+f,i-o),n.lineTo(t-f,i+o);break;case"line":o=s?s/2:Math.cos(g)*m,a=Math.sin(g)*m,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(g)*(s?s/2:m),i+Math.sin(g)*m);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Jt(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function sc(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function rc(n){n.restore()}function KB(n,e,t,i,s){if(!e)return n.lineTo(t.x,t.y);if(s==="middle"){const r=(e.x+t.x)/2;n.lineTo(r,e.y),n.lineTo(r,t.y)}else s==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function YB(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function JB(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),q(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function QB(n,e,t,i,s){if(s.strikethrough||s.underline){const r=n.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=t-r.actualBoundingBoxAscent,c=t+r.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function ZB(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Oi(n,e,t,i,s,r={}){const o=se(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(n.save(),n.font=s.string,JB(n,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&ZB(n,r.backdrop),a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),q(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(c,t,i,r.maxWidth)),n.fillText(c,t,i,r.maxWidth),QB(n,t,i,c,r),i+=Number(s.lineHeight);n.restore()}function Nr(n,e){const{x:t,y:i,w:s,h:r,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*ie,ie,!0),n.lineTo(t,i+r-o.bottomLeft),n.arc(t+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,ie,he,!0),n.lineTo(t+s-o.bottomRight,i+r),n.arc(t+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,he,0,!0),n.lineTo(t+s,i+o.topRight),n.arc(t+s-o.topRight,i+o.topRight,o.topRight,0,-he,!0),n.lineTo(t+o.topLeft,i)}const XB=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,e2=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function t2(n,e){const t=(""+n).match(XB);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const n2=n=>+n||0;function lh(n,e){const t={},i=$(e),s=i?Object.keys(e):e,r=$(n)?i?o=>H(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of s)t[o]=n2(r(o));return t}function z_(n){return lh(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Si(n){return lh(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ve(n){const e=z_(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ve(n,e){n=n||{},e=e||ue.font;let t=H(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=H(n.style,e.style);i&&!(""+i).match(e2)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:H(n.family,e.family),lineHeight:t2(H(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:H(n.weight,e.weight),string:""};return s.string=qB(s),s}function $s(n,e,t,i){let s,r,o;for(s=0,r=n.length;s<r;++s)if(o=n[s],o!==void 0&&o!==void 0)return o}function i2(n,e,t){const{min:i,max:s}=n,r=C_(e,(s-i)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function jn(n,e){return Object.assign(Object.create(n),e)}function ch(n,e=[""],t,i,s=()=>n[0]){const r=t||n;typeof i>"u"&&(i=W_("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>ch([a,...n],e,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return V_(a,l,()=>d2(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return Cm(a).includes(l)},ownKeys(a){return Cm(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function vs(n,e,t,i){const s={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:H_(n,i),setContext:r=>vs(n,r,t,i),override:r=>vs(n.override(r),e,t,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,a){return V_(r,o,()=>r2(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,a){return n[o]=a,delete r[o],!0}})}function H_(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:t,indexable:i,isScriptable:Ln(t)?t:()=>t,isIndexable:Ln(i)?i:()=>i}}const s2=(n,e)=>n?n+ih(e):e,uh=(n,e)=>$(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function V_(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function r2(n,e,t){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=n;let a=i[e];return Ln(a)&&o.isScriptable(e)&&(a=o2(e,a,n,t)),se(a)&&a.length&&(a=a2(e,a,n,o.isIndexable)),uh(e,a)&&(a=vs(a,s,r&&r[e],o)),a}function o2(n,e,t,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(r,o||i);return a.delete(n),uh(n,l)&&(l=dh(s._scopes,s,n,l)),l}function a2(n,e,t,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=t;if(typeof r.index<"u"&&i(n))return e[r.index%e.length];if($(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=dh(c,s,n,u);e.push(vs(d,r,o&&o[n],a))}}return e}function j_(n,e,t){return Ln(n)?n(e,t):n}const l2=(n,e)=>n===!0?e:typeof n=="string"?In(e,n):void 0;function c2(n,e,t,i,s){for(const r of e){const o=l2(t,r);if(o){n.add(o);const a=j_(o._fallback,t,s);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function dh(n,e,t,i){const s=e._rootScopes,r=j_(e._fallback,t,i),o=[...n,...s],a=new Set;a.add(i);let l=Em(a,o,t,r||t,i);return l===null||typeof r<"u"&&r!==t&&(l=Em(a,o,r,l,i),l===null)?!1:ch(Array.from(a),[""],s,r,()=>u2(e,t,i))}function Em(n,e,t,i,s){for(;t;)t=c2(n,e,t,i,s);return t}function u2(n,e,t){const i=n._getTarget();e in i||(i[e]={});const s=i[e];return se(s)&&$(t)?t:s||{}}function d2(n,e,t,i){let s;for(const r of e)if(s=W_(s2(r,n),t),typeof s<"u")return uh(n,s)?dh(t,i,n,s):s}function W_(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function Cm(n){let e=n._keys;return e||(e=n._keys=f2(n._scopes)),e}function f2(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}function U_(n,e,t,i){const{iScale:s}=n,{key:r="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+t,u=e[c],o[a]={r:s.parse(In(u,r),c)};return o}const h2=Number.EPSILON||1e-14,xs=(n,e)=>e<n.length&&!n[e].skip&&n[e],$_=n=>n==="x"?"y":"x";function p2(n,e,t,i){const s=n.skip?e:n,r=e,o=t.skip?e:t,a=_d(r,s),l=_d(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=i*c,f=i*u;return{previous:{x:r.x-d*(o.x-s.x),y:r.y-d*(o.y-s.y)},next:{x:r.x+f*(o.x-s.x),y:r.y+f*(o.y-s.y)}}}function g2(n,e,t){const i=n.length;let s,r,o,a,l,c=xs(n,0);for(let u=0;u<i-1;++u)if(l=c,c=xs(n,u+1),!(!l||!c)){if(ur(e[u],0,h2)){t[u]=t[u+1]=0;continue}s=t[u]/e[u],r=t[u+1]/e[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=s*o*e[u],t[u+1]=r*o*e[u])}}function m2(n,e,t="x"){const i=$_(t),s=n.length;let r,o,a,l=xs(n,0);for(let c=0;c<s;++c){if(o=a,a=l,l=xs(n,c+1),!a)continue;const u=a[t],d=a[i];o&&(r=(u-o[t])/3,a[`cp1${t}`]=u-r,a[`cp1${i}`]=d-r*e[c]),l&&(r=(l[t]-u)/3,a[`cp2${t}`]=u+r,a[`cp2${i}`]=d+r*e[c])}}function b2(n,e="x"){const t=$_(e),i=n.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=xs(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=xs(n,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[t]-l[t])/u:0}r[o]=a?c?It(s[o-1])!==It(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}g2(n,s,r),m2(n,r,e)}function Oo(n,e,t){return Math.max(Math.min(n,t),e)}function y2(n,e){let t,i,s,r,o,a=Jt(n[0],e);for(t=0,i=n.length;t<i;++t)o=r,r=a,a=t<i-1&&Jt(n[t+1],e),r&&(s=n[t],o&&(s.cp1x=Oo(s.cp1x,e.left,e.right),s.cp1y=Oo(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Oo(s.cp2x,e.left,e.right),s.cp2y=Oo(s.cp2y,e.top,e.bottom)))}function v2(n,e,t,i,s){let r,o,a,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")b2(n,s);else{let c=i?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)a=n[r],l=p2(c,a,n[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&y2(n,t)}function fh(){return typeof window<"u"&&typeof document<"u"}function hh(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function kl(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const oc=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function x2(n,e){return oc(n).getPropertyValue(e)}const _2=["top","right","bottom","left"];function wi(n,e,t){const i={};t=t?"-"+t:"";for(let s=0;s<4;s++){const r=_2[s];i[r]=parseFloat(n[e+"-"+r+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const S2=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function w2(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(S2(s,r,n.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Zn(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,s=oc(t),r=s.boxSizing==="border-box",o=wi(s,"padding"),a=wi(s,"border","width"),{x:l,y:c,box:u}=w2(n,t),d=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:h,height:p}=e;return r&&(h-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-d)/h*t.width/i),y:Math.round((c-f)/p*t.height/i)}}function A2(n,e,t){let i,s;if(e===void 0||t===void 0){const r=n&&hh(n);if(!r)e=n.clientWidth,t=n.clientHeight;else{const o=r.getBoundingClientRect(),a=oc(r),l=wi(a,"border","width"),c=wi(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,i=kl(a.maxWidth,r,"clientWidth"),s=kl(a.maxHeight,r,"clientHeight")}}return{width:e,height:t,maxWidth:i||wl,maxHeight:s||wl}}const Ro=n=>Math.round(n*10)/10;function k2(n,e,t,i){const s=oc(n),r=wi(s,"margin"),o=kl(s.maxWidth,n,"clientWidth")||wl,a=kl(s.maxHeight,n,"clientHeight")||wl,l=A2(n,e,t);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const f=wi(s,"border","width"),h=wi(s,"padding");c-=h.width+f.width,u-=h.height+f.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?c/i:u-r.height),c=Ro(Math.min(c,o,l.maxWidth)),u=Ro(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Ro(c/2)),(e!==void 0||t!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=Ro(Math.floor(u*i))),{width:c,height:u}}function Mm(n,e,t){const i=e||1,s=Math.floor(n.height*i),r=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(n.currentDevicePixelRatio=i,o.height=s,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const E2=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};fh()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function Dm(n,e){const t=x2(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Xn(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function C2(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function M2(n,e,t,i){const s={x:n.cp2x,y:n.cp2y},r={x:e.cp1x,y:e.cp1y},o=Xn(n,s,t),a=Xn(s,r,t),l=Xn(r,e,t),c=Xn(o,a,t),u=Xn(a,l,t);return Xn(c,u,t)}const D2=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},T2=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function rs(n,e,t){return n?D2(e,t):T2()}function q_(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function G_(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function K_(n){return n==="angle"?{between:Pr,compare:OB,normalize:it}:{between:Kt,compare:(e,t)=>e-t,normalize:e=>e}}function Tm({start:n,end:e,count:t,loop:i,style:s}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:s}}function O2(n,e,t){const{property:i,start:s,end:r}=t,{between:o,normalize:a}=K_(i),l=e.length;let{start:c,end:u,loop:d}=n,f,h;if(d){for(c+=l,u+=l,f=0,h=l;f<h&&o(a(e[c%l][i]),s,r);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:n.style}}function Y_(n,e,t){if(!t)return[n];const{property:i,start:s,end:r}=t,o=e.length,{compare:a,between:l,normalize:c}=K_(i),{start:u,end:d,loop:f,style:h}=O2(n,e,t),p=[];let m=!1,g=null,b,y,v;const x=()=>l(s,v,b)&&a(s,v)!==0,_=()=>a(r,b)===0||l(r,v,b),S=()=>m||x(),C=()=>!m||_();for(let E=u,M=u;E<=d;++E)y=e[E%o],!y.skip&&(b=c(y[i]),b!==v&&(m=l(b,s,r),g===null&&S()&&(g=a(b,s)===0?E:M),g!==null&&C()&&(p.push(Tm({start:g,end:E,loop:f,count:o,style:h})),g=null),M=E,v=b));return g!==null&&p.push(Tm({start:g,end:d,loop:f,count:o,style:h})),p}function J_(n,e){const t=[],i=n.segments;for(let s=0;s<i.length;s++){const r=Y_(i[s],n.points,e);r.length&&t.push(...r)}return t}function R2(n,e,t,i){let s=0,r=e-1;if(t&&!i)for(;s<e&&!n[s].skip;)s++;for(;s<e&&n[s].skip;)s++;for(s%=e,t&&(r+=s);r>s&&n[r%e].skip;)r--;return r%=e,{start:s,end:r}}function P2(n,e,t,i){const s=n.length,r=[];let o=e,a=n[e],l;for(l=e+1;l<=t;++l){const c=n[l%s];c.skip||c.stop?a.skip||(i=!1,r.push({start:e%s,end:(l-1)%s,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&r.push({start:e%s,end:o%s,loop:i}),r}function N2(n,e){const t=n.points,i=n.options.spanGaps,s=t.length;if(!s)return[];const r=!!n._loop,{start:o,end:a}=R2(t,s,r,i);if(i===!0)return Om(n,[{start:o,end:a,loop:r}],t,e);const l=a<o?a+s:a,c=!!n._fullLoop&&o===0&&a===s-1;return Om(n,P2(t,o,l,c),t,e)}function Om(n,e,t,i){return!i||!i.setContext||!t?e:I2(n,e,t,i)}function I2(n,e,t,i){const s=n._chart.getContext(),r=Rm(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,c=[];let u=r,d=e[0].start,f=d;function h(p,m,g,b){const y=a?-1:1;if(p!==m){for(p+=l;t[p%l].skip;)p-=y;for(;t[m%l].skip;)m+=y;p%l!==m%l&&(c.push({start:p%l,end:m%l,loop:g,style:b}),u=b,d=m%l)}}for(const p of e){d=a?d:p.start;let m=t[d%l],g;for(f=d+1;f<=p.end;f++){const b=t[f%l];g=Rm(i.setContext(jn(s,{type:"segment",p0:m,p1:b,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),L2(g,u)&&h(d,f-1,p.loop,u),m=b,u=g}d<f-1&&h(d,f-1,p.loop,u)}return c}function Rm(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function L2(n,e){if(!e)return!1;const t=[],i=function(s,r){return ah(r)?(t.includes(r)||t.push(r),t.indexOf(r)):r};return JSON.stringify(n,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.4
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class B2{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,s){const r=t.listeners[s],o=t.duration;r.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=P_.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),t+=r.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Wt=new B2;const Pm="transparent",F2={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=wm(n||Pm),s=i.valid&&wm(e||Pm);return s&&s.valid?s.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class z2{constructor(e,t,i,s){const r=t[i];s=$s([e.to,s,r,e.from]);const o=$s([e.from,r,s]);this._active=!0,this._fn=e.fn||F2[e.type||typeof o],this._easing=dr[e.easing]||dr.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=$s([e.to,t,s,e.from]),this._from=$s([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||t<i),!this._active){this._target[s]=a,this._notify(!0);return}if(t<0){this._target[s]=r;return}l=t/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][t]()}}class Q_{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!$(e))return;const t=Object.keys(ue.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!$(r))return;const o={};for(const a of t)o[a]=r[a];(se(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){const i=t.options,s=V2(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&H2(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,t){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,t));continue}const u=t[c];let d=r[c];const f=i.get(c);if(d)if(f&&d.active()){d.update(f,u,a);continue}else d.cancel();if(!f||!f.duration){e[c]=u;continue}r[c]=d=new z2(f,e,c,u),s.push(d)}return s}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return Wt.add(this._chart,i),!0}}function H2(n,e){const t=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=n[i[s]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}function V2(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Nm(n,e){const t=n&&n.options||{},i=t.reverse,s=t.min===void 0?e:0,r=t.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function j2(n,e,t){if(t===!1)return!1;const i=Nm(n,t),s=Nm(e,t);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function W2(n){let e,t,i,s;return $(n)?(e=n.top,t=n.right,i=n.bottom,s=n.left):e=t=i=s=n,{top:e,right:t,bottom:i,left:s,disabled:n===!1}}function Z_(n,e){const t=[],i=n._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)t.push(i[s].index);return t}function Im(n,e,t,i={}){const s=n.keys,r=i.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===t){if(i.all)continue;break}c=n.values[l],ce(c)&&(r||e===0||It(e)===It(c))&&(e+=c)}return e}}function U2(n,e){const{iScale:t,vScale:i}=e,s=t.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[r]:n[u]};return a}function Lm(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function $2(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function q2(n){const{min:e,max:t,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}function G2(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function Bm(n,e,t,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=n[s.index];if(t&&r>0||!t&&r<0)return s.index}return null}function Fm(n,e){const{chart:t,_cachedMeta:i}=n,s=t._stacks||(t._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,u=$2(r,o,i),d=e.length;let f;for(let h=0;h<d;++h){const p=e[h],{[l]:m,[c]:g}=p,b=p._stacks||(p._stacks={});f=b[c]=G2(s,u,m),f[a]=g,f._top=Bm(f,o,!0,i.type),f._bottom=Bm(f,o,!1,i.type);const y=f._visualValues||(f._visualValues={});y[a]=g}}function iu(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function K2(n,e){return jn(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Y2(n,e,t){return jn(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Is(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][t]===void 0)return;delete r[i][t],r[i]._visualValues!==void 0&&r[i]._visualValues[t]!==void 0&&delete r[i]._visualValues[t]}}}const su=n=>n==="reset"||n==="none",zm=(n,e)=>e?n:Object.assign({},n),J2=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:Z_(t,!0),values:null};class _t{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Lm(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Is(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),s=(d,f,h,p)=>d==="x"?f:d==="r"?p:h,r=t.xAxisID=H(i.xAxisID,iu(e,"x")),o=t.yAxisID=H(i.yAxisID,iu(e,"y")),a=t.rAxisID=H(i.rAxisID,iu(e,"r")),l=t.indexAxis,c=t.iAxisID=s(l,r,o,a),u=t.vAxisID=s(l,o,r,a);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&xm(this._data,this),e._stacked&&Is(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if($(t)){const s=this._cachedMeta;this._data=U2(t,s)}else if(i!==t){if(i){xm(i,this);const s=this._cachedMeta;Is(s),s._parsed=[]}t&&Object.isExtensible(t)&&IB(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=t._stacked;t._stacked=Lm(t.vScale,t),t.stack!==i.stack&&(s=!0,Is(t),t.stack=i.stack),this._resyncElements(e),(s||r!==t._stacked)&&Fm(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=e===0&&t===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,d,f;if(this._parsing===!1)i._parsed=s,i._sorted=!0,f=s;else{se(s[e])?f=this.parseArrayData(i,s,e,t):$(s[e])?f=this.parseObjectData(i,s,e,t):f=this.parsePrimitiveData(i,s,e,t);const h=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<t;++u)i._parsed[u+e]=d=f[u],l&&(h()&&(l=!1),c=d);i._sorted=l}o&&Fm(this,f)}parsePrimitiveData(e,t,i,s){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,d=new Array(s);let f,h,p;for(f=0,h=s;f<h;++f)p=f+i,d[f]={[a]:u||r.parse(c[p],p),[l]:o.parse(t[p],p)};return d}parseArrayData(e,t,i,s){const{xScale:r,yScale:o}=e,a=new Array(s);let l,c,u,d;for(l=0,c=s;l<c;++l)u=l+i,d=t[u],a[l]={x:r.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,t,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,d,f,h;for(u=0,d=s;u<d;++u)f=u+i,h=t[f],c[u]={x:r.parse(In(h,a),f),y:o.parse(In(h,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const s=this.chart,r=this._cachedMeta,o=t[e.axis],a={keys:Z_(s,!0),values:t._stacks[e.axis]._visualValues};return Im(a,o,r.index,{mode:i})}updateRangeFromParsed(e,t,i,s){const r=i[t.axis];let o=r===null?NaN:r;const a=s&&i._stacks[t.axis];s&&a&&(s.values=a,o=Im(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,a=this._getOtherScale(e),l=J2(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=q2(a);let f,h;function p(){h=s[f];const m=h[a.axis];return!ce(h[e.axis])||u>m||d<m}for(f=0;f<o&&!(!p()&&(this.updateRangeFromParsed(c,e,h,l),r));++f);if(r){for(f=o-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(c,e,h,l);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=t.length;s<r;++s)o=t[s][e.axis],ce(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,s=t.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=W2(H(this.options.clip,j2(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,s=i.data||[],r=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,r,a,l),u=a;u<a+l;++u){const d=s[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=Y2(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=K2(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const s=t==="active",r=this._cachedDataOpts,o=e+"-"+t,a=r[o],l=this.enableOptionSharing&&Rr(i);if(a)return zm(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=s?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),h=Object.keys(ue.elements[e]),p=()=>this.getContext(i,s,t),m=c.resolveNamedOptions(f,h,p,d);return m.$shared&&(m.$shared=l,r[o]=Object.freeze(zm(m,l))),m}_resolveAnimations(e,t,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${t}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,t),f=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(f,this.getContext(e,i,t))}const c=new Q_(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||su(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(t,r)||r!==s;return this.updateSharedOptions(r,t,i),{sharedOptions:r,includeOptions:o}}updateElement(e,t,i,s){su(s)?Object.assign(e,i):this._resolveAnimations(t,s).update(e,i)}updateSharedOptions(e,t,i){e&&!su(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,s){e.active=s;const r=this.getStyle(t,s);this._resolveAnimations(t,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=t.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,t,i=!0){const s=this._cachedMeta,r=s.data,o=e+t;let a;const l=c=>{for(c.length+=t,a=c.length-1;a>=o;a--)c[a]=c[a-t]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,t),i&&this.updateElements(r,e,t,"reset")}updateElements(e,t,i,s){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,t);i._stacked&&Is(i,s)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,s]=e;this[t](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}T(_t,"defaults",{}),T(_t,"datasetElementType",null),T(_t,"dataElementType",null);function Q2(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let s=0,r=t.length;s<r;s++)i=i.concat(t[s].controller.getAllParsedValues(n));n._cache.$bar=R_(i.sort((s,r)=>s-r))}return n._cache.$bar}function Z2(n){const e=n.iScale,t=Q2(e,n.type);let i=e._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(Rr(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=t.length;s<r;++s)o=e.getPixelForValue(t[s]),l();for(a=void 0,s=0,r=e.ticks.length;s<r;++s)o=e.getPixelForTick(s),l();return i}function X2(n,e,t,i){const s=t.barThickness;let r,o;return q(s)?(r=e.min*t.categoryPercentage,o=t.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[n]-r/2}}function eF(n,e,t,i){const s=e.pixels,r=s[n];let o=n>0?s[n-1]:null,a=n<s.length-1?s[n+1]:null;const l=t.categoryPercentage;o===null&&(o=r-(a===null?e.end-e.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:t.barPercentage,start:c}}function tF(n,e,t,i){const s=t.parse(n[0],i),r=t.parse(n[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function X_(n,e,t,i){return se(n)?tF(n,e,t,i):e[t.axis]=t.parse(n,i),e}function Hm(n,e,t,i){const s=n.iScale,r=n.vScale,o=s.getLabels(),a=s===r,l=[];let c,u,d,f;for(c=t,u=t+i;c<u;++c)f=e[c],d={},d[s.axis]=a||s.parse(o[c],c),l.push(X_(f,d,r,c));return l}function ru(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function nF(n,e,t){return n!==0?It(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function iF(n){let e,t,i,s,r;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:t,end:i,reverse:e,top:s,bottom:r}}function sF(n,e,t,i){let s=e.borderSkipped;const r={};if(!s){n.borderSkipped=r;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=iF(n);s==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?s=c:(t._bottom||0)===i?s=u:(r[Vm(u,o,a,l)]=!0,s=c)),r[Vm(s,o,a,l)]=!0,n.borderSkipped=r}function Vm(n,e,t,i){return i?(n=rF(n,e,t),n=jm(n,t,e)):n=jm(n,e,t),n}function rF(n,e,t){return n===e?t:n===t?e:n}function jm(n,e,t){return n==="start"?e:n==="end"?t:n}function oF(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class na extends _t{parsePrimitiveData(e,t,i,s){return Hm(e,t,i,s)}parseArrayData(e,t,i,s){return Hm(e,t,i,s)}parseObjectData(e,t,i,s){const{iScale:r,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let f,h,p,m;for(f=i,h=i+s;f<h;++f)m=t[f],p={},p[r.axis]=r.parse(In(m,c),f),d.push(X_(In(m,u),p,o,f));return d}updateRangeFromParsed(e,t,i,s){super.updateRangeFromParsed(e,t,i,s);const r=i._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:s}=t,r=this.getParsed(e),o=r._custom,a=ru(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(t,s);for(let h=t;h<t+i;h++){const p=this.getParsed(h),m=r||q(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(h),g=this._calculateBarIndexPixels(h,u),b=(p._stacks||{})[a.axis],y={horizontal:c,base:m.base,enableBorderRadius:!b||ru(p._custom)||o===b._top||o===b._bottom,x:c?m.head:g.center,y:c?g.center:m.head,height:c?g.size:Math.abs(m.size),width:c?Math.abs(m.size):g.size};f&&(y.options=d||this.resolveDataElementOptions(h,e[h].active?"active":s));const v=y.options||e[h].options;sF(y,v,b,o),oF(y,v,u.ratio),this.updateElement(e[h],h,y,s)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(t),l=a&&a[i.axis],c=u=>{const d=u._parsed.find(h=>h[i.axis]===l),f=d&&d[u.vScale.axis];if(q(f)||isNaN(f))return!0};for(const u of s)if(!(t!==void 0&&c(u))&&((r===!1||o.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,i){const s=this._getStacks(e,i),r=t!==void 0?s.indexOf(t):-1;return r===-1?s.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,s=[];let r,o;for(r=0,o=t.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=e.barThickness;return{min:a||Z2(t),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(e),c=l._custom,u=ru(c);let d=l[t.axis],f=0,h=i?this.applyStack(t,l,i):d,p,m;h!==d&&(f=h-d,h=d),u&&(d=c.barStart,h=c.barEnd-c.barStart,d!==0&&It(d)!==It(c.barEnd)&&(f=0),f+=d);const g=!q(r)&&!u?r:f;let b=t.getPixelForValue(g);if(this.chart.getDataVisibility(e)?p=t.getPixelForValue(f+h):p=b,m=p-b,Math.abs(m)<o){m=nF(m,t,a)*o,d===a&&(b-=m/2);const y=t.getPixelForDecimal(0),v=t.getPixelForDecimal(1),x=Math.min(y,v),_=Math.max(y,v);b=Math.max(Math.min(b,_),x),p=b+m,i&&!u&&(l._stacks[t.axis]._visualValues[s]=t.getValueForPixel(p)-t.getValueForPixel(b))}if(b===t.getPixelForValue(a)){const y=It(m)*t.getLineWidthForValue(a)/2;b+=y,m-=y}return{size:m,base:b,head:p,center:p+m/2}}_calculateBarIndexPixels(e,t){const i=t.scale,s=this.options,r=s.skipNull,o=H(s.maxBarThickness,1/0);let a,l;if(t.grouped){const c=r?this._getStackCount(e):t.stackCount,u=s.barThickness==="flex"?eF(e,t,s,c):X2(e,t,s,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);a=u.start+u.chunk*d+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[t.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}T(na,"id","bar"),T(na,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),T(na,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class ia extends _t{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,s){const r=super.parsePrimitiveData(e,t,i,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(e,t,i,s){const r=super.parseArrayData(e,t,i,s);for(let o=0;o<r.length;o++){const a=t[i+o];r[o]._custom=H(a[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(e,t,i,s){const r=super.parseObjectData(e,t,i,s);for(let o=0;o<r.length;o++){const a=t[i+o];r[o]._custom=H(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=t,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:i[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,s){const r=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(t,s),u=o.axis,d=a.axis;for(let f=t;f<t+i;f++){const h=e[f],p=!r&&this.getParsed(f),m={},g=m[u]=r?o.getPixelForDecimal(.5):o.getPixelForValue(p[u]),b=m[d]=r?a.getBasePixel():a.getPixelForValue(p[d]);m.skip=isNaN(g)||isNaN(b),c&&(m.options=l||this.resolveDataElementOptions(f,h.active?"active":s),r&&(m.options.radius=0)),this.updateElement(h,f,m,s)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let s=super.resolveDataElementOptions(e,t);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return t!=="active"&&(s.radius=0),s.radius+=H(i&&i._custom,r),s}}T(ia,"id","bubble"),T(ia,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),T(ia,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function aF(n,e,t){let i=1,s=1,r=0,o=0;if(e<te){const a=n,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),f=Math.sin(l),h=(v,x,_)=>Pr(v,a,l,!0)?1:Math.max(x,x*t,_,_*t),p=(v,x,_)=>Pr(v,a,l,!0)?-1:Math.min(x,x*t,_,_*t),m=h(0,c,d),g=h(he,u,f),b=p(ie,c,d),y=p(ie+he,u,f);i=(m-b)/2,s=(g-y)/2,r=-(m+b)/2,o=-(g+y)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}class ui extends _t{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=l=>+i[l];if($(i[e])){const{key:l="value"}=this._parsing;r=c=>+In(i[c],l)}let o,a;for(o=e,a=e+t;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return vt(this.options.rotation-90)}_getCircumference(){return vt(this.options.circumference)}_getRotationExtents(){let e=te,t=-te;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();e=Math.min(e,r),t=Math.max(t,r+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(_B(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:h,offsetX:p,offsetY:m}=aF(d,u,l),g=(i.width-o)/f,b=(i.height-o)/h,y=Math.max(Math.min(g,b)/2,0),v=C_(this.options.radius,y),x=Math.max(v*l,0),_=(v-x)/this._getVisibleDatasetWeightTotal();this.offsetX=p*v,this.offsetY=m*v,s.total=this.calculateTotal(),this.outerRadius=v-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*c,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*r/te)}updateElements(e,t,i,s){const r=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=r&&c.animateScale,h=f?0:this.innerRadius,p=f?0:this.outerRadius,{sharedOptions:m,includeOptions:g}=this._getSharedOptions(t,s);let b=this._getRotation(),y;for(y=0;y<t;++y)b+=this._circumference(y,r);for(y=t;y<t+i;++y){const v=this._circumference(y,r),x=e[y],_={x:u+this.offsetX,y:d+this.offsetY,startAngle:b,endAngle:b+v,circumference:v,outerRadius:p,innerRadius:h};g&&(_.options=m||this.resolveDataElementOptions(y,x.active?"active":s)),b+=v,this.updateElement(x,y,_,s)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,s;for(s=0;s<t.length;s++){const r=e._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!t[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?te*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Zr(t._parsed[e],i.options.locale);return{label:s[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const i=this.chart;let s,r,o,a,l;if(!e){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,r=e.length;s<r;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,s=e.length;i<s;++i){const r=this.resolveDataElementOptions(i);t=Math.max(t,r.offset||0,r.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(H(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}T(ui,"id","doughnut"),T(ui,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),T(ui,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),T(ui,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return t.labels.map((r,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}});class sa extends _t{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=t,o=this.chart._animationsDisabled;let{start:a,count:l}=I_(t,s,o);this._drawStart=a,this._drawCount=l,L_(t)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,t,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,s),f=o.axis,h=a.axis,{spanGaps:p,segment:m}=this.options,g=ys(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||s==="none",y=t+i,v=e.length;let x=t>0&&this.getParsed(t-1);for(let _=0;_<v;++_){const S=e[_],C=b?S:{};if(_<t||_>=y){C.skip=!0;continue}const E=this.getParsed(_),M=q(E[h]),N=C[f]=o.getPixelForValue(E[f],_),B=C[h]=r||M?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,E,l):E[h],_);C.skip=isNaN(N)||isNaN(B)||M,C.stop=_>0&&Math.abs(E[f]-x[f])>g,m&&(C.parsed=E,C.raw=c.data[_]),d&&(C.options=u||this.resolveDataElementOptions(_,S.active?"active":s)),b||this.updateElement(S,_,C,s),x=E}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}T(sa,"id","line"),T(sa,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),T(sa,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class hr extends _t{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Zr(t._parsed[e].r,i.options.locale);return{label:s[e]||"",value:r}}parseObjectData(e,t,i,s){return U_.bind(this)(e,t,i,s)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,s=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(s/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-o)/e.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,i,s){const r=s==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,d=c.yCenter,f=c.getIndexAngle(0)-.5*ie;let h=f,p;const m=360/this.countVisibleElements();for(p=0;p<t;++p)h+=this._computeAngle(p,s,m);for(p=t;p<t+i;p++){const g=e[p];let b=h,y=h+this._computeAngle(p,s,m),v=o.getDataVisibility(p)?c.getDistanceFromCenterForValue(this.getParsed(p).r):0;h=y,r&&(l.animateScale&&(v=0),l.animateRotate&&(b=y=f));const x={x:u,y:d,innerRadius:0,outerRadius:v,startAngle:b,endAngle:y,options:this.resolveDataElementOptions(p,g.active?"active":s)};this.updateElement(g,p,x,s)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?vt(this.resolveDataElementOptions(e,t).angle||i):0}}T(hr,"id","polarArea"),T(hr,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),T(hr,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return t.labels.map((r,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Ad extends ui{}T(Ad,"id","pie"),T(Ad,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class ra extends _t{getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,s){return U_.bind(this)(e,t,i,s)}update(e){const t=this._cachedMeta,i=t.dataset,s=t.data||[],r=t.iScale.getLabels();if(i.points=s,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(s,0,s.length,e)}updateElements(e,t,i,s){const r=this._cachedMeta.rScale,o=s==="reset";for(let a=t;a<t+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":s),u=r.getPointPositionForValue(a,this.getParsed(a).r),d=o?r.xCenter:u.x,f=o?r.yCenter:u.y,h={x:d,y:f,angle:u.angle,skip:isNaN(d)||isNaN(f),options:c};this.updateElement(l,a,h,s)}}}T(ra,"id","radar"),T(ra,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),T(ra,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class oa extends _t{getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=t,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,s=this.chart._animationsDisabled;let{start:r,count:o}=I_(t,i,s);if(this._drawStart=r,this._drawCount=o,L_(t)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(t,s),d=this.getSharedOptions(u),f=this.includeOptions(s,d),h=o.axis,p=a.axis,{spanGaps:m,segment:g}=this.options,b=ys(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||s==="none";let v=t>0&&this.getParsed(t-1);for(let x=t;x<t+i;++x){const _=e[x],S=this.getParsed(x),C=y?_:{},E=q(S[p]),M=C[h]=o.getPixelForValue(S[h],x),N=C[p]=r||E?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,S,l):S[p],x);C.skip=isNaN(M)||isNaN(N)||E,C.stop=x>0&&Math.abs(S[h]-v[h])>b,g&&(C.parsed=S,C.raw=c.data[x]),f&&(C.options=d||this.resolveDataElementOptions(x,_.active?"active":s)),y||this.updateElement(_,x,C,s),v=S}this.updateSharedOptions(d,s,u)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let a=0;for(let l=t.length-1;l>=0;--l)a=Math.max(a,t[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,s=i.options&&i.options.borderWidth||0;if(!t.length)return s;const r=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(s,r,o)/2}}T(oa,"id","scatter"),T(oa,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),T(oa,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var lF=Object.freeze({__proto__:null,BarController:na,BubbleController:ia,DoughnutController:ui,LineController:sa,PieController:Ad,PolarAreaController:hr,RadarController:ra,ScatterController:oa});function Gn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ph{constructor(e){T(this,"options");this.options=e||{}}static override(e){Object.assign(ph.prototype,e)}init(){}formats(){return Gn()}parse(){return Gn()}format(){return Gn()}add(){return Gn()}diff(){return Gn()}startOf(){return Gn()}endOf(){return Gn()}}var cF={_date:ph};function uF(n,e,t,i){const{controller:s,data:r,_sorted:o}=n,a=s._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const l=a._reversePixels?PB:Yt;if(i){if(s._sharedOptions){const c=r[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const d=l(r,e,t-u),f=l(r,e,t+u);return{lo:d.lo,hi:f.hi}}}}else return l(r,e,t)}return{lo:0,hi:r.length-1}}function Xr(n,e,t,i,s){const r=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:d,hi:f}=uF(r[a],e,o,s);for(let h=d;h<=f;++h){const p=u[h];p.skip||i(p,c,h)}}}function dF(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=t?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function ou(n,e,t,i,s){const r=[];return!s&&!n.isPointInArea(e)||Xr(n,t,e,function(a,l,c){!s&&!Jt(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function fF(n,e,t,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:d}=T_(o,{x:e.x,y:e.y});Pr(d,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return Xr(n,t,e,r),s}function hF(n,e,t,i,s,r){let o=[];const a=dF(t);let l=Number.POSITIVE_INFINITY;function c(u,d,f){const h=u.inRange(e.x,e.y,s);if(i&&!h)return;const p=u.getCenterPoint(s);if(!(!!r||n.isPointInArea(p))&&!h)return;const g=a(e,p);g<l?(o=[{element:u,datasetIndex:d,index:f}],l=g):g===l&&o.push({element:u,datasetIndex:d,index:f})}return Xr(n,t,e,c),o}function au(n,e,t,i,s,r){return!r&&!n.isPointInArea(e)?[]:t==="r"&&!i?fF(n,e,t,s):hF(n,e,t,i,s,r)}function Wm(n,e,t,i,s){const r=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return Xr(n,t,e,(l,c,u)=>{l[o]&&l[o](e[t],s)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var pF={evaluateInteractionItems:Xr,modes:{index(n,e,t,i){const s=Zn(e,n),r=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?ou(n,s,r,i,o):au(n,s,r,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(n,e,t,i){const s=Zn(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?ou(n,s,r,i,o):au(n,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,e,t,i){const s=Zn(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return ou(n,s,r,i,o)},nearest(n,e,t,i){const s=Zn(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return au(n,s,r,t.intersect,i,o)},x(n,e,t,i){const s=Zn(e,n);return Wm(n,s,"x",t.intersect,i)},y(n,e,t,i){const s=Zn(e,n);return Wm(n,s,"y",t.intersect,i)}}};const eS=["left","top","right","bottom"];function Ls(n,e){return n.filter(t=>t.pos===e)}function Um(n,e){return n.filter(t=>eS.indexOf(t.pos)===-1&&t.box.axis===e)}function Bs(n,e){return n.sort((t,i)=>{const s=e?i:t,r=e?t:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function gF(n){const e=[];let t,i,s,r,o,a;for(t=0,i=(n||[]).length;t<i;++t)s=n[t],{position:r,options:{stack:o,stackWeight:a=1}}=s,e.push({index:t,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}function mF(n){const e={};for(const t of n){const{stack:i,pos:s,stackWeight:r}=t;if(!i||!eS.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function bF(n,e){const t=mF(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];const{fullSize:l}=a.box,c=t[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:l&&e.availableHeight)}return t}function yF(n){const e=gF(n),t=Bs(e.filter(c=>c.box.fullSize),!0),i=Bs(Ls(e,"left"),!0),s=Bs(Ls(e,"right")),r=Bs(Ls(e,"top"),!0),o=Bs(Ls(e,"bottom")),a=Um(e,"x"),l=Um(e,"y");return{fullSize:t,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Ls(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function $m(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function tS(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function vF(n,e,t,i){const{pos:s,box:r}=t,o=n.maxPadding;if(!$(s)){t.size&&(n[s]-=t.size);const d=i[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?r.height:r.width),t.size=d.size/d.count,n[s]+=t.size}r.getPadding&&tS(o,r.getPadding());const a=Math.max(0,e.outerWidth-$m(o,n,"left","right")),l=Math.max(0,e.outerHeight-$m(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:c,other:u}:{same:u,other:c}}function xF(n){const e=n.maxPadding;function t(i){const s=Math.max(e[i]-n[i],0);return n[i]+=s,s}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function _F(n,e){const t=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],t[o])}),r}return i(n?["left","right"]:["top","bottom"])}function qs(n,e,t,i){const s=[];let r,o,a,l,c,u;for(r=0,o=n.length,c=0;r<o;++r){a=n[r],l=a.box,l.update(a.width||e.w,a.height||e.h,_F(a.horizontal,e));const{same:d,other:f}=vF(e,t,a,i);c|=d&&s.length,u=u||f,l.fullSize||s.push(a)}return c&&qs(s,e,t,i)||u}function Po(n,e,t,i,s){n.top=t,n.left=e,n.right=e+i,n.bottom=t+s,n.width=i,n.height=s}function qm(n,e,t,i){const s=t.padding;let{x:r,y:o}=e;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,f=c.size||l.height;Rr(c.start)&&(o=c.start),l.fullSize?Po(l,s.left,o,t.outerWidth-s.right-s.left,f):Po(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,f=c.size||l.width;Rr(c.start)&&(r=c.start),l.fullSize?Po(l,r,s.top,f,t.outerHeight-s.bottom-s.top):Po(l,r,e.top+c.placed,f,d),c.start=r,c.placed+=d,r=l.right}}e.x=r,e.y=o}var Fe={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const s=Ve(n.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(t-s.height,0),a=yF(n.boxes),l=a.vertical,c=a.horizontal;Q(n.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,g)=>g.box.options&&g.box.options.display===!1?m:m+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},s);tS(f,Ve(i));const h=Object.assign({maxPadding:f,w:r,h:o,x:s.left,y:s.top},s),p=bF(l.concat(c),d);qs(a.fullSize,h,d,p),qs(l,h,d,p),qs(c,h,d,p)&&qs(l,h,d,p),xF(h),qm(a.leftAndTop,h,d,p),h.x+=h.w,h.y+=h.h,qm(a.rightAndBottom,h,d,p),n.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},Q(a.chartArea,m=>{const g=m.box;Object.assign(g,n.chartArea),g.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}};class nS{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,s){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):i)}}isAttached(e){return!0}updateConfig(e){}}class SF extends nS{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const aa="$chartjs",wF={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Gm=n=>n===null||n==="";function AF(n,e){const t=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[aa]={initial:{height:i,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Gm(s)){const r=Dm(n,"width");r!==void 0&&(n.width=r)}if(Gm(i))if(n.style.height==="")n.height=n.width/(e||2);else{const r=Dm(n,"height");r!==void 0&&(n.height=r)}return n}const iS=E2?{passive:!0}:!1;function kF(n,e,t){n&&n.addEventListener(e,t,iS)}function EF(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,iS)}function CF(n,e){const t=wF[n.type]||n.type,{x:i,y:s}=Zn(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function El(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function MF(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||El(a.addedNodes,i),o=o&&!El(a.removedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function DF(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||El(a.removedNodes,i),o=o&&!El(a.addedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}const Ir=new Map;let Km=0;function sS(){const n=window.devicePixelRatio;n!==Km&&(Km=n,Ir.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function TF(n,e){Ir.size||window.addEventListener("resize",sS),Ir.set(n,e)}function OF(n){Ir.delete(n),Ir.size||window.removeEventListener("resize",sS)}function RF(n,e,t){const i=n.canvas,s=i&&hh(i);if(!s)return;const r=N_((a,l)=>{const c=s.clientWidth;t(a,l),c<s.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(s),TF(n,r),o}function lu(n,e,t){t&&t.disconnect(),e==="resize"&&OF(n)}function PF(n,e,t){const i=n.canvas,s=N_(r=>{n.ctx!==null&&t(CF(r,n))},n);return kF(i,e,s),s}class NF extends nS{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(AF(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[aa])return!1;const i=t[aa].initial;["height","width"].forEach(r=>{const o=i[r];q(o)?t.removeAttribute(r):t.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{t.style[r]=s[r]}),t.width=t.width,delete t[aa],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),o={attach:MF,detach:DF,resize:RF}[t]||PF;s[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),s=i[t];if(!s)return;({attach:lu,detach:lu,resize:lu}[t]||EF)(e,t,s),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return k2(e,t,i,s)}isAttached(e){const t=e&&hh(e);return!!(t&&t.isConnected)}}function IF(n){return!fh()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?SF:NF}var Vo;let nn=(Vo=class{constructor(){T(this,"x");T(this,"y");T(this,"active",!1);T(this,"options");T(this,"$animations")}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return ys(this.x)&&ys(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}},T(Vo,"defaults",{}),T(Vo,"defaultRoutes"),Vo);function LF(n,e){const t=n.options.ticks,i=BF(n),s=Math.min(t.maxTicksLimit||i,i),r=t.major.enabled?zF(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return HF(e,c,r,o/s),c;const u=FF(r,e,s);if(o>0){let d,f;const h=o>1?Math.round((l-a)/(o-1)):null;for(No(e,c,u,q(h)?0:a-h,a),d=0,f=o-1;d<f;d++)No(e,c,u,r[d],r[d+1]);return No(e,c,u,l,q(h)?e.length:l+h),c}return No(e,c,u),c}function BF(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),s=n._maxLength/t;return Math.floor(Math.min(i,s))}function FF(n,e,t){const i=VF(n),s=e.length/t;if(!i)return Math.max(s,1);const r=DB(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function zF(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function HF(n,e,t,i){let s=0,r=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(e.push(n[o]),s++,r=t[s*i])}function No(n,e,t,i,s){const r=H(i,0),o=Math.min(H(s,n.length),n.length);let a=0,l,c,u;for(t=Math.ceil(t),s&&(l=s-i,t=l/Math.floor(l/t)),u=r;u<0;)a++,u=Math.round(r+a*t);for(c=Math.max(r,0);c<o;c++)c===u&&(e.push(n[c]),a++,u=Math.round(r+a*t))}function VF(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const jF=n=>n==="left"?"right":n==="right"?"left":n,Ym=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,Jm=(n,e)=>Math.min(e||n,n);function Qm(n,e){const t=[],i=n.length/e,s=n.length;let r=0;for(;r<s;r+=i)t.push(n[Math.floor(r)]);return t}function WF(n,e,t){const i=n.ticks.length,s=Math.min(e,i-1),r=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(s),c;if(!(t&&(i===1?c=Math.max(l-r,o-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function UF(n,e){Q(n,t=>{const i=t.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete t.data[i[r]];i.splice(0,s)}})}function Fs(n){return n.drawTicks?n.tickLength:0}function Zm(n,e){if(!n.display)return 0;const t=ve(n.font,e),i=Ve(n.padding);return(se(n.text)?n.text.length:1)*t.lineHeight+i.height}function $F(n,e){return jn(n,{scale:e,type:"scale"})}function qF(n,e,t){return jn(n,{tick:t,index:e,type:"tick"})}function GF(n,e,t){let i=oh(n);return(t&&e!=="right"||!t&&e==="right")&&(i=jF(i)),i}function KF(n,e,t,i){const{top:s,left:r,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l;let d=0,f,h,p;const m=o-s,g=a-r;if(n.isHorizontal()){if(h=Ie(i,r,a),$(t)){const b=Object.keys(t)[0],y=t[b];p=u[b].getPixelForValue(y)+m-e}else t==="center"?p=(c.bottom+c.top)/2+m-e:p=Ym(n,t,e);f=a-r}else{if($(t)){const b=Object.keys(t)[0],y=t[b];h=u[b].getPixelForValue(y)-g+e}else t==="center"?h=(c.left+c.right)/2-g+e:h=Ym(n,t,e);p=Ie(i,o,s),d=t==="left"?-he:he}return{titleX:h,titleY:p,maxWidth:f,rotation:d}}class zi extends nn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=nt(e,Number.POSITIVE_INFINITY),t=nt(t,Number.NEGATIVE_INFINITY),i=nt(i,Number.POSITIVE_INFINITY),s=nt(s,Number.NEGATIVE_INFINITY),{min:nt(e,i),max:nt(t,s),minDefined:ce(e),maxDefined:ce(t)}}getMinMax(e){let{min:t,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:t,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(t=Math.min(t,o.min)),r||(i=Math.max(i,o.max));return t=r&&t>i?i:t,i=s&&t>i?t:i,{min:nt(t,nt(i,t)),max:nt(i,nt(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ee(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=i2(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Qm(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=LF(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ee(this.options.afterUpdate,[this])}beforeSetDimensions(){ee(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ee(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ee(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ee(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=ee(t.callback,[r.value,i,e],this)}afterTickToLabelConversion(){ee(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ee(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=Jm(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,r=t.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!t.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,h=we(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:h/(i-1),d+6>a&&(a=h/(i-(e.offset?.5:1)),l=this.maxHeight-Fs(e.grid)-t.padding-Zm(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=sh(Math.min(Math.asin(we((u.highest.height+6)/a,-1,1)),Math.asin(we(l/c,-1,1))-Math.asin(we(f/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){ee(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ee(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Zm(s,t.options.font);if(a?(e.width=this.maxWidth,e.height=Fs(r)+l):(e.height=this.maxHeight,e.width=Fs(r)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:f}=this._getLabelSizes(),h=i.padding*2,p=vt(this.labelRotation),m=Math.cos(p),g=Math.sin(p);if(a){const b=i.mirror?0:g*d.width+m*f.height;e.height=Math.min(this.maxHeight,e.height+b+h)}else{const b=i.mirror?0:m*d.width+g*f.height;e.width=Math.min(this.maxWidth,e.width+b+h)}this._calculatePadding(c,u,g,m)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,h=0;l?c?(f=s*e.width,h=i*t.height):(f=i*e.height,h=s*t.width):r==="start"?h=t.width:r==="end"?f=e.width:r!=="inner"&&(f=e.width/2,h=t.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((h-d+o)*this.width/(this.width-d),0)}else{let u=t.height/2,d=e.height/2;r==="start"?(u=0,d=e.height):r==="end"&&(u=t.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ee(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)q(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=Qm(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(t/Jm(t,i));let c=0,u=0,d,f,h,p,m,g,b,y,v,x,_;for(d=0;d<t;d+=l){if(p=e[d].label,m=this._resolveTickFontOptions(d),s.font=g=m.string,b=r[g]=r[g]||{data:{},gc:[]},y=m.lineHeight,v=x=0,!q(p)&&!se(p))v=Al(s,b.data,b.gc,v,p),x=y;else if(se(p))for(f=0,h=p.length;f<h;++f)_=p[f],!q(_)&&!se(_)&&(v=Al(s,b.data,b.gc,v,_),x+=y);o.push(v),a.push(x),c=Math.max(v,c),u=Math.max(x,u)}UF(r,t);const S=o.indexOf(c),C=a.indexOf(u),E=M=>({width:o[M]||0,height:a[M]||0});return{first:E(0),last:E(t-1),widest:E(S),highest:E(C),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return RB(this._alignToPixels?qn(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=qF(this.getContext(),e,i))}return this.$context||(this.$context=$F(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=vt(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Fs(r),h=[],p=a.setContext(this.getContext()),m=p.display?p.width:0,g=m/2,b=function(Y){return qn(i,Y,m)};let y,v,x,_,S,C,E,M,N,B,W,de;if(o==="top")y=b(this.bottom),C=this.bottom-f,M=y-g,B=b(e.top)+g,de=e.bottom;else if(o==="bottom")y=b(this.top),B=e.top,de=b(e.bottom)-g,C=y+g,M=this.top+f;else if(o==="left")y=b(this.right),S=this.right-f,E=y-g,N=b(e.left)+g,W=e.right;else if(o==="right")y=b(this.left),N=e.left,W=b(e.right)-g,S=y+g,E=this.left+f;else if(t==="x"){if(o==="center")y=b((e.top+e.bottom)/2+.5);else if($(o)){const Y=Object.keys(o)[0],Z=o[Y];y=b(this.chart.scales[Y].getPixelForValue(Z))}B=e.top,de=e.bottom,C=y+g,M=C+f}else if(t==="y"){if(o==="center")y=b((e.left+e.right)/2);else if($(o)){const Y=Object.keys(o)[0],Z=o[Y];y=b(this.chart.scales[Y].getPixelForValue(Z))}S=y-g,E=S-f,N=e.left,W=e.right}const Pe=H(s.ticks.maxTicksLimit,d),G=Math.max(1,Math.ceil(d/Pe));for(v=0;v<d;v+=G){const Y=this.getContext(v),Z=r.setContext(Y),Me=a.setContext(Y),Ne=Z.lineWidth,Hi=Z.color,eo=Me.dash||[],Vi=Me.dashOffset,Ms=Z.tickWidth,Wn=Z.tickColor,Ds=Z.tickBorderDash||[],Un=Z.tickBorderDashOffset;x=WF(this,v,l),x!==void 0&&(_=qn(i,x,Ne),c?S=E=N=W=_:C=M=B=de=_,h.push({tx1:S,ty1:C,tx2:E,ty2:M,x1:N,y1:B,x2:W,y2:de,width:Ne,color:Hi,borderDash:eo,borderDashOffset:Vi,tickWidth:Ms,tickColor:Wn,tickBorderDash:Ds,tickBorderDashOffset:Un}))}return this._ticksLength=d,this._borderValue=y,h}_computeLabelItems(e){const t=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=r,f=Fs(i.grid),h=f+u,p=d?-u:h,m=-vt(this.labelRotation),g=[];let b,y,v,x,_,S,C,E,M,N,B,W,de="middle";if(s==="top")S=this.bottom-p,C=this._getXAxisLabelAlignment();else if(s==="bottom")S=this.top+p,C=this._getXAxisLabelAlignment();else if(s==="left"){const G=this._getYAxisLabelAlignment(f);C=G.textAlign,_=G.x}else if(s==="right"){const G=this._getYAxisLabelAlignment(f);C=G.textAlign,_=G.x}else if(t==="x"){if(s==="center")S=(e.top+e.bottom)/2+h;else if($(s)){const G=Object.keys(s)[0],Y=s[G];S=this.chart.scales[G].getPixelForValue(Y)+h}C=this._getXAxisLabelAlignment()}else if(t==="y"){if(s==="center")_=(e.left+e.right)/2-h;else if($(s)){const G=Object.keys(s)[0],Y=s[G];_=this.chart.scales[G].getPixelForValue(Y)}C=this._getYAxisLabelAlignment(f).textAlign}t==="y"&&(l==="start"?de="top":l==="end"&&(de="bottom"));const Pe=this._getLabelSizes();for(b=0,y=a.length;b<y;++b){v=a[b],x=v.label;const G=r.setContext(this.getContext(b));E=this.getPixelForTick(b)+r.labelOffset,M=this._resolveTickFontOptions(b),N=M.lineHeight,B=se(x)?x.length:1;const Y=B/2,Z=G.color,Me=G.textStrokeColor,Ne=G.textStrokeWidth;let Hi=C;o?(_=E,C==="inner"&&(b===y-1?Hi=this.options.reverse?"left":"right":b===0?Hi=this.options.reverse?"right":"left":Hi="center"),s==="top"?c==="near"||m!==0?W=-B*N+N/2:c==="center"?W=-Pe.highest.height/2-Y*N+N:W=-Pe.highest.height+N/2:c==="near"||m!==0?W=N/2:c==="center"?W=Pe.highest.height/2-Y*N:W=Pe.highest.height-B*N,d&&(W*=-1),m!==0&&!G.showLabelBackdrop&&(_+=N/2*Math.sin(m))):(S=E,W=(1-B)*N/2);let eo;if(G.showLabelBackdrop){const Vi=Ve(G.backdropPadding),Ms=Pe.heights[b],Wn=Pe.widths[b];let Ds=W-Vi.top,Un=0-Vi.left;switch(de){case"middle":Ds-=Ms/2;break;case"bottom":Ds-=Ms;break}switch(C){case"center":Un-=Wn/2;break;case"right":Un-=Wn;break;case"inner":b===y-1?Un-=Wn:b>0&&(Un-=Wn/2);break}eo={left:Un,top:Ds,width:Wn+Vi.width,height:Ms+Vi.height,color:G.backdropColor}}g.push({label:x,font:M,textOffset:W,options:{rotation:m,color:Z,strokeColor:Me,strokeWidth:Ne,textAlign:Hi,textBaseline:de,translation:[_,S],backdrop:eo}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-vt(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,u;return t==="left"?s?(u=this.right+r,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):t==="right"?s?(u=this.left+r,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:s,width:r,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(r=0,o=s.length;r<o;++r){const l=s[r];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,f;this.isHorizontal()?(c=qn(e,this.left,o)-o/2,u=qn(e,this.right,a)+a/2,d=f=l):(d=qn(e,this.top,o)-o/2,f=qn(e,this.bottom,a)+a/2,c=u=l),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(c,d),t.lineTo(u,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&sc(i,s);const r=this.getLabelItems(e);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Oi(i,c,0,u,l,a)}s&&rc(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:s}}=this;if(!i.display)return;const r=ve(i.font),o=Ve(i.padding),a=i.align;let l=r.lineHeight/2;t==="bottom"||t==="center"||$(t)?(l+=o.bottom,se(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:f}=KF(this,l,t,a);Oi(e,i.text,0,0,r,{color:i.color,maxWidth:d,rotation:f,textAlign:GF(a,t,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=H(e.grid&&e.grid.z,-1),s=H(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==zi.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=t.length;r<o;++r){const a=t[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return ve(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Io{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;QF(t)&&(i=this.register(t));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,YF(e,o,i),this.override&&ue.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in ue[s]&&(delete ue[s][i],this.override&&delete Ti[i])}}function YF(n,e,t){const i=Or(Object.create(null),[t?ue.get(t):{},ue.get(e),n.defaults]);ue.set(e,i),n.defaultRoutes&&JF(e,n.defaultRoutes),n.descriptors&&ue.describe(e,n.descriptors)}function JF(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),s=i.pop(),r=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");ue.route(r,s,l,a)})}function QF(n){return"id"in n&&"defaults"in n}class ZF{constructor(){this.controllers=new Io(_t,"datasets",!0),this.elements=new Io(nn,"elements"),this.plugins=new Io(Object,"plugins"),this.scales=new Io(zi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):Q(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){const s=ih(e);ee(i["before"+s],[],i),t[e](i),ee(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const s=t.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var Ot=new ZF;class XF{constructor(){this._init=[]}notify(e,t,i,s){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,t,i);return t==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,s){s=s||{};for(const r of e){const o=r.plugin,a=o[i],l=[t,s,r.options];if(ee(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){q(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,s=H(i.options&&i.options.plugins,{}),r=ez(i);return s===!1&&!t?[]:nz(e,r,s,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(t,i),e,"stop"),this._notify(s(i,t),e,"start")}}function ez(n){const e={},t=[],i=Object.keys(Ot.plugins.items);for(let r=0;r<i.length;r++)t.push(Ot.getPlugin(i[r]));const s=n.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function tz(n,e){return!e&&n===!1?null:n===!0?{}:n}function nz(n,{plugins:e,localIds:t},i,s){const r=[],o=n.getContext();for(const a of e){const l=a.id,c=tz(i[l],s);c!==null&&r.push({plugin:a,options:iz(n.config,{plugin:a,local:t[l]},c,o)})}return r}function iz(n,{plugin:e,local:t},i,s){const r=n.pluginScopeKeys(e),o=n.getOptionScopes(i,r);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function kd(n,e){const t=ue.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function sz(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function rz(n,e){return n===e?"_index_":"_value_"}function Xm(n){if(n==="x"||n==="y"||n==="r")return n}function oz(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Ed(n,...e){if(Xm(n))return n;for(const t of e){const i=t.axis||oz(t.position)||n.length>1&&Xm(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function eb(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function az(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return eb(n,"x",t[0])||eb(n,"y",t[0])}return{}}function lz(n,e){const t=Ti[n.type]||{scales:{}},i=e.scales||{},s=kd(n.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!$(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Ed(o,a,az(o,n),ue.scales[a.type]),c=rz(l,s),u=t.scales||{};r[o]=cr(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||kd(a,e),u=(Ti[a]||{}).scales||{};Object.keys(u).forEach(d=>{const f=sz(d,l),h=o[f+"AxisID"]||f;r[h]=r[h]||Object.create(null),cr(r[h],[{axis:f},i[h],u[d]])})}),Object.keys(r).forEach(o=>{const a=r[o];cr(a,[ue.scales[a.type],ue.scale])}),r}function rS(n){const e=n.options||(n.options={});e.plugins=H(e.plugins,{}),e.scales=lz(n,e)}function oS(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function cz(n){return n=n||{},n.data=oS(n.data),rS(n),n}const tb=new Map,aS=new Set;function Lo(n,e){let t=tb.get(n);return t||(t=e(),tb.set(n,t),aS.add(t)),t}const zs=(n,e,t)=>{const i=In(e,t);i!==void 0&&n.add(i)};class uz{constructor(e){this._config=cz(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=oS(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),rS(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Lo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Lo(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Lo(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return Lo(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let s=i.get(e);return(!s||t)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,t,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;const l=new Set;t.forEach(u=>{e&&(l.add(e),u.forEach(d=>zs(l,e,d))),u.forEach(d=>zs(l,s,d)),u.forEach(d=>zs(l,Ti[r]||{},d)),u.forEach(d=>zs(l,ue,d)),u.forEach(d=>zs(l,Sd,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),aS.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,Ti[t]||{},ue.datasets[t]||{},{type:t},ue,Sd]}resolveNamedOptions(e,t,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=nb(this._resolverCache,e,s);let l=o;if(fz(o,t)){r.$shared=!1,i=Ln(i)?i():i;const c=this.createResolver(e,i,a);l=vs(o,i,c)}for(const c of t)r[c]=l[c];return r}createResolver(e,t,i=[""],s){const{resolver:r}=nb(this._resolverCache,e,i);return $(t)?vs(r,t,void 0,s):r}}function nb(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const s=t.join();let r=i.get(s);return r||(r={resolver:ch(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const dz=n=>$(n)&&Object.getOwnPropertyNames(n).some(e=>Ln(n[e]));function fz(n,e){const{isScriptable:t,isIndexable:i}=H_(n);for(const s of e){const r=t(s),o=i(s),a=(o||r)&&n[s];if(r&&(Ln(a)||dz(a))||o&&se(a))return!0}return!1}var hz="4.4.4";const pz=["top","bottom","left","right","chartArea"];function ib(n,e){return n==="top"||n==="bottom"||pz.indexOf(n)===-1&&e==="x"}function sb(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function rb(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),ee(t&&t.onComplete,[n],e)}function gz(n){const e=n.chart,t=e.options.animation;ee(t&&t.onProgress,[n],e)}function lS(n){return fh()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const la={},ob=n=>{const e=lS(n);return Object.values(la).filter(t=>t.canvas===e).pop()};function mz(n,e,t){const i=Object.keys(n);for(const s of i){const r=+s;if(r>=e){const o=n[s];delete n[s],(t>0||r>e)&&(n[r+t]=o)}}}function bz(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}function Bo(n,e,t){return n.options.clip?n[t]:e[t]}function yz(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:Bo(t,e,"left"),right:Bo(t,e,"right"),top:Bo(i,e,"top"),bottom:Bo(i,e,"bottom")}:e}class We{static register(...e){Ot.add(...e),ab()}static unregister(...e){Ot.remove(...e),ab()}constructor(e,t){const i=this.config=new uz(t),s=lS(e),r=ob(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||IF(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=xB(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new XF,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=LB(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],la[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Wt.listen(this,"complete",rb),Wt.listen(this,"progress",gz),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:s,_aspectRatio:r}=this;return q(e)?t&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ot}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Mm(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return km(this.canvas,this.ctx),this}stop(){return Wt.stop(this),this}resize(e,t){Wt.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,t,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Mm(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ee(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Q(t,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];t&&(r=r.concat(Object.keys(t).map(o=>{const a=t[o],l=Ed(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Q(r,o=>{const a=o.options,l=a.id,c=Ed(l,a),u=H(a.type,o.dtype);(a.position===void 0||ib(a.position,c)!==ib(o.dposition))&&(a.position=o.dposition),s[l]=!0;let d=null;if(l in i&&i[l].type===u)d=i[l];else{const f=Ot.getScale(u);d=new f({id:l,type:u,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),Q(s,(o,a)=>{o||delete i[a]}),Q(i,o=>{Fe.configure(this,o,o.options),Fe.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>t){for(let s=t;s<i;++s)this._destroyDatasetMeta(s);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(sb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,s)=>{t.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=t.length;i<s;i++){const r=t[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||kd(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Ot.getController(a),{datasetElementType:c,dataElementType:u}=ue.datasets[a];Object.assign(l,{dataElementType:Ot.getElement(u),datasetElementType:c&&Ot.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Q(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),f=!s&&r.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||Q(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(sb("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Q(this.scales,e=>{Fe.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!mm(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of t){const o=i==="_removeElements"?-r:r;mz(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<t;r++)if(!mm(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Fe.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],Q(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,Ln(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Wt.has(this)?this.attached&&!Wt.running(this)&&Wt.start(this):(this.draw(),rb({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let s,r;for(s=0,r=t.length;s<r;++s){const o=t[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i=e._clip,s=!i.disabled,r=yz(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&sc(t,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),e.controller.draw(),s&&rc(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Jt(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,s){const r=pF.modes[t];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=jn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);Rr(t)?(r.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Wt.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),km(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete la[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(r,o)=>{t.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Q(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){Q(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Q(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const s=i?"set":"remove";let r,o,a,l;for(t==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!_l(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const s=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=r(t,e),a=i?e:r(e,t);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:s=[],options:r}=this,o=t,a=this._getActiveElements(e,s,i,o),l=EB(e),c=bz(e,this._lastEvent,i,l);i&&(this._lastEvent=null,ee(r.onHover,[e,a,this],this),l&&ee(r.onClick,[e,a,this],this));const u=!_l(a,s);return(u||t)&&(this._active=a,this._updateHoverStyles(a,s,t)),this._lastEvent=c,u}_getActiveElements(e,t,i,s){if(e.type==="mouseout")return[];if(!i)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}}T(We,"defaults",ue),T(We,"instances",la),T(We,"overrides",Ti),T(We,"registry",Ot),T(We,"version",hz),T(We,"getChart",ob);function ab(){return Q(We.instances,n=>n._plugins.invalidate())}function vz(n,e,t){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;n.beginPath(),n.arc(r,o,a,i-c,t+c),l>s?(c=s/l,n.arc(r,o,l,t+c,i-c,!0)):n.arc(r,o,s,t+he,i-he),n.closePath(),n.clip()}function xz(n){return lh(n,["outerStart","outerEnd","innerStart","innerEnd"])}function _z(n,e,t,i){const s=xz(n.options.borderRadius),r=(t-e)/2,o=Math.min(r,i*e/2),a=l=>{const c=(t-Math.min(r,l))*i/2;return we(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:we(s.innerStart,0,o),innerEnd:we(s.innerEnd,0,o)}}function qi(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function Cl(n,e,t,i,s,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+i+t-c,0),f=u>0?u+i+t+c:0;let h=0;const p=s-l;if(i){const G=u>0?u-i:0,Y=d>0?d-i:0,Z=(G+Y)/2,Me=Z!==0?p*Z/(Z+i):p;h=(p-Me)/2}const m=Math.max(.001,p*d-t/ie)/d,g=(p-m)/2,b=l+g+h,y=s-g-h,{outerStart:v,outerEnd:x,innerStart:_,innerEnd:S}=_z(e,f,d,y-b),C=d-v,E=d-x,M=b+v/C,N=y-x/E,B=f+_,W=f+S,de=b+_/B,Pe=y-S/W;if(n.beginPath(),r){const G=(M+N)/2;if(n.arc(o,a,d,M,G),n.arc(o,a,d,G,N),x>0){const Ne=qi(E,N,o,a);n.arc(Ne.x,Ne.y,x,N,y+he)}const Y=qi(W,y,o,a);if(n.lineTo(Y.x,Y.y),S>0){const Ne=qi(W,Pe,o,a);n.arc(Ne.x,Ne.y,S,y+he,Pe+Math.PI)}const Z=(y-S/f+(b+_/f))/2;if(n.arc(o,a,f,y-S/f,Z,!0),n.arc(o,a,f,Z,b+_/f,!0),_>0){const Ne=qi(B,de,o,a);n.arc(Ne.x,Ne.y,_,de+Math.PI,b-he)}const Me=qi(C,b,o,a);if(n.lineTo(Me.x,Me.y),v>0){const Ne=qi(C,M,o,a);n.arc(Ne.x,Ne.y,v,b-he,M)}}else{n.moveTo(o,a);const G=Math.cos(M)*d+o,Y=Math.sin(M)*d+a;n.lineTo(G,Y);const Z=Math.cos(N)*d+o,Me=Math.sin(N)*d+a;n.lineTo(Z,Me)}n.closePath()}function Sz(n,e,t,i,s){const{fullCircles:r,startAngle:o,circumference:a}=e;let l=e.endAngle;if(r){Cl(n,e,t,i,l,s);for(let c=0;c<r;++c)n.fill();isNaN(a)||(l=o+(a%te||te))}return Cl(n,e,t,i,l,s),n.fill(),l}function wz(n,e,t,i,s){const{fullCircles:r,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:f}=l,h=l.borderAlign==="inner";if(!c)return;n.setLineDash(d||[]),n.lineDashOffset=f,h?(n.lineWidth=c*2,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let p=e.endAngle;if(r){Cl(n,e,t,i,p,s);for(let m=0;m<r;++m)n.stroke();isNaN(a)||(p=o+(a%te||te))}h&&vz(n,e,p),r||(Cl(n,e,t,i,p,s),n.stroke())}class Gs extends nn{constructor(t){super();T(this,"circumference");T(this,"endAngle");T(this,"fullCircles");T(this,"innerRadius");T(this,"outerRadius");T(this,"pixelMargin");T(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,s){const r=this.getProps(["x","y"],s),{angle:o,distance:a}=T_(r,{x:t,y:i}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:d,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),h=(this.options.spacing+this.options.borderWidth)/2,p=H(f,c-l),m=Pr(o,l,c)&&l!==c,g=p>=te||m,b=Kt(a,u+h,d+h);return g&&b}getCenterPoint(t){const{x:i,y:s,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:u}=this.options,d=(r+o)/2,f=(a+l+u+c)/2;return{x:i+Math.cos(d)*f,y:s+Math.sin(d)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:i,circumference:s}=this,r=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>te?Math.floor(s/te):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(ie,s||0)),u=r*c;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,Sz(t,this,u,o,a),wz(t,this,u,o,a),t.restore()}}T(Gs,"id","arc"),T(Gs,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),T(Gs,"defaultRoutes",{backgroundColor:"backgroundColor"}),T(Gs,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function cS(n,e,t=e){n.lineCap=H(t.borderCapStyle,e.borderCapStyle),n.setLineDash(H(t.borderDash,e.borderDash)),n.lineDashOffset=H(t.borderDashOffset,e.borderDashOffset),n.lineJoin=H(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=H(t.borderWidth,e.borderWidth),n.strokeStyle=H(t.borderColor,e.borderColor)}function Az(n,e,t){n.lineTo(t.x,t.y)}function kz(n){return n.stepped?KB:n.tension||n.cubicInterpolationMode==="monotone"?YB:Az}function uS(n,e,t={}){const i=n.length,{start:s=0,end:r=i-1}=t,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function Ez(n,e,t,i){const{points:s,options:r}=e,{count:o,start:a,loop:l,ilen:c}=uS(s,t,i),u=kz(r);let{move:d=!0,reverse:f}=i||{},h,p,m;for(h=0;h<=c;++h)p=s[(a+(f?c-h:h))%o],!p.skip&&(d?(n.moveTo(p.x,p.y),d=!1):u(n,m,p,f,r.stepped),m=p);return l&&(p=s[(a+(f?c:0))%o],u(n,m,p,f,r.stepped)),!!l}function Cz(n,e,t,i){const s=e.points,{count:r,start:o,ilen:a}=uS(s,t,i),{move:l=!0,reverse:c}=i||{};let u=0,d=0,f,h,p,m,g,b;const y=x=>(o+(c?a-x:x))%r,v=()=>{m!==g&&(n.lineTo(u,g),n.lineTo(u,m),n.lineTo(u,b))};for(l&&(h=s[y(0)],n.moveTo(h.x,h.y)),f=0;f<=a;++f){if(h=s[y(f)],h.skip)continue;const x=h.x,_=h.y,S=x|0;S===p?(_<m?m=_:_>g&&(g=_),u=(d*u+x)/++d):(v(),n.lineTo(x,_),p=S,d=0,m=g=_),b=_}v()}function Cd(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?Cz:Ez}function Mz(n){return n.stepped?C2:n.tension||n.cubicInterpolationMode==="monotone"?M2:Xn}function Dz(n,e,t,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,t,i)&&s.closePath()),cS(n,e.options),n.stroke(s)}function Tz(n,e,t,i){const{segments:s,options:r}=e,o=Cd(e);for(const a of s)cS(n,r,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const Oz=typeof Path2D=="function";function Rz(n,e,t,i){Oz&&!e.options.segment?Dz(n,e,t,i):Tz(n,e,t,i)}class _n extends nn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;v2(this._points,i,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=N2(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,s=e[t],r=this.points,o=J_(this,{property:t,start:s,end:s});if(!o.length)return;const a=[],l=Mz(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:f}=o[c],h=r[d],p=r[f];if(h===p){a.push(h);continue}const m=Math.abs((s-h[t])/(p[t]-h[t])),g=l(h,p,m,i.stepped);g[t]=e[t],a.push(g)}return a.length===1?a[0]:a}pathSegment(e,t,i){return Cd(this)(e,this,t,i)}path(e,t,i){const s=this.segments,r=Cd(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const a of s)o&=r(e,this,a,{start:t,end:t+i-1});return!!o}draw(e,t,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),Rz(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}T(_n,"id","line"),T(_n,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),T(_n,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),T(_n,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function lb(n,e,t,i){const s=n.options,{[t]:r}=n.getProps([t],i);return Math.abs(e-r)<s.radius+s.hitRadius}class ca extends nn{constructor(t){super();T(this,"parsed");T(this,"skip");T(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(t-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,i){return lb(this,t,"x",i)}inYRange(t,i){return lb(this,t,"y",i)}getCenterPoint(t){const{x:i,y:s}=this.getProps(["x","y"],t);return{x:i,y:s}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const s=i&&t.borderWidth||0;return(i+s)*2}draw(t,i){const s=this.options;this.skip||s.radius<.1||!Jt(this,i,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,wd(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}T(ca,"id","point"),T(ca,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),T(ca,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function dS(n,e){const{x:t,y:i,base:s,width:r,height:o}=n.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return n.horizontal?(d=o/2,a=Math.min(t,s),l=Math.max(t,s),c=i-d,u=i+d):(d=r/2,a=t-d,l=t+d,c=Math.min(i,s),u=Math.max(i,s)),{left:a,top:c,right:l,bottom:u}}function Sn(n,e,t,i){return n?0:we(e,t,i)}function Pz(n,e,t){const i=n.options.borderWidth,s=n.borderSkipped,r=z_(i);return{t:Sn(s.top,r.top,0,t),r:Sn(s.right,r.right,0,e),b:Sn(s.bottom,r.bottom,0,t),l:Sn(s.left,r.left,0,e)}}function Nz(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,r=Si(s),o=Math.min(e,t),a=n.borderSkipped,l=i||$(s);return{topLeft:Sn(!l||a.top||a.left,r.topLeft,0,o),topRight:Sn(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Sn(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Sn(!l||a.bottom||a.right,r.bottomRight,0,o)}}function Iz(n){const e=dS(n),t=e.right-e.left,i=e.bottom-e.top,s=Pz(n,t/2,i/2),r=Nz(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:t-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function cu(n,e,t,i){const s=e===null,r=t===null,a=n&&!(s&&r)&&dS(n,i);return a&&(s||Kt(e,a.left,a.right))&&(r||Kt(t,a.top,a.bottom))}function Lz(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Bz(n,e){n.rect(e.x,e.y,e.w,e.h)}function uu(n,e,t={}){const i=n.x!==t.x?-e:0,s=n.y!==t.y?-e:0,r=(n.x+n.w!==t.x+t.w?e:0)-i,o=(n.y+n.h!==t.y+t.h?e:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+r,h:n.h+o,radius:n.radius}}class ua extends nn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=Iz(this),a=Lz(o.radius)?Nr:Bz;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,uu(o,t,r)),e.clip(),a(e,uu(r,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,uu(r,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,i){return cu(this,e,t,i)}inXRange(e,t){return cu(this,e,null,t)}inYRange(e,t){return cu(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+s)/2:t,y:r?i:(i+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}T(ua,"id","bar"),T(ua,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),T(ua,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Fz=Object.freeze({__proto__:null,ArcElement:Gs,BarElement:ua,LineElement:_n,PointElement:ca});const Md=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],cb=Md.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function fS(n){return Md[n%Md.length]}function hS(n){return cb[n%cb.length]}function zz(n,e){return n.borderColor=fS(e),n.backgroundColor=hS(e),++e}function Hz(n,e){return n.backgroundColor=n.data.map(()=>fS(e++)),e}function Vz(n,e){return n.backgroundColor=n.data.map(()=>hS(e++)),e}function jz(n){let e=0;return(t,i)=>{const s=n.getDatasetMeta(i).controller;s instanceof ui?e=Hz(t,e):s instanceof hr?e=Vz(t,e):s&&(e=zz(t,e))}}function ub(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function Wz(n){return n&&(n.borderColor||n.backgroundColor)}var Uz={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:i},options:s}=n.config,{elements:r}=s;if(!t.forceOverride&&(ub(i)||Wz(s)||r&&ub(r)))return;const o=jz(n);i.forEach(o)}};function $z(n,e,t,i,s){const r=s.samples||i;if(r>=t)return n.slice(e,e+t);const o=[],a=(t-2)/(r-2);let l=0;const c=e+t-1;let u=e,d,f,h,p,m;for(o[l++]=n[u],d=0;d<r-2;d++){let g=0,b=0,y;const v=Math.floor((d+1)*a)+1+e,x=Math.min(Math.floor((d+2)*a)+1,t)+e,_=x-v;for(y=v;y<x;y++)g+=n[y].x,b+=n[y].y;g/=_,b/=_;const S=Math.floor(d*a)+1+e,C=Math.min(Math.floor((d+1)*a)+1,t)+e,{x:E,y:M}=n[u];for(h=p=-1,y=S;y<C;y++)p=.5*Math.abs((E-g)*(n[y].y-M)-(E-n[y].x)*(b-M)),p>h&&(h=p,f=n[y],m=y);o[l++]=f,u=m}return o[l++]=n[c],o}function qz(n,e,t,i){let s=0,r=0,o,a,l,c,u,d,f,h,p,m;const g=[],b=e+t-1,y=n[e].x,x=n[b].x-y;for(o=e;o<e+t;++o){a=n[o],l=(a.x-y)/x*i,c=a.y;const _=l|0;if(_===u)c<p?(p=c,d=o):c>m&&(m=c,f=o),s=(r*s+a.x)/++r;else{const S=o-1;if(!q(d)&&!q(f)){const C=Math.min(d,f),E=Math.max(d,f);C!==h&&C!==S&&g.push({...n[C],x:s}),E!==h&&E!==S&&g.push({...n[E],x:s})}o>0&&S!==h&&g.push(n[S]),g.push(a),u=_,r=0,p=m=c,d=f=h=o}}return g}function pS(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function db(n){n.data.datasets.forEach(e=>{pS(e)})}function Gz(n,e){const t=e.length;let i=0,s;const{iScale:r}=n,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(i=we(Yt(e,r.axis,o).lo,0,t-1)),c?s=we(Yt(e,r.axis,a).hi+1,i,t)-i:s=t-i,{start:i,count:s}}var Kz={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){db(n);return}const i=n.width;n.data.datasets.forEach((s,r)=>{const{_data:o,indexAxis:a}=s,l=n.getDatasetMeta(r),c=o||s.data;if($s([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=n.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:d,count:f}=Gz(l,c);const h=t.threshold||4*i;if(f<=h){pS(s);return}q(o)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let p;switch(t.algorithm){case"lttb":p=$z(c,d,f,i,t);break;case"min-max":p=qz(c,d,f,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}s._decimated=p})},destroy(n){db(n)}};function Yz(n,e,t){const i=n.segments,s=n.points,r=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=gh(l,c,s);const u=Dd(t,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const d=J_(e,u);for(const f of d){const h=Dd(t,r[f.start],r[f.end],f.loop),p=Y_(a,s,h);for(const m of p)o.push({source:m,target:f,start:{[t]:fb(u,h,"start",Math.max)},end:{[t]:fb(u,h,"end",Math.min)}})}}return o}function Dd(n,e,t,i){if(i)return;let s=e[n],r=t[n];return n==="angle"&&(s=it(s),r=it(r)),{property:n,start:s,end:r}}function Jz(n,e){const{x:t=null,y:i=null}=n||{},s=e.points,r=[];return e.segments.forEach(({start:o,end:a})=>{a=gh(o,a,s);const l=s[o],c=s[a];i!==null?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):t!==null&&(r.push({x:t,y:l.y}),r.push({x:t,y:c.y}))}),r}function gh(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function fb(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function gS(n,e){let t=[],i=!1;return se(n)?(i=!0,t=n):t=Jz(n,e),t.length?new _n({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function hb(n){return n&&n.fill!==!1}function Qz(n,e,t){let s=n[e].fill;const r=[e];let o;if(!t)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!ce(s))return s;if(o=n[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function Zz(n,e,t){const i=nH(n);if($(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return ce(s)&&Math.floor(s)===s?Xz(i[0],e,s,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Xz(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function eH(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:$(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function tH(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:$(n)?i=n.value:i=e.getBaseValue(),i}function nH(n){const e=n.options,t=e.fill;let i=H(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function iH(n){const{scale:e,index:t,line:i}=n,s=[],r=i.segments,o=i.points,a=sH(e,t);a.push(gS({x:null,y:e.bottom},i));for(let l=0;l<r.length;l++){const c=r[l];for(let u=c.start;u<=c.end;u++)rH(s,o[u],a)}return new _n({points:s,options:{}})}function sH(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===e)break;r.hidden||t.unshift(r.dataset)}return t}function rH(n,e,t){const i=[];for(let s=0;s<t.length;s++){const r=t[s],{first:o,last:a,point:l}=oH(r,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function oH(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const s=i[t],r=n.segments,o=n.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const u=r[c],d=o[u.start][t],f=o[u.end][t];if(Kt(s,d,f)){a=s===d,l=s===f;break}}return{first:a,last:l,point:i}}class mS{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:s,y:r,radius:o}=this;return t=t||{start:0,end:te},e.arc(s,r,o,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:s}=this,r=e.angle;return{x:t+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function aH(n){const{chart:e,fill:t,line:i}=n;if(ce(t))return lH(e,t);if(t==="stack")return iH(n);if(t==="shape")return!0;const s=cH(n);return s instanceof mS?s:gS(s,i)}function lH(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function cH(n){return(n.scale||{}).getPointPositionForValue?dH(n):uH(n)}function uH(n){const{scale:e={},fill:t}=n,i=eH(t,e);if(ce(i)){const s=e.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function dH(n){const{scale:e,fill:t}=n,i=e.options,s=e.getLabels().length,r=i.reverse?e.max:e.min,o=tH(t,e,r),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,r);return new mS({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function du(n,e,t){const i=aH(e),{line:s,scale:r,axis:o}=e,a=s.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:d=c}=l||{};i&&s.points.length&&(sc(n,t),fH(n,{line:s,target:i,above:u,below:d,area:t,scale:r,axis:o}),rc(n))}function fH(n,e){const{line:t,target:i,above:s,below:r,area:o,scale:a}=e,l=t._loop?"angle":e.axis;n.save(),l==="x"&&r!==s&&(pb(n,i,o.top),gb(n,{line:t,target:i,color:s,scale:a,property:l}),n.restore(),n.save(),pb(n,i,o.bottom)),gb(n,{line:t,target:i,color:r,scale:a,property:l}),n.restore()}function pb(n,e,t){const{segments:i,points:s}=e;let r=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:c}=a,u=s[l],d=s[gh(l,c,s)];r?(n.moveTo(u.x,u.y),r=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function gb(n,e){const{line:t,target:i,property:s,color:r,scale:o}=e,a=Yz(t,i,s);for(const{source:l,target:c,start:u,end:d}of a){const{style:{backgroundColor:f=r}={}}=l,h=i!==!0;n.save(),n.fillStyle=f,hH(n,o,h&&Dd(s,u,d)),n.beginPath();const p=!!t.pathSegment(n,l);let m;if(h){p?n.closePath():mb(n,i,d,s);const g=!!i.pathSegment(n,c,{move:p,reverse:!0});m=p&&g,m||mb(n,i,u,s)}n.closePath(),n.fill(m?"evenodd":"nonzero"),n.restore()}}function hH(n,e,t){const{top:i,bottom:s}=e.chart.chartArea,{property:r,start:o,end:a}=t||{};r==="x"&&(n.beginPath(),n.rect(o,i,a-o,s-i),n.clip())}function mb(n,e,t,i){const s=e.interpolate(t,i);s&&n.lineTo(s.x,s.y)}var pH={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,s=[];let r,o,a,l;for(o=0;o<i;++o)r=n.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof _n&&(l={visible:n.isDatasetVisible(o),index:o,fill:Zz(a,o,i),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<i;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=Qz(s,o,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",s=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),i&&a.fill&&du(n.ctx,a,r))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;hb(r)&&du(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!hb(i)||t.drawTime!=="beforeDatasetDraw"||du(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const bb=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},gH=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class yb extends nn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=ee(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=ve(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=bb(i,r);let c,u;t.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let d=e;r.textAlign="left",r.textBaseline="middle";let f=-1,h=-u;return this.legendItems.forEach((p,m)=>{const g=i+t/2+r.measureText(p.text).width;(m===0||c[c.length-1]+g+2*a>o)&&(d+=u,c[c.length-(m>0?0:1)]=0,h+=u,f++),l[m]={left:0,top:h,row:f,width:g,height:s},c[c.length-1]+=g+a}),d}_fitCols(e,t,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,f=0,h=0,p=0,m=0;return this.legendItems.forEach((g,b)=>{const{itemWidth:y,itemHeight:v}=mH(i,t,r,g,s);b>0&&h+v+2*a>u&&(d+=f+a,c.push({width:f,height:h}),p+=f+a,m++,f=h=0),l[b]={left:p,top:h,col:m,width:y,height:v},f=Math.max(f,y),h+=v+a}),d+=f,c.push({width:f,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:s},rtl:r}}=this,o=rs(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ie(i,this.left+s,this.right-this.lineWidths[a]);for(const c of t)a!==c.row&&(a=c.row,l=Ie(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Ie(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of t)c.col!==a&&(a=c.col,l=Ie(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;sc(e,this),this._draw(),rc(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,a=ue.color,l=rs(e.rtl,this.left,this.width),c=ve(o.font),{padding:u}=o,d=c.size,f=d/2;let h;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:p,boxHeight:m,itemHeight:g}=bb(o,d),b=function(S,C,E){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;s.save();const M=H(E.lineWidth,1);if(s.fillStyle=H(E.fillStyle,a),s.lineCap=H(E.lineCap,"butt"),s.lineDashOffset=H(E.lineDashOffset,0),s.lineJoin=H(E.lineJoin,"miter"),s.lineWidth=M,s.strokeStyle=H(E.strokeStyle,a),s.setLineDash(H(E.lineDash,[])),o.usePointStyle){const N={radius:m*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:M},B=l.xPlus(S,p/2),W=C+f;F_(s,N,B,W,o.pointStyleWidth&&p)}else{const N=C+Math.max((d-m)/2,0),B=l.leftForLtr(S,p),W=Si(E.borderRadius);s.beginPath(),Object.values(W).some(de=>de!==0)?Nr(s,{x:B,y:N,w:p,h:m,radius:W}):s.rect(B,N,p,m),s.fill(),M!==0&&s.stroke()}s.restore()},y=function(S,C,E){Oi(s,E.text,S,C+g/2,c,{strikethrough:E.hidden,textAlign:l.textAlign(E.textAlign)})},v=this.isHorizontal(),x=this._computeTitleHeight();v?h={x:Ie(r,this.left+u,this.right-i[0]),y:this.top+u+x,line:0}:h={x:this.left+u,y:Ie(r,this.top+x+u,this.bottom-t[0].height),line:0},q_(this.ctx,e.textDirection);const _=g+u;this.legendItems.forEach((S,C)=>{s.strokeStyle=S.fontColor,s.fillStyle=S.fontColor;const E=s.measureText(S.text).width,M=l.textAlign(S.textAlign||(S.textAlign=o.textAlign)),N=p+f+E;let B=h.x,W=h.y;l.setWidth(this.width),v?C>0&&B+N+u>this.right&&(W=h.y+=_,h.line++,B=h.x=Ie(r,this.left+u,this.right-i[h.line])):C>0&&W+_>this.bottom&&(B=h.x=B+t[h.line].width+u,h.line++,W=h.y=Ie(r,this.top+x+u,this.bottom-t[h.line].height));const de=l.x(B);if(b(de,W,S),B=BB(M,B+p+f,v?B+N:this.right,e.rtl),y(l.x(B),W,S),v)h.x+=N+u;else if(typeof S.text!="string"){const Pe=c.lineHeight;h.y+=bS(S,Pe)+u}else h.y+=_}),G_(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=ve(t.font),s=Ve(t.padding);if(!t.display)return;const r=rs(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=i.size/2,c=s.top+l;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,d=Ie(e.align,d,this.right-f);else{const p=this.columnSizes.reduce((m,g)=>Math.max(m,g.height),0);u=c+Ie(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const h=Ie(a,d,d+f);o.textAlign=r.textAlign(oh(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,Oi(o,t.text,h,u,i)}_computeTitleHeight(){const e=this.options.title,t=ve(e.font),i=Ve(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,s,r;if(Kt(e,this.left,this.right)&&Kt(t,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Kt(e,s.left,s.left+s.width)&&Kt(t,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!vH(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=gH(s,i);s&&!r&&ee(t.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&ee(t.onHover,[e,i,this],this)}else i&&ee(t.onClick,[e,i,this],this)}}function mH(n,e,t,i,s){const r=bH(i,n,e,t),o=yH(s,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function bH(n,e,t,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),e+t.size/2+i.measureText(s).width}function yH(n,e,t){let i=n;return typeof e.text!="string"&&(i=bS(e,t)),i}function bS(n,e){const t=n.text?n.text.length:0;return e*t}function vH(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var xH={id:"legend",_element:yb,start(n,e,t){const i=n.legend=new yb({ctx:n.ctx,options:t,chart:n});Fe.configure(n,i,t),Fe.addBox(n,i)},stop(n){Fe.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;Fe.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,s=t.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(t?0:void 0),u=Ve(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class mh extends nn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const s=se(i.text)?i.text.length:1;this._padding=Ve(i.padding);const r=s*ve(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Ie(a,i,r),d=t+e,c=r-i):(o.position==="left"?(u=i+e,d=Ie(a,s,t),l=ie*-.5):(u=r-e,d=Ie(a,t,s),l=ie*.5),c=s-t),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=ve(t.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Oi(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:oh(t.align),textBaseline:"middle",translation:[o,a]})}}function _H(n,e){const t=new mh({ctx:n.ctx,options:e,chart:n});Fe.configure(n,t,e),Fe.addBox(n,t),n.titleBlock=t}var SH={id:"title",_element:mh,start(n,e,t){_H(n,t)},stop(n){const e=n.titleBlock;Fe.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;Fe.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Fo=new WeakMap;var wH={id:"subtitle",start(n,e,t){const i=new mh({ctx:n.ctx,options:t,chart:n});Fe.configure(n,i,t),Fe.addBox(n,i),Fo.set(n,i)},stop(n){Fe.removeBox(n,Fo.get(n)),Fo.delete(n)},beforeUpdate(n,e,t){const i=Fo.get(n);Fe.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ks={average(n){if(!n.length)return!1;let e,t,i=new Set,s=0,r=0;for(e=0,t=n.length;e<t;++e){const a=n[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),s+=l.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/r}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=n.length;r<o;++r){const l=n[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=_d(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function Et(n,e){return e&&(se(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Ut(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function AH(n,e){const{element:t,datasetIndex:i,index:s}=e,r=n.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:n,label:o,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:t}}function vb(n,e){const t=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:o,boxHeight:a}=e,l=ve(e.bodyFont),c=ve(e.titleFont),u=ve(e.footerFont),d=r.length,f=s.length,h=i.length,p=Ve(e.padding);let m=p.height,g=0,b=i.reduce((x,_)=>x+_.before.length+_.lines.length+_.after.length,0);if(b+=n.beforeBody.length+n.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),b){const x=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=h*x+(b-h)*l.lineHeight+(b-1)*e.bodySpacing}f&&(m+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let y=0;const v=function(x){g=Math.max(g,t.measureText(x).width+y)};return t.save(),t.font=c.string,Q(n.title,v),t.font=l.string,Q(n.beforeBody.concat(n.afterBody),v),y=e.displayColors?o+2+e.boxPadding:0,Q(i,x=>{Q(x.before,v),Q(x.lines,v),Q(x.after,v)}),y=0,t.font=u.string,Q(n.footer,v),t.restore(),g+=p.width,{width:g,height:m}}function kH(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function EH(n,e,t,i){const{x:s,width:r}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&s+r+o>e.width||n==="right"&&s-r-o<0)return!0}function CH(n,e,t,i){const{x:s,width:r}=t,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),EH(c,n,e,t)&&(c="center"),c}function xb(n,e,t){const i=t.yAlign||e.yAlign||kH(n,t);return{xAlign:t.xAlign||e.xAlign||CH(n,e,t,i),yAlign:i}}function MH(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function DH(n,e,t){let{y:i,height:s}=n;return e==="top"?i+=t:e==="bottom"?i-=s+t:i-=s/2,i}function _b(n,e,t,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,c=s+r,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:h}=Si(o);let p=MH(e,a);const m=DH(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,f)+s:a==="right"&&(p+=Math.max(d,h)+s),{x:we(p,0,i.width-e.width),y:we(m,0,i.height-e.height)}}function zo(n,e,t){const i=Ve(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function Sb(n){return Et([],Ut(n))}function TH(n,e,t){return jn(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function wb(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const yS={beforeTitle:Vt,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:Vt,beforeBody:Vt,beforeLabel:Vt,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return q(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Vt,afterBody:Vt,beforeFooter:Vt,footer:Vt,afterFooter:Vt};function Ke(n,e,t,i){const s=n[e].call(t,i);return typeof s>"u"?yS[e].call(t,i):s}class Td extends nn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&t.options.animation&&i.animations,r=new Q_(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=TH(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,s=Ke(i,"beforeTitle",this,e),r=Ke(i,"title",this,e),o=Ke(i,"afterTitle",this,e);let a=[];return a=Et(a,Ut(s)),a=Et(a,Ut(r)),a=Et(a,Ut(o)),a}getBeforeBody(e,t){return Sb(Ke(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,s=[];return Q(e,r=>{const o={before:[],lines:[],after:[]},a=wb(i,r);Et(o.before,Ut(Ke(a,"beforeLabel",this,r))),Et(o.lines,Ke(a,"label",this,r)),Et(o.after,Ut(Ke(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,t){return Sb(Ke(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,s=Ke(i,"beforeFooter",this,e),r=Ke(i,"footer",this,e),o=Ke(i,"afterFooter",this,e);let a=[];return a=Et(a,Ut(s)),a=Et(a,Ut(r)),a=Et(a,Ut(o)),a}_createItems(e){const t=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=t.length;l<c;++l)a.push(AH(this.chart,t[l]));return e.filter&&(a=a.filter((u,d,f)=>e.filter(u,d,f,i))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,i))),Q(a,u=>{const d=wb(e.callbacks,u);s.push(Ke(d,"labelColor",this,u)),r.push(Ke(d,"labelPointStyle",this,u)),o.push(Ke(d,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=Ks[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=vb(this,i),c=Object.assign({},a,l),u=xb(this.chart,i,c),d=_b(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,s){const r=this.getCaretPosition(e,i,s);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=Si(a),{x:f,y:h}=e,{width:p,height:m}=t;let g,b,y,v,x,_;return r==="center"?(x=h+m/2,s==="left"?(g=f,b=g-o,v=x+o,_=x-o):(g=f+p,b=g+o,v=x-o,_=x+o),y=g):(s==="left"?b=f+Math.max(l,u)+o:s==="right"?b=f+p-Math.max(c,d)-o:b=this.caretX,r==="top"?(v=h,x=v-o,g=b-o,y=b+o):(v=h+m,x=v+o,g=b+o,y=b-o),_=v),{x1:g,x2:b,x3:y,y1:v,y2:x,y3:_}}drawTitle(e,t,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=rs(i.rtl,this.x,this.width);for(e.x=zo(this,i.titleAlign,i),t.textAlign=c.textAlign(i.titleAlign),t.textBaseline="middle",o=ve(i.titleFont),a=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,l=0;l<r;++l)t.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,t,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,u=ve(r.bodyFont),d=zo(this,"left",r),f=s.x(d),h=l<u.lineHeight?(u.lineHeight-l)/2:0,p=t.y+h;if(r.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},g=s.leftForLtr(f,c)+c/2,b=p+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,wd(e,m,g,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,wd(e,m,g,b)}else{e.lineWidth=$(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const m=s.leftForLtr(f,c),g=s.leftForLtr(s.xPlus(f,1),c-2),b=Si(o.borderRadius);Object.values(b).some(y=>y!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Nr(e,{x:m,y:p,w:c,h:l,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Nr(e,{x:g,y:p+1,w:c-2,h:l-2,radius:b}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(m,p,c,l),e.strokeRect(m,p,c,l),e.fillStyle=o.backgroundColor,e.fillRect(g,p+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,d=ve(i.bodyFont);let f=d.lineHeight,h=0;const p=rs(i.rtl,this.x,this.width),m=function(E){t.fillText(E,p.x(e.x+h),e.y+f/2),e.y+=f+r},g=p.textAlign(o);let b,y,v,x,_,S,C;for(t.textAlign=o,t.textBaseline="middle",t.font=d.string,e.x=zo(this,g,i),t.fillStyle=i.bodyColor,Q(this.beforeBody,m),h=a&&g!=="right"?o==="center"?c/2+u:c+2+u:0,x=0,S=s.length;x<S;++x){for(b=s[x],y=this.labelTextColors[x],t.fillStyle=y,Q(b.before,m),v=b.lines,a&&v.length&&(this._drawColorBox(t,e,x,p,i),f=Math.max(d.lineHeight,l)),_=0,C=v.length;_<C;++_)m(v[_]),f=d.lineHeight;Q(b.after,m)}h=0,f=d.lineHeight,Q(this.afterBody,m),e.y-=r}drawFooter(e,t,i){const s=this.footer,r=s.length;let o,a;if(r){const l=rs(i.rtl,this.x,this.width);for(e.x=zo(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=l.textAlign(i.footerAlign),t.textBaseline="middle",o=ve(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,a=0;a<r;++a)t.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:d,topRight:f,bottomLeft:h,bottomRight:p}=Si(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(a+d,l),o==="top"&&this.drawCaret(e,t,i,s),t.lineTo(a+c-f,l),t.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&r==="right"&&this.drawCaret(e,t,i,s),t.lineTo(a+c,l+u-p),t.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(e,t,i,s),t.lineTo(a+h,l+u),t.quadraticCurveTo(a,l+u,a,l+u-h),o==="center"&&r==="left"&&this.drawCaret(e,t,i,s),t.lineTo(a,l+d),t.quadraticCurveTo(a,l,a+d,l),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=Ks[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=vb(this,e),l=Object.assign({},o,this._size),c=xb(t,e,l),u=_b(e,l,c,t);(s._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Ve(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,t),q_(e,t.textDirection),r.y+=o.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),G_(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!_l(i,s),o=this._positionChanged(s,t);(r||o)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,t,i),a=this._positionChanged(o,e),l=t||!_l(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:s,options:r}=this,o=Ks[r.position].call(this,e,t);return o!==!1&&(i!==o.x||s!==o.y)}}T(Td,"positioners",Ks);var OH={id:"tooltip",_element:Td,positioners:Ks,afterInit(n,e,t){t&&(n.tooltip=new Td({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:yS},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},RH=Object.freeze({__proto__:null,Colors:Uz,Decimation:Kz,Filler:pH,Legend:xH,SubTitle:wH,Title:SH,Tooltip:OH});const PH=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function NH(n,e,t,i){const s=n.indexOf(e);if(s===-1)return PH(n,e,t,i);const r=n.lastIndexOf(e);return s!==r?t:s}const IH=(n,e)=>n===null?null:we(Math.round(n),0,e);function Ab(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class Od extends zi{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:s,label:r}of t)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(q(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:NH(i,e,H(t,e),this._addedLabels),IH(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=t;o++)s.push({value:o});return s}getLabelForValue(e){return Ab.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}T(Od,"id","category"),T(Od,"defaults",{ticks:{callback:Ab}});function LH(n,e){const t=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:f}=n,h=r||1,p=u-1,{min:m,max:g}=e,b=!q(o),y=!q(a),v=!q(c),x=(g-m)/(d+1);let _=ym((g-m)/p/h)*h,S,C,E,M;if(_<1e-14&&!b&&!y)return[{value:m},{value:g}];M=Math.ceil(g/_)-Math.floor(m/_),M>p&&(_=ym(M*_/p/h)*h),q(l)||(S=Math.pow(10,l),_=Math.ceil(_*S)/S),s==="ticks"?(C=Math.floor(m/_)*_,E=Math.ceil(g/_)*_):(C=m,E=g),b&&y&&r&&TB((a-o)/r,_/1e3)?(M=Math.round(Math.min((a-o)/_,u)),_=(a-o)/M,C=o,E=a):v?(C=b?o:C,E=y?a:E,M=c-1,_=(E-C)/M):(M=(E-C)/_,ur(M,Math.round(M),_/1e3)?M=Math.round(M):M=Math.ceil(M));const N=Math.max(vm(_),vm(C));S=Math.pow(10,q(l)?N:l),C=Math.round(C*S)/S,E=Math.round(E*S)/S;let B=0;for(b&&(f&&C!==o?(t.push({value:o}),C<o&&B++,ur(Math.round((C+B*_)*S)/S,o,kb(o,x,n))&&B++):C<o&&B++);B<M;++B){const W=Math.round((C+B*_)*S)/S;if(y&&W>a)break;t.push({value:W})}return y&&f&&E!==a?t.length&&ur(t[t.length-1].value,a,kb(a,x,n))?t[t.length-1].value=a:t.push({value:a}):(!y||E===a)&&t.push({value:E}),t}function kb(n,e,{horizontal:t,minRotation:i}){const s=vt(i),r=(t?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+n).length;return Math.min(e/r,o)}class Ml extends zi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return q(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=t?s:l,a=l=>r=i?r:l;if(e){const l=It(s),c=It(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},r=this._range||this,o=LH(s,r);return e.bounds==="ticks"&&D_(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-t)/Math.max(e.length-1,1)/2;t-=s,i+=s}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return Zr(e,this.chart.options.locale,this.options.ticks.format)}}class Rd extends Ml{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ce(e)?e:0,this.max=ce(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=vt(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}T(Rd,"id","linear"),T(Rd,"defaults",{ticks:{callback:ic.formatters.numeric}});const Lr=n=>Math.floor(xn(n)),Kn=(n,e)=>Math.pow(10,Lr(n)+e);function Eb(n){return n/Math.pow(10,Lr(n))===1}function Cb(n,e,t){const i=Math.pow(10,t),s=Math.floor(n/i);return Math.ceil(e/i)-s}function BH(n,e){const t=e-n;let i=Lr(t);for(;Cb(n,e,i)>10;)i++;for(;Cb(n,e,i)<10;)i--;return Math.min(i,Lr(n))}function FH(n,{min:e,max:t}){e=nt(n.min,e);const i=[],s=Lr(e);let r=BH(e,t),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,r)),f=nt(n.min,Math.round((l+u+d*Math.pow(10,r))*o)/o);for(;f<t;)i.push({value:f,major:Eb(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(r++,d=2,o=r>=0?1:o),f=Math.round((l+u+d*Math.pow(10,r))*o)/o;const h=nt(n.max,f);return i.push({value:h,major:Eb(h),significand:d}),i}class Pd extends zi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=Ml.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return ce(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ce(e)?Math.max(0,e):null,this.max=ce(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ce(this._userMin)&&(this.min=e===Kn(this.min,0)?Kn(this.min,-1):Kn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=e?i:a,o=a=>s=t?s:a;i===s&&(i<=0?(r(1),o(10)):(r(Kn(i,-1)),o(Kn(s,1)))),i<=0&&r(Kn(s,-1)),s<=0&&o(Kn(i,1)),this.min=i,this.max=s}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},i=FH(t,this);return e.bounds==="ticks"&&D_(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Zr(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=xn(e),this._valueRange=xn(this.max)-xn(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(xn(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}T(Pd,"id","logarithmic"),T(Pd,"defaults",{ticks:{callback:ic.formatters.logarithmic,major:{enabled:!0}}});function Nd(n){const e=n.ticks;if(e.display&&n.display){const t=Ve(e.backdropPadding);return H(e.font&&e.font.size,ue.font.size)+t.height}return 0}function zH(n,e,t){return t=se(t)?t:[t],{w:GB(n,e.string,t),h:t.length*e.lineHeight}}function Mb(n,e,t,i,s){return n===i||n===s?{start:e-t/2,end:e+t/2}:n<i||n>s?{start:e-t,end:e}:{start:e,end:e+t}}function HH(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],s=[],r=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?ie/r:0;for(let l=0;l<r;l++){const c=o.setContext(n.getPointLabelContext(l));s[l]=c.padding;const u=n.getPointPosition(l,n.drawingArea+s[l],a),d=ve(c.font),f=zH(n.ctx,d,n._pointLabels[l]);i[l]=f;const h=it(n.getIndexAngle(l)+a),p=Math.round(sh(h)),m=Mb(p,u.x,f.w,0,180),g=Mb(p,u.y,f.h,90,270);VH(t,e,h,m,g)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=UH(n,i,s)}function VH(n,e,t,i,s){const r=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/r,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,n.r=Math.max(n.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,n.t=Math.min(n.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,n.b=Math.max(n.b,e.b+l))}function jH(n,e,t){const i=n.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=t,l=n.getPointPosition(e,i+s+o,r),c=Math.round(sh(it(l.angle+he))),u=GH(l.y,a.h,c),d=$H(c),f=qH(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:f,top:u,right:f+a.w,bottom:u+a.h}}function WH(n,e){if(!e)return!0;const{left:t,top:i,right:s,bottom:r}=n;return!(Jt({x:t,y:i},e)||Jt({x:t,y:r},e)||Jt({x:s,y:i},e)||Jt({x:s,y:r},e))}function UH(n,e,t){const i=[],s=n._pointLabels.length,r=n.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:Nd(r)/2,additionalAngle:o?ie/s:0};let c;for(let u=0;u<s;u++){l.padding=t[u],l.size=e[u];const d=jH(n,u,l);i.push(d),a==="auto"&&(d.visible=WH(d,c),d.visible&&(c=d))}return i}function $H(n){return n===0||n===180?"center":n<180?"left":"right"}function qH(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function GH(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function KH(n,e,t){const{left:i,top:s,right:r,bottom:o}=t,{backdropColor:a}=e;if(!q(a)){const l=Si(e.borderRadius),c=Ve(e.backdropPadding);n.fillStyle=a;const u=i-c.left,d=s-c.top,f=r-i+c.width,h=o-s+c.height;Object.values(l).some(p=>p!==0)?(n.beginPath(),Nr(n,{x:u,y:d,w:f,h,radius:l}),n.fill()):n.fillRect(u,d,f,h)}}function YH(n,e){const{ctx:t,options:{pointLabels:i}}=n;for(let s=e-1;s>=0;s--){const r=n._pointLabelItems[s];if(!r.visible)continue;const o=i.setContext(n.getPointLabelContext(s));KH(t,o,r);const a=ve(o.font),{x:l,y:c,textAlign:u}=r;Oi(t,n._pointLabels[s],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function vS(n,e,t,i){const{ctx:s}=n;if(t)s.arc(n.xCenter,n.yCenter,e,0,te);else{let r=n.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=n.getPointPosition(o,e),s.lineTo(r.x,r.y)}}function JH(n,e,t,i,s){const r=n.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||t<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash),r.lineDashOffset=s.dashOffset,r.beginPath(),vS(n,t,o,i),r.closePath(),r.stroke(),r.restore())}function QH(n,e,t){return jn(n,{label:t,index:e,type:"pointLabel"})}class Ys extends Ml{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ve(Nd(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=ce(e)&&!isNaN(e)?e:0,this.max=ce(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Nd(this.options))}generateTickLabels(e){Ml.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const s=ee(this.options.pointLabels.callback,[t,i],this);return s||s===0?s:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?HH(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,s){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,s))}getIndexAngle(e){const t=te/(this._pointLabels.length||1),i=this.options.startAngle||0;return it(e*t+vt(i))}getDistanceFromCenterForValue(e){if(q(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(q(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return QH(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const s=this.getIndexAngle(e)-he+i;return{x:Math.cos(s)*t+this.xCenter,y:Math.sin(s)*t+this.yCenter,angle:s}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:t,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),vS(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:s,border:r}=t,o=this._pointLabels.length;let a,l,c;if(t.pointLabels.display&&YH(this,o),s.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(d),h=s.setContext(f),p=r.setContext(f);JH(this,h,l,o,p)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:f}=u;!f||!d||(e.lineWidth=f,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const c=i.setContext(this.getContext(l)),u=ve(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const d=Ve(c.backdropPadding);e.fillRect(-o/2-d.left,-r-u.size/2-d.top,o+d.width,u.size+d.height)}Oi(e,a.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}T(Ys,"id","radialLinear"),T(Ys,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ic.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),T(Ys,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),T(Ys,"descriptors",{angleLines:{_fallback:"grid"}});const ac={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Je=Object.keys(ac);function Db(n,e){return n-e}function Tb(n,e){if(q(e))return null;const t=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),ce(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(s&&(o=s==="week"&&(ys(r)||r===!0)?t.startOf(o,"isoWeek",r):t.startOf(o,s)),+o)}function Ob(n,e,t,i){const s=Je.length;for(let r=Je.indexOf(n);r<s-1;++r){const o=ac[Je[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return Je[r]}return Je[s-1]}function ZH(n,e,t,i,s){for(let r=Je.length-1;r>=Je.indexOf(t);r--){const o=Je[r];if(ac[o].common&&n._adapter.diff(s,i,o)>=e-1)return o}return Je[t?Je.indexOf(t):0]}function XH(n){for(let e=Je.indexOf(n)+1,t=Je.length;e<t;++e)if(ac[Je[e]].common)return Je[e]}function Rb(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:s}=rh(t,e),r=t[i]>=e?t[i]:t[s];n[r]=!0}}function eV(n,e,t,i){const s=n._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=t[a],l>=0&&(e[l].major=!0);return e}function Pb(n,e,t){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return r===0||!t?i:eV(n,i,s,t)}class Br extends zi{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),s=this._adapter=new cF._date(e.adapters.date);s.init(t),cr(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:Tb(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=ce(s)&&!isNaN(s)?s:+t.startOf(Date.now(),i),r=ce(r)&&!isNaN(r)?r:+t.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=NB(s,r,o);return this._unit=t.unit||(i.autoSkip?Ob(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):ZH(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:XH(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),Pb(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?t=1-s:t=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=we(t,0,o),i=we(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||Ob(r.minUnit,t,i,this._getLabelCapacity(t)),a=H(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=ys(l)||l===!0,u={};let d=t,f,h;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(i,t,o)>1e5*a)throw new Error(t+" and "+i+" are too far apart with stepSize of "+a+" "+o);const p=s.ticks.source==="data"&&this.getDataTimestamps();for(f=d,h=0;f<i;f=+e.add(f,a,o),h++)Rb(u,f,p);return(f===i||s.bounds==="ticks"||h===1)&&Rb(u,f,p),Object.keys(u).sort(Db).map(m=>+m)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,r=this._unit,o=t||s[r];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,s){const r=this.options,o=r.ticks.callback;if(o)return ee(o,[e,t,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],f=i[t],h=c&&d&&f&&f.major;return this._adapter.format(e,s||(h?d:u))}generateTickLabels(e){let t,i,s;for(t=0,i=e.length;t<i;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,s=vt(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,s=i[t.unit]||i.millisecond,r=this._tickFormatFunction(e,0,Pb(this,[e],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,i=s.length;t<i;++t)e=e.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const s=this.getLabels();for(t=0,i=s.length;t<i;++t)e.push(Tb(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return R_(e.sort(Db))}}T(Br,"id","time"),T(Br,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ho(n,e,t){let i=0,s=n.length-1,r,o,a,l;t?(e>=n[i].pos&&e<=n[s].pos&&({lo:i,hi:s}=Yt(n,"pos",e)),{pos:r,time:a}=n[i],{pos:o,time:l}=n[s]):(e>=n[i].time&&e<=n[s].time&&({lo:i,hi:s}=Yt(n,"time",e)),{time:r,pos:a}=n[i],{time:o,pos:l}=n[s]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class Id extends Br{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Ho(t,this.min),this._tableRange=Ho(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,s=[],r=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=i&&s.push(c);if(s.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Ho(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Ho(this._table,i*this._tableRange+this._minPos,!0)}}T(Id,"id","timeseries"),T(Id,"defaults",Br.defaults);var tV=Object.freeze({__proto__:null,CategoryScale:Od,LinearScale:Rd,LogarithmicScale:Pd,RadialLinearScale:Ys,TimeScale:Br,TimeSeriesScale:Id});const nV=[lF,Fz,RH,tV];We.register(...nV);const iV=n=>({nationData:[],filteredNationData:[],worldYearData:[],currentNationsPage:1,totalNationsPages:1,paginatedNations:[],colors:["rgb(237,116,0)","rgb(212, 145, 255)","rgb(179,4,16)","rgb(0,94,152)","rgb(0,129,57)"],async getNationData(){return await(await fetch(`${n=="admin"?"":"/"+n}/world-athletes-data-list`)).json()},async getWorldYearData(){return await(await fetch(`${n=="admin"?"":"/"+n}/world-athletes-year-data`)).json()},createGraph(){const e=document.getElementById("usernationgraph").getContext("2d"),t=this.nationData.map(o=>o.name),i=this.nationData.map(o=>o.athletes),r={type:"pie",data:{labels:t,datasets:[{label:"Athletes",data:i,backgroundColor:this.colors,hoverOffset:4}]}};new We(e,r)},searchNationByValue(e){const t=e.target.value.toLowerCase();t!=""?(this.filteredNationData=this.nationData.filter(i=>i.name.toLowerCase().includes(t)),this.updateNations()):(this.filteredNationData=this.nationData,this.updateNations())},nextPage(){this.currentNationsPage<this.totalNationsPages&&(this.currentNationsPage++,this.updateNations())},previousPage(){this.currentNationsPage>1&&(this.currentNationsPage--,this.updateNations())},updateNations(){const e=(this.currentNationsPage-1)*10;this.totalNationsPages=Math.ceil(this.filteredNationData.length/10),this.paginatedNations=this.filteredNationData.slice(e,e+10)},async init(){console.log("usernationgraph initialized"),this.nationData=await this.getNationData(),this.worldYearData=await this.getWorldYearData(),this.createGraph(),this.filteredNationData=this.nationData,this.totalNationsPages=Math.ceil(this.filteredNationData.length/10),this.updateNations(),this.$dispatch("usernationgraph-data",this.nationData)}}),sV=(n,e,t)=>({nation:null,academyData:[],filteredAcademyData:[],nationYearData:[],currentAcademiesPage:1,totalAcademiesPages:1,paginatedAcademies:[],colors:["rgb(237,116,0)","rgb(212, 145, 255)","rgb(179,4,16)","rgb(0,94,152)","rgb(0,129,57)"],async getNationYearData(){return await(await fetch(`${n=="admin"?"":"/"+n}/nations/${e.id}/athletes-year-data`)).json()},createGraph(){const i=document.getElementById("useracademygraph").getContext("2d"),s=this.academyData.map(l=>l.name),r=this.academyData.map(l=>l.athletes),a={type:"pie",data:{labels:s,datasets:[{label:"Athletes",data:r,backgroundColor:this.colors,hoverOffset:4}]}};new We(i,a)},searchAcademyByValue(i){const s=i.target.value.toLowerCase();s!=""?(this.filteredAcademyData=this.academyData.filter(r=>r.name.toLowerCase().includes(s)),this.updateAcademies()):(this.filteredAcademyData=this.academyData,this.updateAcademies())},nextPage(){this.currentAcademiesPage<this.totalAcademiesPages&&(this.currentAcademiesPage++,this.updateAcademies())},previousPage(){this.currentAcademiesPage>1&&(this.currentAcademiesPage--,this.updateAcademies())},updateAcademies(){const i=(this.currentAcademiesPage-1)*10;this.totalAcademiesPages=Math.ceil(this.filteredAcademyData.length/10),this.paginatedAcademies=this.filteredAcademyData.slice(i,i+10)},async init(){console.log("useracademygraph initialized"),this.nation=e,console.log(e.name),this.academyData=t,this.nationYearData=await this.getNationYearData(),this.createGraph(),this.filteredAcademyData=this.academyData,this.totalAcademiesPages=Math.ceil(this.filteredAcademyData.length/10),this.updateAcademies(),this.$dispatch("useracademygraph-data",this.academyData)}}),rV=(n,e,t)=>({academy:null,schoolData:[],filteredSchoolData:[],academyYearData:[],currentSchoolsPage:1,totalSchoolsPages:1,paginatedSchools:[],colors:["rgb(237,116,0)","rgb(212, 145, 255)","rgb(179,4,16)","rgb(0,94,152)","rgb(0,129,57)"],async getAcademyYearData(){return await(await fetch(`${n=="admin"?"":"/"+n}/academies/${e.id}/athletes-year-data`)).json()},createGraph(){const i=document.getElementById("userschoolgraph").getContext("2d"),s=this.schoolData.map(l=>l.name),r=this.schoolData.map(l=>l.athletes),a={type:"pie",data:{labels:s,datasets:[{label:"Athletes",data:r,backgroundColor:this.colors,hoverOffset:4}]}};new We(i,a)},searchSchoolByValue(i){const s=i.target.value.toLowerCase();s!=""?(this.filteredSchoolData=this.schoolData.filter(r=>r.name.toLowerCase().includes(s)),this.updateSchools()):(this.filteredSchoolData=this.schoolData,this.updateSchools())},nextPage(){this.currentSchoolsPage<this.totalSchoolsPages&&(this.currentSchoolsPage++,this.updateSchools())},previousPage(){this.currentSchoolsPage>1&&(this.currentSchoolsPage--,this.updateSchools())},updateSchools(){const i=(this.currentSchoolsPage-1)*10;this.totalSchoolsPages=Math.ceil(this.filteredSchoolData.length/10),this.paginatedSchools=this.filteredSchoolData.slice(i,i+10)},async init(){console.log("userschoolgraph initialized"),this.academy=e,console.log(e.name),this.schoolData=t,this.academyYearData=await this.getAcademyYearData(),this.createGraph(),this.filteredSchoolData=this.schoolData,this.totalSchoolsPages=Math.ceil(this.filteredSchoolData.length/10),this.updateSchools(),this.$dispatch("userschoolgraph-data",this.schoolData)}}),oV=(n,e,t)=>({school:null,courseData:[],filteredCourseData:[],schoolYearData:[],currentCoursesPage:1,totalCoursesPages:1,paginatedCourses:[],colors:["rgb(237,116,0)","rgb(212, 145, 255)","rgb(179,4,16)","rgb(0,94,152)","rgb(0,129,57)"],async getSchoolYearData(){return await(await fetch(`${n=="admin"?"":"/"+n}/schools/${e.id}/athletes-year-data`)).json()},createGraph(){const i=document.getElementById("usercoursegraph").getContext("2d"),s=this.courseData.map(l=>l.name),r=this.courseData.map(l=>l.athletes),a={type:"pie",data:{labels:s,datasets:[{label:"Athletes",data:r,backgroundColor:this.colors,hoverOffset:4}]}};new We(i,a)},searchCourseByValue(i){const s=i.target.value.toLowerCase();s!=""?(this.filteredCourseData=this.courseData.filter(r=>r.name.toLowerCase().includes(s)),this.updateCourses()):(this.filteredCourseData=this.courseData,this.updateCourses())},nextPage(){this.currentCoursesPage<this.totalCoursesPages&&(this.currentCoursesPage++,this.updateCourses())},previousPage(){this.currentCoursesPage>1&&(this.currentCoursesPage--,this.updateCourses())},updateCourses(){const i=(this.currentCoursesPage-1)*10;this.totalCoursesPages=Math.ceil(this.filteredCourseData.length/10),this.paginatedCourses=this.filteredCourseData.slice(i,i+10)},async init(){console.log("usercoursegraph initialized"),this.school=e,console.log(e.name),this.courseData=t,this.schoolYearData=await this.getSchoolYearData(),this.createGraph(),this.filteredCourseData=this.courseData,this.totalCoursesPages=Math.ceil(this.filteredCourseData.length/10),this.updateCourses(),this.$dispatch("usercoursegraph-data",this.courseData)}}),aV=()=>({eventList:[],filteredEventList:[],currentEventsPage:1,totalEventsPages:1,paginatedEvents:[],colors:["rgb(237,116,0)","rgb(212, 145, 255)","rgb(179,4,16)","rgb(0,94,152)","rgb(0,129,57)"],async getEventList(){return await(await fetch("/technician/dashboard-events")).json()},createGraph(){const n=document.getElementById("participantseventsgraph").getContext("2d"),e=this.eventList.map(r=>r.name),t=this.eventList.map(r=>r.participants),s={type:"pie",data:{labels:e,datasets:[{label:"Athletes",data:t,backgroundColor:this.colors,hoverOffset:4}]}};new We(n,s)},searchEventByValue(n){const e=n.target.value.toLowerCase();e!=""?(this.filteredEventList=this.eventList.filter(t=>t.name.toLowerCase().includes(e)),this.updateEvents()):(this.filteredEventList=this.eventList,this.updateEvents())},nextPage(){this.currentEventsPage<this.totalEventsPages&&(this.currentEventsPage++,this.updateEvents())},previousPage(){this.currentEventsPage>1&&(this.currentEventsPage--,this.updateEvents())},updateEvents(){const n=(this.currentEventsPage-1)*10;this.totalEventsPages=Math.ceil(this.filteredEventList.length/10),this.paginatedEvents=this.filteredEventList.slice(n,n+10)},async init(){console.log("participantseventsgraph initialized"),this.eventList=await this.getEventList(),console.log(this.eventList),this.createGraph(),this.filteredEventList=this.eventList,this.totalEventsPages=Math.ceil(this.filteredEventList.length/10),this.updateEvents()}}),lV=(n,e)=>({academyId:n,schoolData:[],yearData:[],colors:["rgb(237,116,0)","rgb(212, 145, 255)","rgb(179,4,16)","rgb(0,94,152)","rgb(0,129,57)"],async getSchoolData(){return await(await fetch(`${e=="admin"?"":"/"+e}/academies/${this.academyId}/athletes-school-data`)).json()},async getYearData(){return await(await fetch(`${e=="admin"?"":"/"+e}/academies/${this.academyId}/athletes-year-data`)).json()},createGraph(){const t=document.getElementById("userschoolgraph").getContext("2d"),i=this.schoolData.map(a=>a.name),s=this.schoolData.map(a=>a.athletes),o={type:"pie",data:{labels:i,datasets:[{label:"Athletes",data:s,backgroundColor:this.colors,hoverOffset:4}]}};new We(t,o)},async init(){console.log("userschoolgraph initialized"),this.schoolData=await this.getSchoolData(),this.yearData=await this.getYearData(),this.createGraph()}}),cV=(n,e)=>({schoolId:n,clanData:[],yearData:[],colors:["rgb(237,116,0)","rgb(212, 145, 255)","rgb(179,4,16)","rgb(0,94,152)","rgb(0,129,57)"],async getclanData(){return await(await fetch(`${e=="admin"?"":"/"+e}/schools/${this.schoolId}/athletes-clan-data`)).json()},async getYearData(){return await(await fetch(`${e=="admin"?"":"/"+e}/schools/${this.schoolId}/athletes-year-data`)).json()},createGraph(){const t=document.getElementById("usersclangraph").getContext("2d"),i=this.clanData.map(a=>a.name),s=this.clanData.map(a=>a.athletes),o={type:"pie",data:{labels:i,datasets:[{label:"Athletes",data:s,backgroundColor:this.colors,hoverOffset:4}]}};new We(t,o)},async init(){console.log("usersclangraph initialized"),this.clanData=await this.getclanData(),this.yearData=await this.getYearData(),this.createGraph()}}),uV=()=>{const n=new Date;return{events:[],selectedEvent:0,selectedEventData:{},athletesData:[],nationFilter:"",eventName:"General Rankings",getEventsList:async function(){const e=`/website-rankings/events/list?date=${n.toISOString()}`,t=await fetch(e);if(t.ok){const i=await t.json();this.events=i}},getDataForEvent:async function(e){this.selectedEvent=e,this.athletesData=[];const t=`/website-rankings/events/${this.selectedEvent}/rankings`,i=await fetch(t);if(i.ok){const s=await i.json();let r=1;Object.entries(s).forEach(([o,a])=>{this.athletesData.push({id:o,name:a.user_name,rank:r++,battle_name:a.user_battle_name,academy:a.user_academy,school:a.user_school,school_slug:a.school_slug,nation:a.nation,war_points:a.total_war_points,style_points:a.total_style_points})})}this.rows=this.athletesData},getGeneralRankings:async function(){if(this.nationFilter!="")this.fiterByNation(this.nationFilter);else{this.selectedEvent=0,this.athletesData=[],this.eventName="General Rankings";const e=`/website-rankings/general?date=${n.toISOString()}`,t=await fetch(e);if(t.ok){const i=await t.json();let s=1;Object.entries(i).forEach(([r,o])=>{this.athletesData.push({id:r,name:o.user_name,rank:s++,battle_name:o.user_battle_name,academy:o.user_academy,school:o.user_school,school_slug:o.school_slug,nation:o.nation,war_points:o.total_war_points,style_points:o.total_style_points})})}this.rows=this.athletesData}},fiterByNation:async function(e){if(e==""){this.getGeneralRankings();return}this.events=this.events.filter(r=>r.nation_id==e),this.athletesData=[];const i=await(await fetch(`/website-rankings/nation/${e}/rankings`)).json();let s=1;Object.entries(i.results).forEach(([r,o])=>{this.athletesData.push({id:r,name:o.user_name,rank:s++,battle_name:o.user_battle_name,academy:o.user_academy,school:o.user_school,nation:o.nation,war_points:o.total_war_points,style_points:o.total_style_points})}),this.eventName="National Rankings - "+i.nation.name,this.rows=this.athletesData},columns:[{name:"Rank",field:"rank",columnClasses:""},{name:"Name",field:"name",columnClasses:""},{name:"Academy",field:"academy",columnClasses:""},{name:"School",field:"school",columnClasses:""},{name:"Nation",field:"nation",columnClasses:""},{name:"Arena Points",field:"war_points",columnClasses:""},{name:"Style Points",field:"style_points",columnClasses:""}],sortColumn:null,sortDirection:"asc",rows:[],sort:function(e){this.sortColumn===e?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.rows=[...this.rows].sort((t,i)=>{const s=this.columns[e],r=String(t[s.field]),o=String(i[s.field]);return this.sortDirection==="asc"?r.localeCompare(o):o.localeCompare(r)})},searchByValue:function(e){const t=e.target.value.toLowerCase();t===""?this.rows=athletesData:this.rows=athletesData.filter(i=>Object.values(i).some(s=>String(s).toLowerCase().includes(t)))},page:1,pageLength:10,totalPages:function(){return Math.ceil(this.rows.length/this.pageLength)},paginatedRows:function(){const e=(this.page-1)*this.pageLength,t=e+this.pageLength;return this.rows.slice(e,t)},init(){this.getGeneralRankings(),this.getEventsList()}}},dV=(n,e)=>({eventid:n,eventPersonnel:[],filteredPersonnel:[],availableUsers:[],paginatedUsers:[],currentPage:1,pageSize:10,totalPages:0,searchAvailablesValue:"",searchPersonnelValue:"",getAvailableUsers:async function(){console.log("getAvailableUsers");const t=`${e=="admin"?"":"/"+e}/events/${this.eventid}/available-personnel`,i=await fetch(t);if(i.ok){const s=await i.json();this.eventPersonnel.length>0?this.availableUsers=s.filter(r=>!this.eventPersonnel.some(o=>o.id===r.id)):this.availableUsers=s}},getPersonnel:async function(){console.log("getPersonnel");const t=`${e=="admin"?"":"/"+e}/events/${this.eventid}/personnel`,i=await fetch(t);if(i.ok){const s=await i.json();this.eventPersonnel=s,this.filteredPersonnel=s,this.availableUsers.length>0&&(this.availableUsers=this.availableUsers.filter(r=>!this.eventPersonnel.some(o=>o.id===r.id)))}},searchAvailableUsers:function(t){console.log("searchAvailableUsers");let i=t.target.value;if(i.length===0){this.paginateAvailableUsers();return}this.paginatedUsers=this.availableUsers.filter(s=>s.name.toLowerCase().includes(i.toLowerCase())||s.surname.toLowerCase().includes(i.toLowerCase()))},searchPersonnel:function(t){console.log("searchPersonnel");let i=t.target.value;this.filteredPersonnel=this.eventPersonnel.filter(s=>s.name.toLowerCase().includes(i.toLowerCase())||s.surname.toLowerCase().includes(i.toLowerCase()))},addPersonnel:async function(t){console.log("addPersonnel");const i=this.availableUsers.find(a=>a.id===t);i&&this.eventPersonnel.push(i);let s=JSON.stringify(this.eventPersonnel.map(a=>a.id));const r=`${e=="admin"?"":"/"+e}/events/${this.eventid}/add-personnel`,o=new FormData;o.append("event_id",this.eventid),o.append("personnel",s),await fetch(r,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:o}),this.availableUsers=this.availableUsers.filter(a=>a.id!==t),this.searchAvailablesValue="",this.paginateAvailableUsers(),this.searchPersonnelValue="",this.searchPersonnel({target:{value:""}})},removePersonnel:async function(t){console.log("removePersonnel"),console.log(this.eventPersonnel);const i=this.eventPersonnel.find(a=>a.id===t);i&&(this.eventPersonnel=this.eventPersonnel.filter(a=>a.id!==t));let s=JSON.stringify(this.eventPersonnel.map(a=>a.id));const r=`${e=="admin"?"":"/"+e}/events/${this.eventid}/add-personnel`,o=new FormData;o.append("event_id",this.eventid),o.append("personnel",s),await fetch(r,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:o}),this.availableUsers.push(i),this.searchAvailablesValue="",this.paginateAvailableUsers(),this.searchPersonnelValue="",this.searchPersonnel({target:{value:""}})},savePersonnel:async function(){console.log("savePersonnel")},paginateAvailableUsers:function(){const t=(this.currentPage-1)*this.pageSize,i=t+this.pageSize;this.paginatedUsers=this.availableUsers.slice(t,i),this.totalPages=Math.ceil(this.availableUsers.length/this.pageSize)},goToPage:function(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.paginateAvailableUsers())},init:async function(){await this.getAvailableUsers(),await this.getPersonnel(),this.paginateAvailableUsers()}}),fV=n=>({submitEnablingResult:async function(e,t){console.log("submitEnablingResult",e,t);const i=`/submit-enabling-result/${n}`,s=new FormData;s.append("result_id",e),s.append("result",t);const r=await fetch(i,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:s});if(r.ok){const o=await r.json();console.log("submitEnablingResult response",o),o.success&&(this.row.result=o.result.result,this.row.stage=o.result.stage)}},notesModal:{resultid:null,notes:null,showModal:!1},openNotesModal:function(e,t){this.notesModal.resultid=e,this.notesModal.notes=t||"No notes",this.notesModal.showModal=!0},init:async function(){}});document.addEventListener("alpine:init",()=>{xe.data("editor",MO),xe.data("googlemap",DO),xe.data("calendar",YL),xe.data("chart",nE),xe.data("participants",JL),xe.data("eventpersonnel",dV),xe.data("mapsearcher",QL),xe.data("usernationgraphadmin",iV),xe.data("useracademygraphadmin",sV),xe.data("userschoolgraphadmin",rV),xe.data("usercoursegraphadmin",oV),xe.data("eventsparticipantsgraph",aV),xe.data("userschoolgraph",lV),xe.data("usersclangraph",cV),xe.data("rankingschart",uV),xe.data("enablingresults",fV)});window.Alpine=xe;document.addEventListener("click",function(n){let e=document.querySelector("#bigone");if(e&&n.target.tagName==="A"&&n.target.hasAttribute("href")){n.preventDefault();let t=document.querySelector("#smallone");e.classList.add("expand"),t.classList.add("reduce"),setTimeout(()=>{window.location.href=n.target.getAttribute("href")},1e3)}});xe.start();
