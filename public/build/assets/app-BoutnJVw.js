var cS=Object.defineProperty;var uS=(n,e,t)=>e in n?cS(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var D=(n,e,t)=>(uS(n,typeof e!="symbol"?e+"":e,t),t);function Cb(n,e){return function(){return n.apply(e,arguments)}}const{toString:dS}=Object.prototype,{getPrototypeOf:Nd}=Object,wl=(n=>e=>{const t=dS.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),wt=n=>(n=n.toLowerCase(),e=>wl(e)===n),Al=n=>e=>typeof e===n,{isArray:xs}=Array,hr=Al("undefined");function fS(n){return n!==null&&!hr(n)&&n.constructor!==null&&!hr(n.constructor)&&ft(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Mb=wt("ArrayBuffer");function hS(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Mb(n.buffer),e}const pS=Al("string"),ft=Al("function"),Tb=Al("number"),kl=n=>n!==null&&typeof n=="object",gS=n=>n===!0||n===!1,zo=n=>{if(wl(n)!=="object")return!1;const e=Nd(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},mS=wt("Date"),bS=wt("File"),yS=wt("Blob"),vS=wt("FileList"),xS=n=>kl(n)&&ft(n.pipe),_S=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||ft(n.append)&&((e=wl(n))==="formdata"||e==="object"&&ft(n.toString)&&n.toString()==="[object FormData]"))},SS=wt("URLSearchParams"),[wS,AS,kS,ES]=["ReadableStream","Request","Response","Headers"].map(wt),CS=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Br(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,s;if(typeof n!="object"&&(n=[n]),xs(n))for(i=0,s=n.length;i<s;i++)e.call(null,n[i],i,n);else{const r=t?Object.getOwnPropertyNames(n):Object.keys(n),o=r.length;let a;for(i=0;i<o;i++)a=r[i],e.call(null,n[a],a,n)}}function Db(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,s;for(;i-- >0;)if(s=t[i],e===s.toLowerCase())return s;return null}const Ob=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Rb=n=>!hr(n)&&n!==Ob;function uu(){const{caseless:n}=Rb(this)&&this||{},e={},t=(i,s)=>{const r=n&&Db(e,s)||s;zo(e[r])&&zo(i)?e[r]=uu(e[r],i):zo(i)?e[r]=uu({},i):xs(i)?e[r]=i.slice():e[r]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Br(arguments[i],t);return e}const MS=(n,e,t,{allOwnKeys:i}={})=>(Br(e,(s,r)=>{t&&ft(s)?n[r]=Cb(s,t):n[r]=s},{allOwnKeys:i}),n),TS=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),DS=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},OS=(n,e,t,i)=>{let s,r,o;const a={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),r=s.length;r-- >0;)o=s[r],(!i||i(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&Nd(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},RS=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},PS=n=>{if(!n)return null;if(xs(n))return n;let e=n.length;if(!Tb(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},NS=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Nd(Uint8Array)),IS=(n,e)=>{const i=(n&&n[Symbol.iterator]).call(n);let s;for(;(s=i.next())&&!s.done;){const r=s.value;e.call(n,r[0],r[1])}},LS=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},BS=wt("HTMLFormElement"),FS=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,s){return i.toUpperCase()+s}),fh=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),zS=wt("RegExp"),Pb=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Br(t,(s,r)=>{let o;(o=e(s,r,n))!==!1&&(i[r]=o||s)}),Object.defineProperties(n,i)},HS=n=>{Pb(n,(e,t)=>{if(ft(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(ft(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},VS=(n,e)=>{const t={},i=s=>{s.forEach(r=>{t[r]=!0})};return xs(n)?i(n):i(String(n).split(e)),t},jS=()=>{},WS=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,ic="abcdefghijklmnopqrstuvwxyz",hh="0123456789",Nb={DIGIT:hh,ALPHA:ic,ALPHA_DIGIT:ic+ic.toUpperCase()+hh},US=(n=16,e=Nb.ALPHA_DIGIT)=>{let t="";const{length:i}=e;for(;n--;)t+=e[Math.random()*i|0];return t};function $S(n){return!!(n&&ft(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const qS=n=>{const e=new Array(10),t=(i,s)=>{if(kl(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[s]=i;const r=xs(i)?[]:{};return Br(i,(o,a)=>{const l=t(o,s+1);!hr(l)&&(r[a]=l)}),e[s]=void 0,r}}return i};return t(n,0)},GS=wt("AsyncFunction"),KS=n=>n&&(kl(n)||ft(n))&&ft(n.then)&&ft(n.catch),k={isArray:xs,isArrayBuffer:Mb,isBuffer:fS,isFormData:_S,isArrayBufferView:hS,isString:pS,isNumber:Tb,isBoolean:gS,isObject:kl,isPlainObject:zo,isReadableStream:wS,isRequest:AS,isResponse:kS,isHeaders:ES,isUndefined:hr,isDate:mS,isFile:bS,isBlob:yS,isRegExp:zS,isFunction:ft,isStream:xS,isURLSearchParams:SS,isTypedArray:NS,isFileList:vS,forEach:Br,merge:uu,extend:MS,trim:CS,stripBOM:TS,inherits:DS,toFlatObject:OS,kindOf:wl,kindOfTest:wt,endsWith:RS,toArray:PS,forEachEntry:IS,matchAll:LS,isHTMLForm:BS,hasOwnProperty:fh,hasOwnProp:fh,reduceDescriptors:Pb,freezeMethods:HS,toObjectSet:VS,toCamelCase:FS,noop:jS,toFiniteNumber:WS,findKey:Db,global:Ob,isContextDefined:Rb,ALPHABET:Nb,generateString:US,isSpecCompliantForm:$S,toJSONObject:qS,isAsyncFn:GS,isThenable:KS};function z(n,e,t,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),s&&(this.response=s)}k.inherits(z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ib=z.prototype,Lb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Lb[n]={value:n}});Object.defineProperties(z,Lb);Object.defineProperty(Ib,"isAxiosError",{value:!0});z.from=(n,e,t,i,s,r)=>{const o=Object.create(Ib);return k.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),z.call(o,n.message,e,t,i,s),o.cause=n,o.name=n.name,r&&Object.assign(o,r),o};const YS=null;function du(n){return k.isPlainObject(n)||k.isArray(n)}function Bb(n){return k.endsWith(n,"[]")?n.slice(0,-2):n}function ph(n,e,t){return n?n.concat(e).map(function(s,r){return s=Bb(s),!t&&r?"["+s+"]":s}).join(t?".":""):e}function JS(n){return k.isArray(n)&&!n.some(du)}const QS=k.toFlatObject(k,{},null,function(e){return/^is[A-Z]/.test(e)});function El(n,e,t){if(!k.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=k.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,m){return!k.isUndefined(m[g])});const i=t.metaTokens,s=t.visitor||u,r=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(e);if(!k.isFunction(s))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(k.isDate(p))return p.toISOString();if(!l&&k.isBlob(p))throw new z("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(p)||k.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,g,m){let b=p;if(p&&!m&&typeof p=="object"){if(k.endsWith(g,"{}"))g=i?g:g.slice(0,-2),p=JSON.stringify(p);else if(k.isArray(p)&&JS(p)||(k.isFileList(p)||k.endsWith(g,"[]"))&&(b=k.toArray(p)))return g=Bb(g),b.forEach(function(v,x){!(k.isUndefined(v)||v===null)&&e.append(o===!0?ph([g],x,r):o===null?g:g+"[]",c(v))}),!1}return du(p)?!0:(e.append(ph(m,g,r),c(p)),!1)}const d=[],f=Object.assign(QS,{defaultVisitor:u,convertValue:c,isVisitable:du});function h(p,g){if(!k.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(p),k.forEach(p,function(b,y){(!(k.isUndefined(b)||b===null)&&s.call(e,b,k.isString(y)?y.trim():y,g,f))===!0&&h(b,g?g.concat(y):[y])}),d.pop()}}if(!k.isObject(n))throw new TypeError("data must be an object");return h(n),e}function gh(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Id(n,e){this._pairs=[],n&&El(n,this,e)}const Fb=Id.prototype;Fb.append=function(e,t){this._pairs.push([e,t])};Fb.toString=function(e){const t=e?function(i){return e.call(this,i,gh)}:gh;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function ZS(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zb(n,e,t){if(!e)return n;const i=t&&t.encode||ZS,s=t&&t.serialize;let r;if(s?r=s(e,t):r=k.isURLSearchParams(e)?e.toString():new Id(e,t).toString(i),r){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}class mh{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){k.forEach(this.handlers,function(i){i!==null&&e(i)})}}const Hb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},XS=typeof URLSearchParams<"u"?URLSearchParams:Id,ew=typeof FormData<"u"?FormData:null,tw=typeof Blob<"u"?Blob:null,nw={isBrowser:!0,classes:{URLSearchParams:XS,FormData:ew,Blob:tw},protocols:["http","https","file","blob","url","data"]},Ld=typeof window<"u"&&typeof document<"u",iw=(n=>Ld&&["ReactNative","NativeScript","NS"].indexOf(n)<0)(typeof navigator<"u"&&navigator.product),sw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",rw=Ld&&window.location.href||"http://localhost",ow=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ld,hasStandardBrowserEnv:iw,hasStandardBrowserWebWorkerEnv:sw,origin:rw},Symbol.toStringTag,{value:"Module"})),bt={...ow,...nw};function aw(n,e){return El(n,new bt.classes.URLSearchParams,Object.assign({visitor:function(t,i,s,r){return bt.isNode&&k.isBuffer(t)?(this.append(i,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function lw(n){return k.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function cw(n){const e={},t=Object.keys(n);let i;const s=t.length;let r;for(i=0;i<s;i++)r=t[i],e[r]=n[r];return e}function Vb(n){function e(t,i,s,r){let o=t[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=t.length;return o=!o&&k.isArray(s)?s.length:o,l?(k.hasOwnProp(s,o)?s[o]=[s[o],i]:s[o]=i,!a):((!s[o]||!k.isObject(s[o]))&&(s[o]=[]),e(t,i,s[o],r)&&k.isArray(s[o])&&(s[o]=cw(s[o])),!a)}if(k.isFormData(n)&&k.isFunction(n.entries)){const t={};return k.forEachEntry(n,(i,s)=>{e(lw(i),s,t,0)}),t}return null}function uw(n,e,t){if(k.isString(n))try{return(e||JSON.parse)(n),k.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const Fr={transitional:Hb,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",s=i.indexOf("application/json")>-1,r=k.isObject(e);if(r&&k.isHTMLForm(e)&&(e=new FormData(e)),k.isFormData(e))return s?JSON.stringify(Vb(e)):e;if(k.isArrayBuffer(e)||k.isBuffer(e)||k.isStream(e)||k.isFile(e)||k.isBlob(e)||k.isReadableStream(e))return e;if(k.isArrayBufferView(e))return e.buffer;if(k.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return aw(e,this.formSerializer).toString();if((a=k.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return El(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||s?(t.setContentType("application/json",!1),uw(e)):e}],transformResponse:[function(e){const t=this.transitional||Fr.transitional,i=t&&t.forcedJSONParsing,s=this.responseType==="json";if(k.isResponse(e)||k.isReadableStream(e))return e;if(e&&k.isString(e)&&(i&&!this.responseType||s)){const o=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?z.from(a,z.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:bt.classes.FormData,Blob:bt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};k.forEach(["delete","get","head","post","put","patch"],n=>{Fr.headers[n]={}});const dw=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fw=n=>{const e={};let t,i,s;return n&&n.split(`
`).forEach(function(o){s=o.indexOf(":"),t=o.substring(0,s).trim().toLowerCase(),i=o.substring(s+1).trim(),!(!t||e[t]&&dw[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},bh=Symbol("internals");function Ts(n){return n&&String(n).trim().toLowerCase()}function Ho(n){return n===!1||n==null?n:k.isArray(n)?n.map(Ho):String(n)}function hw(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const pw=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function sc(n,e,t,i,s){if(k.isFunction(i))return i.call(this,e,t);if(s&&(e=t),!!k.isString(e)){if(k.isString(i))return e.indexOf(i)!==-1;if(k.isRegExp(i))return i.test(e)}}function gw(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function mw(n,e){const t=k.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(s,r,o){return this[i].call(this,e,s,r,o)},configurable:!0})})}class Ze{constructor(e){e&&this.set(e)}set(e,t,i){const s=this;function r(a,l,c){const u=Ts(l);if(!u)throw new Error("header name must be a non-empty string");const d=k.findKey(s,u);(!d||s[d]===void 0||c===!0||c===void 0&&s[d]!==!1)&&(s[d||l]=Ho(a))}const o=(a,l)=>k.forEach(a,(c,u)=>r(c,u,l));if(k.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(k.isString(e)&&(e=e.trim())&&!pw(e))o(fw(e),t);else if(k.isHeaders(e))for(const[a,l]of e.entries())r(l,a,i);else e!=null&&r(t,e,i);return this}get(e,t){if(e=Ts(e),e){const i=k.findKey(this,e);if(i){const s=this[i];if(!t)return s;if(t===!0)return hw(s);if(k.isFunction(t))return t.call(this,s,i);if(k.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ts(e),e){const i=k.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||sc(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let s=!1;function r(o){if(o=Ts(o),o){const a=k.findKey(i,o);a&&(!t||sc(i,i[a],a,t))&&(delete i[a],s=!0)}}return k.isArray(e)?e.forEach(r):r(e),s}clear(e){const t=Object.keys(this);let i=t.length,s=!1;for(;i--;){const r=t[i];(!e||sc(this,this[r],r,e,!0))&&(delete this[r],s=!0)}return s}normalize(e){const t=this,i={};return k.forEach(this,(s,r)=>{const o=k.findKey(i,r);if(o){t[o]=Ho(s),delete t[r];return}const a=e?gw(r):String(r).trim();a!==r&&delete t[r],t[a]=Ho(s),i[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return k.forEach(this,(i,s)=>{i!=null&&i!==!1&&(t[s]=e&&k.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[bh]=this[bh]={accessors:{}}).accessors,s=this.prototype;function r(o){const a=Ts(o);i[a]||(mw(s,o),i[a]=!0)}return k.isArray(e)?e.forEach(r):r(e),this}}Ze.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);k.reduceDescriptors(Ze.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});k.freezeMethods(Ze);function rc(n,e){const t=this||Fr,i=e||t,s=Ze.from(i.headers);let r=i.data;return k.forEach(n,function(a){r=a.call(t,r,s.normalize(),e?e.status:void 0)}),s.normalize(),r}function jb(n){return!!(n&&n.__CANCEL__)}function _s(n,e,t){z.call(this,n??"canceled",z.ERR_CANCELED,e,t),this.name="CanceledError"}k.inherits(_s,z,{__CANCEL__:!0});function Wb(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new z("Request failed with status code "+t.status,[z.ERR_BAD_REQUEST,z.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function bw(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function yw(n,e){n=n||10;const t=new Array(n),i=new Array(n);let s=0,r=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=i[r];o||(o=c),t[s]=l,i[s]=c;let d=r,f=0;for(;d!==s;)f+=t[d++],d=d%n;if(s=(s+1)%n,s===r&&(r=(r+1)%n),c-o<e)return;const h=u&&c-u;return h?Math.round(f*1e3/h):void 0}}function vw(n,e){let t=0;const i=1e3/e;let s=null;return function(){const o=this===!0,a=Date.now();if(o||a-t>i)return s&&(clearTimeout(s),s=null),t=a,n.apply(null,arguments);s||(s=setTimeout(()=>(s=null,t=Date.now(),n.apply(null,arguments)),i-(a-t)))}}const aa=(n,e,t=3)=>{let i=0;const s=yw(50,250);return vw(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-i,c=s(l),u=o<=a;i=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:r,lengthComputable:a!=null};d[e?"download":"upload"]=!0,n(d)},t)},xw=bt.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let i;function s(r){let o=r;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return i=s(window.location.href),function(o){const a=k.isString(o)?s(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}(),_w=bt.hasStandardBrowserEnv?{write(n,e,t,i,s,r){const o=[n+"="+encodeURIComponent(e)];k.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),k.isString(i)&&o.push("path="+i),k.isString(s)&&o.push("domain="+s),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Sw(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function ww(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Ub(n,e){return n&&!Sw(e)?ww(n,e):e}const yh=n=>n instanceof Ze?{...n}:n;function wi(n,e){e=e||{};const t={};function i(c,u,d){return k.isPlainObject(c)&&k.isPlainObject(u)?k.merge.call({caseless:d},c,u):k.isPlainObject(u)?k.merge({},u):k.isArray(u)?u.slice():u}function s(c,u,d){if(k.isUndefined(u)){if(!k.isUndefined(c))return i(void 0,c,d)}else return i(c,u,d)}function r(c,u){if(!k.isUndefined(u))return i(void 0,u)}function o(c,u){if(k.isUndefined(u)){if(!k.isUndefined(c))return i(void 0,c)}else return i(void 0,u)}function a(c,u,d){if(d in e)return i(c,u);if(d in n)return i(void 0,c)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u)=>s(yh(c),yh(u),!0)};return k.forEach(Object.keys(Object.assign({},n,e)),function(u){const d=l[u]||s,f=d(n[u],e[u],u);k.isUndefined(f)&&d!==a||(t[u]=f)}),t}const $b=n=>{const e=wi({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:r,headers:o,auth:a}=e;e.headers=o=Ze.from(o),e.url=zb(Ub(e.baseURL,e.url),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(k.isFormData(t)){if(bt.hasStandardBrowserEnv||bt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(bt.hasStandardBrowserEnv&&(i&&k.isFunction(i)&&(i=i(e)),i||i!==!1&&xw(e.url))){const c=s&&r&&_w.read(r);c&&o.set(s,c)}return e},Aw=typeof XMLHttpRequest<"u",kw=Aw&&function(n){return new Promise(function(t,i){const s=$b(n);let r=s.data;const o=Ze.from(s.headers).normalize();let{responseType:a}=s,l;function c(){s.cancelToken&&s.cancelToken.unsubscribe(l),s.signal&&s.signal.removeEventListener("abort",l)}let u=new XMLHttpRequest;u.open(s.method.toUpperCase(),s.url,!0),u.timeout=s.timeout;function d(){if(!u)return;const h=Ze.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),g={data:!a||a==="text"||a==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:h,config:n,request:u};Wb(function(b){t(b),c()},function(b){i(b),c()},g),u=null}"onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(d)},u.onabort=function(){u&&(i(new z("Request aborted",z.ECONNABORTED,s,u)),u=null)},u.onerror=function(){i(new z("Network Error",z.ERR_NETWORK,s,u)),u=null},u.ontimeout=function(){let p=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const g=s.transitional||Hb;s.timeoutErrorMessage&&(p=s.timeoutErrorMessage),i(new z(p,g.clarifyTimeoutError?z.ETIMEDOUT:z.ECONNABORTED,s,u)),u=null},r===void 0&&o.setContentType(null),"setRequestHeader"in u&&k.forEach(o.toJSON(),function(p,g){u.setRequestHeader(g,p)}),k.isUndefined(s.withCredentials)||(u.withCredentials=!!s.withCredentials),a&&a!=="json"&&(u.responseType=s.responseType),typeof s.onDownloadProgress=="function"&&u.addEventListener("progress",aa(s.onDownloadProgress,!0)),typeof s.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",aa(s.onUploadProgress)),(s.cancelToken||s.signal)&&(l=h=>{u&&(i(!h||h.type?new _s(null,n,u):h),u.abort(),u=null)},s.cancelToken&&s.cancelToken.subscribe(l),s.signal&&(s.signal.aborted?l():s.signal.addEventListener("abort",l)));const f=bw(s.url);if(f&&bt.protocols.indexOf(f)===-1){i(new z("Unsupported protocol "+f+":",z.ERR_BAD_REQUEST,n));return}u.send(r||null)})},Ew=(n,e)=>{let t=new AbortController,i;const s=function(l){if(!i){i=!0,o();const c=l instanceof Error?l:this.reason;t.abort(c instanceof z?c:new _s(c instanceof Error?c.message:c))}};let r=e&&setTimeout(()=>{s(new z(`timeout ${e} of ms exceeded`,z.ETIMEDOUT))},e);const o=()=>{n&&(r&&clearTimeout(r),r=null,n.forEach(l=>{l&&(l.removeEventListener?l.removeEventListener("abort",s):l.unsubscribe(s))}),n=null)};n.forEach(l=>l&&l.addEventListener&&l.addEventListener("abort",s));const{signal:a}=t;return a.unsubscribe=o,[a,()=>{r&&clearTimeout(r),r=null}]},Cw=function*(n,e){let t=n.byteLength;if(!e||t<e){yield n;return}let i=0,s;for(;i<t;)s=i+e,yield n.slice(i,s),i=s},Mw=async function*(n,e,t){for await(const i of n)yield*Cw(ArrayBuffer.isView(i)?i:await t(String(i)),e)},vh=(n,e,t,i,s)=>{const r=Mw(n,e,s);let o=0;return new ReadableStream({type:"bytes",async pull(a){const{done:l,value:c}=await r.next();if(l){a.close(),i();return}let u=c.byteLength;t&&t(o+=u),a.enqueue(new Uint8Array(c))},cancel(a){return i(a),r.return()}},{highWaterMark:2})},xh=(n,e)=>{const t=n!=null;return i=>setTimeout(()=>e({lengthComputable:t,total:n,loaded:i}))},Cl=typeof fetch<"u",qb=Cl&&typeof ReadableStream<"u",fu=Cl&&(typeof TextEncoder<"u"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Tw=qb&&(()=>{let n=!1;const e=new Request(bt.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e})(),_h=64*1024,hu=qb&&!!(()=>{try{return k.isReadableStream(new Response("").body)}catch{}})(),la={stream:hu&&(n=>n.body)};Cl&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!la[e]&&(la[e]=k.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new z(`Response type '${e}' is not supported`,z.ERR_NOT_SUPPORT,i)})})})(new Response);const Dw=async n=>{if(n==null)return 0;if(k.isBlob(n))return n.size;if(k.isSpecCompliantForm(n))return(await new Request(n).arrayBuffer()).byteLength;if(k.isArrayBufferView(n))return n.byteLength;if(k.isURLSearchParams(n)&&(n=n+""),k.isString(n))return(await fu(n)).byteLength},Ow=async(n,e)=>{const t=k.toFiniteNumber(n.getContentLength());return t??Dw(e)},Rw=Cl&&(async n=>{let{url:e,method:t,data:i,signal:s,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:f}=$b(n);c=c?(c+"").toLowerCase():"text";let[h,p]=s||r||o?Ew([s,r],o):[],g,m;const b=()=>{!g&&setTimeout(()=>{h&&h.unsubscribe()}),g=!0};let y;try{if(l&&Tw&&t!=="get"&&t!=="head"&&(y=await Ow(u,i))!==0){let S=new Request(e,{method:"POST",body:i,duplex:"half"}),E;k.isFormData(i)&&(E=S.headers.get("content-type"))&&u.setContentType(E),S.body&&(i=vh(S.body,_h,xh(y,aa(l)),null,fu))}k.isString(d)||(d=d?"cors":"omit"),m=new Request(e,{...f,signal:h,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:i,duplex:"half",withCredentials:d});let v=await fetch(m);const x=hu&&(c==="stream"||c==="response");if(hu&&(a||x)){const S={};["status","statusText","headers"].forEach(C=>{S[C]=v[C]});const E=k.toFiniteNumber(v.headers.get("content-length"));v=new Response(vh(v.body,_h,a&&xh(E,aa(a,!0)),x&&b,fu),S)}c=c||"text";let _=await la[k.findKey(la,c)||"text"](v,n);return!x&&b(),p&&p(),await new Promise((S,E)=>{Wb(S,E,{data:_,headers:Ze.from(v.headers),status:v.status,statusText:v.statusText,config:n,request:m})})}catch(v){throw b(),v&&v.name==="TypeError"&&/fetch/i.test(v.message)?Object.assign(new z("Network Error",z.ERR_NETWORK,n,m),{cause:v.cause||v}):z.from(v,v&&v.code,n,m)}}),pu={http:YS,xhr:kw,fetch:Rw};k.forEach(pu,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Sh=n=>`- ${n}`,Pw=n=>k.isFunction(n)||n===null||n===!1,Gb={getAdapter:n=>{n=k.isArray(n)?n:[n];const{length:e}=n;let t,i;const s={};for(let r=0;r<e;r++){t=n[r];let o;if(i=t,!Pw(t)&&(i=pu[(o=String(t)).toLowerCase()],i===void 0))throw new z(`Unknown adapter '${o}'`);if(i)break;s[o||"#"+r]=i}if(!i){const r=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?r.length>1?`since :
`+r.map(Sh).join(`
`):" "+Sh(r[0]):"as no adapter specified";throw new z("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:pu};function oc(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new _s(null,n)}function wh(n){return oc(n),n.headers=Ze.from(n.headers),n.data=rc.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Gb.getAdapter(n.adapter||Fr.adapter)(n).then(function(i){return oc(n),i.data=rc.call(n,n.transformResponse,i),i.headers=Ze.from(i.headers),i},function(i){return jb(i)||(oc(n),i&&i.response&&(i.response.data=rc.call(n,n.transformResponse,i.response),i.response.headers=Ze.from(i.response.headers))),Promise.reject(i)})}const Kb="1.7.1",Bd={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Bd[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const Ah={};Bd.transitional=function(e,t,i){function s(r,o){return"[Axios v"+Kb+"] Transitional option '"+r+"'"+o+(i?". "+i:"")}return(r,o,a)=>{if(e===!1)throw new z(s(o," has been removed"+(t?" in "+t:"")),z.ERR_DEPRECATED);return t&&!Ah[o]&&(Ah[o]=!0,console.warn(s(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,o,a):!0}};function Nw(n,e,t){if(typeof n!="object")throw new z("options must be an object",z.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let s=i.length;for(;s-- >0;){const r=i[s],o=e[r];if(o){const a=n[r],l=a===void 0||o(a,r,n);if(l!==!0)throw new z("option "+r+" must be "+l,z.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new z("Unknown option "+r,z.ERR_BAD_OPTION)}}const gu={assertOptions:Nw,validators:Bd},rn=gu.validators;class ui{constructor(e){this.defaults=e,this.interceptors={request:new mh,response:new mh}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?r&&!String(i.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+r):i.stack=r}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=wi(this.defaults,t);const{transitional:i,paramsSerializer:s,headers:r}=t;i!==void 0&&gu.assertOptions(i,{silentJSONParsing:rn.transitional(rn.boolean),forcedJSONParsing:rn.transitional(rn.boolean),clarifyTimeoutError:rn.transitional(rn.boolean)},!1),s!=null&&(k.isFunction(s)?t.paramsSerializer={serialize:s}:gu.assertOptions(s,{encode:rn.function,serialize:rn.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=r&&k.merge(r.common,r[t.method]);r&&k.forEach(["delete","get","head","post","put","patch","common"],p=>{delete r[p]}),t.headers=Ze.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(t)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let u,d=0,f;if(!l){const p=[wh.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,c),f=p.length,u=Promise.resolve(t);d<f;)u=u.then(p[d++],p[d++]);return u}f=a.length;let h=t;for(d=0;d<f;){const p=a[d++],g=a[d++];try{h=p(h)}catch(m){g.call(this,m);break}}try{u=wh.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=wi(this.defaults,e);const t=Ub(e.baseURL,e.url);return zb(t,e.params,e.paramsSerializer)}}k.forEach(["delete","get","head","options"],function(e){ui.prototype[e]=function(t,i){return this.request(wi(i||{},{method:e,url:t,data:(i||{}).data}))}});k.forEach(["post","put","patch"],function(e){function t(i){return function(r,o,a){return this.request(wi(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}ui.prototype[e]=t(),ui.prototype[e+"Form"]=t(!0)});class Fd{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const i=this;this.promise.then(s=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](s);i._listeners=null}),this.promise.then=s=>{let r;const o=new Promise(a=>{i.subscribe(a),r=a}).then(s);return o.cancel=function(){i.unsubscribe(r)},o},e(function(r,o,a){i.reason||(i.reason=new _s(r,o,a),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new Fd(function(s){e=s}),cancel:e}}}function Iw(n){return function(t){return n.apply(null,t)}}function Lw(n){return k.isObject(n)&&n.isAxiosError===!0}const mu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mu).forEach(([n,e])=>{mu[e]=n});function Yb(n){const e=new ui(n),t=Cb(ui.prototype.request,e);return k.extend(t,ui.prototype,e,{allOwnKeys:!0}),k.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return Yb(wi(n,s))},t}const me=Yb(Fr);me.Axios=ui;me.CanceledError=_s;me.CancelToken=Fd;me.isCancel=jb;me.VERSION=Kb;me.toFormData=El;me.AxiosError=z;me.Cancel=me.CanceledError;me.all=function(e){return Promise.all(e)};me.spread=Iw;me.isAxiosError=Lw;me.mergeConfig=wi;me.AxiosHeaders=Ze;me.formToJSON=n=>Vb(k.isHTMLForm(n)?new FormData(n):n);me.getAdapter=Gb.getAdapter;me.HttpStatusCode=mu;me.default=me;window.axios=me;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var bu=!1,yu=!1,di=[],vu=-1;function Bw(n){Fw(n)}function Fw(n){di.includes(n)||di.push(n),zw()}function Jb(n){let e=di.indexOf(n);e!==-1&&e>vu&&di.splice(e,1)}function zw(){!yu&&!bu&&(bu=!0,queueMicrotask(Hw))}function Hw(){bu=!1,yu=!0;for(let n=0;n<di.length;n++)di[n](),vu=n;di.length=0,vu=-1,yu=!1}var Ss,Oi,ws,Qb,xu=!0;function Vw(n){xu=!1,n(),xu=!0}function jw(n){Ss=n.reactive,ws=n.release,Oi=e=>n.effect(e,{scheduler:t=>{xu?Bw(t):t()}}),Qb=n.raw}function kh(n){Oi=n}function Ww(n){let e=()=>{};return[i=>{let s=Oi(i);return n._x_effects||(n._x_effects=new Set,n._x_runEffects=()=>{n._x_effects.forEach(r=>r())}),n._x_effects.add(s),e=()=>{s!==void 0&&(n._x_effects.delete(s),ws(s))},s},()=>{e()}]}function Zb(n,e){let t=!0,i,s=Oi(()=>{let r=n();JSON.stringify(r),t?i=r:queueMicrotask(()=>{e(r,i),i=r}),t=!1});return()=>ws(s)}var Xb=[],ey=[],ty=[];function Uw(n){ty.push(n)}function zd(n,e){typeof e=="function"?(n._x_cleanups||(n._x_cleanups=[]),n._x_cleanups.push(e)):(e=n,ey.push(e))}function ny(n){Xb.push(n)}function iy(n,e,t){n._x_attributeCleanups||(n._x_attributeCleanups={}),n._x_attributeCleanups[e]||(n._x_attributeCleanups[e]=[]),n._x_attributeCleanups[e].push(t)}function sy(n,e){n._x_attributeCleanups&&Object.entries(n._x_attributeCleanups).forEach(([t,i])=>{(e===void 0||e.includes(t))&&(i.forEach(s=>s()),delete n._x_attributeCleanups[t])})}function $w(n){if(n._x_cleanups)for(;n._x_cleanups.length;)n._x_cleanups.pop()()}var Hd=new MutationObserver(Ud),Vd=!1;function jd(){Hd.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),Vd=!0}function ry(){qw(),Hd.disconnect(),Vd=!1}var Ds=[];function qw(){let n=Hd.takeRecords();Ds.push(()=>n.length>0&&Ud(n));let e=Ds.length;queueMicrotask(()=>{if(Ds.length===e)for(;Ds.length>0;)Ds.shift()()})}function ve(n){if(!Vd)return n();ry();let e=n();return jd(),e}var Wd=!1,ca=[];function Gw(){Wd=!0}function Kw(){Wd=!1,Ud(ca),ca=[]}function Ud(n){if(Wd){ca=ca.concat(n);return}let e=new Set,t=new Set,i=new Map,s=new Map;for(let r=0;r<n.length;r++)if(!n[r].target._x_ignoreMutationObserver&&(n[r].type==="childList"&&(n[r].addedNodes.forEach(o=>o.nodeType===1&&e.add(o)),n[r].removedNodes.forEach(o=>o.nodeType===1&&t.add(o))),n[r].type==="attributes")){let o=n[r].target,a=n[r].attributeName,l=n[r].oldValue,c=()=>{i.has(o)||i.set(o,[]),i.get(o).push({name:a,value:o.getAttribute(a)})},u=()=>{s.has(o)||s.set(o,[]),s.get(o).push(a)};o.hasAttribute(a)&&l===null?c():o.hasAttribute(a)?(u(),c()):u()}s.forEach((r,o)=>{sy(o,r)}),i.forEach((r,o)=>{Xb.forEach(a=>a(o,r))});for(let r of t)e.has(r)||ey.forEach(o=>o(r));e.forEach(r=>{r._x_ignoreSelf=!0,r._x_ignore=!0});for(let r of e)t.has(r)||r.isConnected&&(delete r._x_ignoreSelf,delete r._x_ignore,ty.forEach(o=>o(r)),r._x_ignore=!0,r._x_ignoreSelf=!0);e.forEach(r=>{delete r._x_ignoreSelf,delete r._x_ignore}),e=null,t=null,i=null,s=null}function oy(n){return Hr(ss(n))}function zr(n,e,t){return n._x_dataStack=[e,...ss(t||n)],()=>{n._x_dataStack=n._x_dataStack.filter(i=>i!==e)}}function ss(n){return n._x_dataStack?n._x_dataStack:typeof ShadowRoot=="function"&&n instanceof ShadowRoot?ss(n.host):n.parentNode?ss(n.parentNode):[]}function Hr(n){return new Proxy({objects:n},Yw)}var Yw={ownKeys({objects:n}){return Array.from(new Set(n.flatMap(e=>Object.keys(e))))},has({objects:n},e){return e==Symbol.unscopables?!1:n.some(t=>Object.prototype.hasOwnProperty.call(t,e)||Reflect.has(t,e))},get({objects:n},e,t){return e=="toJSON"?Jw:Reflect.get(n.find(i=>Reflect.has(i,e))||{},e,t)},set({objects:n},e,t,i){const s=n.find(o=>Object.prototype.hasOwnProperty.call(o,e))||n[n.length-1],r=Object.getOwnPropertyDescriptor(s,e);return r!=null&&r.set&&(r!=null&&r.get)?Reflect.set(s,e,t,i):Reflect.set(s,e,t)}};function Jw(){return Reflect.ownKeys(this).reduce((e,t)=>(e[t]=Reflect.get(this,t),e),{})}function ay(n){let e=i=>typeof i=="object"&&!Array.isArray(i)&&i!==null,t=(i,s="")=>{Object.entries(Object.getOwnPropertyDescriptors(i)).forEach(([r,{value:o,enumerable:a}])=>{if(a===!1||o===void 0||typeof o=="object"&&o!==null&&o.__v_skip)return;let l=s===""?r:`${s}.${r}`;typeof o=="object"&&o!==null&&o._x_interceptor?i[r]=o.initialize(n,l,r):e(o)&&o!==i&&!(o instanceof Element)&&t(o,l)})};return t(n)}function ly(n,e=()=>{}){let t={initialValue:void 0,_x_interceptor:!0,initialize(i,s,r){return n(this.initialValue,()=>Qw(i,s),o=>_u(i,s,o),s,r)}};return e(t),i=>{if(typeof i=="object"&&i!==null&&i._x_interceptor){let s=t.initialize.bind(t);t.initialize=(r,o,a)=>{let l=i.initialize(r,o,a);return t.initialValue=l,s(r,o,a)}}else t.initialValue=i;return t}}function Qw(n,e){return e.split(".").reduce((t,i)=>t[i],n)}function _u(n,e,t){if(typeof e=="string"&&(e=e.split(".")),e.length===1)n[e[0]]=t;else{if(e.length===0)throw error;return n[e[0]]||(n[e[0]]={}),_u(n[e[0]],e.slice(1),t)}}var cy={};function At(n,e){cy[n]=e}function Su(n,e){return Object.entries(cy).forEach(([t,i])=>{let s=null;function r(){if(s)return s;{let[o,a]=gy(e);return s={interceptor:ly,...o},zd(e,a),s}}Object.defineProperty(n,`$${t}`,{get(){return i(e,r())},enumerable:!1})}),n}function Zw(n,e,t,...i){try{return t(...i)}catch(s){pr(s,n,e)}}function pr(n,e,t=void 0){n=Object.assign(n??{message:"No error message given."},{el:e,expression:t}),console.warn(`Alpine Expression Error: ${n.message}

${t?'Expression: "'+t+`"

`:""}`,e),setTimeout(()=>{throw n},0)}var Vo=!0;function uy(n){let e=Vo;Vo=!1;let t=n();return Vo=e,t}function fi(n,e,t={}){let i;return We(n,e)(s=>i=s,t),i}function We(...n){return dy(...n)}var dy=fy;function Xw(n){dy=n}function fy(n,e){let t={};Su(t,n);let i=[t,...ss(n)],s=typeof e=="function"?eA(i,e):nA(i,e,n);return Zw.bind(null,n,e,s)}function eA(n,e){return(t=()=>{},{scope:i={},params:s=[]}={})=>{let r=e.apply(Hr([i,...n]),s);ua(t,r)}}var ac={};function tA(n,e){if(ac[n])return ac[n];let t=Object.getPrototypeOf(async function(){}).constructor,i=/^[\n\s]*if.*\(.*\)/.test(n.trim())||/^(let|const)\s/.test(n.trim())?`(async()=>{ ${n} })()`:n,r=(()=>{try{let o=new t(["__self","scope"],`with (scope) { __self.result = ${i} }; __self.finished = true; return __self.result;`);return Object.defineProperty(o,"name",{value:`[Alpine] ${n}`}),o}catch(o){return pr(o,e,n),Promise.resolve()}})();return ac[n]=r,r}function nA(n,e,t){let i=tA(e,t);return(s=()=>{},{scope:r={},params:o=[]}={})=>{i.result=void 0,i.finished=!1;let a=Hr([r,...n]);if(typeof i=="function"){let l=i(i,a).catch(c=>pr(c,t,e));i.finished?(ua(s,i.result,a,o,t),i.result=void 0):l.then(c=>{ua(s,c,a,o,t)}).catch(c=>pr(c,t,e)).finally(()=>i.result=void 0)}}}function ua(n,e,t,i,s){if(Vo&&typeof e=="function"){let r=e.apply(t,i);r instanceof Promise?r.then(o=>ua(n,o,t,i)).catch(o=>pr(o,s,e)):n(r)}else typeof e=="object"&&e instanceof Promise?e.then(r=>n(r)):n(e)}var $d="x-";function As(n=""){return $d+n}function iA(n){$d=n}var da={};function be(n,e){return da[n]=e,{before(t){if(!da[t]){console.warn(String.raw`Cannot find directive \`${t}\`. \`${n}\` will use the default order of execution`);return}const i=ii.indexOf(t);ii.splice(i>=0?i:ii.indexOf("DEFAULT"),0,n)}}}function sA(n){return Object.keys(da).includes(n)}function qd(n,e,t){if(e=Array.from(e),n._x_virtualDirectives){let r=Object.entries(n._x_virtualDirectives).map(([a,l])=>({name:a,value:l})),o=hy(r);r=r.map(a=>o.find(l=>l.name===a.name)?{name:`x-bind:${a.name}`,value:`"${a.value}"`}:a),e=e.concat(r)}let i={};return e.map(yy((r,o)=>i[r]=o)).filter(xy).map(aA(i,t)).sort(lA).map(r=>oA(n,r))}function hy(n){return Array.from(n).map(yy()).filter(e=>!xy(e))}var wu=!1,zs=new Map,py=Symbol();function rA(n){wu=!0;let e=Symbol();py=e,zs.set(e,[]);let t=()=>{for(;zs.get(e).length;)zs.get(e).shift()();zs.delete(e)},i=()=>{wu=!1,t()};n(t),i()}function gy(n){let e=[],t=a=>e.push(a),[i,s]=Ww(n);return e.push(s),[{Alpine:jr,effect:i,cleanup:t,evaluateLater:We.bind(We,n),evaluate:fi.bind(fi,n)},()=>e.forEach(a=>a())]}function oA(n,e){let t=()=>{},i=da[e.type]||t,[s,r]=gy(n);iy(n,e.original,r);let o=()=>{n._x_ignore||n._x_ignoreSelf||(i.inline&&i.inline(n,e,s),i=i.bind(i,n,e,s),wu?zs.get(py).push(i):i())};return o.runCleanups=r,o}var my=(n,e)=>({name:t,value:i})=>(t.startsWith(n)&&(t=t.replace(n,e)),{name:t,value:i}),by=n=>n;function yy(n=()=>{}){return({name:e,value:t})=>{let{name:i,value:s}=vy.reduce((r,o)=>o(r),{name:e,value:t});return i!==e&&n(i,e),{name:i,value:s}}}var vy=[];function Gd(n){vy.push(n)}function xy({name:n}){return _y().test(n)}var _y=()=>new RegExp(`^${$d}([^:^.]+)\\b`);function aA(n,e){return({name:t,value:i})=>{let s=t.match(_y()),r=t.match(/:([a-zA-Z0-9\-_:]+)/),o=t.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],a=e||n[t]||t;return{type:s?s[1]:null,value:r?r[1]:null,modifiers:o.map(l=>l.replace(".","")),expression:i,original:a}}}var Au="DEFAULT",ii=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Au,"teleport"];function lA(n,e){let t=ii.indexOf(n.type)===-1?Au:n.type,i=ii.indexOf(e.type)===-1?Au:e.type;return ii.indexOf(t)-ii.indexOf(i)}function Ys(n,e,t={}){n.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0}))}function Tn(n,e){if(typeof ShadowRoot=="function"&&n instanceof ShadowRoot){Array.from(n.children).forEach(s=>Tn(s,e));return}let t=!1;if(e(n,()=>t=!0),t)return;let i=n.firstElementChild;for(;i;)Tn(i,e),i=i.nextElementSibling}function ct(n,...e){console.warn(`Alpine Warning: ${n}`,...e)}var Eh=!1;function cA(){Eh&&ct("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),Eh=!0,document.body||ct("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),Ys(document,"alpine:init"),Ys(document,"alpine:initializing"),jd(),Uw(e=>Xt(e,Tn)),zd(e=>My(e)),ny((e,t)=>{qd(e,t).forEach(i=>i())});let n=e=>!Ml(e.parentElement,!0);Array.from(document.querySelectorAll(Ay().join(","))).filter(n).forEach(e=>{Xt(e)}),Ys(document,"alpine:initialized"),setTimeout(()=>{fA()})}var Kd=[],Sy=[];function wy(){return Kd.map(n=>n())}function Ay(){return Kd.concat(Sy).map(n=>n())}function ky(n){Kd.push(n)}function Ey(n){Sy.push(n)}function Ml(n,e=!1){return Vr(n,t=>{if((e?Ay():wy()).some(s=>t.matches(s)))return!0})}function Vr(n,e){if(n){if(e(n))return n;if(n._x_teleportBack&&(n=n._x_teleportBack),!!n.parentElement)return Vr(n.parentElement,e)}}function uA(n){return wy().some(e=>n.matches(e))}var Cy=[];function dA(n){Cy.push(n)}function Xt(n,e=Tn,t=()=>{}){rA(()=>{e(n,(i,s)=>{t(i,s),Cy.forEach(r=>r(i,s)),qd(i,i.attributes).forEach(r=>r()),i._x_ignore&&s()})})}function My(n,e=Tn){e(n,t=>{sy(t),$w(t)})}function fA(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([e,t,i])=>{sA(t)||i.some(s=>{if(document.querySelector(s))return ct(`found "${s}", but missing ${e} plugin`),!0})})}var ku=[],Yd=!1;function Jd(n=()=>{}){return queueMicrotask(()=>{Yd||setTimeout(()=>{Eu()})}),new Promise(e=>{ku.push(()=>{n(),e()})})}function Eu(){for(Yd=!1;ku.length;)ku.shift()()}function hA(){Yd=!0}function Qd(n,e){return Array.isArray(e)?Ch(n,e.join(" ")):typeof e=="object"&&e!==null?pA(n,e):typeof e=="function"?Qd(n,e()):Ch(n,e)}function Ch(n,e){let t=s=>s.split(" ").filter(r=>!n.classList.contains(r)).filter(Boolean),i=s=>(n.classList.add(...s),()=>{n.classList.remove(...s)});return e=e===!0?e="":e||"",i(t(e))}function pA(n,e){let t=a=>a.split(" ").filter(Boolean),i=Object.entries(e).flatMap(([a,l])=>l?t(a):!1).filter(Boolean),s=Object.entries(e).flatMap(([a,l])=>l?!1:t(a)).filter(Boolean),r=[],o=[];return s.forEach(a=>{n.classList.contains(a)&&(n.classList.remove(a),o.push(a))}),i.forEach(a=>{n.classList.contains(a)||(n.classList.add(a),r.push(a))}),()=>{o.forEach(a=>n.classList.add(a)),r.forEach(a=>n.classList.remove(a))}}function Tl(n,e){return typeof e=="object"&&e!==null?gA(n,e):mA(n,e)}function gA(n,e){let t={};return Object.entries(e).forEach(([i,s])=>{t[i]=n.style[i],i.startsWith("--")||(i=bA(i)),n.style.setProperty(i,s)}),setTimeout(()=>{n.style.length===0&&n.removeAttribute("style")}),()=>{Tl(n,t)}}function mA(n,e){let t=n.getAttribute("style",e);return n.setAttribute("style",e),()=>{n.setAttribute("style",t||"")}}function bA(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Cu(n,e=()=>{}){let t=!1;return function(){t?e.apply(this,arguments):(t=!0,n.apply(this,arguments))}}be("transition",(n,{value:e,modifiers:t,expression:i},{evaluate:s})=>{typeof i=="function"&&(i=s(i)),i!==!1&&(!i||typeof i=="boolean"?vA(n,t,e):yA(n,i,e))});function yA(n,e,t){Ty(n,Qd,""),{enter:s=>{n._x_transition.enter.during=s},"enter-start":s=>{n._x_transition.enter.start=s},"enter-end":s=>{n._x_transition.enter.end=s},leave:s=>{n._x_transition.leave.during=s},"leave-start":s=>{n._x_transition.leave.start=s},"leave-end":s=>{n._x_transition.leave.end=s}}[t](e)}function vA(n,e,t){Ty(n,Tl);let i=!e.includes("in")&&!e.includes("out")&&!t,s=i||e.includes("in")||["enter"].includes(t),r=i||e.includes("out")||["leave"].includes(t);e.includes("in")&&!i&&(e=e.filter((b,y)=>y<e.indexOf("out"))),e.includes("out")&&!i&&(e=e.filter((b,y)=>y>e.indexOf("out")));let o=!e.includes("opacity")&&!e.includes("scale"),a=o||e.includes("opacity"),l=o||e.includes("scale"),c=a?0:1,u=l?Os(e,"scale",95)/100:1,d=Os(e,"delay",0)/1e3,f=Os(e,"origin","center"),h="opacity, transform",p=Os(e,"duration",150)/1e3,g=Os(e,"duration",75)/1e3,m="cubic-bezier(0.4, 0.0, 0.2, 1)";s&&(n._x_transition.enter.during={transformOrigin:f,transitionDelay:`${d}s`,transitionProperty:h,transitionDuration:`${p}s`,transitionTimingFunction:m},n._x_transition.enter.start={opacity:c,transform:`scale(${u})`},n._x_transition.enter.end={opacity:1,transform:"scale(1)"}),r&&(n._x_transition.leave.during={transformOrigin:f,transitionDelay:`${d}s`,transitionProperty:h,transitionDuration:`${g}s`,transitionTimingFunction:m},n._x_transition.leave.start={opacity:1,transform:"scale(1)"},n._x_transition.leave.end={opacity:c,transform:`scale(${u})`})}function Ty(n,e,t={}){n._x_transition||(n._x_transition={enter:{during:t,start:t,end:t},leave:{during:t,start:t,end:t},in(i=()=>{},s=()=>{}){Mu(n,e,{during:this.enter.during,start:this.enter.start,end:this.enter.end},i,s)},out(i=()=>{},s=()=>{}){Mu(n,e,{during:this.leave.during,start:this.leave.start,end:this.leave.end},i,s)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(n,e,t,i){const s=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let r=()=>s(t);if(e){n._x_transition&&(n._x_transition.enter||n._x_transition.leave)?n._x_transition.enter&&(Object.entries(n._x_transition.enter.during).length||Object.entries(n._x_transition.enter.start).length||Object.entries(n._x_transition.enter.end).length)?n._x_transition.in(t):r():n._x_transition?n._x_transition.in(t):r();return}n._x_hidePromise=n._x_transition?new Promise((o,a)=>{n._x_transition.out(()=>{},()=>o(i)),n._x_transitioning&&n._x_transitioning.beforeCancel(()=>a({isFromCancelledTransition:!0}))}):Promise.resolve(i),queueMicrotask(()=>{let o=Dy(n);o?(o._x_hideChildren||(o._x_hideChildren=[]),o._x_hideChildren.push(n)):s(()=>{let a=l=>{let c=Promise.all([l._x_hidePromise,...(l._x_hideChildren||[]).map(a)]).then(([u])=>u());return delete l._x_hidePromise,delete l._x_hideChildren,c};a(n).catch(l=>{if(!l.isFromCancelledTransition)throw l})})})};function Dy(n){let e=n.parentNode;if(e)return e._x_hidePromise?e:Dy(e)}function Mu(n,e,{during:t,start:i,end:s}={},r=()=>{},o=()=>{}){if(n._x_transitioning&&n._x_transitioning.cancel(),Object.keys(t).length===0&&Object.keys(i).length===0&&Object.keys(s).length===0){r(),o();return}let a,l,c;xA(n,{start(){a=e(n,i)},during(){l=e(n,t)},before:r,end(){a(),c=e(n,s)},after:o,cleanup(){l(),c()}})}function xA(n,e){let t,i,s,r=Cu(()=>{ve(()=>{t=!0,i||e.before(),s||(e.end(),Eu()),e.after(),n.isConnected&&e.cleanup(),delete n._x_transitioning})});n._x_transitioning={beforeCancels:[],beforeCancel(o){this.beforeCancels.push(o)},cancel:Cu(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();r()}),finish:r},ve(()=>{e.start(),e.during()}),hA(),requestAnimationFrame(()=>{if(t)return;let o=Number(getComputedStyle(n).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,a=Number(getComputedStyle(n).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;o===0&&(o=Number(getComputedStyle(n).animationDuration.replace("s",""))*1e3),ve(()=>{e.before()}),i=!0,requestAnimationFrame(()=>{t||(ve(()=>{e.end()}),Eu(),setTimeout(n._x_transitioning.finish,o+a),s=!0)})})}function Os(n,e,t){if(n.indexOf(e)===-1)return t;const i=n[n.indexOf(e)+1];if(!i||e==="scale"&&isNaN(i))return t;if(e==="duration"||e==="delay"){let s=i.match(/([0-9]+)ms/);if(s)return s[1]}return e==="origin"&&["top","right","left","center","bottom"].includes(n[n.indexOf(e)+2])?[i,n[n.indexOf(e)+2]].join(" "):i}var Dn=!1;function Bn(n,e=()=>{}){return(...t)=>Dn?e(...t):n(...t)}function _A(n){return(...e)=>Dn&&n(...e)}var Oy=[];function Dl(n){Oy.push(n)}function SA(n,e){Oy.forEach(t=>t(n,e)),Dn=!0,Ry(()=>{Xt(e,(t,i)=>{i(t,()=>{})})}),Dn=!1}var Tu=!1;function wA(n,e){e._x_dataStack||(e._x_dataStack=n._x_dataStack),Dn=!0,Tu=!0,Ry(()=>{AA(e)}),Dn=!1,Tu=!1}function AA(n){let e=!1;Xt(n,(i,s)=>{Tn(i,(r,o)=>{if(e&&uA(r))return o();e=!0,s(r,o)})})}function Ry(n){let e=Oi;kh((t,i)=>{let s=e(t);return ws(s),()=>{}}),n(),kh(e)}function Py(n,e,t,i=[]){switch(n._x_bindings||(n._x_bindings=Ss({})),n._x_bindings[e]=t,e=i.includes("camel")?RA(e):e,e){case"value":kA(n,t);break;case"style":CA(n,t);break;case"class":EA(n,t);break;case"selected":case"checked":MA(n,e,t);break;default:Ny(n,e,t);break}}function kA(n,e){if(n.type==="radio")n.attributes.value===void 0&&(n.value=e),window.fromModel&&(typeof e=="boolean"?n.checked=jo(n.value)===e:n.checked=Mh(n.value,e));else if(n.type==="checkbox")Number.isInteger(e)?n.value=e:!Array.isArray(e)&&typeof e!="boolean"&&![null,void 0].includes(e)?n.value=String(e):Array.isArray(e)?n.checked=e.some(t=>Mh(t,n.value)):n.checked=!!e;else if(n.tagName==="SELECT")OA(n,e);else{if(n.value===e)return;n.value=e===void 0?"":e}}function EA(n,e){n._x_undoAddedClasses&&n._x_undoAddedClasses(),n._x_undoAddedClasses=Qd(n,e)}function CA(n,e){n._x_undoAddedStyles&&n._x_undoAddedStyles(),n._x_undoAddedStyles=Tl(n,e)}function MA(n,e,t){Ny(n,e,t),DA(n,e,t)}function Ny(n,e,t){[null,void 0,!1].includes(t)&&PA(e)?n.removeAttribute(e):(Iy(e)&&(t=e),TA(n,e,t))}function TA(n,e,t){n.getAttribute(e)!=t&&n.setAttribute(e,t)}function DA(n,e,t){n[e]!==t&&(n[e]=t)}function OA(n,e){const t=[].concat(e).map(i=>i+"");Array.from(n.options).forEach(i=>{i.selected=t.includes(i.value)})}function RA(n){return n.toLowerCase().replace(/-(\w)/g,(e,t)=>t.toUpperCase())}function Mh(n,e){return n==e}function jo(n){return[1,"1","true","on","yes",!0].includes(n)?!0:[0,"0","false","off","no",!1].includes(n)?!1:n?!!n:null}function Iy(n){return["disabled","checked","required","readonly","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(n)}function PA(n){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(n)}function NA(n,e,t){return n._x_bindings&&n._x_bindings[e]!==void 0?n._x_bindings[e]:Ly(n,e,t)}function IA(n,e,t,i=!0){if(n._x_bindings&&n._x_bindings[e]!==void 0)return n._x_bindings[e];if(n._x_inlineBindings&&n._x_inlineBindings[e]!==void 0){let s=n._x_inlineBindings[e];return s.extract=i,uy(()=>fi(n,s.expression))}return Ly(n,e,t)}function Ly(n,e,t){let i=n.getAttribute(e);return i===null?typeof t=="function"?t():t:i===""?!0:Iy(e)?!![e,"true"].includes(i):i}function By(n,e){var t;return function(){var i=this,s=arguments,r=function(){t=null,n.apply(i,s)};clearTimeout(t),t=setTimeout(r,e)}}function Fy(n,e){let t;return function(){let i=this,s=arguments;t||(n.apply(i,s),t=!0,setTimeout(()=>t=!1,e))}}function zy({get:n,set:e},{get:t,set:i}){let s=!0,r,o=Oi(()=>{let a=n(),l=t();if(s)i(lc(a)),s=!1;else{let c=JSON.stringify(a),u=JSON.stringify(l);c!==r?i(lc(a)):c!==u&&e(lc(l))}r=JSON.stringify(n()),JSON.stringify(t())});return()=>{ws(o)}}function lc(n){return typeof n=="object"?JSON.parse(JSON.stringify(n)):n}function LA(n){(Array.isArray(n)?n:[n]).forEach(t=>t(jr))}var Yn={},Th=!1;function BA(n,e){if(Th||(Yn=Ss(Yn),Th=!0),e===void 0)return Yn[n];Yn[n]=e,typeof e=="object"&&e!==null&&e.hasOwnProperty("init")&&typeof e.init=="function"&&Yn[n].init(),ay(Yn[n])}function FA(){return Yn}var Hy={};function zA(n,e){let t=typeof e!="function"?()=>e:e;return n instanceof Element?Vy(n,t()):(Hy[n]=t,()=>{})}function HA(n){return Object.entries(Hy).forEach(([e,t])=>{Object.defineProperty(n,e,{get(){return(...i)=>t(...i)}})}),n}function Vy(n,e,t){let i=[];for(;i.length;)i.pop()();let s=Object.entries(e).map(([o,a])=>({name:o,value:a})),r=hy(s);return s=s.map(o=>r.find(a=>a.name===o.name)?{name:`x-bind:${o.name}`,value:`"${o.value}"`}:o),qd(n,s,t).map(o=>{i.push(o.runCleanups),o()}),()=>{for(;i.length;)i.pop()()}}var jy={};function VA(n,e){jy[n]=e}function jA(n,e){return Object.entries(jy).forEach(([t,i])=>{Object.defineProperty(n,t,{get(){return(...s)=>i.bind(e)(...s)},enumerable:!1})}),n}var WA={get reactive(){return Ss},get release(){return ws},get effect(){return Oi},get raw(){return Qb},version:"3.13.10",flushAndStopDeferringMutations:Kw,dontAutoEvaluateFunctions:uy,disableEffectScheduling:Vw,startObservingMutations:jd,stopObservingMutations:ry,setReactivityEngine:jw,onAttributeRemoved:iy,onAttributesAdded:ny,closestDataStack:ss,skipDuringClone:Bn,onlyDuringClone:_A,addRootSelector:ky,addInitSelector:Ey,interceptClone:Dl,addScopeToNode:zr,deferMutations:Gw,mapAttributes:Gd,evaluateLater:We,interceptInit:dA,setEvaluator:Xw,mergeProxies:Hr,extractProp:IA,findClosest:Vr,onElRemoved:zd,closestRoot:Ml,destroyTree:My,interceptor:ly,transition:Mu,setStyles:Tl,mutateDom:ve,directive:be,entangle:zy,throttle:Fy,debounce:By,evaluate:fi,initTree:Xt,nextTick:Jd,prefixed:As,prefix:iA,plugin:LA,magic:At,store:BA,start:cA,clone:wA,cloneNode:SA,bound:NA,$data:oy,watch:Zb,walk:Tn,data:VA,bind:zA},jr=WA;function UA(n,e){const t=Object.create(null),i=n.split(",");for(let s=0;s<i.length;s++)t[i[s]]=!0;return s=>!!t[s]}var $A=Object.freeze({}),qA=Object.prototype.hasOwnProperty,Ol=(n,e)=>qA.call(n,e),hi=Array.isArray,Js=n=>Wy(n)==="[object Map]",GA=n=>typeof n=="string",Zd=n=>typeof n=="symbol",Rl=n=>n!==null&&typeof n=="object",KA=Object.prototype.toString,Wy=n=>KA.call(n),Uy=n=>Wy(n).slice(8,-1),Xd=n=>GA(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,YA=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},JA=YA(n=>n.charAt(0).toUpperCase()+n.slice(1)),$y=(n,e)=>n!==e&&(n===n||e===e),Du=new WeakMap,Rs=[],Rt,pi=Symbol("iterate"),Ou=Symbol("Map key iterate");function QA(n){return n&&n._isEffect===!0}function ZA(n,e=$A){QA(n)&&(n=n.raw);const t=tk(n,e);return e.lazy||t(),t}function XA(n){n.active&&(qy(n),n.options.onStop&&n.options.onStop(),n.active=!1)}var ek=0;function tk(n,e){const t=function(){if(!t.active)return n();if(!Rs.includes(t)){qy(t);try{return ik(),Rs.push(t),Rt=t,n()}finally{Rs.pop(),Gy(),Rt=Rs[Rs.length-1]}}};return t.id=ek++,t.allowRecurse=!!e.allowRecurse,t._isEffect=!0,t.active=!0,t.raw=n,t.deps=[],t.options=e,t}function qy(n){const{deps:e}=n;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(n);e.length=0}}var rs=!0,ef=[];function nk(){ef.push(rs),rs=!1}function ik(){ef.push(rs),rs=!0}function Gy(){const n=ef.pop();rs=n===void 0?!0:n}function xt(n,e,t){if(!rs||Rt===void 0)return;let i=Du.get(n);i||Du.set(n,i=new Map);let s=i.get(t);s||i.set(t,s=new Set),s.has(Rt)||(s.add(Rt),Rt.deps.push(s),Rt.options.onTrack&&Rt.options.onTrack({effect:Rt,target:n,type:e,key:t}))}function On(n,e,t,i,s,r){const o=Du.get(n);if(!o)return;const a=new Set,l=u=>{u&&u.forEach(d=>{(d!==Rt||d.allowRecurse)&&a.add(d)})};if(e==="clear")o.forEach(l);else if(t==="length"&&hi(n))o.forEach((u,d)=>{(d==="length"||d>=i)&&l(u)});else switch(t!==void 0&&l(o.get(t)),e){case"add":hi(n)?Xd(t)&&l(o.get("length")):(l(o.get(pi)),Js(n)&&l(o.get(Ou)));break;case"delete":hi(n)||(l(o.get(pi)),Js(n)&&l(o.get(Ou)));break;case"set":Js(n)&&l(o.get(pi));break}const c=u=>{u.options.onTrigger&&u.options.onTrigger({effect:u,target:n,key:t,type:e,newValue:i,oldValue:s,oldTarget:r}),u.options.scheduler?u.options.scheduler(u):u()};a.forEach(c)}var sk=UA("__proto__,__v_isRef,__isVue"),Ky=new Set(Object.getOwnPropertyNames(Symbol).map(n=>Symbol[n]).filter(Zd)),rk=Yy(),ok=Yy(!0),Dh=ak();function ak(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const i=ne(this);for(let r=0,o=this.length;r<o;r++)xt(i,"get",r+"");const s=i[e](...t);return s===-1||s===!1?i[e](...t.map(ne)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){nk();const i=ne(this)[e].apply(this,t);return Gy(),i}}),n}function Yy(n=!1,e=!1){return function(i,s,r){if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_raw"&&r===(n?e?_k:Xy:e?xk:Zy).get(i))return i;const o=hi(i);if(!n&&o&&Ol(Dh,s))return Reflect.get(Dh,s,r);const a=Reflect.get(i,s,r);return(Zd(s)?Ky.has(s):sk(s))||(n||xt(i,"get",s),e)?a:Ru(a)?!o||!Xd(s)?a.value:a:Rl(a)?n?e0(a):rf(a):a}}var lk=ck();function ck(n=!1){return function(t,i,s,r){let o=t[i];if(!n&&(s=ne(s),o=ne(o),!hi(t)&&Ru(o)&&!Ru(s)))return o.value=s,!0;const a=hi(t)&&Xd(i)?Number(i)<t.length:Ol(t,i),l=Reflect.set(t,i,s,r);return t===ne(r)&&(a?$y(s,o)&&On(t,"set",i,s,o):On(t,"add",i,s)),l}}function uk(n,e){const t=Ol(n,e),i=n[e],s=Reflect.deleteProperty(n,e);return s&&t&&On(n,"delete",e,void 0,i),s}function dk(n,e){const t=Reflect.has(n,e);return(!Zd(e)||!Ky.has(e))&&xt(n,"has",e),t}function fk(n){return xt(n,"iterate",hi(n)?"length":pi),Reflect.ownKeys(n)}var hk={get:rk,set:lk,deleteProperty:uk,has:dk,ownKeys:fk},pk={get:ok,set(n,e){return console.warn(`Set operation on key "${String(e)}" failed: target is readonly.`,n),!0},deleteProperty(n,e){return console.warn(`Delete operation on key "${String(e)}" failed: target is readonly.`,n),!0}},tf=n=>Rl(n)?rf(n):n,nf=n=>Rl(n)?e0(n):n,sf=n=>n,Pl=n=>Reflect.getPrototypeOf(n);function eo(n,e,t=!1,i=!1){n=n.__v_raw;const s=ne(n),r=ne(e);e!==r&&!t&&xt(s,"get",e),!t&&xt(s,"get",r);const{has:o}=Pl(s),a=i?sf:t?nf:tf;if(o.call(s,e))return a(n.get(e));if(o.call(s,r))return a(n.get(r));n!==s&&n.get(e)}function to(n,e=!1){const t=this.__v_raw,i=ne(t),s=ne(n);return n!==s&&!e&&xt(i,"has",n),!e&&xt(i,"has",s),n===s?t.has(n):t.has(n)||t.has(s)}function no(n,e=!1){return n=n.__v_raw,!e&&xt(ne(n),"iterate",pi),Reflect.get(n,"size",n)}function Oh(n){n=ne(n);const e=ne(this);return Pl(e).has.call(e,n)||(e.add(n),On(e,"add",n,n)),this}function Rh(n,e){e=ne(e);const t=ne(this),{has:i,get:s}=Pl(t);let r=i.call(t,n);r?Qy(t,i,n):(n=ne(n),r=i.call(t,n));const o=s.call(t,n);return t.set(n,e),r?$y(e,o)&&On(t,"set",n,e,o):On(t,"add",n,e),this}function Ph(n){const e=ne(this),{has:t,get:i}=Pl(e);let s=t.call(e,n);s?Qy(e,t,n):(n=ne(n),s=t.call(e,n));const r=i?i.call(e,n):void 0,o=e.delete(n);return s&&On(e,"delete",n,void 0,r),o}function Nh(){const n=ne(this),e=n.size!==0,t=Js(n)?new Map(n):new Set(n),i=n.clear();return e&&On(n,"clear",void 0,void 0,t),i}function io(n,e){return function(i,s){const r=this,o=r.__v_raw,a=ne(o),l=e?sf:n?nf:tf;return!n&&xt(a,"iterate",pi),o.forEach((c,u)=>i.call(s,l(c),l(u),r))}}function so(n,e,t){return function(...i){const s=this.__v_raw,r=ne(s),o=Js(r),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=s[n](...i),u=t?sf:e?nf:tf;return!e&&xt(r,"iterate",l?Ou:pi),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function on(n){return function(...e){{const t=e[0]?`on key "${e[0]}" `:"";console.warn(`${JA(n)} operation ${t}failed: target is readonly.`,ne(this))}return n==="delete"?!1:this}}function gk(){const n={get(r){return eo(this,r)},get size(){return no(this)},has:to,add:Oh,set:Rh,delete:Ph,clear:Nh,forEach:io(!1,!1)},e={get(r){return eo(this,r,!1,!0)},get size(){return no(this)},has:to,add:Oh,set:Rh,delete:Ph,clear:Nh,forEach:io(!1,!0)},t={get(r){return eo(this,r,!0)},get size(){return no(this,!0)},has(r){return to.call(this,r,!0)},add:on("add"),set:on("set"),delete:on("delete"),clear:on("clear"),forEach:io(!0,!1)},i={get(r){return eo(this,r,!0,!0)},get size(){return no(this,!0)},has(r){return to.call(this,r,!0)},add:on("add"),set:on("set"),delete:on("delete"),clear:on("clear"),forEach:io(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=so(r,!1,!1),t[r]=so(r,!0,!1),e[r]=so(r,!1,!0),i[r]=so(r,!0,!0)}),[n,t,e,i]}var[mk,bk,XH,eV]=gk();function Jy(n,e){const t=n?bk:mk;return(i,s,r)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(Ol(t,s)&&s in i?t:i,s,r)}var yk={get:Jy(!1)},vk={get:Jy(!0)};function Qy(n,e,t){const i=ne(t);if(i!==t&&e.call(n,i)){const s=Uy(n);console.warn(`Reactive ${s} contains both the raw and reactive versions of the same object${s==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var Zy=new WeakMap,xk=new WeakMap,Xy=new WeakMap,_k=new WeakMap;function Sk(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wk(n){return n.__v_skip||!Object.isExtensible(n)?0:Sk(Uy(n))}function rf(n){return n&&n.__v_isReadonly?n:t0(n,!1,hk,yk,Zy)}function e0(n){return t0(n,!0,pk,vk,Xy)}function t0(n,e,t,i,s){if(!Rl(n))return console.warn(`value cannot be made reactive: ${String(n)}`),n;if(n.__v_raw&&!(e&&n.__v_isReactive))return n;const r=s.get(n);if(r)return r;const o=wk(n);if(o===0)return n;const a=new Proxy(n,o===2?i:t);return s.set(n,a),a}function ne(n){return n&&ne(n.__v_raw)||n}function Ru(n){return!!(n&&n.__v_isRef===!0)}At("nextTick",()=>Jd);At("dispatch",n=>Ys.bind(Ys,n));At("watch",(n,{evaluateLater:e,cleanup:t})=>(i,s)=>{let r=e(i),a=Zb(()=>{let l;return r(c=>l=c),l},s);t(a)});At("store",FA);At("data",n=>oy(n));At("root",n=>Ml(n));At("refs",n=>(n._x_refs_proxy||(n._x_refs_proxy=Hr(Ak(n))),n._x_refs_proxy));function Ak(n){let e=[];return Vr(n,t=>{t._x_refs&&e.push(t._x_refs)}),e}var cc={};function n0(n){return cc[n]||(cc[n]=0),++cc[n]}function kk(n,e){return Vr(n,t=>{if(t._x_ids&&t._x_ids[e])return!0})}function Ek(n,e){n._x_ids||(n._x_ids={}),n._x_ids[e]||(n._x_ids[e]=n0(e))}At("id",(n,{cleanup:e})=>(t,i=null)=>{let s=`${t}${i?`-${i}`:""}`;return Ck(n,s,e,()=>{let r=kk(n,t),o=r?r._x_ids[t]:n0(t);return i?`${t}-${o}-${i}`:`${t}-${o}`})});Dl((n,e)=>{n._x_id&&(e._x_id=n._x_id)});function Ck(n,e,t,i){if(n._x_id||(n._x_id={}),n._x_id[e])return n._x_id[e];let s=i();return n._x_id[e]=s,t(()=>{delete n._x_id[e]}),s}At("el",n=>n);i0("Focus","focus","focus");i0("Persist","persist","persist");function i0(n,e,t){At(e,i=>ct(`You can't use [$${e}] without first installing the "${n}" plugin here: https://alpinejs.dev/plugins/${t}`,i))}be("modelable",(n,{expression:e},{effect:t,evaluateLater:i,cleanup:s})=>{let r=i(e),o=()=>{let u;return r(d=>u=d),u},a=i(`${e} = __placeholder`),l=u=>a(()=>{},{scope:{__placeholder:u}}),c=o();l(c),queueMicrotask(()=>{if(!n._x_model)return;n._x_removeModelListeners.default();let u=n._x_model.get,d=n._x_model.set,f=zy({get(){return u()},set(h){d(h)}},{get(){return o()},set(h){l(h)}});s(f)})});be("teleport",(n,{modifiers:e,expression:t},{cleanup:i})=>{n.tagName.toLowerCase()!=="template"&&ct("x-teleport can only be used on a <template> tag",n);let s=Ih(t),r=n.content.cloneNode(!0).firstElementChild;n._x_teleport=r,r._x_teleportBack=n,n.setAttribute("data-teleport-template",!0),r.setAttribute("data-teleport-target",!0),n._x_forwardEvents&&n._x_forwardEvents.forEach(a=>{r.addEventListener(a,l=>{l.stopPropagation(),n.dispatchEvent(new l.constructor(l.type,l))})}),zr(r,{},n);let o=(a,l,c)=>{c.includes("prepend")?l.parentNode.insertBefore(a,l):c.includes("append")?l.parentNode.insertBefore(a,l.nextSibling):l.appendChild(a)};ve(()=>{o(r,s,e),Bn(()=>{Xt(r),r._x_ignore=!0})()}),n._x_teleportPutBack=()=>{let a=Ih(t);ve(()=>{o(n._x_teleport,a,e)})},i(()=>r.remove())});var Mk=document.createElement("div");function Ih(n){let e=Bn(()=>document.querySelector(n),()=>Mk)();return e||ct(`Cannot find x-teleport element for selector: "${n}"`),e}var s0=()=>{};s0.inline=(n,{modifiers:e},{cleanup:t})=>{e.includes("self")?n._x_ignoreSelf=!0:n._x_ignore=!0,t(()=>{e.includes("self")?delete n._x_ignoreSelf:delete n._x_ignore})};be("ignore",s0);be("effect",Bn((n,{expression:e},{effect:t})=>{t(We(n,e))}));function Pu(n,e,t,i){let s=n,r=l=>i(l),o={},a=(l,c)=>u=>c(l,u);if(t.includes("dot")&&(e=Tk(e)),t.includes("camel")&&(e=Dk(e)),t.includes("passive")&&(o.passive=!0),t.includes("capture")&&(o.capture=!0),t.includes("window")&&(s=window),t.includes("document")&&(s=document),t.includes("debounce")){let l=t[t.indexOf("debounce")+1]||"invalid-wait",c=fa(l.split("ms")[0])?Number(l.split("ms")[0]):250;r=By(r,c)}if(t.includes("throttle")){let l=t[t.indexOf("throttle")+1]||"invalid-wait",c=fa(l.split("ms")[0])?Number(l.split("ms")[0]):250;r=Fy(r,c)}return t.includes("prevent")&&(r=a(r,(l,c)=>{c.preventDefault(),l(c)})),t.includes("stop")&&(r=a(r,(l,c)=>{c.stopPropagation(),l(c)})),t.includes("once")&&(r=a(r,(l,c)=>{l(c),s.removeEventListener(e,r,o)})),(t.includes("away")||t.includes("outside"))&&(s=document,r=a(r,(l,c)=>{n.contains(c.target)||c.target.isConnected!==!1&&(n.offsetWidth<1&&n.offsetHeight<1||n._x_isShown!==!1&&l(c))})),t.includes("self")&&(r=a(r,(l,c)=>{c.target===n&&l(c)})),r=a(r,(l,c)=>{Rk(e)&&Pk(c,t)||l(c)}),s.addEventListener(e,r,o),()=>{s.removeEventListener(e,r,o)}}function Tk(n){return n.replace(/-/g,".")}function Dk(n){return n.toLowerCase().replace(/-(\w)/g,(e,t)=>t.toUpperCase())}function fa(n){return!Array.isArray(n)&&!isNaN(n)}function Ok(n){return[" ","_"].includes(n)?n:n.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Rk(n){return["keydown","keyup"].includes(n)}function Pk(n,e){let t=e.filter(r=>!["window","document","prevent","stop","once","capture"].includes(r));if(t.includes("debounce")){let r=t.indexOf("debounce");t.splice(r,fa((t[r+1]||"invalid-wait").split("ms")[0])?2:1)}if(t.includes("throttle")){let r=t.indexOf("throttle");t.splice(r,fa((t[r+1]||"invalid-wait").split("ms")[0])?2:1)}if(t.length===0||t.length===1&&Lh(n.key).includes(t[0]))return!1;const s=["ctrl","shift","alt","meta","cmd","super"].filter(r=>t.includes(r));return t=t.filter(r=>!s.includes(r)),!(s.length>0&&s.filter(o=>((o==="cmd"||o==="super")&&(o="meta"),n[`${o}Key`])).length===s.length&&Lh(n.key).includes(t[0]))}function Lh(n){if(!n)return[];n=Ok(n);let e={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return e[n]=n,Object.keys(e).map(t=>{if(e[t]===n)return t}).filter(t=>t)}be("model",(n,{modifiers:e,expression:t},{effect:i,cleanup:s})=>{let r=n;e.includes("parent")&&(r=n.parentNode);let o=We(r,t),a;typeof t=="string"?a=We(r,`${t} = __placeholder`):typeof t=="function"&&typeof t()=="string"?a=We(r,`${t()} = __placeholder`):a=()=>{};let l=()=>{let f;return o(h=>f=h),Bh(f)?f.get():f},c=f=>{let h;o(p=>h=p),Bh(h)?h.set(f):a(()=>{},{scope:{__placeholder:f}})};typeof t=="string"&&n.type==="radio"&&ve(()=>{n.hasAttribute("name")||n.setAttribute("name",t)});var u=n.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(n.type)||e.includes("lazy")?"change":"input";let d=Dn?()=>{}:Pu(n,u,e,f=>{c(uc(n,e,f,l()))});if(e.includes("fill")&&([void 0,null,""].includes(l())||n.type==="checkbox"&&Array.isArray(l())||n.tagName.toLowerCase()==="select"&&n.multiple)&&c(uc(n,e,{target:n},l())),n._x_removeModelListeners||(n._x_removeModelListeners={}),n._x_removeModelListeners.default=d,s(()=>n._x_removeModelListeners.default()),n.form){let f=Pu(n.form,"reset",[],h=>{Jd(()=>n._x_model&&n._x_model.set(uc(n,e,{target:n},l())))});s(()=>f())}n._x_model={get(){return l()},set(f){c(f)}},n._x_forceModelUpdate=f=>{f===void 0&&typeof t=="string"&&t.match(/\./)&&(f=""),window.fromModel=!0,ve(()=>Py(n,"value",f)),delete window.fromModel},i(()=>{let f=l();e.includes("unintrusive")&&document.activeElement.isSameNode(n)||n._x_forceModelUpdate(f)})});function uc(n,e,t,i){return ve(()=>{if(t instanceof CustomEvent&&t.detail!==void 0)return t.detail!==null&&t.detail!==void 0?t.detail:t.target.value;if(n.type==="checkbox")if(Array.isArray(i)){let s=null;return e.includes("number")?s=dc(t.target.value):e.includes("boolean")?s=jo(t.target.value):s=t.target.value,t.target.checked?i.includes(s)?i:i.concat([s]):i.filter(r=>!Nk(r,s))}else return t.target.checked;else{if(n.tagName.toLowerCase()==="select"&&n.multiple)return e.includes("number")?Array.from(t.target.selectedOptions).map(s=>{let r=s.value||s.text;return dc(r)}):e.includes("boolean")?Array.from(t.target.selectedOptions).map(s=>{let r=s.value||s.text;return jo(r)}):Array.from(t.target.selectedOptions).map(s=>s.value||s.text);{let s;return n.type==="radio"?t.target.checked?s=t.target.value:s=i:s=t.target.value,e.includes("number")?dc(s):e.includes("boolean")?jo(s):e.includes("trim")?s.trim():s}}})}function dc(n){let e=n?parseFloat(n):null;return Ik(e)?e:n}function Nk(n,e){return n==e}function Ik(n){return!Array.isArray(n)&&!isNaN(n)}function Bh(n){return n!==null&&typeof n=="object"&&typeof n.get=="function"&&typeof n.set=="function"}be("cloak",n=>queueMicrotask(()=>ve(()=>n.removeAttribute(As("cloak")))));Ey(()=>`[${As("init")}]`);be("init",Bn((n,{expression:e},{evaluate:t})=>typeof e=="string"?!!e.trim()&&t(e,{},!1):t(e,{},!1)));be("text",(n,{expression:e},{effect:t,evaluateLater:i})=>{let s=i(e);t(()=>{s(r=>{ve(()=>{n.textContent=r})})})});be("html",(n,{expression:e},{effect:t,evaluateLater:i})=>{let s=i(e);t(()=>{s(r=>{ve(()=>{n.innerHTML=r,n._x_ignoreSelf=!0,Xt(n),delete n._x_ignoreSelf})})})});Gd(my(":",by(As("bind:"))));var r0=(n,{value:e,modifiers:t,expression:i,original:s},{effect:r,cleanup:o})=>{if(!e){let l={};HA(l),We(n,i)(u=>{Vy(n,u,s)},{scope:l});return}if(e==="key")return Lk(n,i);if(n._x_inlineBindings&&n._x_inlineBindings[e]&&n._x_inlineBindings[e].extract)return;let a=We(n,i);r(()=>a(l=>{l===void 0&&typeof i=="string"&&i.match(/\./)&&(l=""),ve(()=>Py(n,e,l,t))})),o(()=>{n._x_undoAddedClasses&&n._x_undoAddedClasses(),n._x_undoAddedStyles&&n._x_undoAddedStyles()})};r0.inline=(n,{value:e,modifiers:t,expression:i})=>{e&&(n._x_inlineBindings||(n._x_inlineBindings={}),n._x_inlineBindings[e]={expression:i,extract:!1})};be("bind",r0);function Lk(n,e){n._x_keyExpression=e}ky(()=>`[${As("data")}]`);be("data",(n,{expression:e},{cleanup:t})=>{if(Bk(n))return;e=e===""?"{}":e;let i={};Su(i,n);let s={};jA(s,i);let r=fi(n,e,{scope:s});(r===void 0||r===!0)&&(r={}),Su(r,n);let o=Ss(r);ay(o);let a=zr(n,o);o.init&&fi(n,o.init),t(()=>{o.destroy&&fi(n,o.destroy),a()})});Dl((n,e)=>{n._x_dataStack&&(e._x_dataStack=n._x_dataStack,e.setAttribute("data-has-alpine-state",!0))});function Bk(n){return Dn?Tu?!0:n.hasAttribute("data-has-alpine-state"):!1}be("show",(n,{modifiers:e,expression:t},{effect:i})=>{let s=We(n,t);n._x_doHide||(n._x_doHide=()=>{ve(()=>{n.style.setProperty("display","none",e.includes("important")?"important":void 0)})}),n._x_doShow||(n._x_doShow=()=>{ve(()=>{n.style.length===1&&n.style.display==="none"?n.removeAttribute("style"):n.style.removeProperty("display")})});let r=()=>{n._x_doHide(),n._x_isShown=!1},o=()=>{n._x_doShow(),n._x_isShown=!0},a=()=>setTimeout(o),l=Cu(d=>d?o():r(),d=>{typeof n._x_toggleAndCascadeWithTransitions=="function"?n._x_toggleAndCascadeWithTransitions(n,d,o,r):d?a():r()}),c,u=!0;i(()=>s(d=>{!u&&d===c||(e.includes("immediate")&&(d?a():r()),l(d),c=d,u=!1)}))});be("for",(n,{expression:e},{effect:t,cleanup:i})=>{let s=zk(e),r=We(n,s.items),o=We(n,n._x_keyExpression||"index");n._x_prevKeys=[],n._x_lookup={},t(()=>Fk(n,s,r,o)),i(()=>{Object.values(n._x_lookup).forEach(a=>a.remove()),delete n._x_prevKeys,delete n._x_lookup})});function Fk(n,e,t,i){let s=o=>typeof o=="object"&&!Array.isArray(o),r=n;t(o=>{Hk(o)&&o>=0&&(o=Array.from(Array(o).keys(),m=>m+1)),o===void 0&&(o=[]);let a=n._x_lookup,l=n._x_prevKeys,c=[],u=[];if(s(o))o=Object.entries(o).map(([m,b])=>{let y=Fh(e,b,m,o);i(v=>{u.includes(v)&&ct("Duplicate key on x-for",n),u.push(v)},{scope:{index:m,...y}}),c.push(y)});else for(let m=0;m<o.length;m++){let b=Fh(e,o[m],m,o);i(y=>{u.includes(y)&&ct("Duplicate key on x-for",n),u.push(y)},{scope:{index:m,...b}}),c.push(b)}let d=[],f=[],h=[],p=[];for(let m=0;m<l.length;m++){let b=l[m];u.indexOf(b)===-1&&h.push(b)}l=l.filter(m=>!h.includes(m));let g="template";for(let m=0;m<u.length;m++){let b=u[m],y=l.indexOf(b);if(y===-1)l.splice(m,0,b),d.push([g,m]);else if(y!==m){let v=l.splice(m,1)[0],x=l.splice(y-1,1)[0];l.splice(m,0,x),l.splice(y,0,v),f.push([v,x])}else p.push(b);g=b}for(let m=0;m<h.length;m++){let b=h[m];a[b]._x_effects&&a[b]._x_effects.forEach(Jb),a[b].remove(),a[b]=null,delete a[b]}for(let m=0;m<f.length;m++){let[b,y]=f[m],v=a[b],x=a[y],_=document.createElement("div");ve(()=>{x||ct('x-for ":key" is undefined or invalid',r,y,a),x.after(_),v.after(x),x._x_currentIfEl&&x.after(x._x_currentIfEl),_.before(v),v._x_currentIfEl&&v.after(v._x_currentIfEl),_.remove()}),x._x_refreshXForScope(c[u.indexOf(y)])}for(let m=0;m<d.length;m++){let[b,y]=d[m],v=b==="template"?r:a[b];v._x_currentIfEl&&(v=v._x_currentIfEl);let x=c[y],_=u[y],S=document.importNode(r.content,!0).firstElementChild,E=Ss(x);zr(S,E,r),S._x_refreshXForScope=C=>{Object.entries(C).forEach(([T,N])=>{E[T]=N})},ve(()=>{v.after(S),Bn(()=>Xt(S))()}),typeof _=="object"&&ct("x-for key cannot be an object, it must be a string or an integer",r),a[_]=S}for(let m=0;m<p.length;m++)a[p[m]]._x_refreshXForScope(c[u.indexOf(p[m])]);r._x_prevKeys=u})}function zk(n){let e=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,t=/^\s*\(|\)\s*$/g,i=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,s=n.match(i);if(!s)return;let r={};r.items=s[2].trim();let o=s[1].replace(t,"").trim(),a=o.match(e);return a?(r.item=o.replace(e,"").trim(),r.index=a[1].trim(),a[2]&&(r.collection=a[2].trim())):r.item=o,r}function Fh(n,e,t,i){let s={};return/^\[.*\]$/.test(n.item)&&Array.isArray(e)?n.item.replace("[","").replace("]","").split(",").map(o=>o.trim()).forEach((o,a)=>{s[o]=e[a]}):/^\{.*\}$/.test(n.item)&&!Array.isArray(e)&&typeof e=="object"?n.item.replace("{","").replace("}","").split(",").map(o=>o.trim()).forEach(o=>{s[o]=e[o]}):s[n.item]=e,n.index&&(s[n.index]=t),n.collection&&(s[n.collection]=i),s}function Hk(n){return!Array.isArray(n)&&!isNaN(n)}function o0(){}o0.inline=(n,{expression:e},{cleanup:t})=>{let i=Ml(n);i._x_refs||(i._x_refs={}),i._x_refs[e]=n,t(()=>delete i._x_refs[e])};be("ref",o0);be("if",(n,{expression:e},{effect:t,cleanup:i})=>{n.tagName.toLowerCase()!=="template"&&ct("x-if can only be used on a <template> tag",n);let s=We(n,e),r=()=>{if(n._x_currentIfEl)return n._x_currentIfEl;let a=n.content.cloneNode(!0).firstElementChild;return zr(a,{},n),ve(()=>{n.after(a),Bn(()=>Xt(a))()}),n._x_currentIfEl=a,n._x_undoIf=()=>{Tn(a,l=>{l._x_effects&&l._x_effects.forEach(Jb)}),a.remove(),delete n._x_currentIfEl},a},o=()=>{n._x_undoIf&&(n._x_undoIf(),delete n._x_undoIf)};t(()=>s(a=>{a?r():o()})),i(()=>n._x_undoIf&&n._x_undoIf())});be("id",(n,{expression:e},{evaluate:t})=>{t(e).forEach(s=>Ek(n,s))});Dl((n,e)=>{n._x_ids&&(e._x_ids=n._x_ids)});Gd(my("@",by(As("on:"))));be("on",Bn((n,{value:e,modifiers:t,expression:i},{cleanup:s})=>{let r=i?We(n,i):()=>{};n.tagName.toLowerCase()==="template"&&(n._x_forwardEvents||(n._x_forwardEvents=[]),n._x_forwardEvents.includes(e)||n._x_forwardEvents.push(e));let o=Pu(n,e,t,a=>{r(()=>{},{scope:{$event:a},params:[a]})});s(()=>o())}));Nl("Collapse","collapse","collapse");Nl("Intersect","intersect","intersect");Nl("Focus","trap","focus");Nl("Mask","mask","mask");function Nl(n,e,t){be(e,i=>ct(`You can't use [x-${e}] without first installing the "${n}" plugin here: https://alpinejs.dev/plugins/${t}`,i))}jr.setEvaluator(fy);jr.setReactivityEngine({reactive:rf,effect:ZA,release:XA,raw:ne});var Vk=jr,_e=Vk;const jk=n=>[];function Te(n){this.content=n}Te.prototype={constructor:Te,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var i=t&&t!=n?this.remove(t):this,s=i.find(n),r=i.content.slice();return s==-1?r.push(t||n,e):(r[s+1]=e,t&&(r[s]=t)),new Te(r)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Te(t)},addToStart:function(n,e){return new Te([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Te(t)},addBefore:function(n,e,t){var i=this.remove(e),s=i.content.slice(),r=i.find(n);return s.splice(r==-1?s.length:r,0,e,t),new Te(s)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Te.from(n),n.size?new Te(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Te.from(n),n.size?new Te(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Te.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Te.from=function(n){if(n instanceof Te)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Te(e)};function a0(n,e,t){for(let i=0;;i++){if(i==n.childCount||i==e.childCount)return n.childCount==e.childCount?null:t;let s=n.child(i),r=e.child(i);if(s==r){t+=s.nodeSize;continue}if(!s.sameMarkup(r))return t;if(s.isText&&s.text!=r.text){for(let o=0;s.text[o]==r.text[o];o++)t++;return t}if(s.content.size||r.content.size){let o=a0(s.content,r.content,t+1);if(o!=null)return o}t+=s.nodeSize}}function l0(n,e,t,i){for(let s=n.childCount,r=e.childCount;;){if(s==0||r==0)return s==r?null:{a:t,b:i};let o=n.child(--s),a=e.child(--r),l=o.nodeSize;if(o==a){t-=l,i-=l;continue}if(!o.sameMarkup(a))return{a:t,b:i};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,i--;return{a:t,b:i}}if(o.content.size||a.content.size){let c=l0(o.content,a.content,t-1,i-1);if(c)return c}t-=l,i-=l}}class M{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,t,i,s=0,r){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&i(l,s+a,r||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),i,s+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,i,s){let r="",o=!0;return this.nodesBetween(e,t,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&i&&(o?o=!1:r+=i),r+=c},0),r}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,i=e.firstChild,s=this.content.slice(),r=0;for(t.isText&&t.sameMarkup(i)&&(s[s.length-1]=t.withText(t.text+i.text),r=1);r<e.content.length;r++)s.push(e.content[r]);return new M(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let i=[],s=0;if(t>e)for(let r=0,o=0;o<t;r++){let a=this.content[r],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),i.push(a),s+=a.nodeSize),o=l}return new M(i,s)}cutByIndex(e,t){return e==t?M.empty:e==0&&t==this.content.length?this:new M(this.content.slice(e,t))}replaceChild(e,t){let i=this.content[e];if(i==t)return this;let s=this.content.slice(),r=this.size+t.nodeSize-i.nodeSize;return s[e]=t,new M(s,r)}addToStart(e){return new M([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new M(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,i=0;t<this.content.length;t++){let s=this.content[t];e(s,i,t),i+=s.nodeSize}}findDiffStart(e,t=0){return a0(this,e,t)}findDiffEnd(e,t=this.size,i=e.size){return l0(this,e,t,i)}findIndex(e,t=-1){if(e==0)return ro(0,e);if(e==this.size)return ro(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let i=0,s=0;;i++){let r=this.child(i),o=s+r.nodeSize;if(o>=e)return o==e||t>0?ro(i+1,o):ro(i,s);s=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return M.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new M(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return M.empty;let t,i=0;for(let s=0;s<e.length;s++){let r=e[s];i+=r.nodeSize,s&&r.isText&&e[s-1].sameMarkup(r)?(t||(t=e.slice(0,s)),t[t.length-1]=r.withText(t[t.length-1].text+r.text)):t&&t.push(r)}return new M(t||e,i)}static from(e){if(!e)return M.empty;if(e instanceof M)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new M([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}M.empty=new M([],0);const fc={index:0,offset:0};function ro(n,e){return fc.index=n,fc.offset=e,fc}function ha(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!ha(n[i],e[i]))return!1}else{for(let i in n)if(!(i in e)||!ha(n[i],e[i]))return!1;for(let i in e)if(!(i in n))return!1}return!0}let X=class Nu{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,i=!1;for(let s=0;s<e.length;s++){let r=e[s];if(this.eq(r))return e;if(this.type.excludes(r.type))t||(t=e.slice(0,s));else{if(r.type.excludes(this.type))return e;!i&&r.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),i=!0),t&&t.push(r)}}return t||(t=e.slice()),i||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&ha(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let i=e.marks[t.type];if(!i)throw new RangeError(`There is no mark type ${t.type} in this schema`);return i.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].eq(t[i]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Nu.none;if(e instanceof Nu)return[e];let t=e.slice();return t.sort((i,s)=>i.type.rank-s.type.rank),t}};X.none=[];class pa extends Error{}class R{constructor(e,t,i){this.content=e,this.openStart=t,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let i=u0(this.content,e+this.openStart,t);return i&&new R(i,this.openStart,this.openEnd)}removeBetween(e,t){return new R(c0(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return R.empty;let i=t.openStart||0,s=t.openEnd||0;if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new R(M.fromJSON(e,t.content),i,s)}static maxOpen(e,t=!0){let i=0,s=0;for(let r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)i++;for(let r=e.lastChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.lastChild)s++;return new R(e,i,s)}}R.empty=new R(M.empty,0,0);function c0(n,e,t){let{index:i,offset:s}=n.findIndex(e),r=n.maybeChild(i),{index:o,offset:a}=n.findIndex(t);if(s==e||r.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(i!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(i,r.copy(c0(r.content,e-s-1,t-s-1)))}function u0(n,e,t,i){let{index:s,offset:r}=n.findIndex(e),o=n.maybeChild(s);if(r==e||o.isText)return n.cut(0,e).append(t).append(n.cut(e));let a=u0(o.content,e-r-1,t);return a&&n.replaceChild(s,o.copy(a))}function Wk(n,e,t){if(t.openStart>n.depth)throw new pa("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new pa("Inconsistent open depths");return d0(n,e,t,0)}function d0(n,e,t,i){let s=n.index(i),r=n.node(i);if(s==e.index(i)&&i<n.depth-t.openStart){let o=d0(n,e,t,i+1);return r.copy(r.content.replaceChild(s,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==i&&e.depth==i){let o=n.parent,a=o.content;return mi(o,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=Uk(t,n);return mi(r,h0(n,o,a,e,i))}else return mi(r,ga(n,e,i))}function f0(n,e){if(!e.type.compatibleContent(n.type))throw new pa("Cannot join "+e.type.name+" onto "+n.type.name)}function Iu(n,e,t){let i=n.node(t);return f0(i,e.node(t)),i}function gi(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Qs(n,e,t,i){let s=(e||n).node(t),r=0,o=e?e.index(t):s.childCount;n&&(r=n.index(t),n.depth>t?r++:n.textOffset&&(gi(n.nodeAfter,i),r++));for(let a=r;a<o;a++)gi(s.child(a),i);e&&e.depth==t&&e.textOffset&&gi(e.nodeBefore,i)}function mi(n,e){return n.type.checkContent(e),n.copy(e)}function h0(n,e,t,i,s){let r=n.depth>s&&Iu(n,e,s+1),o=i.depth>s&&Iu(t,i,s+1),a=[];return Qs(null,n,s,a),r&&o&&e.index(s)==t.index(s)?(f0(r,o),gi(mi(r,h0(n,e,t,i,s+1)),a)):(r&&gi(mi(r,ga(n,e,s+1)),a),Qs(e,t,s,a),o&&gi(mi(o,ga(t,i,s+1)),a)),Qs(i,null,s,a),new M(a)}function ga(n,e,t){let i=[];if(Qs(null,n,t,i),n.depth>t){let s=Iu(n,e,t+1);gi(mi(s,ga(n,e,t+1)),i)}return Qs(e,null,t,i),new M(i)}function Uk(n,e){let t=e.depth-n.openStart,s=e.node(t).copy(n.content);for(let r=t-1;r>=0;r--)s=e.node(r).copy(M.from(s));return{start:s.resolveNoCache(n.openStart+t),end:s.resolveNoCache(s.content.size-n.openEnd-t)}}class gr{constructor(e,t,i){this.pos=e,this.path=t,this.parentOffset=i,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],s=e.child(t);return i?e.child(t).cut(i):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let i=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let r=0;r<e;r++)s+=i.child(r).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return X.none;if(this.textOffset)return e.child(t).marks;let i=e.maybeChild(t-1),s=e.maybeChild(t);if(!i){let a=i;i=s,s=a}let r=i.marks;for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let i=t.marks,s=e.parent.maybeChild(e.index());for(var r=0;r<i.length;r++)i[r].type.spec.inclusive===!1&&(!s||!i[r].isInSet(s.marks))&&(i=i[r--].removeFromSet(i));return i}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!t||t(this.node(i))))return new ma(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let i=[],s=0,r=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(r),c=r-l;if(i.push(o,a,s+l),!c||(o=o.child(a),o.isText))break;r=c-1,s+=l+1}return new gr(t,i,r)}static resolveCached(e,t){for(let s=0;s<hc.length;s++){let r=hc[s];if(r.pos==t&&r.doc==e)return r}let i=hc[pc]=gr.resolve(e,t);return pc=(pc+1)%$k,i}}let hc=[],pc=0,$k=12;class ma{constructor(e,t,i){this.$from=e,this.$to=t,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const qk=Object.create(null);let bi=class Lu{constructor(e,t,i,s=X.none){this.type=e,this.attrs=t,this.marks=s,this.content=i||M.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,i,s=0){this.content.nodesBetween(e,t,i,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,i,s){return this.content.textBetween(e,t,i,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,i){return this.type==e&&ha(this.attrs,t||e.defaultAttrs||qk)&&X.sameSet(this.marks,i||X.none)}copy(e=null){return e==this.content?this:new Lu(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Lu(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,i=!1){if(e==t)return R.empty;let s=this.resolve(e),r=this.resolve(t),o=i?0:s.sharedDepth(t),a=s.start(o),c=s.node(o).content.cut(s.pos-a,r.pos-a);return new R(c,s.depth-o,r.depth-o)}replace(e,t,i){return Wk(this.resolve(e),this.resolve(t),i)}nodeAt(e){for(let t=this;;){let{index:i,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(i),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:i}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(t),index:t,offset:i};let s=this.content.child(t-1);return{node:s,index:t-1,offset:i-s.nodeSize}}resolve(e){return gr.resolveCached(this,e)}resolveNoCache(e){return gr.resolve(this,e)}rangeHasMark(e,t,i){let s=!1;return t>e&&this.nodesBetween(e,t,r=>(i.isInSet(r.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),p0(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,i=M.empty,s=0,r=i.childCount){let o=this.contentMatchAt(e).matchFragment(i,s,r),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=s;l<r;l++)if(!this.type.allowsMarks(i.child(l).marks))return!1;return!0}canReplaceWith(e,t,i,s){if(s&&!this.type.allowsMarks(s))return!1;let r=this.contentMatchAt(e).matchType(i),o=r&&r.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=X.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!X.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let i=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,i)}let s=M.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,s,i)}};bi.prototype.text=void 0;class ba extends bi{constructor(e,t,i,s){if(super(e,t,null,s),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):p0(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new ba(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new ba(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function p0(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Ai{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let i=new Gk(e,t);if(i.next==null)return Ai.empty;let s=g0(i);i.next&&i.err("Unexpected trailing text");let r=eE(Xk(s));return tE(r,i),r}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,i=e.childCount){let s=this;for(let r=t;s&&r<i;r++)s=s.matchType(e.child(r).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let i=0;i<e.next.length;i++)if(this.next[t].type==e.next[i].type)return!0;return!1}fillBefore(e,t=!1,i=0){let s=[this];function r(o,a){let l=o.matchFragment(e,i);if(l&&(!t||l.validEnd))return M.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(d)==-1){s.push(d);let f=r(d,a.concat(u));if(f)return f}}return null}return r(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let s=i.shift(),r=s.match;if(r.matchType(e)){let o=[];for(let a=s;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<r.next.length;o++){let{type:a,next:l}=r.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!s.type||l.validEnd)&&(i.push({match:a.contentMatch,type:a,via:s}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(i){e.push(i);for(let s=0;s<i.next.length;s++)e.indexOf(i.next[s].next)==-1&&t(i.next[s].next)}return t(this),e.map((i,s)=>{let r=s+(i.validEnd?"*":" ")+" ";for(let o=0;o<i.next.length;o++)r+=(o?", ":"")+i.next[o].type.name+"->"+e.indexOf(i.next[o].next);return r}).join(`
`)}}Ai.empty=new Ai(!0);class Gk{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function g0(n){let e=[];do e.push(Kk(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Kk(n){let e=[];do e.push(Yk(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Yk(n){let e=Zk(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=Jk(n,e);else break;return e}function zh(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function Jk(n,e){let t=zh(n),i=t;return n.eat(",")&&(n.next!="}"?i=zh(n):i=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:i,expr:e}}function Qk(n,e){let t=n.nodeTypes,i=t[e];if(i)return[i];let s=[];for(let r in t){let o=t[r];o.groups.indexOf(e)>-1&&s.push(o)}return s.length==0&&n.err("No node type or group '"+e+"' found"),s}function Zk(n){if(n.eat("(")){let e=g0(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=Qk(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Xk(n){let e=[[]];return s(r(n,0),t()),e;function t(){return e.push([])-1}function i(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function s(o,a){o.forEach(l=>l.to=a)}function r(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(r(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=r(o.exprs[l],a);if(l==o.exprs.length-1)return c;s(c,a=t())}else if(o.type=="star"){let l=t();return i(a,l),s(r(o.expr,l),l),[i(l)]}else if(o.type=="plus"){let l=t();return s(r(o.expr,a),l),s(r(o.expr,l),l),[i(l)]}else{if(o.type=="opt")return[i(a)].concat(r(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=t();s(r(o.expr,l),u),l=u}if(o.max==-1)s(r(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=t();i(l,u),s(r(o.expr,l),u),l=u}return[i(l)]}else{if(o.type=="name")return[i(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function m0(n,e){return e-n}function Hh(n,e){let t=[];return i(e),t.sort(m0);function i(s){let r=n[s];if(r.length==1&&!r[0].term)return i(r[0].to);t.push(s);for(let o=0;o<r.length;o++){let{term:a,to:l}=r[o];!a&&t.indexOf(l)==-1&&i(l)}}}function eE(n){let e=Object.create(null);return t(Hh(n,0));function t(i){let s=[];i.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<s.length;u++)s[u][0]==a&&(c=s[u][1]);Hh(n,l).forEach(u=>{c||s.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let r=e[i.join(",")]=new Ai(i.indexOf(n.length-1)>-1);for(let o=0;o<s.length;o++){let a=s[o][1].sort(m0);r.next.push({type:s[o][0],next:e[a.join(",")]||t(a)})}return r}}function tE(n,e){for(let t=0,i=[n];t<i.length;t++){let s=i[t],r=!s.validEnd,o=[];for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];o.push(l.name),r&&!(l.isText||l.hasRequiredAttrs())&&(r=!1),i.indexOf(c)==-1&&i.push(c)}r&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function b0(n){let e=Object.create(null);for(let t in n){let i=n[t];if(!i.hasDefault)return null;e[t]=i.default}return e}function y0(n,e){let t=Object.create(null);for(let i in n){let s=e&&e[i];if(s===void 0){let r=n[i];if(r.hasDefault)s=r.default;else throw new RangeError("No value supplied for attribute "+i)}t[i]=s}return t}function v0(n){let e=Object.create(null);if(n)for(let t in n)e[t]=new nE(n[t]);return e}let Vh=class x0{constructor(e,t,i){this.name=e,this.schema=t,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=v0(i.attrs),this.defaultAttrs=b0(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ai.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:y0(this.attrs,e)}create(e=null,t,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new bi(this,this.computeAttrs(e),M.from(t),X.setFrom(i))}createChecked(e=null,t,i){return t=M.from(t),this.checkContent(t),new bi(this,this.computeAttrs(e),t,X.setFrom(i))}createAndFill(e=null,t,i){if(e=this.computeAttrs(e),t=M.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let s=this.contentMatch.matchFragment(t),r=s&&s.fillBefore(M.empty,!0);return r?new bi(this,e,t.append(r),X.setFrom(i)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?t&&t.push(e[i]):t||(t=e.slice(0,i));return t?t.length?t:X.none:e}static compile(e,t){let i=Object.create(null);e.forEach((r,o)=>i[r]=new x0(r,t,o));let s=t.spec.topNode||"doc";if(!i[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let r in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};class nE{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class Il{constructor(e,t,i,s){this.name=e,this.rank=t,this.schema=i,this.spec=s,this.attrs=v0(s.attrs),this.excluded=null;let r=b0(this.attrs);this.instance=r?new X(this,r):null}create(e=null){return!e&&this.instance?this.instance:new X(this,y0(this.attrs,e))}static compile(e,t){let i=Object.create(null),s=0;return e.forEach((r,o)=>i[r]=new Il(r,s++,t,o)),i}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class iE{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=Te.from(e.nodes),t.marks=Te.from(e.marks||{}),this.nodes=Vh.compile(this.spec.nodes,this),this.marks=Il.compile(this.spec.marks,this);let i=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let r=this.nodes[s],o=r.spec.content||"",a=r.spec.marks;if(r.contentMatch=i[o]||(i[o]=Ai.parse(o,this.nodes)),r.inlineContent=r.contentMatch.inlineContent,r.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!r.isInline||!r.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=r}r.markSet=a=="_"?null:a?jh(this,a.split(" ")):a==""||!r.inlineContent?[]:null}for(let s in this.marks){let r=this.marks[s],o=r.spec.excludes;r.excluded=o==null?[r]:o==""?[]:jh(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,i,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Vh){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,i,s)}text(e,t){let i=this.nodes.text;return new ba(i,i.defaultAttrs,e,X.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return bi.fromJSON(this,e)}markFromJSON(e){return X.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function jh(n,e){let t=[];for(let i=0;i<e.length;i++){let s=e[i],r=n.marks[s],o=r;if(r)t.push(r);else for(let a in n.marks){let l=n.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&t.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return t}function sE(n){return n.tag!=null}function rE(n){return n.style!=null}class as{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(i=>{sE(i)?this.tags.push(i):rE(i)&&this.styles.push(i)}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let i=new Uh(this,t,!1);return i.addAll(e,t.from,t.to),i.finish()}parseSlice(e,t={}){let i=new Uh(this,t,!0);return i.addAll(e,t.from,t.to),R.maxOpen(i.finish())}matchTag(e,t,i){for(let s=i?this.tags.indexOf(i)+1:0;s<this.tags.length;s++){let r=this.tags[s];if(lE(e,r.tag)&&(r.namespace===void 0||e.namespaceURI==r.namespace)&&(!r.context||t.matchesContext(r.context))){if(r.getAttrs){let o=r.getAttrs(e);if(o===!1)continue;r.attrs=o||void 0}return r}}}matchStyle(e,t,i,s){for(let r=s?this.styles.indexOf(s)+1:0;r<this.styles.length;r++){let o=this.styles[r],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!i.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function i(s){let r=s.priority==null?50:s.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<r)break}t.splice(o,0,s)}for(let s in e.marks){let r=e.marks[s].spec.parseDOM;r&&r.forEach(o=>{i(o=$h(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in e.nodes){let r=e.nodes[s].spec.parseDOM;r&&r.forEach(o=>{i(o=$h(o)),o.node||o.ignore||o.mark||(o.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new as(e,as.schemaRules(e)))}}const _0={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},oE={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},S0={ol:!0,ul:!0},ya=1,va=2,Zs=4;function Wh(n,e,t){return e!=null?(e?ya:0)|(e==="full"?va:0):n&&n.whitespace=="pre"?ya|va:t&~Zs}class oo{constructor(e,t,i,s,r,o,a){this.type=e,this.attrs=t,this.marks=i,this.pendingMarks=s,this.solid=r,this.options=a,this.content=[],this.activeMarks=X.none,this.stashMarks=[],this.match=o||(a&Zs?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(M.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let i=this.type.contentMatch,s;return(s=i.findWrapping(e.type))?(this.match=i,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ya)){let i=this.content[this.content.length-1],s;if(i&&i.isText&&(s=/[ \t\r\n\u000c]+$/.exec(i.text))){let r=i;i.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-s[0].length))}}let t=M.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(M.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,i=this.pendingMarks;t<i.length;t++){let s=i[t];(this.type?this.type.allowsMarkType(s.type):uE(s.type,e))&&!s.isInSet(this.activeMarks)&&(this.activeMarks=s.addToSet(this.activeMarks),this.pendingMarks=s.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!_0.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Uh{constructor(e,t,i){this.parser=e,this.options=t,this.isOpen=i,this.open=0;let s=t.topNode,r,o=Wh(null,t.preserveWhitespace,0)|(i?Zs:0);s?r=new oo(s.type,s.attrs,X.none,X.none,!0,t.topMatch||s.type.contentMatch,o):i?r=new oo(null,null,X.none,X.none,!0,null,o):r=new oo(e.schema.topNodeType,null,X.none,X.none,!0,null,o),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let i=e.getAttribute("style");if(!i)return t();let s=this.readStyles(cE(i));if(!s)return;let[r,o]=s,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<r.length;l++)this.addPendingMark(r[l]);t();for(let l=0;l<r.length;l++)this.removePendingMark(r[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let t=e.nodeValue,i=this.top;if(i.options&va||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(i.options&ya)i.options&va?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],r=e.previousSibling;(!s||r&&r.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let i=e.nodeName.toLowerCase(),s;S0.hasOwnProperty(i)&&this.parser.normalizeLists&&aE(e);let r=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,t));if(r?r.ignore:oE.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e);else if(!r||r.skip||r.closeParent){r&&r.closeParent?this.open=Math.max(0,this.open-1):r&&r.skip.nodeType&&(e=r.skip);let o,a=this.top,l=this.needsBlock;if(_0.hasOwnProperty(i))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}r&&r.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,r,r.consuming===!1?s:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=X.none,i=X.none;for(let s=0;s<e.length;s+=2)for(let r=void 0;;){let o=this.parser.matchStyle(e[s],e[s+1],this,r);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(i=a.addToSet(i))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)r=o;else break}return[t,i]}addElementByRule(e,t,i){let s,r,o;t.node?(r=this.parser.schema.nodes[t.node],r.isLeaf?this.insertNode(r.create(t.attrs))||this.leafFallback(e):s=this.enter(r,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let a=this.top;if(r&&r.isLeaf)this.findInside(e);else if(i)this.addElement(e,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l)}s&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,t,i){let s=t||0;for(let r=t?e.childNodes[t]:e.firstChild,o=i==null?null:e.childNodes[i];r!=o;r=r.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(r);this.findAtPoint(e,s)}findPlace(e){let t,i;for(let s=this.open;s>=0;s--){let r=this.nodes[s],o=r.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,i=r,!o.length)||r.solid)break}if(!t)return!1;this.sync(i);for(let s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let i=t.activeMarks;for(let s=0;s<e.marks.length;s++)(!t.type||t.type.allowsMarkType(e.marks[s].type))&&(i=e.marks[s].addToSet(i));return t.content.push(e.mark(i)),!0}return!1}enter(e,t,i){let s=this.findPlace(e.create(t));return s&&this.enterInner(e,t,!0,i),s}enterInner(e,t=null,i=!1,s){this.closeExtra();let r=this.top;r.applyPending(e),r.match=r.match&&r.match.matchType(e);let o=Wh(e,s,r.options);r.options&Zs&&r.content.length==0&&(o|=Zs),this.nodes.push(new oo(e,t,r.activeMarks,r.pendingMarks,i,null,o)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let i=this.nodes[t].content;for(let s=i.length-1;s>=0;s--)e+=i[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==t&&(this.find[i].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,i){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(i?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),i=this.options.context,s=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),r=-(i?i.depth+1:0)+(s?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=r;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&s?this.nodes[l].type:i&&l>=r?i.node(l-r).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let t in this.parser.schema.nodes){let i=this.parser.schema.nodes[t];if(i.isTextblock&&i.defaultAttrs)return i}}addPendingMark(e){let t=dE(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let i=this.open;i>=0;i--){let s=this.nodes[i];if(s.pendingMarks.lastIndexOf(e)>-1)s.pendingMarks=e.removeFromSet(s.pendingMarks);else{s.activeMarks=e.removeFromSet(s.activeMarks);let o=s.popFromStashMark(e);o&&s.type&&s.type.allowsMarkType(o.type)&&(s.activeMarks=o.addToSet(s.activeMarks))}if(s==t)break}}}function aE(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let i=e.nodeType==1?e.nodeName.toLowerCase():null;i&&S0.hasOwnProperty(i)&&t?(t.appendChild(e),e=t):i=="li"?t=e:i&&(t=null)}}function lE(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function cE(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,i=[];for(;t=e.exec(n);)i.push(t[1],t[2].trim());return i}function $h(n){let e={};for(let t in n)e[t]=n[t];return e}function uE(n,e){let t=e.schema.nodes;for(let i in t){let s=t[i];if(!s.allowsMarkType(n))continue;let r=[],o=a=>{r.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||r.indexOf(u)<0&&o(u))return!0}};if(o(s.contentMatch))return!0}}function dE(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}class It{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},i){i||(i=gc(t).createDocumentFragment());let s=i,r=[];return e.forEach(o=>{if(r.length||o.marks.length){let a=0,l=0;for(;a<r.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(r[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<r.length;)s=r.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,t);u&&(r.push([c,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(o,t))}),i}serializeNodeInner(e,t){let{dom:i,contentDOM:s}=It.renderSpec(gc(t),this.nodes[e.type.name](e));if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,s)}return i}serializeNode(e,t={}){let i=this.serializeNodeInner(e,t);for(let s=e.marks.length-1;s>=0;s--){let r=this.serializeMark(e.marks[s],e.isInline,t);r&&((r.contentDOM||r.dom).appendChild(i),i=r.dom)}return i}serializeMark(e,t,i={}){let s=this.marks[e.type.name];return s&&It.renderSpec(gc(i),s(e,t))}static renderSpec(e,t,i=null){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let s=t[0],r=s.indexOf(" ");r>0&&(i=s.slice(0,r),s=s.slice(r+1));let o,a=i?e.createElementNS(i,s):e.createElement(s),l=t[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let d=u.indexOf(" ");d>0?a.setAttributeNS(u.slice(0,d),u.slice(d+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<t.length;u++){let d=t[u];if(d===0){if(u<t.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:f,contentDOM:h}=It.renderSpec(e,d,i);if(a.appendChild(f),h){if(o)throw new RangeError("Multiple content holes");o=h}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new It(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=qh(e.nodes);return t.text||(t.text=i=>i.text),t}static marksFromSchema(e){return qh(e.marks)}}function qh(n){let e={};for(let t in n){let i=n[t].spec.toDOM;i&&(e[t]=i)}return e}function gc(n){return n.document||window.document}const w0=65535,A0=Math.pow(2,16);function fE(n,e){return n+e*A0}function Gh(n){return n&w0}function hE(n){return(n-(n&w0))/A0}const k0=1,E0=2,Wo=4,C0=8;class Bu{constructor(e,t,i){this.pos=e,this.delInfo=t,this.recover=i}get deleted(){return(this.delInfo&C0)>0}get deletedBefore(){return(this.delInfo&(k0|Wo))>0}get deletedAfter(){return(this.delInfo&(E0|Wo))>0}get deletedAcross(){return(this.delInfo&Wo)>0}}class it{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&it.empty)return it.empty}recover(e){let t=0,i=Gh(e);if(!this.inverted)for(let s=0;s<i;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[i*3]+t+hE(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,i){let s=0,r=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>e)break;let c=this.ranges[a+r],u=this.ranges[a+o],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:t:t,h=l+s+(f<0?0:u);if(i)return h;let p=e==(t<0?l:d)?null:fE(a/3,e-l),g=e==l?E0:e==d?k0:Wo;return(t<0?e!=l:e!=d)&&(g|=C0),new Bu(h,g,p)}s+=u-c}return i?e+s:new Bu(e+s,0,null)}touches(e,t){let i=0,s=Gh(t),r=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+r],u=l+c;if(e<=u&&a==s*3)return!0;i+=this.ranges[a+o]-c}return!1}forEach(e){let t=this.inverted?2:1,i=this.inverted?1:2;for(let s=0,r=0;s<this.ranges.length;s+=3){let o=this.ranges[s],a=o-(this.inverted?r:0),l=o+(this.inverted?0:r),c=this.ranges[s+t],u=this.ranges[s+i];e(a,a+c,l,l+u),r+=u-c}}invert(){return new it(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?it.empty:new it(e<0?[0,-e,0]:[0,0,e])}}it.empty=new it([]);class Qi{constructor(e=[],t,i=0,s=e.length){this.maps=e,this.mirror=t,this.from=i,this.to=s}slice(e=0,t=this.maps.length){return new Qi(this.maps,this.mirror,e,t)}copy(){return new Qi(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,i=this.maps.length;t<e.maps.length;t++){let s=e.getMirror(t);this.appendMap(e.maps[t],s!=null&&s<t?i+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,i=this.maps.length+e.maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e.maps[t].invert(),s!=null&&s>t?i-s-1:void 0)}}invert(){let e=new Qi;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let i=this.from;i<this.to;i++)e=this.maps[i].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,i){let s=0;for(let r=this.from;r<this.to;r++){let o=this.maps[r],a=o.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(r);if(l!=null&&l>r&&l<this.to){r=l,e=this.maps[l].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return i?e:new Bu(e,s,null)}}const mc=Object.create(null);class He{getMap(){return it.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=mc[t.stepType];if(!i)throw new RangeError(`No step type ${t.stepType} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in mc)throw new RangeError("Duplicate use of step JSON ID "+e);return mc[e]=t,t.prototype.jsonID=e,t}}class ge{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new ge(e,null)}static fail(e){return new ge(null,e)}static fromReplace(e,t,i,s){try{return ge.ok(e.replace(t,i,s))}catch(r){if(r instanceof pa)return ge.fail(r.message);throw r}}}function of(n,e,t){let i=[];for(let s=0;s<n.childCount;s++){let r=n.child(s);r.content.size&&(r=r.copy(of(r.content,e,r))),r.isInline&&(r=e(r,t,s)),i.push(r)}return M.fromArray(i)}class pn extends He{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=e.resolve(this.from),s=i.node(i.sharedDepth(this.to)),r=new R(of(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),t.openStart,t.openEnd);return ge.fromReplace(e,this.from,this.to,r)}invert(){return new Lt(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new pn(t.pos,i.pos,this.mark)}merge(e){return e instanceof pn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new pn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new pn(t.from,t.to,e.markFromJSON(t.mark))}}He.jsonID("addMark",pn);class Lt extends He{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=new R(of(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return ge.fromReplace(e,this.from,this.to,i)}invert(){return new pn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new Lt(t.pos,i.pos,this.mark)}merge(e){return e instanceof Lt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Lt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Lt(t.from,t.to,e.markFromJSON(t.mark))}}He.jsonID("removeMark",Lt);class gn extends He{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return ge.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return ge.fromReplace(e,this.pos,this.pos+1,new R(M.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let i=this.mark.addToSet(t.marks);if(i.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(i))return new gn(this.pos,t.marks[s]);return new gn(this.pos,this.mark)}}return new ls(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new gn(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new gn(t.pos,e.markFromJSON(t.mark))}}He.jsonID("addNodeMark",gn);class ls extends He{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return ge.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return ge.fromReplace(e,this.pos,this.pos+1,new R(M.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new gn(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ls(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ls(t.pos,e.markFromJSON(t.mark))}}He.jsonID("removeNodeMark",ls);class Se extends He{constructor(e,t,i,s=!1){super(),this.from=e,this.to=t,this.slice=i,this.structure=s}apply(e){return this.structure&&Fu(e,this.from,this.to)?ge.fail("Structure replace would overwrite content"):ge.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new it([this.from,this.to-this.from,this.slice.size])}invert(e){return new Se(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deletedAcross&&i.deletedAcross?null:new Se(t.pos,Math.max(t.pos,i.pos),this.slice)}merge(e){if(!(e instanceof Se)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?R.empty:new R(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Se(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?R.empty:new R(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Se(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Se(t.from,t.to,R.fromJSON(e,t.slice),!!t.structure)}}He.jsonID("replace",Se);class ke extends He{constructor(e,t,i,s,r,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=i,this.gapTo=s,this.slice=r,this.insert=o,this.structure=a}apply(e){if(this.structure&&(Fu(e,this.from,this.gapFrom)||Fu(e,this.gapTo,this.to)))return ge.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return ge.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,t.content);return i?ge.fromReplace(e,this.from,this.to,i):ge.fail("Content does not fit in gap")}getMap(){return new it([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ke(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),s=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),r=this.to==this.gapTo?i.pos:e.map(this.gapTo,1);return t.deletedAcross&&i.deletedAcross||s<t.pos||r>i.pos?null:new ke(t.pos,i.pos,s,r,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ke(t.from,t.to,t.gapFrom,t.gapTo,R.fromJSON(e,t.slice),t.insert,!!t.structure)}}He.jsonID("replaceAround",ke);function Fu(n,e,t){let i=n.resolve(e),s=t-e,r=i.depth;for(;s>0&&r>0&&i.indexAfter(r)==i.node(r).childCount;)r--,s--;if(s>0){let o=i.node(r).maybeChild(i.indexAfter(r));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function pE(n,e,t,i){let s=[],r=[],o,a;n.doc.nodesBetween(e,t,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!i.isInSet(d)&&u.type.allowsMarkType(i.type)){let f=Math.max(c,e),h=Math.min(c+l.nodeSize,t),p=i.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(p)||(o&&o.to==f&&o.mark.eq(d[g])?o.to=h:s.push(o=new Lt(f,h,d[g])));a&&a.to==f?a.to=h:r.push(a=new pn(f,h,i))}}),s.forEach(l=>n.step(l)),r.forEach(l=>n.step(l))}function gE(n,e,t,i){let s=[],r=0;n.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;r++;let l=null;if(i instanceof Il){let c=o.marks,u;for(;u=i.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else i?i.isInSet(o.marks)&&(l=[i]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,t);for(let u=0;u<l.length;u++){let d=l[u],f;for(let h=0;h<s.length;h++){let p=s[h];p.step==r-1&&d.eq(s[h].style)&&(f=p)}f?(f.to=c,f.step=r):s.push({style:d,from:Math.max(a,e),to:c,step:r})}}}),s.forEach(o=>n.step(new Lt(o.from,o.to,o.style)))}function M0(n,e,t,i=t.contentMatch,s=!0){let r=n.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<r.childCount;l++){let c=r.child(l),u=a+c.nodeSize,d=i.matchType(c.type);if(!d)o.push(new Se(a,u,R.empty));else{i=d;for(let f=0;f<c.marks.length;f++)t.allowsMarkType(c.marks[f].type)||n.step(new Lt(a,u,c.marks[f]));if(s&&c.isText&&t.whitespace!="pre"){let f,h=/\r?\n|\r/g,p;for(;f=h.exec(c.text);)p||(p=new R(M.from(t.schema.text(" ",t.allowedMarks(c.marks))),0,0)),o.push(new Se(a+f.index,a+f.index+f[0].length,p))}}a=u}if(!i.validEnd){let l=i.fillBefore(M.empty,!0);n.replace(a,a,new R(l,0,0))}for(let l=o.length-1;l>=0;l--)n.step(o[l])}function mE(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function ks(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let i=n.depth;;--i){let s=n.$from.node(i),r=n.$from.index(i),o=n.$to.indexAfter(i);if(i<n.depth&&s.canReplace(r,o,t))return i;if(i==0||s.type.spec.isolating||!mE(s,r,o))break}return null}function bE(n,e,t){let{$from:i,$to:s,depth:r}=e,o=i.before(r+1),a=s.after(r+1),l=o,c=a,u=M.empty,d=0;for(let p=r,g=!1;p>t;p--)g||i.index(p)>0?(g=!0,u=M.from(i.node(p).copy(u)),d++):l--;let f=M.empty,h=0;for(let p=r,g=!1;p>t;p--)g||s.after(p+1)<s.end(p)?(g=!0,f=M.from(s.node(p).copy(f)),h++):c++;n.step(new ke(l,c,o,a,new R(u.append(f),d,h),u.size-d,!0))}function af(n,e,t=null,i=n){let s=yE(n,e),r=s&&vE(i,e);return r?s.map(Kh).concat({type:e,attrs:t}).concat(r.map(Kh)):null}function Kh(n){return{type:n,attrs:null}}function yE(n,e){let{parent:t,startIndex:i,endIndex:s}=n,r=t.contentMatchAt(i).findWrapping(e);if(!r)return null;let o=r.length?r[0]:e;return t.canReplaceWith(i,s,o)?r:null}function vE(n,e){let{parent:t,startIndex:i,endIndex:s}=n,r=t.child(i),o=e.contentMatch.findWrapping(r.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=i;l&&c<s;c++)l=l.matchType(t.child(c).type);return!l||!l.validEnd?null:o}function xE(n,e,t){let i=M.empty;for(let o=t.length-1;o>=0;o--){if(i.size){let a=t[o].type.contentMatch.matchFragment(i);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=M.from(t[o].type.create(t[o].attrs,i))}let s=e.start,r=e.end;n.step(new ke(s,r,s,r,new R(i,0,0),t.length,!0))}function _E(n,e,t,i,s){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let r=n.steps.length;n.doc.nodesBetween(e,t,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(i,s)&&AE(n.doc,n.mapping.slice(r).map(a),i)){let l=null;if(i.schema.linebreakReplacement){let f=i.whitespace=="pre",h=!!i.contentMatch.matchType(i.schema.linebreakReplacement);f&&!h?l=!1:!f&&h&&(l=!0)}l===!1&&wE(n,o,a,r),M0(n,n.mapping.slice(r).map(a,1),i,void 0,l===null);let c=n.mapping.slice(r),u=c.map(a,1),d=c.map(a+o.nodeSize,1);return n.step(new ke(u,d,u+1,d-1,new R(M.from(i.create(s,null,o.marks)),0,0),1,!0)),l===!0&&SE(n,o,a,r),!1}})}function SE(n,e,t,i){e.forEach((s,r)=>{if(s.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(s.text);){let l=n.mapping.slice(i).map(t+1+r+o.index);n.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function wE(n,e,t,i){e.forEach((s,r)=>{if(s.type==s.type.schema.linebreakReplacement){let o=n.mapping.slice(i).map(t+1+r);n.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function AE(n,e,t){let i=n.resolve(e),s=i.index();return i.parent.canReplaceWith(s,s+1,t)}function kE(n,e,t,i,s){let r=n.doc.nodeAt(e);if(!r)throw new RangeError("No node at given position");t||(t=r.type);let o=t.create(i,null,s||r.marks);if(r.isLeaf)return n.replaceWith(e,e+r.nodeSize,o);if(!t.validContent(r.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new ke(e,e+r.nodeSize,e+1,e+r.nodeSize-1,new R(M.from(o),0,0),1,!0))}function Zi(n,e,t=1,i){let s=n.resolve(e),r=s.depth-t,o=i&&i[i.length-1]||s.parent;if(r<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,u=t-2;c>r;c--,u--){let d=s.node(c),f=s.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=i&&i[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let g=i&&i[u]||d;if(!d.canReplace(f+1,d.childCount)||!g.type.validContent(h))return!1}let a=s.indexAfter(r),l=i&&i[0];return s.node(r).canReplaceWith(a,a,l?l.type:s.node(r+1).type)}function EE(n,e,t=1,i){let s=n.doc.resolve(e),r=M.empty,o=M.empty;for(let a=s.depth,l=s.depth-t,c=t-1;a>l;a--,c--){r=M.from(s.node(a).copy(r));let u=i&&i[c];o=M.from(u?u.type.create(u.attrs,o):s.node(a).copy(o))}n.step(new Se(e,e,new R(r.append(o),t,t),!0))}function Fn(n,e){let t=n.resolve(e),i=t.index();return T0(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(i,i+1)}function T0(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}function Ll(n,e,t=-1){let i=n.resolve(e);for(let s=i.depth;;s--){let r,o,a=i.index(s);if(s==i.depth?(r=i.nodeBefore,o=i.nodeAfter):t>0?(r=i.node(s+1),a++,o=i.node(s).maybeChild(a)):(r=i.node(s).maybeChild(a-1),o=i.node(s+1)),r&&!r.isTextblock&&T0(r,o)&&i.node(s).canReplace(a,a+1))return e;if(s==0)break;e=t<0?i.before(s):i.after(s)}}function CE(n,e,t){let i=new Se(e-t,e+t,R.empty,!0);n.step(i)}function ME(n,e,t){let i=n.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),t))return e;if(i.parentOffset==0)for(let s=i.depth-1;s>=0;s--){let r=i.index(s);if(i.node(s).canReplaceWith(r,r,t))return i.before(s+1);if(r>0)return null}if(i.parentOffset==i.parent.content.size)for(let s=i.depth-1;s>=0;s--){let r=i.indexAfter(s);if(i.node(s).canReplaceWith(r,r,t))return i.after(s+1);if(r<i.node(s).childCount)return null}return null}function D0(n,e,t){let i=n.resolve(e);if(!t.content.size)return e;let s=t.content;for(let r=0;r<t.openStart;r++)s=s.firstChild.content;for(let r=1;r<=(t.openStart==0&&t.size?2:1);r++)for(let o=i.depth;o>=0;o--){let a=o==i.depth?0:i.pos<=(i.start(o+1)+i.end(o+1))/2?-1:1,l=i.index(o)+(a>0?1:0),c=i.node(o),u=!1;if(r==1)u=c.canReplace(l,l,s);else{let d=c.contentMatchAt(l).findWrapping(s.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?i.pos:a<0?i.before(o+1):i.after(o+1)}return null}function Bl(n,e,t=e,i=R.empty){if(e==t&&!i.size)return null;let s=n.resolve(e),r=n.resolve(t);return O0(s,r,i)?new Se(e,t,i):new TE(s,r,i).fit()}function O0(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class TE{constructor(e,t,i){this.$from=e,this.$to=t,this.unplaced=i,this.frontier=[],this.placed=M.empty;for(let s=0;s<=e.depth;s++){let r=e.node(s);this.frontier.push({type:r.type,match:r.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=M.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,i=this.$from,s=this.close(e<0?this.$to:i.doc.resolve(e));if(!s)return null;let r=this.placed,o=i.depth,a=s.depth;for(;o&&a&&r.childCount==1;)r=r.firstChild.content,o--,a--;let l=new R(r,o,a);return e>-1?new ke(i.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||i.pos!=this.$to.pos?new Se(i.pos,s.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,i=0,s=this.unplaced.openEnd;i<e;i++){let r=t.firstChild;if(t.childCount>1&&(s=0),r.type.spec.isolating&&s<=i){e=i;break}t=r.content}for(let t=1;t<=2;t++)for(let i=t==1?e:this.unplaced.openStart;i>=0;i--){let s,r=null;i?(r=bc(this.unplaced.content,i-1).firstChild,s=r.content):s=this.unplaced.content;let o=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(t==1&&(o?c.matchType(o.type)||(d=c.fillBefore(M.from(o),!1)):r&&l.compatibleContent(r.type)))return{sliceDepth:i,frontierDepth:a,parent:r,inject:d};if(t==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:i,frontierDepth:a,parent:r,wrap:u};if(r&&c.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:i}=this.unplaced,s=bc(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new R(e,t+1,Math.max(i,s.size+t>=e.size-i?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:i}=this.unplaced,s=bc(e,t);if(s.childCount<=1&&t>0){let r=e.size-t<=t+s.size;this.unplaced=new R(Hs(e,t-1,1),t-1,r?t-1:i)}else this.unplaced=new R(Hs(e,t,1),t,i)}placeNodes({sliceDepth:e,frontierDepth:t,parent:i,inject:s,wrap:r}){for(;this.depth>t;)this.closeFrontierNode();if(r)for(let g=0;g<r.length;g++)this.openFrontierNode(r[g]);let o=this.unplaced,a=i?i.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[t];if(s){for(let g=0;g<s.childCount;g++)u.push(s.child(g));d=d.matchFragment(s)}let h=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),m=d.matchType(g.type);if(!m)break;c++,(c>1||l==0||g.content.size)&&(d=m,u.push(R0(g.mark(f.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=Vs(this.placed,t,M.from(u)),this.frontier[t].match=d,p&&h<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,m=a;g<h;g++){let b=m.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),m=b.content}this.unplaced=p?e==0?R.empty:new R(Hs(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new R(Hs(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!yc(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:i}=this.$to,s=this.$to.after(i);for(;i>1&&s==this.$to.end(--i);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:i,type:s}=this.frontier[t],r=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=yc(e,t,s,i,r);if(o){for(let a=t-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=yc(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:o,move:r?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Vs(this.placed,t.depth,t.fit)),e=t.move;for(let i=t.depth+1;i<=e.depth;i++){let s=e.node(i),r=s.type.contentMatch.fillBefore(s.content,!0,e.index(i));this.openFrontierNode(s.type,s.attrs,r)}return e}openFrontierNode(e,t=null,i){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=Vs(this.placed,this.depth,M.from(e.create(t,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(M.empty,!0);t.childCount&&(this.placed=Vs(this.placed,this.frontier.length,t))}}function Hs(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Hs(n.firstChild.content,e-1,t)))}function Vs(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Vs(n.lastChild.content,e-1,t)))}function bc(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function R0(n,e,t){if(e<=0)return n;let i=n.content;return e>1&&(i=i.replaceChild(0,R0(i.firstChild,e-1,i.childCount==1?t-1:0))),e>0&&(i=n.type.contentMatch.fillBefore(i).append(i),t<=0&&(i=i.append(n.type.contentMatch.matchFragment(i).fillBefore(M.empty,!0)))),n.copy(i)}function yc(n,e,t,i,s){let r=n.node(e),o=s?n.indexAfter(e):n.index(e);if(o==r.childCount&&!t.compatibleContent(r.type))return null;let a=i.fillBefore(r.content,!0,o);return a&&!DE(t,r.content,o)?a:null}function DE(n,e,t){for(let i=t;i<e.childCount;i++)if(!n.allowsMarks(e.child(i).marks))return!0;return!1}function OE(n){return n.spec.defining||n.spec.definingForContent}function RE(n,e,t,i){if(!i.size)return n.deleteRange(e,t);let s=n.doc.resolve(e),r=n.doc.resolve(t);if(O0(s,r,i))return n.step(new Se(e,t,i));let o=N0(s,n.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let f=s.depth,h=s.pos-1;f>0;f--,h--){let p=s.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(f)>-1?a=f:s.before(f)==h&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],u=i.openStart;for(let f=i.content,h=0;;h++){let p=f.firstChild;if(c.push(p),h==i.openStart)break;f=p.content}for(let f=u-1;f>=0;f--){let h=c[f],p=OE(h.type);if(p&&!h.sameMarkup(s.node(Math.abs(a)-1)))u=f;else if(p||!h.type.isTextblock)break}for(let f=i.openStart;f>=0;f--){let h=(f+u+1)%(i.openStart+1),p=c[h];if(p)for(let g=0;g<o.length;g++){let m=o[(g+l)%o.length],b=!0;m<0&&(b=!1,m=-m);let y=s.node(m-1),v=s.index(m-1);if(y.canReplaceWith(v,v,p.type,p.marks))return n.replace(s.before(m),b?r.after(m):t,new R(P0(i.content,0,i.openStart,h),h,i.openEnd))}}let d=n.steps.length;for(let f=o.length-1;f>=0&&(n.replace(e,t,i),!(n.steps.length>d));f--){let h=o[f];h<0||(e=s.before(h),t=r.after(h))}}function P0(n,e,t,i,s){if(e<t){let r=n.firstChild;n=n.replaceChild(0,r.copy(P0(r.content,e+1,t,i,r)))}if(e>i){let r=s.contentMatchAt(0),o=r.fillBefore(n).append(n);n=o.append(r.matchFragment(o).fillBefore(M.empty,!0))}return n}function PE(n,e,t,i){if(!i.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let s=ME(n.doc,e,i.type);s!=null&&(e=t=s)}n.replaceRange(e,t,new R(M.from(i),0,0))}function NE(n,e,t){let i=n.doc.resolve(e),s=n.doc.resolve(t),r=N0(i,s);for(let o=0;o<r.length;o++){let a=r[o],l=o==r.length-1;if(l&&a==0||i.node(a).type.contentMatch.validEnd)return n.delete(i.start(a),s.end(a));if(a>0&&(l||i.node(a-1).canReplace(i.index(a-1),s.indexAfter(a-1))))return n.delete(i.before(a),s.after(a))}for(let o=1;o<=i.depth&&o<=s.depth;o++)if(e-i.start(o)==i.depth-o&&t>i.end(o)&&s.end(o)-t!=s.depth-o)return n.delete(i.before(o),t);n.delete(e,t)}function N0(n,e){let t=[],i=Math.min(n.depth,e.depth);for(let s=i;s>=0;s--){let r=n.start(s);if(r<n.pos-(n.depth-s)||e.end(s)>e.pos+(e.depth-s)||n.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(r==e.start(s)||s==n.depth&&s==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==r-1)&&t.push(s)}return t}class Xi extends He{constructor(e,t,i){super(),this.pos=e,this.attr=t,this.value=i}apply(e){let t=e.nodeAt(this.pos);if(!t)return ge.fail("No node at attribute step's position");let i=Object.create(null);for(let r in t.attrs)i[r]=t.attrs[r];i[this.attr]=this.value;let s=t.type.create(i,null,t.marks);return ge.fromReplace(e,this.pos,this.pos+1,new R(M.from(s),0,t.isLeaf?0:1))}getMap(){return it.empty}invert(e){return new Xi(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Xi(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Xi(t.pos,t.attr,t.value)}}He.jsonID("attr",Xi);class mr extends He{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let s in e.attrs)t[s]=e.attrs[s];t[this.attr]=this.value;let i=e.type.create(t,e.content,e.marks);return ge.ok(i)}getMap(){return it.empty}invert(e){return new mr(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new mr(t.attr,t.value)}}He.jsonID("docAttr",mr);let cs=class extends Error{};cs=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};cs.prototype=Object.create(Error.prototype);cs.prototype.constructor=cs;cs.prototype.name="TransformError";class I0{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Qi}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new cs(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,i=R.empty){let s=Bl(this.doc,e,t,i);return s&&this.step(s),this}replaceWith(e,t,i){return this.replace(e,t,new R(M.from(i),0,0))}delete(e,t){return this.replace(e,t,R.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,i){return RE(this,e,t,i),this}replaceRangeWith(e,t,i){return PE(this,e,t,i),this}deleteRange(e,t){return NE(this,e,t),this}lift(e,t){return bE(this,e,t),this}join(e,t=1){return CE(this,e,t),this}wrap(e,t){return xE(this,e,t),this}setBlockType(e,t=e,i,s=null){return _E(this,e,t,i,s),this}setNodeMarkup(e,t,i=null,s){return kE(this,e,t,i,s),this}setNodeAttribute(e,t,i){return this.step(new Xi(e,t,i)),this}setDocAttribute(e,t){return this.step(new mr(e,t)),this}addNodeMark(e,t){return this.step(new gn(e,t)),this}removeNodeMark(e,t){if(!(t instanceof X)){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(t=t.isInSet(i.marks),!t)return this}return this.step(new ls(e,t)),this}split(e,t=1,i){return EE(this,e,t,i),this}addMark(e,t,i){return pE(this,e,t,i),this}removeMark(e,t,i){return gE(this,e,t,i),this}clearIncompatible(e,t,i){return M0(this,e,t,i),this}}const vc=Object.create(null);class W{constructor(e,t,i){this.$anchor=e,this.$head=t,this.ranges=i||[new IE(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=R.empty){let i=t.content.lastChild,s=null;for(let a=0;a<t.openEnd;a++)s=i,i=i.lastChild;let r=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(r);e.replaceRange(u.map(l.pos),u.map(c.pos),a?R.empty:t),a==0&&Qh(e,r,(i?i.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let i=e.steps.length,s=this.ranges;for(let r=0;r<s.length;r++){let{$from:o,$to:a}=s[r],l=e.mapping.slice(i),c=l.map(o.pos),u=l.map(a.pos);r?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),Qh(e,i,t.isInline?-1:1))}}static findFrom(e,t,i=!1){let s=e.parent.inlineContent?new F(e):$i(e.node(0),e.parent,e.pos,e.index(),t,i);if(s)return s;for(let r=e.depth-1;r>=0;r--){let o=t<0?$i(e.node(0),e.node(r),e.before(r+1),e.index(r),t,i):$i(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,i);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new yt(e.node(0))}static atStart(e){return $i(e,e,0,0,1)||new yt(e)}static atEnd(e){return $i(e,e,e.content.size,e.childCount,-1)||new yt(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=vc[t.type];if(!i)throw new RangeError(`No selection type ${t.type} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in vc)throw new RangeError("Duplicate use of selection JSON ID "+e);return vc[e]=t,t.prototype.jsonID=e,t}getBookmark(){return F.between(this.$anchor,this.$head).getBookmark()}}W.prototype.visible=!0;class IE{constructor(e,t){this.$from=e,this.$to=t}}let Yh=!1;function Jh(n){!Yh&&!n.parent.inlineContent&&(Yh=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class F extends W{constructor(e,t=e){Jh(e),Jh(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let i=e.resolve(t.map(this.head));if(!i.parent.inlineContent)return W.near(i);let s=e.resolve(t.map(this.anchor));return new F(s.parent.inlineContent?s:i,i)}replace(e,t=R.empty){if(super.replace(e,t),t==R.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof F&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Fl(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new F(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,i=t){let s=e.resolve(t);return new this(s,i==t?s:e.resolve(i))}static between(e,t,i){let s=e.pos-t.pos;if((!i||s)&&(i=s>=0?1:-1),!t.parent.inlineContent){let r=W.findFrom(t,i,!0)||W.findFrom(t,-i,!0);if(r)t=r.$head;else return W.near(t,i)}return e.parent.inlineContent||(s==0?e=t:(e=(W.findFrom(e,-i,!0)||W.findFrom(e,i,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new F(e,t)}}W.jsonID("text",F);class Fl{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Fl(e.map(this.anchor),e.map(this.head))}resolve(e){return F.between(e.resolve(this.anchor),e.resolve(this.head))}}class L extends W{constructor(e){let t=e.nodeAfter,i=e.node(0).resolve(e.pos+t.nodeSize);super(e,i),this.node=t}map(e,t){let{deleted:i,pos:s}=t.mapResult(this.anchor),r=e.resolve(s);return i?W.near(r):new L(r)}content(){return new R(M.from(this.node),0,0)}eq(e){return e instanceof L&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new lf(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new L(e.resolve(t.anchor))}static create(e,t){return new L(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}L.prototype.visible=!1;W.jsonID("node",L);class lf{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:i}=e.mapResult(this.anchor);return t?new Fl(i,i):new lf(i)}resolve(e){let t=e.resolve(this.anchor),i=t.nodeAfter;return i&&L.isSelectable(i)?new L(t):W.near(t)}}class yt extends W{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=R.empty){if(t==R.empty){e.delete(0,e.doc.content.size);let i=W.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new yt(e)}map(e){return new yt(e)}eq(e){return e instanceof yt}getBookmark(){return LE}}W.jsonID("all",yt);const LE={map(){return this},resolve(n){return new yt(n)}};function $i(n,e,t,i,s,r=!1){if(e.inlineContent)return F.create(n,t);for(let o=i-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let a=e.child(o);if(a.isAtom){if(!r&&L.isSelectable(a))return L.create(n,t-(s<0?a.nodeSize:0))}else{let l=$i(n,a,t+s,s<0?a.childCount:0,s,r);if(l)return l}t+=a.nodeSize*s}return null}function Qh(n,e,t){let i=n.steps.length-1;if(i<e)return;let s=n.steps[i];if(!(s instanceof Se||s instanceof ke))return;let r=n.mapping.maps[i],o;r.forEach((a,l,c,u)=>{o==null&&(o=u)}),n.setSelection(W.near(n.doc.resolve(o),t))}const Zh=1,ao=2,Xh=4;class BE extends I0{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Zh)&~ao,this.storedMarks=null,this}get selectionSet(){return(this.updated&Zh)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=ao,this}ensureMarks(e){return X.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ao)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~ao,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let i=this.selection;return t&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||X.none))),i.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,i){let s=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(i==null&&(i=t),i=i??t,!e)return this.deleteRange(t,i);let r=this.storedMarks;if(!r){let o=this.doc.resolve(t);r=i==t?o.marks():o.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(t,i,s.text(e,r)),this.selection.empty||this.setSelection(W.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Xh,this}get scrolledIntoView(){return(this.updated&Xh)>0}}function ep(n,e){return!e||!n?n:n.bind(e)}class js{constructor(e,t,i){this.name=e,this.init=ep(t.init,i),this.apply=ep(t.apply,i)}}const FE=[new js("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new js("selection",{init(n,e){return n.selection||W.atStart(e.doc)},apply(n){return n.selection}}),new js("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,i){return i.selection.$cursor?n.storedMarks:null}}),new js("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class xc{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=FE.slice(),t&&t.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new js(i.key,i.spec.state,i))})}}class Yi{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=t){let s=this.config.plugins[i];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],i=this.applyInner(e),s=null;for(;;){let r=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=s?s[o].n:0,c=s?s[o].state:this,u=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,c,i);if(u&&i.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!s){s=[];for(let d=0;d<this.config.plugins.length;d++)s.push(d<o?{state:i,n:t.length}:{state:this,n:0})}t.push(u),i=i.applyInner(u),r=!0}s&&(s[o]={state:i,n:t.length})}}if(!r)return{state:i,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Yi(this.config),i=this.config.fields;for(let s=0;s<i.length;s++){let r=i[s];t[r.name]=r.apply(e,this[r.name],this,t)}return t}get tr(){return new BE(this)}static create(e){let t=new xc(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new Yi(t);for(let s=0;s<t.fields.length;s++)i[t.fields[s].name]=t.fields[s].init(e,i);return i}reconfigure(e){let t=new xc(this.schema,e.plugins),i=t.fields,s=new Yi(t);for(let r=0;r<i.length;r++){let o=i[r].name;s[o]=this.hasOwnProperty(o)?this[o]:i[r].init(e,s)}return s}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&typeof e=="object")for(let i in e){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[i],r=s.spec.state;r&&r.toJSON&&(t[i]=r.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,i){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new xc(e.schema,e.plugins),r=new Yi(s);return s.fields.forEach(o=>{if(o.name=="doc")r.doc=bi.fromJSON(e.schema,t.doc);else if(o.name=="selection")r.selection=W.fromJSON(r.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(r.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let a in i){let l=i[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){r[o.name]=c.fromJSON.call(l,e,t[a],r);return}}r[o.name]=o.init(e,r)}}),r}}function L0(n,e,t){for(let i in n){let s=n[i];s instanceof Function?s=s.bind(e):i=="handleDOMEvents"&&(s=L0(s,e,{})),t[i]=s}return t}class Ge{constructor(e){this.spec=e,this.props={},e.props&&L0(e.props,this,this.props),this.key=e.key?e.key.key:B0("plugin")}getState(e){return e[this.key]}}const _c=Object.create(null);function B0(n){return n in _c?n+"$"+ ++_c[n]:(_c[n]=0,n+"$")}class kt{constructor(e="key"){this.key=B0(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const De=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},br=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let zu=null;const qt=function(n,e,t){let i=zu||(zu=document.createRange());return i.setEnd(n,t??n.nodeValue.length),i.setStart(n,e||0),i},zE=function(){zu=null},ki=function(n,e,t,i){return t&&(tp(n,e,t,i,-1)||tp(n,e,t,i,1))},HE=/^(img|br|input|textarea|hr)$/i;function tp(n,e,t,i,s){for(;;){if(n==t&&e==i)return!0;if(e==(s<0?0:Nt(n))){let r=n.parentNode;if(!r||r.nodeType!=1||Wr(n)||HE.test(n.nodeName)||n.contentEditable=="false")return!1;e=De(n)+(s<0?0:1),n=r}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.contentEditable=="false")return!1;e=s<0?Nt(n):0}else return!1}}function Nt(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function VE(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Nt(n)}else if(n.parentNode&&!Wr(n))e=De(n),n=n.parentNode;else return null}}function jE(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Wr(n))e=De(n)+1,n=n.parentNode;else return null}}function WE(n,e,t){for(let i=e==0,s=e==Nt(n);i||s;){if(n==t)return!0;let r=De(n);if(n=n.parentNode,!n)return!1;i=i&&r==0,s=s&&r==Nt(n)}}function Wr(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const zl=function(n){return n.focusNode&&ki(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function ei(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function UE(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function $E(n,e,t){if(n.caretPositionFromPoint)try{let i=n.caretPositionFromPoint(e,t);if(i)return{node:i.offsetNode,offset:i.offset}}catch{}if(n.caretRangeFromPoint){let i=n.caretRangeFromPoint(e,t);if(i)return{node:i.startContainer,offset:i.startOffset}}}const Ft=typeof navigator<"u"?navigator:null,np=typeof document<"u"?document:null,zn=Ft&&Ft.userAgent||"",Hu=/Edge\/(\d+)/.exec(zn),F0=/MSIE \d/.exec(zn),Vu=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(zn),Xe=!!(F0||Vu||Hu),An=F0?document.documentMode:Vu?+Vu[1]:Hu?+Hu[1]:0,_t=!Xe&&/gecko\/(\d+)/i.test(zn);_t&&+(/Firefox\/(\d+)/.exec(zn)||[0,0])[1];const ju=!Xe&&/Chrome\/(\d+)/.exec(zn),je=!!ju,qE=ju?+ju[1]:0,Ue=!Xe&&!!Ft&&/Apple Computer/.test(Ft.vendor),us=Ue&&(/Mobile\/\w+/.test(zn)||!!Ft&&Ft.maxTouchPoints>2),lt=us||(Ft?/Mac/.test(Ft.platform):!1),GE=Ft?/Win/.test(Ft.platform):!1,pt=/Android \d/.test(zn),Ur=!!np&&"webkitFontSmoothing"in np.documentElement.style,KE=Ur?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function YE(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Vt(n,e){return typeof n=="number"?n:n[e]}function JE(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,i=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*i}}function ip(n,e,t){let i=n.someProp("scrollThreshold")||0,s=n.someProp("scrollMargin")||5,r=n.dom.ownerDocument;for(let o=t||n.dom;o;o=br(o)){if(o.nodeType!=1)continue;let a=o,l=a==r.body,c=l?YE(r):JE(a),u=0,d=0;if(e.top<c.top+Vt(i,"top")?d=-(c.top-e.top+Vt(s,"top")):e.bottom>c.bottom-Vt(i,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Vt(s,"top")-c.top:e.bottom-c.bottom+Vt(s,"bottom")),e.left<c.left+Vt(i,"left")?u=-(c.left-e.left+Vt(s,"left")):e.right>c.right-Vt(i,"right")&&(u=e.right-c.right+Vt(s,"right")),u||d)if(l)r.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,h=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let p=a.scrollLeft-f,g=a.scrollTop-h;e={left:e.left-p,top:e.top-g,right:e.right-p,bottom:e.bottom-g}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function QE(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),i,s;for(let r=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=n.root.elementFromPoint(r,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){i=a,s=l.top;break}}return{refDOM:i,refTop:s,stack:z0(n.dom)}}function z0(n){let e=[],t=n.ownerDocument;for(let i=n;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),n!=t);i=br(i));return e}function ZE({refDOM:n,refTop:e,stack:t}){let i=n?n.getBoundingClientRect().top:0;H0(t,i==0?0:i-e)}function H0(n,e){for(let t=0;t<n.length;t++){let{dom:i,top:s,left:r}=n[t];i.scrollTop!=s+e&&(i.scrollTop=s+e),i.scrollLeft!=r&&(i.scrollLeft=r)}}let Hi=null;function XE(n){if(n.setActive)return n.setActive();if(Hi)return n.focus(Hi);let e=z0(n);n.focus(Hi==null?{get preventScroll(){return Hi={preventScroll:!0},!0}}:void 0),Hi||(Hi=!1,H0(e,0))}function V0(n,e){let t,i=2e8,s,r=0,o=e.top,a=e.top,l,c;for(let u=n.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=qt(u).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<i){t=u,i=g,s=g&&t.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&g&&(r=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!t&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(r=d+1)}}return!t&&l&&(t=l,s=c,i=0),t&&t.nodeType==3?eC(t,s):!t||i&&t.nodeType==1?{node:n,offset:r}:V0(t,s)}function eC(n,e){let t=n.nodeValue.length,i=document.createRange();for(let s=0;s<t;s++){i.setEnd(n,s+1),i.setStart(n,s);let r=ln(i,1);if(r.top!=r.bottom&&cf(e,r))return{node:n,offset:s+(e.left>=(r.left+r.right)/2?1:0)}}return{node:n,offset:0}}function cf(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function tC(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function nC(n,e,t){let{node:i,offset:s}=V0(e,t),r=-1;if(i.nodeType==1&&!i.firstChild){let o=i.getBoundingClientRect();r=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(i,s,r)}function iC(n,e,t,i){let s=-1;for(let r=e,o=!1;r!=n.dom;){let a=n.docView.nearestDesc(r,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!o||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!o&&(o=!0,l.left>i.left||l.top>i.top?s=a.posBefore:(l.right<i.left||l.bottom<i.top)&&(s=a.posAfter)),!a.contentDOM&&s<0&&!a.node.isText)return(a.node.isBlock?i.top<(l.top+l.bottom)/2:i.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}r=a.dom.parentNode}return s>-1?s:n.docView.posFromDOM(e,t,-1)}function j0(n,e,t){let i=n.childNodes.length;if(i&&t.top<t.bottom)for(let s=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-t.top)/(t.bottom-t.top))-2)),r=s;;){let o=n.childNodes[r];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(cf(e,c))return j0(o,e,c)}}if((r=(r+1)%i)==s)break}return n}function sC(n,e){let t=n.dom.ownerDocument,i,s=0,r=$E(t,e.left,e.top);r&&({node:i,offset:s}=r);let o=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),a;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=n.dom.getBoundingClientRect();if(!cf(e,c)||(o=j0(n.dom,e,c),!o))return null}if(Ue)for(let c=o;i&&c;c=br(c))c.draggable&&(i=void 0);if(o=tC(o,e),i){if(_t&&i.nodeType==1&&(s=Math.min(s,i.childNodes.length),s<i.childNodes.length)){let u=i.childNodes[s],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&s++}let c;Ur&&s&&i.nodeType==1&&(c=i.childNodes[s-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&s--,i==n.dom&&s==i.childNodes.length-1&&i.lastChild.nodeType==1&&e.top>i.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(s==0||i.nodeType!=1||i.childNodes[s-1].nodeName!="BR")&&(a=iC(n,i,s,e))}a==null&&(a=nC(n,o,e));let l=n.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function sp(n){return n.top<n.bottom||n.left<n.right}function ln(n,e){let t=n.getClientRects();if(t.length){let i=t[e<0?0:t.length-1];if(sp(i))return i}return Array.prototype.find.call(t,sp)||n.getBoundingClientRect()}const rC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function W0(n,e,t){let{node:i,offset:s,atom:r}=n.docView.domFromPos(e,t<0?-1:1),o=Ur||_t;if(i.nodeType==3)if(o&&(rC.test(i.nodeValue)||(t<0?!s:s==i.nodeValue.length))){let l=ln(qt(i,s,s),t);if(_t&&s&&/\s/.test(i.nodeValue[s-1])&&s<i.nodeValue.length){let c=ln(qt(i,s-1,s-1),-1);if(c.top==l.top){let u=ln(qt(i,s,s+1),-1);if(u.top!=l.top)return Ps(u,u.left<c.left)}}return l}else{let l=s,c=s,u=t<0?1:-1;return t<0&&!s?(c++,u=-1):t>=0&&s==i.nodeValue.length?(l--,u=1):t<0?l--:c++,Ps(ln(qt(i,l,c),u),u<0)}if(!n.state.doc.resolve(e-(r||0)).parent.inlineContent){if(r==null&&s&&(t<0||s==Nt(i))){let l=i.childNodes[s-1];if(l.nodeType==1)return Sc(l.getBoundingClientRect(),!1)}if(r==null&&s<Nt(i)){let l=i.childNodes[s];if(l.nodeType==1)return Sc(l.getBoundingClientRect(),!0)}return Sc(i.getBoundingClientRect(),t>=0)}if(r==null&&s&&(t<0||s==Nt(i))){let l=i.childNodes[s-1],c=l.nodeType==3?qt(l,Nt(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Ps(ln(c,1),!1)}if(r==null&&s<Nt(i)){let l=i.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?qt(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return Ps(ln(c,-1),!0)}return Ps(ln(i.nodeType==3?qt(i):i,-t),t>=0)}function Ps(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Sc(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function U0(n,e,t){let i=n.state,s=n.root.activeElement;i!=e&&n.updateState(e),s!=n.dom&&n.focus();try{return t()}finally{i!=e&&n.updateState(i),s!=n.dom&&s&&s.focus()}}function oC(n,e,t){let i=e.selection,s=t=="up"?i.$from:i.$to;return U0(n,e,()=>{let{node:r}=n.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(r,!0);if(!a)break;if(a.node.isBlock){r=a.contentDOM||a.dom;break}r=a.dom.parentNode}let o=W0(n,s.pos,1);for(let a=r.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=qt(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(t=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const aC=/[\u0590-\u08ac]/;function lC(n,e,t){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let s=i.parentOffset,r=!s,o=s==i.parent.content.size,a=n.domSelection();return!aC.test(i.parent.textContent)||!a.modify?t=="left"||t=="backward"?r:o:U0(n,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=n.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",t,"character");let h=i.depth?n.docView.domAfterPos(i.before()):n.dom,{focusNode:p,focusOffset:g}=n.domSelectionRange(),m=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==g;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),m})}let rp=null,op=null,ap=!1;function cC(n,e,t){return rp==e&&op==t?ap:(rp=e,op=t,ap=t=="up"||t=="down"?oC(n,e,t):lC(n,e,t))}const ht=0,lp=1,si=2,zt=3;class $r{constructor(e,t,i,s){this.parent=e,this.children=t,this.dom=i,this.contentDOM=s,this.dirty=ht,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,i){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,i=this.posAtStart;;t++){let s=this.children[t];if(s==e)return i;i+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,i){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(i<0){let r,o;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&!((o=r.pmViewDesc)&&o.parent==this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}else{let r,o;if(e==this.contentDOM)r=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.nextSibling}for(;r&&!((o=r.pmViewDesc)&&o.parent==this);)r=r.nextSibling;return r?this.posBeforeChild(o):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=t>De(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let r=e;;r=r.parentNode){if(r==this.dom){s=!1;break}if(r.previousSibling)break}if(s==null&&t==e.childNodes.length)for(let r=e;;r=r.parentNode){if(r==this.dom){s=!0;break}if(r.nextSibling)break}}return s??i>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let i=!0,s=e;s;s=s.parentNode){let r=this.getDesc(s),o;if(r&&(!t||r.node))if(i&&(o=r.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))i=!1;else return r}}getDesc(e){let t=e.pmViewDesc;for(let i=t;i;i=i.parent)if(i==this)return t}posFromDOM(e,t,i){for(let s=e;s;s=s.parentNode){let r=this.getDesc(s);if(r)return r.localPosFromDOM(e,t,i)}return-1}descAt(e){for(let t=0,i=0;t<this.children.length;t++){let s=this.children[t],r=i+s.size;if(i==e&&r!=i){for(;!s.border&&s.children.length;)s=s.children[0];return s}if(e<r)return s.descAt(e-i-s.border);i=r}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let i=0,s=0;for(let r=0;i<this.children.length;i++){let o=this.children[i],a=r+o.size;if(a>e||o instanceof q0){s=e-r;break}r=a}if(s)return this.children[i].domFromPos(s-this.children[i].border,t);for(let r;i&&!(r=this.children[i-1]).size&&r instanceof $0&&r.side>=0;i--);if(t<=0){let r,o=!0;for(;r=i?this.children[i-1]:null,!(!r||r.dom.parentNode==this.contentDOM);i--,o=!1);return r&&t&&o&&!r.border&&!r.domAtom?r.domFromPos(r.size,t):{node:this.contentDOM,offset:r?De(r.dom)+1:0}}else{let r,o=!0;for(;r=i<this.children.length?this.children[i]:null,!(!r||r.dom.parentNode==this.contentDOM);i++,o=!1);return r&&o&&!r.border&&!r.domAtom?r.domFromPos(0,t):{node:this.contentDOM,offset:r?De(r.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,i=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,r=-1;for(let o=i,a=0;;a++){let l=this.children[a],c=o+l.size;if(s==-1&&e<=c){let u=o+l.border;if(e>=u&&t<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,u);e=o;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){s=De(f.dom)+1;break}e-=f.size}s==-1&&(s=0)}if(s>-1&&(c>t||a==this.children.length-1)){t=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){r=De(d.dom);break}t+=d.size}r==-1&&(r=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:s,toOffset:r}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:i}=this.domFromPos(e,0);if(t.nodeType!=1||i==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[i]}setSelection(e,t,i,s=!1){let r=Math.min(e,t),o=Math.max(e,t);for(let f=0,h=0;f<this.children.length;f++){let p=this.children[f],g=h+p.size;if(r>h&&o<g)return p.setSelection(e-h-p.border,t-h-p.border,i,s);h=g}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=i.getSelection(),u=!1;if((_t||Ue)&&e==t){let{node:f,offset:h}=a;if(f.nodeType==3){if(u=!!(h&&f.nodeValue[h-1]==`
`),u&&h==f.nodeValue.length)for(let p=f,g;p;p=p.parentNode){if(g=p.nextSibling){g.nodeName=="BR"&&(a=l={node:g.parentNode,offset:De(g)+1});break}let m=p.pmViewDesc;if(m&&m.node&&m.node.isBlock)break}}else{let p=f.childNodes[h-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(_t&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(s=!0)}if(!(s||u&&Ue)&&ki(a.node,a.offset,c.anchorNode,c.anchorOffset)&&ki(l.node,l.offset,c.focusNode,c.focusOffset))return;let d=!1;if((c.extend||e==t)&&!u){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(e>t){let h=a;a=l,l=h}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let i=0,s=0;s<this.children.length;s++){let r=this.children[s],o=i+r.size;if(i==o?e<=o&&t>=i:e<o&&t>i){let a=i+r.border,l=o-r.border;if(e>=a&&t<=l){this.dirty=e==i||t==o?si:lp,e==a&&t==l&&(r.contentLost||r.dom.parentNode!=this.contentDOM)?r.dirty=zt:r.markDirty(e-a,t-a);return}else r.dirty=r.dom==r.contentDOM&&r.dom.parentNode==this.contentDOM&&!r.children.length?si:zt}i=o}this.dirty=si}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let i=e==1?si:lp;t.dirty<i&&(t.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class $0 extends $r{constructor(e,t,i,s){let r,o=t.type.toDOM;if(typeof o=="function"&&(o=o(i,()=>{if(!r)return s;if(r.parent)return r.parent.posBeforeChild(r)})),!t.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,r=this}matchesWidget(e){return this.dirty==ht&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class uC extends $r{constructor(e,t,i,s){super(e,[],t,null),this.textDOM=i,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ei extends $r{constructor(e,t,i,s){super(e,[],i,s),this.mark=t}static create(e,t,i,s){let r=s.nodeViews[t.type.name],o=r&&r(t,s,i);return(!o||!o.dom)&&(o=It.renderSpec(document,t.type.spec.toDOM(t,i))),new Ei(e,t,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&zt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=zt&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=ht){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=ht}}slice(e,t,i){let s=Ei.create(this.parent,this.mark,!0,i),r=this.children,o=this.size;t<o&&(r=$u(r,t,o,i)),e>0&&(r=$u(r,0,e,i));for(let a=0;a<r.length;a++)r[a].parent=s;return s.children=r,s}}class kn extends $r{constructor(e,t,i,s,r,o,a,l,c){super(e,[],r,o),this.node=t,this.outerDeco=i,this.innerDeco=s,this.nodeDOM=a}static create(e,t,i,s,r,o){let a=r.nodeViews[t.type.name],l,c=a&&a(t,r,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},i,s),u=c&&c.dom,d=c&&c.contentDOM;if(t.isText){if(!u)u=document.createTextNode(t.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=It.renderSpec(document,t.type.spec.toDOM(t)));!d&&!t.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let f=u;return u=Y0(u,i,t),c?l=new dC(e,t,i,s,u,d||null,f,c,r,o+1):t.isText?new Hl(e,t,i,s,u,f,r):new kn(e,t,i,s,u,d||null,f,r,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let i=this.children[t];if(this.dom.contains(i.dom.parentNode)){e.contentElement=i.dom.parentNode;break}}e.contentElement||(e.getContent=()=>M.empty)}return e}matchesNode(e,t,i){return this.dirty==ht&&e.eq(this.node)&&Uu(t,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let i=this.node.inlineContent,s=t,r=e.composing?this.localCompositionInfo(e,t):null,o=r&&r.pos>-1?r:null,a=r&&r.pos<0,l=new hC(this,o&&o.node,e);mC(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,i,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?X.none:this.node.child(u).marks,i,e),l.placeWidget(c,e,s)},(c,u,d,f)=>{l.syncToMarks(c.marks,i,e);let h;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>s&&e.state.selection.to<s+c.nodeSize&&(h=l.findIndexWithChild(r.node))>-1&&l.updateNodeAt(c,u,d,h,e)||l.updateNextNode(c,u,d,e,f,s)||l.addNode(c,u,d,e,s),s+=c.nodeSize}),l.syncToMarks([],i,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==si)&&(o&&this.protectLocalComposition(e,o),G0(this.contentDOM,this.children,e),us&&bC(this.dom))}localCompositionInfo(e,t){let{from:i,to:s}=e.state.selection;if(!(e.state.selection instanceof F)||i<t||s>t+this.node.content.size)return null;let r=e.input.compositionNode;if(!r||!this.dom.contains(r.parentNode))return null;if(this.node.inlineContent){let o=r.nodeValue,a=yC(this.node.content,o,i-t,s-t);return a<0?null:{node:r,pos:a,text:o}}else return{node:r,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:i,text:s}){if(this.getDesc(t))return;let r=t;for(;r.parentNode!=this.contentDOM;r=r.parentNode){for(;r.previousSibling;)r.parentNode.removeChild(r.previousSibling);for(;r.nextSibling;)r.parentNode.removeChild(r.nextSibling);r.pmViewDesc&&(r.pmViewDesc=void 0)}let o=new uC(this,r,t,s);e.input.compositionNodes.push(o),this.children=$u(this.children,i,i+s.length,e,o)}update(e,t,i,s){return this.dirty==zt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,i,s),!0)}updateInner(e,t,i,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=ht}updateOuterDeco(e){if(Uu(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=K0(this.dom,this.nodeDOM,Wu(this.outerDeco,this.node,t),Wu(e,this.node,t)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function cp(n,e,t,i,s){Y0(i,e,n);let r=new kn(void 0,n,e,t,i,i,i,s,0);return r.contentDOM&&r.updateChildren(s,0),r}class Hl extends kn{constructor(e,t,i,s,r,o,a){super(e,t,i,s,r,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,i,s){return this.dirty==zt||this.dirty!=ht&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=ht||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=ht,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,i){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,i)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,i){let s=this.node.cut(e,t),r=document.createTextNode(s.text);return new Hl(this.parent,s,this.outerDeco,this.innerDeco,r,r,i)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=zt)}get domAtom(){return!1}isText(e){return this.node.text==e}}class q0 extends $r{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ht&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class dC extends kn{constructor(e,t,i,s,r,o,a,l,c,u){super(e,t,i,s,r,o,a,c,u),this.spec=l}update(e,t,i,s){if(this.dirty==zt)return!1;if(this.spec.update){let r=this.spec.update(e,t,i);return r&&this.updateInner(e,t,i,s),r}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,i,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,i,s){this.spec.setSelection?this.spec.setSelection(e,t,i):super.setSelection(e,t,i,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function G0(n,e,t){let i=n.firstChild,s=!1;for(let r=0;r<e.length;r++){let o=e[r],a=o.dom;if(a.parentNode==n){for(;a!=i;)i=up(i),s=!0;i=i.nextSibling}else s=!0,n.insertBefore(a,i);if(o instanceof Ei){let l=i?i.previousSibling:n.lastChild;G0(o.contentDOM,o.children,t),i=l?l.nextSibling:n.firstChild}}for(;i;)i=up(i),s=!0;s&&t.trackWrites==n&&(t.trackWrites=null)}const Xs=function(n){n&&(this.nodeName=n)};Xs.prototype=Object.create(null);const ri=[new Xs];function Wu(n,e,t){if(n.length==0)return ri;let i=t?ri[0]:new Xs,s=[i];for(let r=0;r<n.length;r++){let o=n[r].type.attrs;if(o){o.nodeName&&s.push(i=new Xs(o.nodeName));for(let a in o){let l=o[a];l!=null&&(t&&s.length==1&&s.push(i=new Xs(e.isInline?"span":"div")),a=="class"?i.class=(i.class?i.class+" ":"")+l:a=="style"?i.style=(i.style?i.style+";":"")+l:a!="nodeName"&&(i[a]=l))}}}return s}function K0(n,e,t,i){if(t==ri&&i==ri)return e;let s=e;for(let r=0;r<i.length;r++){let o=i[r],a=t[r];if(r){let l;a&&a.nodeName==o.nodeName&&s!=n&&(l=s.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(s),a=ri[0]),s=l}fC(s,a||ri[0],o)}return s}function fC(n,e,t){for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&!(i in t)&&n.removeAttribute(i);for(let i in t)i!="class"&&i!="style"&&i!="nodeName"&&t[i]!=e[i]&&n.setAttribute(i,t[i]);if(e.class!=t.class){let i=e.class?e.class.split(" ").filter(Boolean):[],s=t.class?t.class.split(" ").filter(Boolean):[];for(let r=0;r<i.length;r++)s.indexOf(i[r])==-1&&n.classList.remove(i[r]);for(let r=0;r<s.length;r++)i.indexOf(s[r])==-1&&n.classList.add(s[r]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=i.exec(e.style);)n.style.removeProperty(s[1])}t.style&&(n.style.cssText+=t.style)}}function Y0(n,e,t){return K0(n,n,ri,Wu(e,t,n.nodeType!=1))}function Uu(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function up(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class hC{constructor(e,t,i){this.lock=t,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=pC(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let i=e;i<t;i++)this.top.children[i].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,i){let s=0,r=this.stack.length>>1,o=Math.min(r,e.length);for(;s<o&&(s==r-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<r;)this.destroyRest(),this.top.dirty=ht,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[r])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Ei.create(this.top,e[r],t,i);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,r++}}findNodeMatch(e,t,i,s){let r=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,i))r=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,t,i)&&!this.preMatch.matched.has(c)){r=a;break}}return r<0?!1:(this.destroyBetween(this.index,r),this.index++,!0)}updateNodeAt(e,t,i,s,r){let o=this.top.children[s];return o.dirty==zt&&o.dom==o.contentDOM&&(o.dirty=si),o.update(e,t,i,r)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let i=e.pmViewDesc;if(i){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==i)return s}return-1}e=t}}updateNextNode(e,t,i,s,r,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof kn){let c=this.preMatch.matched.get(l);if(c!=null&&c!=r)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=zt&&Uu(t,l.outerDeco));if(!f&&l.update(e,t,i,s))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,t,i,s,o)))return this.top.children[this.index]=d,d.contentDOM&&(d.dirty=si,d.updateChildren(s,o+1),d.dirty=ht),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,i,s,r,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let a=kn.create(this.top,t,i,s,r,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,t,i,s,r){let o=kn.create(this.top,e,t,i,s,r);o.contentDOM&&o.updateChildren(s,r+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,i){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let r=new $0(this.top,e,t,i);this.top.children.splice(this.index++,0,r),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Ei;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Hl)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ue||je)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let i=document.createElement(e);e=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),e=="BR"&&(i.className="ProseMirror-trailingBreak");let s=new q0(this.top,[],i,null);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function pC(n,e){let t=e,i=t.children.length,s=n.childCount,r=new Map,o=[];e:for(;s>0;){let a;for(;;)if(i){let c=t.children[i-1];if(c instanceof Ei)t=c,i=c.children.length;else{a=c,i--;break}}else{if(t==e)break e;i=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=n.child(s-1))break;--s,r.set(a,s),o.push(a)}}return{index:s,matched:r,matches:o.reverse()}}function gC(n,e){return n.type.side-e.type.side}function mC(n,e,t,i){let s=e.locals(n),r=0;if(s.length==0){for(let c=0;c<n.childCount;c++){let u=n.child(c);i(u,s,e.forChild(r,u),c),r+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<s.length&&s[o].to==r;){let m=s[o++];m.widget&&(u?(d||(d=[u])).push(m):u=m)}if(u)if(d){d.sort(gC);for(let m=0;m<d.length;m++)t(d[m],c,!!l)}else t(u,c,!!l);let f,h;if(l)h=-1,f=l,l=null;else if(c<n.childCount)h=c,f=n.child(c++);else break;for(let m=0;m<a.length;m++)a[m].to<=r&&a.splice(m--,1);for(;o<s.length&&s[o].from<=r&&s[o].to>r;)a.push(s[o++]);let p=r+f.nodeSize;if(f.isText){let m=p;o<s.length&&s[o].from<m&&(m=s[o].from);for(let b=0;b<a.length;b++)a[b].to<m&&(m=a[b].to);m<p&&(l=f.cut(m-r),f=f.cut(0,m-r),p=m,h=-1)}else for(;o<s.length&&s[o].to<p;)o++;let g=f.isInline&&!f.isLeaf?a.filter(m=>!m.inline):a.slice();i(f,g,e.forChild(r,f),h),r=p}}function bC(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function yC(n,e,t,i){for(let s=0,r=0;s<n.childCount&&r<=i;){let o=n.child(s++),a=r;if(r+=o.nodeSize,!o.isText)continue;let l=o.text;for(;s<n.childCount;){let c=n.child(s++);if(r+=c.nodeSize,!c.isText)break;l+=c.text}if(r>=t){if(r>=i&&l.slice(i-e.length-a,i-a)==e)return i-e.length;let c=a<i?l.lastIndexOf(e,i-a-1):-1;if(c>=0&&c+e.length+a>=t)return a+c;if(t==i&&l.length>=i+e.length-a&&l.slice(i-a,i-a+e.length)==e)return i}}return-1}function $u(n,e,t,i,s){let r=[];for(let o=0,a=0;o<n.length;o++){let l=n[o],c=a,u=a+=l.size;c>=t||u<=e?r.push(l):(c<e&&r.push(l.slice(0,e-c,i)),s&&(r.push(s),s=void 0),u>t&&r.push(l.slice(t-c,l.size,i)))}return r}function uf(n,e=null){let t=n.domSelectionRange(),i=n.state.doc;if(!t.focusNode)return null;let s=n.docView.nearestDesc(t.focusNode),r=s&&s.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=i.resolve(o),l,c;if(zl(t)){for(l=a;s&&!s.node;)s=s.parent;let u=s.node;if(s&&u.isAtom&&L.isSelectable(u)&&s.parent&&!(u.isInline&&WE(t.focusNode,t.focusOffset,s.dom))){let d=s.posBefore;c=new L(o==d?a:i.resolve(d))}}else{let u=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(u<0)return null;l=i.resolve(u)}if(!c){let u=e=="pointer"||n.state.selection.head<a.pos&&!r?1:-1;c=df(n,l,a,u)}return c}function J0(n){return n.editable?n.hasFocus():Z0(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Zt(n,e=!1){let t=n.state.selection;if(Q0(n,t),!!J0(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&je){let i=n.domSelectionRange(),s=n.domObserver.currentSelection;if(i.anchorNode&&s.anchorNode&&ki(i.anchorNode,i.anchorOffset,s.anchorNode,s.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)xC(n);else{let{anchor:i,head:s}=t,r,o;dp&&!(t instanceof F)&&(t.$from.parent.inlineContent||(r=fp(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=fp(n,t.to))),n.docView.setSelection(i,s,n.root,e),dp&&(r&&hp(r),o&&hp(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&vC(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const dp=Ue||je&&qE<63;function fp(n,e){let{node:t,offset:i}=n.docView.domFromPos(e,0),s=i<t.childNodes.length?t.childNodes[i]:null,r=i?t.childNodes[i-1]:null;if(Ue&&s&&s.contentEditable=="false")return wc(s);if((!s||s.contentEditable=="false")&&(!r||r.contentEditable=="false")){if(s)return wc(s);if(r)return wc(r)}}function wc(n){return n.contentEditable="true",Ue&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function hp(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function vC(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),i=t.anchorNode,s=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=i||t.anchorOffset!=s)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!J0(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function xC(n){let e=n.domSelection(),t=document.createRange(),i=n.cursorWrapper.dom,s=i.nodeName=="IMG";s?t.setEnd(i.parentNode,De(i)+1):t.setEnd(i,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!s&&!n.state.selection.visible&&Xe&&An<=11&&(i.disabled=!0,i.disabled=!1)}function Q0(n,e){if(e instanceof L){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(pp(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else pp(n)}function pp(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function df(n,e,t,i){return n.someProp("createSelectionBetween",s=>s(n,e,t))||F.between(e,t,i)}function gp(n){return n.editable&&!n.hasFocus()?!1:Z0(n)}function Z0(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function _C(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return ki(e.node,e.offset,t.anchorNode,t.anchorOffset)}function qu(n,e){let{$anchor:t,$head:i}=n.selection,s=e>0?t.max(i):t.min(i),r=s.parent.inlineContent?s.depth?n.doc.resolve(e>0?s.after():s.before()):null:s;return r&&W.findFrom(r,e)}function cn(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function mp(n,e,t){let i=n.state.selection;if(i instanceof F)if(t.indexOf("s")>-1){let{$head:s}=i,r=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!r||r.isText||!r.isLeaf)return!1;let o=n.state.doc.resolve(s.pos+r.nodeSize*(e<0?-1:1));return cn(n,new F(i.$anchor,o))}else if(i.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let s=qu(n.state,e);return s&&s instanceof L?cn(n,s):!1}else if(!(lt&&t.indexOf("m")>-1)){let s=i.$head,r=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,o;if(!r||r.isText)return!1;let a=e<0?s.pos-r.nodeSize:s.pos;return r.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?L.isSelectable(r)?cn(n,new L(e<0?n.state.doc.resolve(s.pos-r.nodeSize):s)):Ur?cn(n,new F(n.state.doc.resolve(e<0?a:a+r.nodeSize))):!1:!1}}else return!1;else{if(i instanceof L&&i.node.isInline)return cn(n,new F(e>0?i.$to:i.$from));{let s=qu(n.state,e);return s?cn(n,s):!1}}}function xa(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function er(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Vi(n,e){return e<0?SC(n):wC(n)}function SC(n){let e=n.domSelectionRange(),t=e.focusNode,i=e.focusOffset;if(!t)return;let s,r,o=!1;for(_t&&t.nodeType==1&&i<xa(t)&&er(t.childNodes[i],-1)&&(o=!0);;)if(i>0){if(t.nodeType!=1)break;{let a=t.childNodes[i-1];if(er(a,-1))s=t,r=--i;else if(a.nodeType==3)t=a,i=t.nodeValue.length;else break}}else{if(X0(t))break;{let a=t.previousSibling;for(;a&&er(a,-1);)s=t.parentNode,r=De(a),a=a.previousSibling;if(a)t=a,i=xa(t);else{if(t=t.parentNode,t==n.dom)break;i=0}}}o?Gu(n,t,i):s&&Gu(n,s,r)}function wC(n){let e=n.domSelectionRange(),t=e.focusNode,i=e.focusOffset;if(!t)return;let s=xa(t),r,o;for(;;)if(i<s){if(t.nodeType!=1)break;let a=t.childNodes[i];if(er(a,1))r=t,o=++i;else break}else{if(X0(t))break;{let a=t.nextSibling;for(;a&&er(a,1);)r=a.parentNode,o=De(a)+1,a=a.nextSibling;if(a)t=a,i=0,s=xa(t);else{if(t=t.parentNode,t==n.dom)break;i=s=0}}}r&&Gu(n,r,o)}function X0(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function AC(n,e){for(;n&&e==n.childNodes.length&&!Wr(n);)e=De(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function kC(n,e){for(;n&&!e&&!Wr(n);)e=De(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Gu(n,e,t){if(e.nodeType!=3){let r,o;(o=AC(e,t))?(e=o,t=0):(r=kC(e,t))&&(e=r,t=r.nodeValue.length)}let i=n.domSelection();if(zl(i)){let r=document.createRange();r.setEnd(e,t),r.setStart(e,t),i.removeAllRanges(),i.addRange(r)}else i.extend&&i.extend(e,t);n.domObserver.setCurSelection();let{state:s}=n;setTimeout(()=>{n.state==s&&Zt(n)},50)}function bp(n,e){let t=n.state.doc.resolve(e);if(!(je||GE)&&t.parent.inlineContent){let s=n.coordsAtPos(e);if(e>t.start()){let r=n.coordsAtPos(e-1),o=(r.top+r.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(r.left-s.left)>1)return r.left<s.left?"ltr":"rtl"}if(e<t.end()){let r=n.coordsAtPos(e+1),o=(r.top+r.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(r.left-s.left)>1)return r.left>s.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function yp(n,e,t){let i=n.state.selection;if(i instanceof F&&!i.empty||t.indexOf("s")>-1||lt&&t.indexOf("m")>-1)return!1;let{$from:s,$to:r}=i;if(!s.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=qu(n.state,e);if(o&&o instanceof L)return cn(n,o)}if(!s.parent.inlineContent){let o=e<0?s:r,a=i instanceof yt?W.near(o,e):W.findFrom(o,e);return a?cn(n,a):!1}return!1}function vp(n,e){if(!(n.state.selection instanceof F))return!0;let{$head:t,$anchor:i,empty:s}=n.state.selection;if(!t.sameParent(i))return!0;if(!s)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let r=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(r&&!r.isText){let o=n.state.tr;return e<0?o.delete(t.pos-r.nodeSize,t.pos):o.delete(t.pos,t.pos+r.nodeSize),n.dispatch(o),!0}return!1}function xp(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function EC(n){if(!Ue||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let i=e.firstChild;xp(n,i,"true"),setTimeout(()=>xp(n,i,"false"),20)}return!1}function CC(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function MC(n,e){let t=e.keyCode,i=CC(e);if(t==8||lt&&t==72&&i=="c")return vp(n,-1)||Vi(n,-1);if(t==46&&!e.shiftKey||lt&&t==68&&i=="c")return vp(n,1)||Vi(n,1);if(t==13||t==27)return!0;if(t==37||lt&&t==66&&i=="c"){let s=t==37?bp(n,n.state.selection.from)=="ltr"?-1:1:-1;return mp(n,s,i)||Vi(n,s)}else if(t==39||lt&&t==70&&i=="c"){let s=t==39?bp(n,n.state.selection.from)=="ltr"?1:-1:1;return mp(n,s,i)||Vi(n,s)}else{if(t==38||lt&&t==80&&i=="c")return yp(n,-1,i)||Vi(n,-1);if(t==40||lt&&t==78&&i=="c")return EC(n)||yp(n,1,i)||Vi(n,1);if(i==(lt?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function ev(n,e){n.someProp("transformCopied",h=>{e=h(e,n)});let t=[],{content:i,openStart:s,openEnd:r}=e;for(;s>1&&r>1&&i.childCount==1&&i.firstChild.childCount==1;){s--,r--;let h=i.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),i=h.content}let o=n.someProp("clipboardSerializer")||It.fromSchema(n.state.schema),a=ov(),l=a.createElement("div");l.appendChild(o.serializeFragment(i,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=rv[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${s} ${r}${d?` -${d}`:""} ${JSON.stringify(t)}`);let f=n.someProp("clipboardTextSerializer",h=>h(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function tv(n,e,t,i,s){let r=s.parent.type.spec.code,o,a;if(!t&&!e)return null;let l=e&&(i||r||!t);if(l){if(n.someProp("transformPastedText",f=>{e=f(e,r||i,n)}),r)return e?new R(M.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):R.empty;let d=n.someProp("clipboardTextParser",f=>f(e,s,i,n));if(d)a=d;else{let f=s.marks(),{schema:h}=n.state,p=It.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let m=o.appendChild(document.createElement("p"));g&&m.appendChild(p.serializeNode(h.text(g,f)))})}}else n.someProp("transformPastedHTML",d=>{t=d(t,n)}),o=OC(t),Ur&&RC(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||as.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:s,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!TC.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=PC(_p(a,+u[1],+u[2]),u[4]);else if(a=R.maxOpen(DC(a.content,s),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=_p(a,d,f)}return n.someProp("transformPasted",d=>{a=d(a,n)}),a}const TC=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function DC(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.index(t)),r,o=[];if(n.forEach(a=>{if(!o)return;let l=s.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&r.length&&iv(l,r,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=sv(o[o.length-1],r.length));let u=nv(a,l);o.push(u),s=s.matchType(u.type),r=l}}),o)return M.from(o)}return n}function nv(n,e,t=0){for(let i=e.length-1;i>=t;i--)n=e[i].create(null,M.from(n));return n}function iv(n,e,t,i,s){if(s<n.length&&s<e.length&&n[s]==e[s]){let r=iv(n,e,t,i.lastChild,s+1);if(r)return i.copy(i.content.replaceChild(i.childCount-1,r));if(i.contentMatchAt(i.childCount).matchType(s==n.length-1?t.type:n[s+1]))return i.copy(i.content.append(M.from(nv(t,n,s+1))))}}function sv(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,sv(n.lastChild,e-1)),i=n.contentMatchAt(n.childCount).fillBefore(M.empty,!0);return n.copy(t.append(i))}function Ku(n,e,t,i,s,r){let o=e<0?n.firstChild:n.lastChild,a=o.content;return n.childCount>1&&(r=0),s<i-1&&(a=Ku(a,e,t,i,s+1,r)),s>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,r<=s).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(M.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(a))}function _p(n,e,t){return e<n.openStart&&(n=new R(Ku(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new R(Ku(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const rv={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Sp=null;function ov(){return Sp||(Sp=document.implementation.createHTMLDocument("title"))}function OC(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=ov().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(n),s;if((s=i&&rv[i[1].toLowerCase()])&&(n=s.map(r=>"<"+r+">").join("")+n+s.map(r=>"</"+r+">").reverse().join("")),t.innerHTML=n,s)for(let r=0;r<s.length;r++)t=t.querySelector(s[r])||t;return t}function RC(n){let e=n.querySelectorAll(je?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let i=e[t];i.childNodes.length==1&&i.textContent==" "&&i.parentNode&&i.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),i)}}function PC(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,i;try{i=JSON.parse(e)}catch{return n}let{content:s,openStart:r,openEnd:o}=n;for(let a=i.length-2;a>=0;a-=2){let l=t.nodes[i[a]];if(!l||l.hasRequiredAttrs())break;s=M.from(l.create(i[a+1],s)),r++,o++}return new R(s,r,o)}const $e={},qe={},NC={touchstart:!0,touchmove:!0};class IC{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function LC(n){for(let e in $e){let t=$e[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=i=>{FC(n,i)&&!ff(n,i)&&(n.editable||!(i.type in qe))&&t(n,i)},NC[e]?{passive:!0}:void 0)}Ue&&n.dom.addEventListener("input",()=>null),Yu(n)}function mn(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function BC(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Yu(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=i=>ff(n,i))})}function ff(n,e){return n.someProp("handleDOMEvents",t=>{let i=t[e.type];return i?i(n,e)||e.defaultPrevented:!1})}function FC(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function zC(n,e){!ff(n,e)&&$e[e.type]&&(n.editable||!(e.type in qe))&&$e[e.type](n,e)}qe.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!lv(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(pt&&je&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),us&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let i=Date.now();n.input.lastIOSEnter=i,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==i&&(n.someProp("handleKeyDown",s=>s(n,ei(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",i=>i(n,t))||MC(n,t)?t.preventDefault():mn(n,"key")};qe.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};qe.keypress=(n,e)=>{let t=e;if(lv(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||lt&&t.metaKey)return;if(n.someProp("handleKeyPress",s=>s(n,t))){t.preventDefault();return}let i=n.state.selection;if(!(i instanceof F)||!i.$from.sameParent(i.$to)){let s=String.fromCharCode(t.charCode);!/[\r\n]/.test(s)&&!n.someProp("handleTextInput",r=>r(n,i.$from.pos,i.$to.pos,s))&&n.dispatch(n.state.tr.insertText(s).scrollIntoView()),t.preventDefault()}};function Vl(n){return{left:n.clientX,top:n.clientY}}function HC(n,e){let t=e.x-n.clientX,i=e.y-n.clientY;return t*t+i*i<100}function hf(n,e,t,i,s){if(i==-1)return!1;let r=n.state.doc.resolve(i);for(let o=r.depth+1;o>0;o--)if(n.someProp(e,a=>o>r.depth?a(n,t,r.nodeAfter,r.before(o),s,!0):a(n,t,r.node(o),r.before(o),s,!1)))return!0;return!1}function es(n,e,t){n.focused||n.focus();let i=n.state.tr.setSelection(e);i.setMeta("pointer",!0),n.dispatch(i)}function VC(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),i=t.nodeAfter;return i&&i.isAtom&&L.isSelectable(i)?(es(n,new L(t)),!0):!1}function jC(n,e){if(e==-1)return!1;let t=n.state.selection,i,s;t instanceof L&&(i=t.node);let r=n.state.doc.resolve(e);for(let o=r.depth+1;o>0;o--){let a=o>r.depth?r.nodeAfter:r.node(o);if(L.isSelectable(a)){i&&t.$from.depth>0&&o>=t.$from.depth&&r.before(t.$from.depth+1)==t.$from.pos?s=r.before(t.$from.depth):s=r.before(o);break}}return s!=null?(es(n,L.create(n.state.doc,s)),!0):!1}function WC(n,e,t,i,s){return hf(n,"handleClickOn",e,t,i)||n.someProp("handleClick",r=>r(n,e,i))||(s?jC(n,t):VC(n,t))}function UC(n,e,t,i){return hf(n,"handleDoubleClickOn",e,t,i)||n.someProp("handleDoubleClick",s=>s(n,e,i))}function $C(n,e,t,i){return hf(n,"handleTripleClickOn",e,t,i)||n.someProp("handleTripleClick",s=>s(n,e,i))||qC(n,t,i)}function qC(n,e,t){if(t.button!=0)return!1;let i=n.state.doc;if(e==-1)return i.inlineContent?(es(n,F.create(i,0,i.content.size)),!0):!1;let s=i.resolve(e);for(let r=s.depth+1;r>0;r--){let o=r>s.depth?s.nodeAfter:s.node(r),a=s.before(r);if(o.inlineContent)es(n,F.create(i,a+1,a+1+o.content.size));else if(L.isSelectable(o))es(n,L.create(i,a));else continue;return!0}}function pf(n){return _a(n)}const av=lt?"metaKey":"ctrlKey";$e.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let i=pf(n),s=Date.now(),r="singleClick";s-n.input.lastClick.time<500&&HC(t,n.input.lastClick)&&!t[av]&&(n.input.lastClick.type=="singleClick"?r="doubleClick":n.input.lastClick.type=="doubleClick"&&(r="tripleClick")),n.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:r};let o=n.posAtCoords(Vl(t));o&&(r=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new GC(n,o,t,!!i)):(r=="doubleClick"?UC:$C)(n,o.pos,o.inside,t)?t.preventDefault():mn(n,"pointer"))};class GC{constructor(e,t,i,s){this.view=e,this.pos=t,this.event=i,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!i[av],this.allowDefault=i.shiftKey;let r,o;if(t.inside>-1)r=e.state.doc.nodeAt(t.inside),o=t.inside;else{let u=e.state.doc.resolve(t.pos);r=u.parent,o=u.depth?u.before():0}const a=s?null:i.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(i.button==0&&r.type.spec.draggable&&r.type.spec.selectable!==!1||c instanceof L&&c.from<=o&&c.to>o)&&(this.mightDrag={node:r,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&_t&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),mn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Zt(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Vl(e))),this.updateAllowDefault(e),this.allowDefault||!t?mn(this.view,"pointer"):WC(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ue&&this.mightDrag&&!this.mightDrag.node.isAtom||je&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(es(this.view,W.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):mn(this.view,"pointer")}move(e){this.updateAllowDefault(e),mn(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}$e.touchstart=n=>{n.input.lastTouch=Date.now(),pf(n),mn(n,"pointer")};$e.touchmove=n=>{n.input.lastTouch=Date.now(),mn(n,"pointer")};$e.contextmenu=n=>pf(n);function lv(n,e){return n.composing?!0:Ue&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const KC=pt?5e3:-1;qe.compositionstart=qe.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),_a(n,!0),n.markCursor=null;else if(_a(n),_t&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let i=n.domSelectionRange();for(let s=i.focusNode,r=i.focusOffset;s&&s.nodeType==1&&r!=0;){let o=r<0?s.lastChild:s.childNodes[r-1];if(!o)break;if(o.nodeType==3){n.domSelection().collapse(o,o.nodeValue.length);break}else s=o,r=-1}}n.input.composing=!0}cv(n,KC)};qe.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,cv(n,20))};function cv(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>_a(n),e))}function uv(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=JC());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function YC(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=VE(e.focusNode,e.focusOffset),i=jE(e.focusNode,e.focusOffset);if(t&&i&&t!=i){let s=i.pmViewDesc;if(!s||!s.isText(i.nodeValue))return i;if(n.input.compositionNode==i){let r=t.pmViewDesc;if(!(!r||!r.isText(t.nodeValue)))return i}}return t||i}function JC(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function _a(n,e=!1){if(!(pt&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),uv(n),e||n.docView&&n.docView.dirty){let t=uf(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):n.updateState(n.state),!0}return!1}}function QC(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),s=document.createRange();s.selectNodeContents(e),n.dom.blur(),i.removeAllRanges(),i.addRange(s),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const yr=Xe&&An<15||us&&KE<604;$e.copy=qe.cut=(n,e)=>{let t=e,i=n.state.selection,s=t.type=="cut";if(i.empty)return;let r=yr?null:t.clipboardData,o=i.content(),{dom:a,text:l}=ev(n,o);r?(t.preventDefault(),r.clearData(),r.setData("text/html",a.innerHTML),r.setData("text/plain",l)):QC(n,a),s&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ZC(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function XC(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,i=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let s=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),i.parentNode&&i.parentNode.removeChild(i),t?vr(n,i.value,null,s,e):vr(n,i.textContent,i.innerHTML,s,e)},50)}function vr(n,e,t,i,s){let r=tv(n,e,t,i,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,s,r||R.empty)))return!0;if(!r)return!1;let o=ZC(r),a=o?n.state.tr.replaceSelectionWith(o,i):n.state.tr.replaceSelection(r);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function dv(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}qe.paste=(n,e)=>{let t=e;if(n.composing&&!pt)return;let i=yr?null:t.clipboardData,s=n.input.shiftKey&&n.input.lastKeyCode!=45;i&&vr(n,dv(i),i.getData("text/html"),s,t)?t.preventDefault():XC(n,t)};class fv{constructor(e,t,i){this.slice=e,this.move=t,this.node=i}}const hv=lt?"altKey":"ctrlKey";$e.dragstart=(n,e)=>{let t=e,i=n.input.mouseDown;if(i&&i.done(),!t.dataTransfer)return;let s=n.state.selection,r=s.empty?null:n.posAtCoords(Vl(t)),o;if(!(r&&r.pos>=s.from&&r.pos<=(s instanceof L?s.to-1:s.to))){if(i&&i.mightDrag)o=L.create(n.state.doc,i.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let d=n.docView.nearestDesc(t.target,!0);d&&d.node.type.spec.draggable&&d!=n.docView&&(o=L.create(n.state.doc,d.posBefore))}}let a=(o||n.state.selection).content(),{dom:l,text:c,slice:u}=ev(n,a);t.dataTransfer.clearData(),t.dataTransfer.setData(yr?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",yr||t.dataTransfer.setData("text/plain",c),n.dragging=new fv(u,!t[hv],o)};$e.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};qe.dragover=qe.dragenter=(n,e)=>e.preventDefault();qe.drop=(n,e)=>{let t=e,i=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let s=n.posAtCoords(Vl(t));if(!s)return;let r=n.state.doc.resolve(s.pos),o=i&&i.slice;o?n.someProp("transformPasted",p=>{o=p(o,n)}):o=tv(n,dv(t.dataTransfer),yr?null:t.dataTransfer.getData("text/html"),!1,r);let a=!!(i&&!t[hv]);if(n.someProp("handleDrop",p=>p(n,t,o||R.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let l=o?D0(n.state.doc,r.pos,o):r.pos;l==null&&(l=r.pos);let c=n.state.tr;if(a){let{node:p}=i;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&L.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new L(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,m,b,y)=>p=y),c.setSelection(df(n,h,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};$e.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Zt(n)},20))};$e.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};$e.beforeinput=(n,e)=>{if(je&&pt&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:i}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=i||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",r=>r(n,ei(8,"Backspace")))))return;let{$cursor:s}=n.state.selection;s&&s.pos>0&&n.dispatch(n.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let n in qe)$e[n]=qe[n];function xr(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Sa{constructor(e,t){this.toDOM=e,this.spec=t||yi,this.side=this.spec.side||0}map(e,t,i,s){let{pos:r,deleted:o}=e.mapResult(t.from+s,this.side<0?-1:1);return o?null:new ut(r-i,r-i,this)}valid(){return!0}eq(e){return this==e||e instanceof Sa&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&xr(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class En{constructor(e,t){this.attrs=e,this.spec=t||yi}map(e,t,i,s){let r=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-i,o=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-i;return r>=o?null:new ut(r,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof En&&xr(this.attrs,e.attrs)&&xr(this.spec,e.spec)}static is(e){return e.type instanceof En}destroy(){}}class gf{constructor(e,t){this.attrs=e,this.spec=t||yi}map(e,t,i,s){let r=e.mapResult(t.from+s,1);if(r.deleted)return null;let o=e.mapResult(t.to+s,-1);return o.deleted||o.pos<=r.pos?null:new ut(r.pos-i,o.pos-i,this)}valid(e,t){let{index:i,offset:s}=e.content.findIndex(t.from),r;return s==t.from&&!(r=e.child(i)).isText&&s+r.nodeSize==t.to}eq(e){return this==e||e instanceof gf&&xr(this.attrs,e.attrs)&&xr(this.spec,e.spec)}destroy(){}}class ut{constructor(e,t,i){this.from=e,this.to=t,this.type=i}copy(e,t){return new ut(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,i){return this.type.map(e,this,t,i)}static widget(e,t,i){return new ut(e,e,new Sa(t,i))}static inline(e,t,i,s){return new ut(e,t,new En(i,s))}static node(e,t,i,s){return new ut(e,t,new gf(i,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof En}get widget(){return this.type instanceof Sa}}const qi=[],yi={};class ye{constructor(e,t){this.local=e.length?e:qi,this.children=t.length?t:qi}static create(e,t){return t.length?wa(t,e,0,yi):Ie}find(e,t,i){let s=[];return this.findInner(e??0,t??1e9,s,0,i),s}findInner(e,t,i,s,r){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!r||r(a.spec))&&i.push(a.copy(a.from+s,a.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,i,s+a,r)}}map(e,t,i){return this==Ie||e.maps.length==0?this:this.mapInner(e,t,0,0,i||yi)}mapInner(e,t,i,s,r){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,i,s);l&&l.type.valid(t,l)?(o||(o=[])).push(l):r.onRemove&&r.onRemove(this.local[a].spec)}return this.children.length?e1(this.children,o||[],e,t,i,s,r):o?new ye(o.sort(vi),qi):Ie}add(e,t){return t.length?this==Ie?ye.create(e,t):this.addInner(e,t,0):this}addInner(e,t,i){let s,r=0;e.forEach((a,l)=>{let c=l+i,u;if(u=gv(t,a,c)){for(s||(s=this.children.slice());r<s.length&&s[r]<l;)r+=3;s[r]==l?s[r+2]=s[r+2].addInner(a,u,c+1):s.splice(r,0,l,l+a.nodeSize,wa(u,a,c+1,yi)),r+=3}});let o=pv(r?mv(t):t,-i);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new ye(o.length?this.local.concat(o).sort(vi):this.local,s||this.children)}remove(e){return e.length==0||this==Ie?this:this.removeInner(e,0)}removeInner(e,t){let i=this.children,s=this.local;for(let r=0;r<i.length;r+=3){let o,a=i[r]+t,l=i[r+1]+t;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;i==this.children&&(i=this.children.slice());let c=i[r+2].removeInner(o,a+1);c!=Ie?i[r+2]=c:(i.splice(r,3),r-=3)}if(s.length){for(let r=0,o;r<e.length;r++)if(o=e[r])for(let a=0;a<s.length;a++)s[a].eq(o,t)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return i==this.children&&s==this.local?this:s.length||i.length?new ye(s,i):Ie}forChild(e,t){if(this==Ie)return this;if(t.isLeaf)return ye.empty;let i,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(i=this.children[a+2]);break}let r=e+1,o=r+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>r&&l.type instanceof En){let c=Math.max(r,l.from)-r,u=Math.min(o,l.to)-r;c<u&&(s||(s=[])).push(l.copy(c,u))}}if(s){let a=new ye(s.sort(vi),qi);return i?new fn([a,i]):a}return i||Ie}eq(e){if(this==e)return!0;if(!(e instanceof ye)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return mf(this.localsInner(e))}localsInner(e){if(this==Ie)return qi;if(e.inlineContent||!this.local.some(En.is))return this.local;let t=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof En||t.push(this.local[i]);return t}}ye.empty=new ye([],[]);ye.removeOverlap=mf;const Ie=ye.empty;class fn{constructor(e){this.members=e}map(e,t){const i=this.members.map(s=>s.map(e,t,yi));return fn.from(i)}forChild(e,t){if(t.isLeaf)return ye.empty;let i=[];for(let s=0;s<this.members.length;s++){let r=this.members[s].forChild(e,t);r!=Ie&&(r instanceof fn?i=i.concat(r.members):i.push(r))}return fn.from(i)}eq(e){if(!(e instanceof fn)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,i=!0;for(let s=0;s<this.members.length;s++){let r=this.members[s].localsInner(e);if(r.length)if(!t)t=r;else{i&&(t=t.slice(),i=!1);for(let o=0;o<r.length;o++)t.push(r[o])}}return t?mf(i?t:t.sort(vi)):qi}static from(e){switch(e.length){case 0:return Ie;case 1:return e[0];default:return new fn(e.every(t=>t instanceof ye)?e:e.reduce((t,i)=>t.concat(i instanceof ye?i:i.members),[]))}}}function e1(n,e,t,i,s,r,o){let a=n.slice();for(let c=0,u=r;c<t.maps.length;c++){let d=0;t.maps[c].forEach((f,h,p,g)=>{let m=g-p-(h-f);for(let b=0;b<a.length;b+=3){let y=a[b+1];if(y<0||f>y+u-d)continue;let v=a[b]+u-d;h>=v?a[b+1]=f<=v?-2:-1:f>=u&&m&&(a[b]+=m,a[b+1]+=m)}d+=m}),u=t.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=t.map(n[c]+r),d=u-s;if(d<0||d>=i.content.size){l=!0;continue}let f=t.map(n[c+1]+r,-1),h=f-s,{index:p,offset:g}=i.content.findIndex(d),m=i.maybeChild(p);if(m&&g==d&&g+m.nodeSize==h){let b=a[c+2].mapInner(t,m,u+1,n[c]+r+1,o);b!=Ie?(a[c]=d,a[c+1]=h,a[c+2]=b):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=t1(a,n,e,t,s,r,o),u=wa(c,i,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new ye(e.sort(vi),a)}function pv(n,e){if(!e||!n.length)return n;let t=[];for(let i=0;i<n.length;i++){let s=n[i];t.push(new ut(s.from+e,s.to+e,s.type))}return t}function t1(n,e,t,i,s,r,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(i,s,c);d?t.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+r+1);return t}function gv(n,e,t){if(e.isLeaf)return null;let i=t+e.nodeSize,s=null;for(let r=0,o;r<n.length;r++)(o=n[r])&&o.from>t&&o.to<i&&((s||(s=[])).push(o),n[r]=null);return s}function mv(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function wa(n,e,t,i){let s=[],r=!1;e.forEach((a,l)=>{let c=gv(n,a,l+t);if(c){r=!0;let u=wa(c,a,t+l+1,i);u!=Ie&&s.push(l,l+a.nodeSize,u)}});let o=pv(r?mv(n):n,-t).sort(vi);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(i.onRemove&&i.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new ye(o,s):Ie}function vi(n,e){return n.from-e.from||n.to-e.to}function mf(n){let e=n;for(let t=0;t<e.length-1;t++){let i=e[t];if(i.from!=i.to)for(let s=t+1;s<e.length;s++){let r=e[s];if(r.from==i.from){r.to!=i.to&&(e==n&&(e=n.slice()),e[s]=r.copy(r.from,i.to),wp(e,s+1,r.copy(i.to,r.to)));continue}else{r.from<i.to&&(e==n&&(e=n.slice()),e[t]=i.copy(i.from,r.from),wp(e,s,i.copy(r.from,i.to)));break}}}return e}function wp(n,e,t){for(;e<n.length&&vi(t,n[e])>0;)e++;n.splice(e,0,t)}function Ac(n){let e=[];return n.someProp("decorations",t=>{let i=t(n.state);i&&i!=Ie&&e.push(i)}),n.cursorWrapper&&e.push(ye.create(n.state.doc,[n.cursorWrapper.deco])),fn.from(e)}const n1={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},i1=Xe&&An<=11;class s1{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class r1{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new s1,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let s=0;s<i.length;s++)this.queue.push(i[s]);Xe&&An<=11&&i.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),i1&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,n1)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(gp(this.view)){if(this.suppressingSelectionUpdates)return Zt(this.view);if(Xe&&An<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ki(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,i;for(let r=e.focusNode;r;r=br(r))t.add(r);for(let r=e.anchorNode;r;r=br(r))if(t.has(r)){i=r;break}let s=i&&this.view.docView.nearestDesc(i);if(s&&s.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let i=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&gp(e)&&!this.ignoreSelectionChange(i),r=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<t.length;u++){let d=this.registerMutation(t[u],l);d&&(r=r<0?d.from:Math.min(d.from,r),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(_t&&l.length>1){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let d=u[0],f=u[1];d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}}let c=null;r<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&zl(i)&&(c=uf(e))&&c.eq(W.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Zt(e),this.currentSelection.set(i),e.scrollToSelection()):(r>-1||s)&&(r>-1&&(e.docView.markDirty(r,o),o1(e)),this.handleDOMChange(r,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(i)||Zt(e),this.currentSelection.set(i))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let i=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(i==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!i||i.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)t.push(e.addedNodes[u]);if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};let s=e.previousSibling,r=e.nextSibling;if(Xe&&An<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(r=f)}let o=s&&s.parentNode==e.target?De(s)+1:0,a=i.localPosFromDOM(e.target,o,-1),l=r&&r.parentNode==e.target?De(r):e.target.childNodes.length,c=i.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let Ap=new WeakMap,kp=!1;function o1(n){if(!Ap.has(n)&&(Ap.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=_t,kp)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),kp=!0}}function Ep(n,e){let t=e.startContainer,i=e.startOffset,s=e.endContainer,r=e.endOffset,o=n.domAtPos(n.state.selection.anchor);return ki(o.node,o.offset,s,r)&&([t,i,s,r]=[s,r,t,i]),{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:r}}function a1(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return Ep(n,s)}let t;function i(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",i,!0),t?Ep(n,t):null}function l1(n,e,t){let{node:i,fromOffset:s,toOffset:r,from:o,to:a}=n.docView.parseRange(e,t),l=n.domSelectionRange(),c,u=l.anchorNode;if(u&&n.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],zl(l)||c.push({node:l.focusNode,offset:l.focusOffset})),je&&n.input.lastKeyCode===8)for(let m=r;m>s;m--){let b=i.childNodes[m-1],y=b.pmViewDesc;if(b.nodeName=="BR"&&!y){r=m;break}if(!y||y.size)break}let d=n.state.doc,f=n.someProp("domParser")||as.fromSchema(n.state.schema),h=d.resolve(o),p=null,g=f.parse(i,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:s,to:r,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:c1,context:h});if(c&&c[0].pos!=null){let m=c[0].pos,b=c[1]&&c[1].pos;b==null&&(b=m),p={anchor:m+o,head:b+o}}return{doc:g,sel:p,from:o,to:a}}function c1(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Ue&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Ue&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const u1=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function d1(n,e,t,i,s){let r=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let T=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,N=uf(n,T);if(N&&!n.state.selection.eq(N)){if(je&&pt&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",U=>U(n,ei(13,"Enter"))))return;let B=n.state.tr.setSelection(N);T=="pointer"?B.setMeta("pointer",!0):T=="key"&&B.scrollIntoView(),r&&B.setMeta("composition",r),n.dispatch(B)}return}let o=n.state.doc.resolve(e),a=o.sharedDepth(t);e=o.before(a+1),t=n.state.doc.resolve(t).after(a+1);let l=n.state.selection,c=l1(n,e,t),u=n.state.doc,d=u.slice(c.from,c.to),f,h;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(f=n.state.selection.to,h="end"):(f=n.state.selection.from,h="start"),n.input.lastKeyCode=null;let p=p1(d.content,c.doc.content,c.from,f,h);if((us&&n.input.lastIOSEnter>Date.now()-225||pt)&&s.some(T=>T.nodeType==1&&!u1.test(T.nodeName))&&(!p||p.endA>=p.endB)&&n.someProp("handleKeyDown",T=>T(n,ei(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!p)if(i&&l instanceof F&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let T=Cp(n,n.state.doc,c.sel);if(T&&!T.eq(n.state.selection)){let N=n.state.tr.setSelection(T);r&&N.setMeta("composition",r),n.dispatch(N)}}return}n.input.domChangeCount++,n.state.selection.from<n.state.selection.to&&p.start==p.endB&&n.state.selection instanceof F&&(p.start>n.state.selection.from&&p.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?p.start=n.state.selection.from:p.endA<n.state.selection.to&&p.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(p.endB+=n.state.selection.to-p.endA,p.endA=n.state.selection.to)),Xe&&An<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)=="  "&&(p.start--,p.endA--,p.endB--);let g=c.doc.resolveNoCache(p.start-c.from),m=c.doc.resolveNoCache(p.endB-c.from),b=u.resolve(p.start),y=g.sameParent(m)&&g.parent.inlineContent&&b.end()>=p.endA,v;if((us&&n.input.lastIOSEnter>Date.now()-225&&(!y||s.some(T=>T.nodeName=="DIV"||T.nodeName=="P"))||!y&&g.pos<c.doc.content.size&&!g.sameParent(m)&&(v=W.findFrom(c.doc.resolve(g.pos+1),1,!0))&&v.head==m.pos)&&n.someProp("handleKeyDown",T=>T(n,ei(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>p.start&&h1(u,p.start,p.endA,g,m)&&n.someProp("handleKeyDown",T=>T(n,ei(8,"Backspace")))){pt&&je&&n.domObserver.suppressSelectionUpdates();return}je&&pt&&p.endB==p.start&&(n.input.lastAndroidDelete=Date.now()),pt&&!y&&g.start()!=m.start()&&m.parentOffset==0&&g.depth==m.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,m=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(T){return T(n,ei(13,"Enter"))})},20));let x=p.start,_=p.endA,S,E,C;if(y){if(g.pos==m.pos)Xe&&An<=11&&g.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Zt(n),20)),S=n.state.tr.delete(x,_),E=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(C=f1(g.parent.content.cut(g.parentOffset,m.parentOffset),b.parent.content.cut(b.parentOffset,p.endA-b.start()))))S=n.state.tr,C.type=="add"?S.addMark(x,_,C.mark):S.removeMark(x,_,C.mark);else if(g.parent.child(g.index()).isText&&g.index()==m.index()-(m.textOffset?0:1)){let T=g.parent.textBetween(g.parentOffset,m.parentOffset);if(n.someProp("handleTextInput",N=>N(n,x,_,T)))return;S=n.state.tr.insertText(T,x,_)}}if(S||(S=n.state.tr.replace(x,_,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let T=Cp(n,S.doc,c.sel);T&&!(je&&pt&&n.composing&&T.empty&&(p.start!=p.endB||n.input.lastAndroidDelete<Date.now()-100)&&(T.head==x||T.head==S.mapping.map(_)-1)||Xe&&T.empty&&T.head==x)&&S.setSelection(T)}E&&S.ensureMarks(E),r&&S.setMeta("composition",r),n.dispatch(S.scrollIntoView())}function Cp(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:df(n,e.resolve(t.anchor),e.resolve(t.head))}function f1(n,e){let t=n.firstChild.marks,i=e.firstChild.marks,s=t,r=i,o,a,l;for(let u=0;u<i.length;u++)s=i[u].removeFromSet(s);for(let u=0;u<t.length;u++)r=t[u].removeFromSet(r);if(s.length==1&&r.length==0)a=s[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(s.length==0&&r.length==1)a=r[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(M.from(c).eq(n))return{mark:a,type:o}}function h1(n,e,t,i,s){if(t-e<=s.pos-i.pos||kc(i,!0,!1)<s.pos)return!1;let r=n.resolve(e);if(!i.parent.isTextblock){let a=r.nodeAfter;return a!=null&&t==e+a.nodeSize}if(r.parentOffset<r.parent.content.size||!r.parent.isTextblock)return!1;let o=n.resolve(kc(r,!0,!0));return!o.parent.isTextblock||o.pos>t||kc(o,!0,!1)<t?!1:i.parent.content.cut(i.parentOffset).eq(o.parent.content)}function kc(n,e,t){let i=n.depth,s=e?n.end():n.pos;for(;i>0&&(e||n.indexAfter(i)==n.node(i).childCount);)i--,s++,e=!1;if(t){let r=n.node(i).maybeChild(n.indexAfter(i));for(;r&&!r.isLeaf;)r=r.firstChild,s++}return s}function p1(n,e,t,i,s){let r=n.findDiffStart(e,t);if(r==null)return null;let{a:o,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(s=="end"){let l=Math.max(0,r-Math.min(o,a));i-=o+l-r}if(o<r&&n.size<e.size){let l=i<=r&&i>=o?r-i:0;r-=l,r&&r<e.size&&Mp(e.textBetween(r-1,r+1))&&(r+=l?1:-1),a=r+(a-o),o=r}else if(a<r){let l=i<=r&&i>=a?r-i:0;r-=l,r&&r<n.size&&Mp(n.textBetween(r-1,r+1))&&(r+=l?1:-1),o=r+(o-a),a=r}return{start:r,endA:o,endB:a}}function Mp(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class g1{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new IC,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Pp),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Op(this),Dp(this),this.nodeViews=Rp(this),this.docView=cp(this.state.doc,Tp(this),Ac(this),this.dom,this),this.domObserver=new r1(this,(i,s,r,o)=>d1(this,i,s,r,o)),this.domObserver.start(),LC(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Yu(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Pp),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let i in this._props)t[i]=this._props[i];t.state=this.state;for(let i in e)t[i]=e[i];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var i;let s=this.state,r=!1,o=!1;e.storedMarks&&this.composing&&(uv(this),o=!0),this.state=e;let a=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let h=Rp(this);b1(h,this.nodeViews)&&(this.nodeViews=h,r=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&Yu(this),this.editable=Op(this),Dp(this);let l=Ac(this),c=Tp(this),u=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",d=r||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(s.selection))&&(o=!0);let f=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&QE(this);if(o){this.domObserver.stop();let h=d&&(Xe||je)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&m1(s.selection,e.selection);if(d){let p=je?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=YC(this)),(r||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=cp(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&_C(this))?Zt(this,h):(Q0(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((i=this.dragging)===null||i===void 0)&&i.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&ZE(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof L){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&ip(this,t.getBoundingClientRect(),e)}else ip(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let i=this.directPlugins[t];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let i=this.state.plugins[t];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let i=this.pluginViews[t];i.update&&i.update(this,e)}}updateDraggedNode(e,t){let i=e.node,s=-1;if(this.state.doc.nodeAt(i.from)==i.node)s=i.from;else{let r=i.from+(this.state.doc.content.size-t.doc.content.size);(r>0&&this.state.doc.nodeAt(r))==i.node&&(s=r)}this.dragging=new fv(e.slice,e.move,s<0?void 0:L.create(this.state.doc,s))}someProp(e,t){let i=this._props&&this._props[e],s;if(i!=null&&(s=t?t(i):i))return s;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(s=t?t(a):a))return s}let r=this.state.plugins;if(r)for(let o=0;o<r.length;o++){let a=r[o].props[e];if(a!=null&&(s=t?t(a):a))return s}}hasFocus(){if(Xe){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&XE(this.dom),Zt(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return sC(this,e)}coordsAtPos(e,t=1){return W0(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,i=-1){let s=this.docView.posFromDOM(e,t,i);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,t){return cC(this,t||this.state,e)}pasteHTML(e,t){return vr(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return vr(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(BC(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ac(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,zE())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return zC(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return Ue&&this.root.nodeType===11&&UE(this.dom.ownerDocument)==this.dom&&a1(this,e)||e}domSelection(){return this.root.getSelection()}}function Tp(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let i in t)i=="class"?e.class+=" "+t[i]:i=="style"?e.style=(e.style?e.style+";":"")+t[i]:!e[i]&&i!="contenteditable"&&i!="nodeName"&&(e[i]=String(t[i]))}),e.translate||(e.translate="no"),[ut.node(0,n.state.doc.content.size,e)]}function Dp(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:ut.widget(n.state.selection.head,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Op(n){return!n.someProp("editable",e=>e(n.state)===!1)}function m1(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Rp(n){let e=Object.create(null);function t(i){for(let s in i)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=i[s])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function b1(n,e){let t=0,i=0;for(let s in n){if(n[s]!=e[s])return!0;t++}for(let s in e)i++;return t!=i}function Pp(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Rn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Aa={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},y1=typeof navigator<"u"&&/Mac/.test(navigator.platform),v1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Oe=0;Oe<10;Oe++)Rn[48+Oe]=Rn[96+Oe]=String(Oe);for(var Oe=1;Oe<=24;Oe++)Rn[Oe+111]="F"+Oe;for(var Oe=65;Oe<=90;Oe++)Rn[Oe]=String.fromCharCode(Oe+32),Aa[Oe]=String.fromCharCode(Oe);for(var Ec in Rn)Aa.hasOwnProperty(Ec)||(Aa[Ec]=Rn[Ec]);function x1(n){var e=y1&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||v1&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Aa:Rn)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const _1=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function S1(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let i,s,r,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))r=!0;else if(/^mod$/i.test(l))_1?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return i&&(t="Alt-"+t),s&&(t="Ctrl-"+t),o&&(t="Meta-"+t),r&&(t="Shift-"+t),t}function w1(n){let e=Object.create(null);for(let t in n)e[S1(t)]=n[t];return e}function Cc(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function A1(n){return new Ge({props:{handleKeyDown:bv(n)}})}function bv(n){let e=w1(n);return function(t,i){let s=x1(i),r,o=e[Cc(s,i)];if(o&&o(t.state,t.dispatch,t))return!0;if(s.length==1&&s!=" "){if(i.shiftKey){let a=e[Cc(s,i,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((i.shiftKey||i.altKey||i.metaKey||s.charCodeAt(0)>127)&&(r=Rn[i.keyCode])&&r!=s){let a=e[Cc(r,i)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}const k1=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function yv(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const E1=(n,e,t)=>{let i=yv(n,t);if(!i)return!1;let s=bf(i);if(!s){let o=i.blockRange(),a=o&&ks(o);return a==null?!1:(e&&e(n.tr.lift(o,a).scrollIntoView()),!0)}let r=s.nodeBefore;if(!r.type.spec.isolating&&Sv(n,s,e))return!0;if(i.parent.content.size==0&&(ds(r,"end")||L.isSelectable(r))){let o=Bl(n.doc,i.before(),i.after(),R.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(ds(r,"end")?W.findFrom(a.doc.resolve(a.mapping.map(s.pos,-1)),-1):L.create(a.doc,s.pos-r.nodeSize)),e(a.scrollIntoView())}return!0}}return r.isAtom&&s.depth==i.depth-1?(e&&e(n.tr.delete(s.pos-r.nodeSize,s.pos).scrollIntoView()),!0):!1},C1=(n,e,t)=>{let i=yv(n,t);if(!i)return!1;let s=bf(i);return s?vv(n,s,e):!1},M1=(n,e,t)=>{let i=xv(n,t);if(!i)return!1;let s=yf(i);return s?vv(n,s,e):!1};function vv(n,e,t){let i=e.nodeBefore,s=i,r=e.pos-1;for(;!s.isTextblock;r--){if(s.type.spec.isolating)return!1;let u=s.lastChild;if(!u)return!1;s=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Bl(n.doc,r,l,R.empty);if(!c||c.from!=r||c instanceof Se&&c.slice.size>=l-r)return!1;if(t){let u=n.tr.step(c);u.setSelection(F.create(u.doc,r)),t(u.scrollIntoView())}return!0}function ds(n,e,t=!1){for(let i=n;i;i=e=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(t&&i.childCount!=1)return!1}return!1}const T1=(n,e,t)=>{let{$head:i,empty:s}=n.selection,r=i;if(!s)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):i.parentOffset>0)return!1;r=bf(i)}let o=r&&r.nodeBefore;return!o||!L.isSelectable(o)?!1:(e&&e(n.tr.setSelection(L.create(n.doc,r.pos-o.nodeSize)).scrollIntoView()),!0)};function bf(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function xv(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const D1=(n,e,t)=>{let i=xv(n,t);if(!i)return!1;let s=yf(i);if(!s)return!1;let r=s.nodeAfter;if(Sv(n,s,e))return!0;if(i.parent.content.size==0&&(ds(r,"start")||L.isSelectable(r))){let o=Bl(n.doc,i.before(),i.after(),R.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(ds(r,"start")?W.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):L.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return r.isAtom&&s.depth==i.depth-1?(e&&e(n.tr.delete(s.pos,s.pos+r.nodeSize).scrollIntoView()),!0):!1},O1=(n,e,t)=>{let{$head:i,empty:s}=n.selection,r=i;if(!s)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size)return!1;r=yf(i)}let o=r&&r.nodeAfter;return!o||!L.isSelectable(o)?!1:(e&&e(n.tr.setSelection(L.create(n.doc,r.pos)).scrollIntoView()),!0)};function yf(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const R1=(n,e)=>{let t=n.selection,i=t instanceof L,s;if(i){if(t.node.isTextblock||!Fn(n.doc,t.from))return!1;s=t.from}else if(s=Ll(n.doc,t.from,-1),s==null)return!1;if(e){let r=n.tr.join(s);i&&r.setSelection(L.create(r.doc,s-n.doc.resolve(s).nodeBefore.nodeSize)),e(r.scrollIntoView())}return!0},P1=(n,e)=>{let t=n.selection,i;if(t instanceof L){if(t.node.isTextblock||!Fn(n.doc,t.to))return!1;i=t.to}else if(i=Ll(n.doc,t.to,1),i==null)return!1;return e&&e(n.tr.join(i).scrollIntoView()),!0},N1=(n,e)=>{let{$from:t,$to:i}=n.selection,s=t.blockRange(i),r=s&&ks(s);return r==null?!1:(e&&e(n.tr.lift(s,r).scrollIntoView()),!0)},I1=(n,e)=>{let{$head:t,$anchor:i}=n.selection;return!t.parent.type.spec.code||!t.sameParent(i)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function _v(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const L1=(n,e)=>{let{$head:t,$anchor:i}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(i))return!1;let s=t.node(-1),r=t.indexAfter(-1),o=_v(s.contentMatchAt(r));if(!o||!s.canReplaceWith(r,r,o))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,o.createAndFill());l.setSelection(W.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},B1=(n,e)=>{let t=n.selection,{$from:i,$to:s}=t;if(t instanceof yt||i.parent.inlineContent||s.parent.inlineContent)return!1;let r=_v(s.parent.contentMatchAt(s.indexAfter()));if(!r||!r.isTextblock)return!1;if(e){let o=(!i.parentOffset&&s.index()<s.parent.childCount?i:s).pos,a=n.tr.insert(o,r.createAndFill());a.setSelection(F.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},F1=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let r=t.before();if(Zi(n.doc,r))return e&&e(n.tr.split(r).scrollIntoView()),!0}let i=t.blockRange(),s=i&&ks(i);return s==null?!1:(e&&e(n.tr.lift(i,s).scrollIntoView()),!0)},z1=(n,e)=>{let{$from:t,to:i}=n.selection,s,r=t.sharedDepth(i);return r==0?!1:(s=t.before(r),e&&e(n.tr.setSelection(L.create(n.doc,s))),!0)};function H1(n,e,t){let i=e.nodeBefore,s=e.nodeAfter,r=e.index();return!i||!s||!i.type.compatibleContent(s.type)?!1:!i.content.size&&e.parent.canReplace(r-1,r)?(t&&t(n.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(r,r+1)||!(s.isTextblock||Fn(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,i.type,i.contentMatchAt(i.childCount)).join(e.pos).scrollIntoView()),!0)}function Sv(n,e,t){let i=e.nodeBefore,s=e.nodeAfter,r,o;if(i.type.spec.isolating||s.type.spec.isolating)return!1;if(H1(n,e,t))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(r=(o=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&o.matchType(r[0]||s.type).validEnd){if(t){let d=e.pos+s.nodeSize,f=M.empty;for(let g=r.length-1;g>=0;g--)f=M.from(r[g].create(null,f));f=M.from(i.copy(f));let h=n.tr.step(new ke(e.pos-1,d,e.pos,d,new R(f,1,0),r.length,!0)),p=d+2*r.length;Fn(h.doc,p)&&h.join(p),t(h.scrollIntoView())}return!0}let l=W.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&ks(c);if(u!=null&&u>=e.depth)return t&&t(n.tr.lift(c,u).scrollIntoView()),!0;if(a&&ds(s,"start",!0)&&ds(i,"end")){let d=i,f=[];for(;f.push(d),!d.isTextblock;)d=d.lastChild;let h=s,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(d.canReplace(d.childCount,d.childCount,h.content)){if(t){let g=M.empty;for(let b=f.length-1;b>=0;b--)g=M.from(f[b].copy(g));let m=n.tr.step(new ke(e.pos-f.length,e.pos+s.nodeSize,e.pos+p,e.pos+s.nodeSize-p,new R(g,f.length,0),0,!0));t(m.scrollIntoView())}return!0}}return!1}function wv(n){return function(e,t){let i=e.selection,s=n<0?i.$from:i.$to,r=s.depth;for(;s.node(r).isInline;){if(!r)return!1;r--}return s.node(r).isTextblock?(t&&t(e.tr.setSelection(F.create(e.doc,n<0?s.start(r):s.end(r)))),!0):!1}}const V1=wv(-1),j1=wv(1);function W1(n,e=null){return function(t,i){let{$from:s,$to:r}=t.selection,o=s.blockRange(r),a=o&&af(o,n,e);return a?(i&&i(t.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Np(n,e=null){return function(t,i){let s=!1;for(let r=0;r<t.selection.ranges.length&&!s;r++){let{$from:{pos:o},$to:{pos:a}}=t.selection.ranges[r];t.doc.nodesBetween(o,a,(l,c)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(n,e)))if(l.type==n)s=!0;else{let u=t.doc.resolve(c),d=u.index();s=u.parent.canReplaceWith(d,d+1,n)}})}if(!s)return!1;if(i){let r=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[o];r.setBlockType(a,l,n,e)}i(r.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function U1(n,e=null){return function(t,i){let{$from:s,$to:r}=t.selection,o=s.blockRange(r),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&s.node(o.depth-1).type.compatibleContent(n)&&o.startIndex==0){if(s.index(o.depth-1)==0)return!1;let u=t.doc.resolve(o.start-2);l=new ma(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new ma(s,t.doc.resolve(r.end(o.depth)),o.depth)),a=!0}let c=af(l,n,e,o);return c?(i&&i($1(t.tr,o,c,a,n).scrollIntoView()),!0):!1}}function $1(n,e,t,i,s){let r=M.empty;for(let u=t.length-1;u>=0;u--)r=M.from(t[u].type.create(t[u].attrs,r));n.step(new ke(e.start-(i?2:0),e.end,e.start,e.end,new R(r,0,0),t.length,!0));let o=0;for(let u=0;u<t.length;u++)t[u].type==s&&(o=u+1);let a=t.length-o,l=e.start+t.length-(i?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&Zi(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return n}function q1(n){return function(e,t){let{$from:i,$to:s}=e.selection,r=i.blockRange(s,o=>o.childCount>0&&o.firstChild.type==n);return r?t?i.node(r.depth-1).type==n?G1(e,t,n,r):K1(e,t,r):!0:!1}}function G1(n,e,t,i){let s=n.tr,r=i.end,o=i.$to.end(i.depth);r<o&&(s.step(new ke(r-1,o,r,o,new R(M.from(t.create(null,i.parent.copy())),1,0),1,!0)),i=new ma(s.doc.resolve(i.$from.pos),s.doc.resolve(o),i.depth));const a=ks(i);if(a==null)return!1;s.lift(i,a);let l=s.mapping.map(r,-1)-1;return Fn(s.doc,l)&&s.join(l),e(s.scrollIntoView()),!0}function K1(n,e,t){let i=n.tr,s=t.parent;for(let h=t.end,p=t.endIndex-1,g=t.startIndex;p>g;p--)h-=s.child(p).nodeSize,i.delete(h-1,h+1);let r=i.doc.resolve(t.start),o=r.nodeAfter;if(i.mapping.map(t.end)!=t.start+r.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==s.childCount,c=r.node(-1),u=r.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?M.empty:M.from(s))))return!1;let d=r.pos,f=d+o.nodeSize;return i.step(new ke(d-(a?1:0),f+(l?1:0),d+1,f-1,new R((a?M.empty:M.from(s.copy(M.empty))).append(l?M.empty:M.from(s.copy(M.empty))),a?0:1,l?0:1),a?0:1)),e(i.scrollIntoView()),!0}function Y1(n){return function(e,t){let{$from:i,$to:s}=e.selection,r=i.blockRange(s,c=>c.childCount>0&&c.firstChild.type==n);if(!r)return!1;let o=r.startIndex;if(o==0)return!1;let a=r.parent,l=a.child(o-1);if(l.type!=n)return!1;if(t){let c=l.lastChild&&l.lastChild.type==a.type,u=M.from(c?n.create():null),d=new R(M.from(n.create(null,M.from(a.type.create(null,u)))),c?3:1,0),f=r.start,h=r.end;t(e.tr.step(new ke(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function jl(n){const{state:e,transaction:t}=n;let{selection:i}=t,{doc:s}=t,{storedMarks:r}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return r},get selection(){return i},get doc(){return s},get tr(){return i=t.selection,s=t.doc,r=t.storedMarks,t}}}class Wl{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:i}=this,{view:s}=t,{tr:r}=i,o=this.buildProps(r);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!r.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(r),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:i,editor:s,state:r}=this,{view:o}=s,a=[],l=!!e,c=e||r.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(i).map(([f,h])=>[f,(...g)=>{const m=this.buildProps(c,t),b=h(...g)(m);return a.push(b),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:i}=this,s=!1,r=e||i.tr,o=this.buildProps(r,s);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(r,s)}}buildProps(e,t=!0){const{rawCommands:i,editor:s,state:r}=this,{view:o}=s,a={tr:e,editor:s,view:o,state:jl({state:r,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(i).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class J1{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const i=this.callbacks[e];return i&&i.forEach(s=>s.apply(this,t)),this}off(e,t){const i=this.callbacks[e];return i&&(t?this.callbacks[e]=i.filter(s=>s!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function P(n,e,t){return n.config[e]===void 0&&n.parent?P(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?P(n.parent,e,t):null}):n.config[e]}function Ul(n){const e=n.filter(s=>s.type==="extension"),t=n.filter(s=>s.type==="node"),i=n.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:i}}function Av(n){const e=[],{nodeExtensions:t,markExtensions:i}=Ul(n),s=[...t,...i],r={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=P(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...r,...h}})})})})}),s.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=P(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const f={...r,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:u,attribute:f})})}),e}function Ce(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function pe(...n){return n.filter(e=>!!e).reduce((e,t)=>{const i={...e};return Object.entries(t).forEach(([s,r])=>{if(!i[s]){i[s]=r;return}if(s==="class"){const a=r?r.split(" "):[],l=i[s]?i[s].split(" "):[],c=a.filter(u=>!l.includes(u));i[s]=[...l,...c].join(" ")}else s==="style"?i[s]=[i[s],r].join("; "):i[s]=r}),i},{})}function Ju(n,e){return e.filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,i)=>pe(t,i),{})}function kv(n){return typeof n=="function"}function j(n,e=void 0,...t){return kv(n)?e?n.bind(e)(...t):n(...t):n}function Q1(n={}){return Object.keys(n).length===0&&n.constructor===Object}function Z1(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Ip(n,e){return n.style?n:{...n,getAttrs:t=>{const i=n.getAttrs?n.getAttrs(t):n.attrs;if(i===!1)return!1;const s=e.reduce((r,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(t):Z1(t.getAttribute(o.name));return a==null?r:{...r,[o.name]:a}},{});return{...i,...s}}}}function Lp(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&Q1(t)?!1:t!=null))}function X1(n,e){var t;const i=Av(n),{nodeExtensions:s,markExtensions:r}=Ul(n),o=(t=s.find(c=>P(c,"topNode")))===null||t===void 0?void 0:t.name,a=Object.fromEntries(s.map(c=>{const u=i.filter(b=>b.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=n.reduce((b,y)=>{const v=P(y,"extendNodeSchema",d);return{...b,...v?v(c):{}}},{}),h=Lp({...f,content:j(P(c,"content",d)),marks:j(P(c,"marks",d)),group:j(P(c,"group",d)),inline:j(P(c,"inline",d)),atom:j(P(c,"atom",d)),selectable:j(P(c,"selectable",d)),draggable:j(P(c,"draggable",d)),code:j(P(c,"code",d)),defining:j(P(c,"defining",d)),isolating:j(P(c,"isolating",d)),attrs:Object.fromEntries(u.map(b=>{var y;return[b.name,{default:(y=b==null?void 0:b.attribute)===null||y===void 0?void 0:y.default}]}))}),p=j(P(c,"parseHTML",d));p&&(h.parseDOM=p.map(b=>Ip(b,u)));const g=P(c,"renderHTML",d);g&&(h.toDOM=b=>g({node:b,HTMLAttributes:Ju(b,u)}));const m=P(c,"renderText",d);return m&&(h.toText=m),[c.name,h]})),l=Object.fromEntries(r.map(c=>{const u=i.filter(m=>m.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=n.reduce((m,b)=>{const y=P(b,"extendMarkSchema",d);return{...m,...y?y(c):{}}},{}),h=Lp({...f,inclusive:j(P(c,"inclusive",d)),excludes:j(P(c,"excludes",d)),group:j(P(c,"group",d)),spanning:j(P(c,"spanning",d)),code:j(P(c,"code",d)),attrs:Object.fromEntries(u.map(m=>{var b;return[m.name,{default:(b=m==null?void 0:m.attribute)===null||b===void 0?void 0:b.default}]}))}),p=j(P(c,"parseHTML",d));p&&(h.parseDOM=p.map(m=>Ip(m,u)));const g=P(c,"renderHTML",d);return g&&(h.toDOM=m=>g({mark:m,HTMLAttributes:Ju(m,u)})),[c.name,h]}));return new iE({topNode:o,nodes:a,marks:l})}function Mc(n,e){return e.nodes[n]||e.marks[n]||null}function Bp(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}const eM=(n,e=500)=>{let t="";const i=n.parentOffset;return n.parent.nodesBetween(Math.max(0,i-e),i,(s,r,o,a)=>{var l,c;const u=((c=(l=s.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:s,pos:r,parent:o,index:a}))||s.textContent||"%leaf%";t+=u.slice(0,Math.max(0,i-r))}),t};function vf(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class $l{constructor(e){this.find=e.find,this.handler=e.handler}}const tM=(n,e)=>{if(vf(e))return e.exec(n);const t=e(n);if(!t)return null;const i=[t.text];return i.index=t.index,i.input=n,i.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(t.replaceWith)),i};function lo(n){var e;const{editor:t,from:i,to:s,text:r,rules:o,plugin:a}=n,{view:l}=t;if(l.composing)return!1;const c=l.state.doc.resolve(i);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=eM(c)+r;return o.forEach(f=>{if(u)return;const h=tM(d,f.find);if(!h)return;const p=l.state.tr,g=jl({state:l.state,transaction:p}),m={from:i-(h[0].length-r.length),to:s},{commands:b,chain:y,can:v}=new Wl({editor:t,state:g});f.handler({state:g,range:m,match:h,commands:b,chain:y,can:v})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:i,to:s,text:r}),l.dispatch(p),u=!0)}),u}function nM(n){const{editor:e,rules:t}=n,i=new Ge({state:{init(){return null},apply(s,r){const o=s.getMeta(i);if(o)return o;const a=s.getMeta("applyInputRules");return!!a&&setTimeout(()=>{const{from:c,text:u}=a,d=c+u.length;lo({editor:e,from:c,to:d,text:u,rules:t,plugin:i})}),s.selectionSet||s.docChanged?null:r}},props:{handleTextInput(s,r,o,a){return lo({editor:e,from:r,to:o,text:a,rules:t,plugin:i})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:r}=s.state.selection;r&&lo({editor:e,from:r.pos,to:r.pos,text:"",rules:t,plugin:i})}),!1)},handleKeyDown(s,r){if(r.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?lo({editor:e,from:o.pos,to:o.pos,text:`
`,rules:t,plugin:i}):!1}},isInputRules:!0});return i}function iM(n){return typeof n=="number"}class sM{constructor(e){this.find=e.find,this.handler=e.handler}}const rM=(n,e,t)=>{if(vf(e))return[...n.matchAll(e)];const i=e(n,t);return i?i.map(s=>{const r=[s.text];return r.index=s.index,r.input=n,r.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),r.push(s.replaceWith)),r}):[]};function oM(n){const{editor:e,state:t,from:i,to:s,rule:r,pasteEvent:o,dropEvent:a}=n,{commands:l,chain:c,can:u}=new Wl({editor:e,state:t}),d=[];return t.doc.nodesBetween(i,s,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const g=Math.max(i,p),m=Math.min(s,p+h.content.size),b=h.textBetween(g-p,m-p,void 0,"￼");rM(b,r.find,o).forEach(v=>{if(v.index===void 0)return;const x=g+v.index+1,_=x+v[0].length,S={from:t.tr.mapping.map(x),to:t.tr.mapping.map(_)},E=r.handler({state:t,range:S,match:v,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(E)})}),d.every(h=>h!==null)}const aM=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function lM(n){const{editor:e,rules:t}=n;let i=null,s=!1,r=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a=typeof DragEvent<"u"?new DragEvent("drop"):null;const l=({state:u,from:d,to:f,rule:h,pasteEvt:p})=>{const g=u.tr,m=jl({state:u,transaction:g});if(!(!oM({editor:e,state:m,from:Math.max(d-1,0),to:f.b-1,rule:h,pasteEvent:p,dropEvent:a})||!g.steps.length))return a=typeof DragEvent<"u"?new DragEvent("drop"):null,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g};return t.map(u=>new Ge({view(d){const f=h=>{var p;i=!((p=d.dom.parentElement)===null||p===void 0)&&p.contains(h.target)?d.dom.parentElement:null};return window.addEventListener("dragstart",f),{destroy(){window.removeEventListener("dragstart",f)}}},props:{handleDOMEvents:{drop:(d,f)=>(r=i===d.dom.parentElement,a=f,!1),paste:(d,f)=>{var h;const p=(h=f.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return o=f,s=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,h)=>{const p=d[0],g=p.getMeta("uiEvent")==="paste"&&!s,m=p.getMeta("uiEvent")==="drop"&&!r,b=p.getMeta("applyPasteRules"),y=!!b;if(!g&&!m&&!y)return;if(y){const{from:_,text:S}=b,E=_+S.length,C=aM(S);return l({rule:u,state:h,from:_,to:{b:E},pasteEvt:C})}const v=f.doc.content.findDiffStart(h.doc.content),x=f.doc.content.findDiffEnd(h.doc.content);if(!(!iM(v)||!x||v===x.b))return l({rule:u,state:h,from:v,to:x,pasteEvt:o})}}))}function cM(n){const e=n.filter((t,i)=>n.indexOf(t)!==i);return[...new Set(e)]}class Ji{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Ji.resolve(e),this.schema=X1(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Ji.sort(Ji.flatten(e)),i=cM(t.map(s=>s.name));return i.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${i.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const i={name:t.name,options:t.options,storage:t.storage},s=P(t,"addExtensions",i);return s?[t,...this.flatten(s())]:t}).flat(10)}static sort(e){return e.sort((i,s)=>{const r=P(i,"priority")||100,o=P(s,"priority")||100;return r>o?-1:r<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const i={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Mc(t.name,this.schema)},s=P(t,"addCommands",i);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this,t=Ji.sort([...this.extensions].reverse()),i=[],s=[],r=t.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:Mc(o.name,this.schema)},l=[],c=P(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&o.config.exitable&&(u.ArrowRight=()=>St.handleExit({editor:e,mark:o})),c){const g=Object.fromEntries(Object.entries(c()).map(([m,b])=>[m,()=>b({editor:e})]));u={...u,...g}}const d=A1(u);l.push(d);const f=P(o,"addInputRules",a);Bp(o,e.options.enableInputRules)&&f&&i.push(...f());const h=P(o,"addPasteRules",a);Bp(o,e.options.enablePasteRules)&&h&&s.push(...h());const p=P(o,"addProseMirrorPlugins",a);if(p){const g=p();l.push(...g)}return l}).flat();return[nM({editor:e,rules:i}),...lM({editor:e,rules:s}),...r]}get attributes(){return Av(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Ul(this.extensions);return Object.fromEntries(t.filter(i=>!!P(i,"addNodeView")).map(i=>{const s=this.attributes.filter(l=>l.type===i.name),r={name:i.name,options:i.options,storage:i.storage,editor:e,type:Ce(i.name,this.schema)},o=P(i,"addNodeView",r);if(!o)return[];const a=(l,c,u,d)=>{const f=Ju(l,s);return o()({editor:e,node:l,getPos:u,decorations:d,HTMLAttributes:f,extension:i})};return[i.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const i={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Mc(e.name,this.schema)};e.type==="mark"&&(!((t=j(P(e,"keepOnSplit",i)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const s=P(e,"onBeforeCreate",i),r=P(e,"onCreate",i),o=P(e,"onUpdate",i),a=P(e,"onSelectionUpdate",i),l=P(e,"onTransaction",i),c=P(e,"onFocus",i),u=P(e,"onBlur",i),d=P(e,"onDestroy",i);s&&this.editor.on("beforeCreate",s),r&&this.editor.on("create",r),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}function uM(n){return Object.prototype.toString.call(n).slice(8,-1)}function Tc(n){return uM(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function ql(n,e){const t={...n};return Tc(n)&&Tc(e)&&Object.keys(e).forEach(i=>{Tc(e[i])?i in n?t[i]=ql(n[i],e[i]):Object.assign(t,{[i]:e[i]}):Object.assign(t,{[i]:e[i]})}),t}class et{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=j(P(this,"addOptions",{name:this.name}))),this.storage=j(P(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new et(e)}configure(e={}){const t=this.extend();return t.parent=this.parent,t.options=ql(this.options,e),t.storage=j(P(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new et({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=j(P(t,"addOptions",{name:t.name})),t.storage=j(P(t,"addStorage",{name:t.name,options:t.options})),t}}function Ev(n,e,t){const{from:i,to:s}=e,{blockSeparator:r=`

`,textSerializers:o={}}=t||{};let a="";return n.nodesBetween(i,s,(l,c,u,d)=>{var f;l.isBlock&&c>i&&(a+=r);const h=o==null?void 0:o[l.type.name];if(h)return u&&(a+=h({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)===null||f===void 0?void 0:f.slice(Math.max(i,c)-c,s-c))}),a}function Cv(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const dM=et.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ge({key:new kt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:i,selection:s}=e,{ranges:r}=s,o=Math.min(...r.map(u=>u.$from.pos)),a=Math.max(...r.map(u=>u.$to.pos)),l=Cv(t);return Ev(i,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),fM=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),hM=(n=!1)=>({commands:e})=>e.setContent("",n),pM=()=>({state:n,tr:e,dispatch:t})=>{const{selection:i}=e,{ranges:s}=i;return t&&s.forEach(({$from:r,$to:o})=>{n.doc.nodesBetween(r.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const p=ks(h);if(a.type.isTextblock){const{defaultType:g}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,g)}(p||p===0)&&e.lift(h,p)})}),!0},gM=n=>e=>n(e),mM=()=>({state:n,dispatch:e})=>B1(n,e),bM=(n,e)=>({editor:t,tr:i})=>{const{state:s}=t,r=s.doc.slice(n.from,n.to);i.deleteRange(n.from,n.to);const o=i.mapping.map(e);return i.insert(o,r.content),i.setSelection(new F(i.doc.resolve(o-1))),!0},yM=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,i=t.$anchor.node();if(i.content.size>0)return!1;const s=n.selection.$anchor;for(let r=s.depth;r>0;r-=1)if(s.node(r).type===i.type){if(e){const a=s.before(r),l=s.after(r);n.delete(a,l).scrollIntoView()}return!0}return!1},vM=n=>({tr:e,state:t,dispatch:i})=>{const s=Ce(n,t.schema),r=e.selection.$anchor;for(let o=r.depth;o>0;o-=1)if(r.node(o).type===s){if(i){const l=r.before(o),c=r.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},xM=n=>({tr:e,dispatch:t})=>{const{from:i,to:s}=n;return t&&e.delete(i,s),!0},_M=()=>({state:n,dispatch:e})=>k1(n,e),SM=()=>({commands:n})=>n.keyboardShortcut("Enter"),wM=()=>({state:n,dispatch:e})=>L1(n,e);function ka(n,e,t={strict:!0}){const i=Object.keys(e);return i.length?i.every(s=>t.strict?e[s]===n[s]:vf(e[s])?e[s].test(n[s]):e[s]===n[s]):!0}function Qu(n,e,t={}){return n.find(i=>i.type===e&&ka(i.attrs,t))}function AM(n,e,t={}){return!!Qu(n,e,t)}function xf(n,e,t={}){if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if(n.parentOffset===i.offset&&i.offset!==0&&(i=n.parent.childBefore(n.parentOffset)),!i.node)return;const s=Qu([...i.node.marks],e,t);if(!s)return;let r=i.index,o=n.start()+i.offset,a=r+1,l=o+i.node.nodeSize;for(Qu([...i.node.marks],e,t);r>0&&s.isInSet(n.parent.child(r-1).marks);)r-=1,o-=n.parent.child(r).nodeSize;for(;a<n.parent.childCount&&AM([...n.parent.child(a).marks],e,t);)l+=n.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function Hn(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const kM=(n,e={})=>({tr:t,state:i,dispatch:s})=>{const r=Hn(n,i.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(s){const d=xf(l,r,e);if(d&&d.from<=c&&d.to>=u){const f=F.create(o,d.from,d.to);t.setSelection(f)}}return!0},EM=n=>e=>{const t=typeof n=="function"?n(e):n;for(let i=0;i<t.length;i+=1)if(t[i](e))return!0;return!1};function Mv(n){return n instanceof F}function oi(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Tv(n,e=null){if(!e)return null;const t=W.atStart(n),i=W.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return i;const s=t.from,r=i.to;return e==="all"?F.create(n,oi(0,s,r),oi(n.content.size,s,r)):F.create(n,oi(e,s,r),oi(e,s,r))}function _f(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const CM=(n=null,e={})=>({editor:t,view:i,tr:s,dispatch:r})=>{e={scrollIntoView:!0,...e};const o=()=>{_f()&&i.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(i.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(i.hasFocus()&&n===null||n===!1)return!0;if(r&&n===null&&!Mv(t.state.selection))return o(),!0;const a=Tv(s.doc,n)||t.state.selection,l=t.state.selection.eq(a);return r&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},MM=(n,e)=>t=>n.every((i,s)=>e(i,{...t,index:s})),TM=(n,e)=>({tr:t,commands:i})=>i.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Dv=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const i=e[t];i.nodeType===3&&i.nodeValue&&/^(\n\s\s|\n)$/.test(i.nodeValue)?n.removeChild(i):i.nodeType===1&&Dv(i)}return n};function Fp(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Dv(t)}function Ea(n,e,t){t={slice:!0,parseOptions:{},...t};const i=typeof n=="object"&&n!==null,s=typeof n=="string";if(i)try{return Array.isArray(n)&&n.length>0?M.fromArray(n.map(o=>e.nodeFromJSON(o))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),Ea("",e,t)}if(s){const r=as.fromSchema(e);return t.slice?r.parseSlice(Fp(n),t.parseOptions).content:r.parse(Fp(n),t.parseOptions)}return Ea("",e,t)}function DM(n,e,t){const i=n.steps.length-1;if(i<e)return;const s=n.steps[i];if(!(s instanceof Se||s instanceof ke))return;const r=n.mapping.maps[i];let o=0;r.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(W.near(n.doc.resolve(o),t))}const OM=n=>n.toString().startsWith("<"),RM=(n,e,t)=>({tr:i,dispatch:s,editor:r})=>{if(s){t={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};const o=Ea(e,r.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,u=!0;if((OM(o)?o:[o]).forEach(h=>{h.check(),c=c?h.isText&&h.marks.length===0:!1,u=u?h.isBlock:!1}),a===l&&u){const{parent:h}=i.doc.resolve(a);h.isTextblock&&!h.type.spec.code&&!h.childCount&&(a-=1,l+=1)}let f;c?(Array.isArray(e)?f=e.map(h=>h.text||"").join(""):typeof e=="object"&&e&&e.text?f=e.text:f=e,i.insertText(f,a,l)):(f=o,i.replaceWith(a,l,f)),t.updateSelection&&DM(i,i.steps.length-1,-1),t.applyInputRules&&i.setMeta("applyInputRules",{from:a,text:f}),t.applyPasteRules&&i.setMeta("applyPasteRules",{from:a,text:f})}return!0},PM=()=>({state:n,dispatch:e})=>R1(n,e),NM=()=>({state:n,dispatch:e})=>P1(n,e),IM=()=>({state:n,dispatch:e})=>E1(n,e),LM=()=>({state:n,dispatch:e})=>D1(n,e),BM=()=>({tr:n,state:e,dispatch:t})=>{try{const i=Ll(e.doc,e.selection.$from.pos,-1);return i==null?!1:(n.join(i,2),t&&t(n),!0)}catch{return!1}},FM=()=>({state:n,dispatch:e,tr:t})=>{try{const i=Ll(n.doc,n.selection.$from.pos,1);return i==null?!1:(t.join(i,2),e&&e(t),!0)}catch{return!1}},zM=()=>({state:n,dispatch:e})=>C1(n,e),HM=()=>({state:n,dispatch:e})=>M1(n,e);function Ov(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function VM(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let i,s,r,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))r=!0;else if(/^mod$/i.test(l))_f()||Ov()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return i&&(t=`Alt-${t}`),s&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),r&&(t=`Shift-${t}`),t}const jM=n=>({editor:e,view:t,tr:i,dispatch:s})=>{const r=VM(n).split(/-(?!$)/),o=r.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:r.includes("Alt"),ctrlKey:r.includes("Ctrl"),metaKey:r.includes("Meta"),shiftKey:r.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(i.mapping);u&&s&&i.maybeStep(u)}),!0};function _r(n,e,t={}){const{from:i,to:s,empty:r}=n.selection,o=e?Ce(e,n.schema):null,a=[];n.doc.nodesBetween(i,s,(d,f)=>{if(d.isText)return;const h=Math.max(i,f),p=Math.min(s,f+d.nodeSize);a.push({node:d,from:h,to:p})});const l=s-i,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>ka(d.node.attrs,t,{strict:!1}));return r?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const WM=(n,e={})=>({state:t,dispatch:i})=>{const s=Ce(n,t.schema);return _r(t,s,e)?N1(t,i):!1},UM=()=>({state:n,dispatch:e})=>F1(n,e),$M=n=>({state:e,dispatch:t})=>{const i=Ce(n,e.schema);return q1(i)(e,t)},qM=()=>({state:n,dispatch:e})=>I1(n,e);function Gl(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function zp(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((i,s)=>(t.includes(s)||(i[s]=n[s]),i),{})}const GM=(n,e)=>({tr:t,state:i,dispatch:s})=>{let r=null,o=null;const a=Gl(typeof n=="string"?n:n.name,i.schema);return a?(a==="node"&&(r=Ce(n,i.schema)),a==="mark"&&(o=Hn(n,i.schema)),s&&t.selection.ranges.forEach(l=>{i.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{r&&r===c.type&&t.setNodeMarkup(u,void 0,zp(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(zp(d.attrs,e)))})})}),!0):!1},KM=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),YM=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),JM=()=>({state:n,dispatch:e})=>T1(n,e),QM=()=>({state:n,dispatch:e})=>O1(n,e),ZM=()=>({state:n,dispatch:e})=>z1(n,e),XM=()=>({state:n,dispatch:e})=>j1(n,e),eT=()=>({state:n,dispatch:e})=>V1(n,e);function Rv(n,e,t={}){return Ea(n,e,{slice:!1,parseOptions:t})}const tT=(n,e=!1,t={})=>({tr:i,editor:s,dispatch:r})=>{const{doc:o}=i,a=Rv(n,s.schema,t);return r&&i.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function Kl(n,e){const t=Hn(e,n.schema),{from:i,to:s,empty:r}=n.selection,o=[];r?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(i,s,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function nT(n,e){const t=new I0(n);return e.forEach(i=>{i.steps.forEach(s=>{t.step(s)})}),t}function iT(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function sT(n,e,t){const i=[];return n.nodesBetween(e.from,e.to,(s,r)=>{t(s)&&i.push({node:s,pos:r})}),i}function rT(n,e){for(let t=n.depth;t>0;t-=1){const i=n.node(t);if(e(i))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:i}}}function Sf(n){return e=>rT(e.$from,n)}function oT(n,e){const t=It.fromSchema(e).serializeFragment(n),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(t),s.innerHTML}function aT(n,e){const t={from:0,to:n.content.size};return Ev(n,t,e)}function lT(n,e){const t=Ce(e,n.schema),{from:i,to:s}=n.selection,r=[];n.doc.nodesBetween(i,s,a=>{r.push(a)});const o=r.reverse().find(a=>a.type.name===t.name);return o?{...o.attrs}:{}}function Pv(n,e){const t=Gl(typeof e=="string"?e:e.name,n.schema);return t==="node"?lT(n,e):t==="mark"?Kl(n,e):{}}function cT(n,e=JSON.stringify){const t={};return n.filter(i=>{const s=e(i);return Object.prototype.hasOwnProperty.call(t,s)?!1:t[s]=!0})}function uT(n){const e=cT(n);return e.length===1?e:e.filter((t,i)=>!e.filter((r,o)=>o!==i).some(r=>t.oldRange.from>=r.oldRange.from&&t.oldRange.to<=r.oldRange.to&&t.newRange.from>=r.newRange.from&&t.newRange.to<=r.newRange.to))}function dT(n){const{mapping:e,steps:t}=n,i=[];return e.maps.forEach((s,r)=>{const o=[];if(s.ranges.length)s.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=t[r];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(r).map(a,-1),u=e.slice(r).map(l),d=e.invert().map(c,-1),f=e.invert().map(u);i.push({oldRange:{from:d,to:f},newRange:{from:c,to:u}})})}),uT(i)}function wf(n,e,t){const i=[];return n===e?t.resolve(n).marks().forEach(s=>{const r=t.resolve(n-1),o=xf(r,s.type);o&&i.push({mark:s,...o})}):t.nodesBetween(n,e,(s,r)=>{!s||(s==null?void 0:s.nodeSize)===void 0||i.push(...s.marks.map(o=>({from:r,to:r+s.nodeSize,mark:o})))}),i}function Uo(n,e,t){return Object.fromEntries(Object.entries(t).filter(([i])=>{const s=n.find(r=>r.type===e&&r.name===i);return s?s.attribute.keepOnSplit:!1}))}function Zu(n,e,t={}){const{empty:i,ranges:s}=n.selection,r=e?Hn(e,n.schema):null;if(i)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>r?r.name===d.type.name:!0).find(d=>ka(d.attrs,t,{strict:!1}));let o=0;const a=[];if(s.forEach(({$from:d,$to:f})=>{const h=d.pos,p=f.pos;n.doc.nodesBetween(h,p,(g,m)=>{if(!g.isText&&!g.marks.length)return;const b=Math.max(h,m),y=Math.min(p,m+g.nodeSize),v=y-b;o+=v,a.push(...g.marks.map(x=>({mark:x,from:b,to:y})))})}),o===0)return!1;const l=a.filter(d=>r?r.name===d.mark.type.name:!0).filter(d=>ka(d.mark.attrs,t,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>r?d.mark.type!==r&&d.mark.type.excludes(r):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function fT(n,e,t={}){if(!e)return _r(n,null,t)||Zu(n,null,t);const i=Gl(e,n.schema);return i==="node"?_r(n,e,t):i==="mark"?Zu(n,e,t):!1}function Hp(n,e){const{nodeExtensions:t}=Ul(e),i=t.find(o=>o.name===n);if(!i)return!1;const s={name:i.name,options:i.options,storage:i.storage},r=j(P(i,"group",s));return typeof r!="string"?!1:r.split(" ").includes("list")}function hT(n){var e;const t=(e=n.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),i=n.toJSON();return JSON.stringify(t)===JSON.stringify(i)}function pT(n,e,t){var i;const{selection:s}=e;let r=null;if(Mv(s)&&(r=s.$cursor),r){const a=(i=n.storedMarks)!==null&&i!==void 0?i:r.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=s;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(t));c=h&&p}return!c}),c})}const gT=(n,e={})=>({tr:t,state:i,dispatch:s})=>{const{selection:r}=t,{empty:o,ranges:a}=r,l=Hn(n,i.schema);if(s)if(o){const c=Kl(i,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;i.doc.nodesBetween(u,d,(f,h)=>{const p=Math.max(h,u),g=Math.min(h+f.nodeSize,d);f.marks.find(b=>b.type===l)?f.marks.forEach(b=>{l===b.type&&t.addMark(p,g,l.create({...b.attrs,...e}))}):t.addMark(p,g,l.create(e))})});return pT(i,t,l)},mT=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),bT=(n,e={})=>({state:t,dispatch:i,chain:s})=>{const r=Ce(n,t.schema);return r.isTextblock?s().command(({commands:o})=>Np(r,e)(t)?!0:o.clearNodes()).command(({state:o})=>Np(r,e)(o,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},yT=n=>({tr:e,dispatch:t})=>{if(t){const{doc:i}=e,s=oi(n,0,i.content.size),r=L.create(i,s);e.setSelection(r)}return!0},vT=n=>({tr:e,dispatch:t})=>{if(t){const{doc:i}=e,{from:s,to:r}=typeof n=="number"?{from:n,to:n}:n,o=F.atStart(i).from,a=F.atEnd(i).to,l=oi(s,o,a),c=oi(r,o,a),u=F.create(i,l,c);e.setSelection(u)}return!0},xT=n=>({state:e,dispatch:t})=>{const i=Ce(n,e.schema);return Y1(i)(e,t)};function Vp(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const i=t.filter(s=>e==null?void 0:e.includes(s.type.name));n.tr.ensureMarks(i)}}const _T=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:i,editor:s})=>{const{selection:r,doc:o}=e,{$from:a,$to:l}=r,c=s.extensionManager.attributes,u=Uo(c,a.node().type.name,a.node().attrs);if(r instanceof L&&r.node.isBlock)return!a.parentOffset||!Zi(o,a.pos)?!1:(i&&(n&&Vp(t,s.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(i){const d=l.parentOffset===l.parent.content.size;r instanceof F&&e.deleteSelection();const f=a.depth===0?void 0:iT(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,p=Zi(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!p&&Zi(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),m=e.doc.resolve(g);a.node(-1).canReplaceWith(m.index(),m.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}n&&Vp(t,s.extensionManager.splittableMarks),e.scrollIntoView()}return!0},ST=n=>({tr:e,state:t,dispatch:i,editor:s})=>{var r;const o=Ce(n,t.schema),{$from:a,$to:l}=t.selection,c=t.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const d=s.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let m=M.empty;const b=a.index(-1)?1:a.index(-2)?2:3;for(let E=a.depth-b;E>=a.depth-3;E-=1)m=M.from(a.node(E).copy(m));const y=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,v=Uo(d,a.node().type.name,a.node().attrs),x=((r=o.contentMatch.defaultType)===null||r===void 0?void 0:r.createAndFill(v))||void 0;m=m.append(M.from(o.createAndFill(null,x)||void 0));const _=a.before(a.depth-(b-1));e.replace(_,a.after(-y),new R(m,4-b,0));let S=-1;e.doc.nodesBetween(_,e.doc.content.size,(E,C)=>{if(S>-1)return!1;E.isTextblock&&E.content.size===0&&(S=C+1)}),S>-1&&e.setSelection(F.near(e.doc.resolve(S))),e.scrollIntoView()}return!0}const f=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=Uo(d,u.type.name,u.attrs),p=Uo(d,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const g=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!Zi(e.doc,a.pos,2))return!1;if(i){const{selection:m,storedMarks:b}=t,{splittableMarks:y}=s.extensionManager,v=b||m.$to.parentOffset&&m.$from.marks();if(e.split(a.pos,2,g).scrollIntoView(),!v||!i)return!0;const x=v.filter(_=>y.includes(_.type.name));e.ensureMarks(x)}return!0},Dc=(n,e)=>{const t=Sf(o=>o.type===e)(n.selection);if(!t)return!0;const i=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(i===void 0)return!0;const s=n.doc.nodeAt(i);return t.node.type===(s==null?void 0:s.type)&&Fn(n.doc,t.pos)&&n.join(t.pos),!0},Oc=(n,e)=>{const t=Sf(o=>o.type===e)(n.selection);if(!t)return!0;const i=n.doc.resolve(t.start).after(t.depth);if(i===void 0)return!0;const s=n.doc.nodeAt(i);return t.node.type===(s==null?void 0:s.type)&&Fn(n.doc,i)&&n.join(i),!0},wT=(n,e,t,i={})=>({editor:s,tr:r,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=s.extensionManager,h=Ce(n,o.schema),p=Ce(e,o.schema),{selection:g,storedMarks:m}=o,{$from:b,$to:y}=g,v=b.blockRange(y),x=m||g.$to.parentOffset&&g.$from.marks();if(!v)return!1;const _=Sf(S=>Hp(S.type.name,d))(g);if(v.depth>=1&&_&&v.depth-_.depth<=1){if(_.node.type===h)return c.liftListItem(p);if(Hp(_.node.type.name,d)&&h.validContent(_.node.content)&&a)return l().command(()=>(r.setNodeMarkup(_.pos,h),!0)).command(()=>Dc(r,h)).command(()=>Oc(r,h)).run()}return!t||!x||!a?l().command(()=>u().wrapInList(h,i)?!0:c.clearNodes()).wrapInList(h,i).command(()=>Dc(r,h)).command(()=>Oc(r,h)).run():l().command(()=>{const S=u().wrapInList(h,i),E=x.filter(C=>f.includes(C.type.name));return r.ensureMarks(E),S?!0:c.clearNodes()}).wrapInList(h,i).command(()=>Dc(r,h)).command(()=>Oc(r,h)).run()},AT=(n,e={},t={})=>({state:i,commands:s})=>{const{extendEmptyMarkRange:r=!1}=t,o=Hn(n,i.schema);return Zu(i,o,e)?s.unsetMark(o,{extendEmptyMarkRange:r}):s.setMark(o,e)},kT=(n,e,t={})=>({state:i,commands:s})=>{const r=Ce(n,i.schema),o=Ce(e,i.schema);return _r(i,r,t)?s.setNode(o):s.setNode(r,t)},ET=(n,e={})=>({state:t,commands:i})=>{const s=Ce(n,t.schema);return _r(t,s,e)?i.lift(s):i.wrapIn(s,e)},CT=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let i=0;i<t.length;i+=1){const s=t[i];let r;if(s.spec.isInputRules&&(r=s.getState(n))){if(e){const o=n.tr,a=r.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(r.text){const l=o.doc.resolve(r.from).marks();o.replaceWith(r.from,r.to,n.schema.text(r.text,l))}else o.delete(r.from,r.to)}return!0}}return!1},MT=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:i,ranges:s}=t;return i||e&&s.forEach(r=>{n.removeMark(r.$from.pos,r.$to.pos)}),!0},TT=(n,e={})=>({tr:t,state:i,dispatch:s})=>{var r;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=Hn(n,i.schema),{$from:c,empty:u,ranges:d}=a;if(!s)return!0;if(u&&o){let{from:f,to:h}=a;const p=(r=c.marks().find(m=>m.type===l))===null||r===void 0?void 0:r.attrs,g=xf(c,l,p);g&&(f=g.from,h=g.to),t.removeMark(f,h,l)}else d.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,l)});return t.removeStoredMark(l),!0},DT=(n,e={})=>({tr:t,state:i,dispatch:s})=>{let r=null,o=null;const a=Gl(typeof n=="string"?n:n.name,i.schema);return a?(a==="node"&&(r=Ce(n,i.schema)),a==="mark"&&(o=Hn(n,i.schema)),s&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;i.doc.nodesBetween(c,u,(d,f)=>{r&&r===d.type&&t.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(h=>{if(o===h.type){const p=Math.max(f,c),g=Math.min(f+d.nodeSize,u);t.addMark(p,g,o.create({...h.attrs,...e}))}})})}),!0):!1},OT=(n,e={})=>({state:t,dispatch:i})=>{const s=Ce(n,t.schema);return W1(s,e)(t,i)},RT=(n,e={})=>({state:t,dispatch:i})=>{const s=Ce(n,t.schema);return U1(s,e)(t,i)};var PT=Object.freeze({__proto__:null,blur:fM,clearContent:hM,clearNodes:pM,command:gM,createParagraphNear:mM,cut:bM,deleteCurrentNode:yM,deleteNode:vM,deleteRange:xM,deleteSelection:_M,enter:SM,exitCode:wM,extendMarkRange:kM,first:EM,focus:CM,forEach:MM,insertContent:TM,insertContentAt:RM,joinUp:PM,joinDown:NM,joinBackward:IM,joinForward:LM,joinItemBackward:BM,joinItemForward:FM,joinTextblockBackward:zM,joinTextblockForward:HM,keyboardShortcut:jM,lift:WM,liftEmptyBlock:UM,liftListItem:$M,newlineInCode:qM,resetAttributes:GM,scrollIntoView:KM,selectAll:YM,selectNodeBackward:JM,selectNodeForward:QM,selectParentNode:ZM,selectTextblockEnd:XM,selectTextblockStart:eT,setContent:tT,setMark:gT,setMeta:mT,setNode:bT,setNodeSelection:yT,setTextSelection:vT,sinkListItem:xT,splitBlock:_T,splitListItem:ST,toggleList:wT,toggleMark:AT,toggleNode:kT,toggleWrap:ET,undoInputRule:CT,unsetAllMarks:MT,unsetMark:TT,updateAttributes:DT,wrapIn:OT,wrapInList:RT});const NT=et.create({name:"commands",addCommands(){return{...PT}}}),IT=et.create({name:"editable",addProseMirrorPlugins(){return[new Ge({key:new kt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),LT=et.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Ge({key:new kt("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const i=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(i),!1},blur:(e,t)=>{n.isFocused=!1;const i=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(i),!1}}}})]}}),BT=et.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,p=d.parent.isTextblock&&f>0?a.doc.resolve(f-1):d,g=p.parent.type.spec.isolating,m=d.pos-d.parentOffset,b=g&&p.parent.childCount===1?m===d.pos:W.atStart(c).from===f;return!u||!h.type.isTextblock||h.textContent.length||!b||b&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...i},r={...i,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return _f()||Ov()?r:s},addProseMirrorPlugins(){return[new Ge({key:new kt("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;const{empty:s,from:r,to:o}=e.selection,a=W.atStart(e.doc).from,l=W.atEnd(e.doc).to;if(s||!(r===a&&o===l)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;const d=t.tr,f=jl({state:t,transaction:d}),{commands:h}=new Wl({editor:this.editor,state:f});if(h.clearNodes(),!!d.steps.length)return d}})]}}),FT=et.create({name:"tabindex",addProseMirrorPlugins(){return[new Ge({key:new kt("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});class ti{constructor(e,t,i=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=i,this.resolvedPos=e,this.editor=t,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,i=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,i=this.to-1}this.editor.commands.insertContentAt({from:t,to:i},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new ti(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new ti(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new ti(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,i)=>{const s=t.isBlock&&!t.isTextblock,r=this.pos+i+1,o=this.resolvedPos.doc.resolve(r);if(!s&&o.depth<=this.depth)return;const a=new ti(o,this.editor,s,s?t:null);s&&(a.actualDepth=this.depth+1),e.push(new ti(o,this.editor,s,s?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let i=null,s=this.parent;for(;s&&!i;){if(s.node.type.name===e)if(Object.keys(t).length>0){const r=s.node.attrs,o=Object.keys(t);for(let a=0;a<o.length;a+=1){const l=o[a];if(r[l]!==t[l])break}}else i=s;s=s.parent}return i}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},i=!1){let s=[];if(!this.children||this.children.length===0)return s;const r=Object.keys(t);return this.children.forEach(o=>{i&&s.length>0||(o.node.type.name===e&&r.every(l=>t[l]===o.node.attrs[l])&&s.push(o),!(i&&s.length>0)&&(s=s.concat(o.querySelectorAll(e,t,i))))}),s}setAttribute(e){const t=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(t.from).run()}}const zT=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function HT(n,e,t){const i=document.querySelector("style[data-tiptap-style]");if(i!==null)return i;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(s),s}class VT extends J1{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=HT(zT,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const i=kv(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:i});this.view.updateState(s)}unregisterPlugin(e){if(this.isDestroyed)return;const t=typeof e=="string"?`${e}$`:e.key,i=this.state.reconfigure({plugins:this.state.plugins.filter(s=>!s.key.startsWith(t))});this.view.updateState(i)}createExtensionManager(){var e,t;const s=[...this.options.enableCoreExtensions?[IT,dM.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),NT,LT,BT,FT]:[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new Ji(s,this)}createCommandManager(){this.commandManager=new Wl({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=Rv(this.options.content,this.schema,this.options.parseOptions),t=Tv(e,this.options.autofocus);this.view=new g1(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:Yi.create({doc:e,selection:t||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const t=this.state.apply(e),i=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),i&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),r=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),r&&this.emit("blur",{editor:this,event:r.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Pv(this.state,e)}isActive(e,t){const i=typeof e=="string"?e:null,s=typeof e=="string"?t:e;return fT(this.state,i,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return oT(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:i={}}=e||{};return aT(this.state.doc,{blockSeparator:t,textSerializers:{...Cv(this.schema),...i}})}get isEmpty(){return hT(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var i;return((i=this.$doc)===null||i===void 0?void 0:i.querySelector(e,t))||null}$nodes(e,t){var i;return((i=this.$doc)===null||i===void 0?void 0:i.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new ti(t,this)}get $doc(){return this.$pos(0)}}function fs(n){return new $l({find:n.find,handler:({state:e,range:t,match:i})=>{const s=j(n.getAttributes,void 0,i);if(s===!1||s===null)return null;const{tr:r}=e,o=i[i.length-1],a=i[0];if(o){const l=a.search(/\S/),c=t.from+a.indexOf(o),u=c+o.length;if(wf(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(g=>g===n.type&&g!==h.mark.type)).filter(h=>h.to>c).length)return null;u<t.to&&r.delete(u,t.to),c>t.from&&r.delete(t.from+l,c);const f=t.from+l+o.length;r.addMark(t.from+l,f,n.type.create(s||{})),r.removeStoredMark(n.type)}}})}function jT(n){return new $l({find:n.find,handler:({state:e,range:t,match:i})=>{const s=j(n.getAttributes,void 0,i)||{},{tr:r}=e,o=t.from;let a=t.to;const l=n.type.create(s);if(i[1]){const c=i[0].lastIndexOf(i[1]);let u=o+c;u>a?u=a:a=u+i[1].length;const d=i[0][i[0].length-1];r.insertText(d,o+i[0].length-1),r.replaceWith(u,a,l)}else i[0]&&r.insert(o-1,n.type.create(s)).delete(r.mapping.map(o),r.mapping.map(a));r.scrollIntoView()}})}function Xu(n){return new $l({find:n.find,handler:({state:e,range:t,match:i})=>{const s=e.doc.resolve(t.from),r=j(n.getAttributes,void 0,i)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,r)}})}function Sr(n){return new $l({find:n.find,handler:({state:e,range:t,match:i,chain:s})=>{const r=j(n.getAttributes,void 0,i)||{},o=e.tr.delete(t.from,t.to),l=o.doc.resolve(t.from).blockRange(),c=l&&af(l,n.type,r);if(!c)return null;if(o.wrap(l,c),n.keepMarks&&n.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:h}=n.editor.extensionManager,p=f||d.$to.parentOffset&&d.$from.marks();if(p){const g=p.filter(m=>h.includes(m.type.name));o.ensureMarks(g)}}if(n.keepAttributes){const d=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(d,r).run()}const u=o.doc.resolve(t.from-1).nodeBefore;u&&u.type===n.type&&Fn(o.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(i,u))&&o.join(t.from-1)}})}class St{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=j(P(this,"addOptions",{name:this.name}))),this.storage=j(P(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new St(e)}configure(e={}){const t=this.extend();return t.options=ql(this.options,e),t.storage=j(P(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new St({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=j(P(t,"addOptions",{name:t.name})),t.storage=j(P(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:i}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&i.removeStoredMark(l),i.insertText(" ",s.pos),e.view.dispatch(i),!0}return!1}}class Fe{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=j(P(this,"addOptions",{name:this.name}))),this.storage=j(P(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Fe(e)}configure(e={}){const t=this.extend();return t.options=ql(this.options,e),t.storage=j(P(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){const t=new Fe({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=j(P(t,"addOptions",{name:t.name})),t.storage=j(P(t,"addStorage",{name:t.name,options:t.options})),t}}function Ci(n){return new sM({find:n.find,handler:({state:e,range:t,match:i,pasteEvent:s})=>{const r=j(n.getAttributes,void 0,i,s);if(r===!1||r===null)return null;const{tr:o}=e,a=i[i.length-1],l=i[0];let c=t.to;if(a){const u=l.search(/\S/),d=t.from+l.indexOf(a),f=d+a.length;if(wf(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(m=>m===n.type&&m!==p.mark.type)).filter(p=>p.to>d).length)return null;f<t.to&&o.delete(f,t.to),d>t.from&&o.delete(t.from+u,d),c=t.from+u+a.length,o.addMark(t.from+u,c,n.type.create(r||{})),o.removeStoredMark(n.type)}}})}const WT=/^\s*>\s$/,UT=Fe.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",pe(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Sr({find:WT,type:this.type})]}}),$T=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,qT=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,GT=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,KT=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,YT=St.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",pe(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[fs({find:$T,type:this.type}),fs({find:GT,type:this.type})]},addPasteRules(){return[Ci({find:qT,type:this.type}),Ci({find:KT,type:this.type})]}}),JT=Fe.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",pe(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),jp=St.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",pe(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:e})=>{const t=Kl(n,this.type);return Object.entries(t).some(([,s])=>!!s)?!0:e.unsetMark(this.name)}}}}),Wp=/^\s*([-+*])\s$/,QT=Fe.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",pe(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(JT.name,this.editor.getAttributes(jp.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Sr({find:Wp,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Sr({find:Wp,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(jp.name),editor:this.editor})),[n]}}),ZT=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,XT=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,eD=St.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",pe(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[fs({find:ZT,type:this.type})]},addPasteRules(){return[Ci({find:XT,type:this.type})]}}),tD=/^```([a-z]+)?[\s\n]$/,nD=/^~~~([a-z]+)?[\s\n]$/,iD=Fe.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,r=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(t)).map(o=>o.replace(t,""))[0];return r||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",pe(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:i,empty:s}=t;if(!s||i.parent.type!==this.type)return!1;const r=i.parentOffset===i.parent.nodeSize-2,o=i.parent.textContent.endsWith(`

`);return!r||!o?!1:n.chain().command(({tr:a})=>(a.delete(i.pos-2,i.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:i}=e,{$from:s,empty:r}=t;if(!r||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0||i.nodeAt(a)?!1:n.commands.exitCode()}}},addInputRules(){return[Xu({find:tD,type:this.type,getAttributes:n=>({language:n[1]})}),Xu({find:nD,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Ge({key:new kt("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),i=e.clipboardData.getData("vscode-editor-data"),s=i?JSON.parse(i):void 0,r=s==null?void 0:s.mode;if(!t||!r)return!1;const{tr:o}=n.state;return n.state.selection.from===n.state.doc.nodeSize-(1+n.state.selection.$to.depth*2)?o.insert(n.state.selection.from-1,this.type.create({language:r})):o.replaceSelectionWith(this.type.create({language:r})),o.setSelection(F.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.insertText(t.replace(/\r\n?/g,`
`)),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}}),sD=Fe.create({name:"doc",topNode:!0,content:"block+"});function rD(n={}){return new Ge({view(e){return new oD(e,n)}})}class oD{constructor(e,t){var i;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(i=t.width)!==null&&i!==void 0?i:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let r=o=>{this[s](o)};return e.dom.addEventListener(s,r),{name:s,handler:r}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,i;if(t){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),i={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!i){let a=this.editorView.coordsAtPos(this.cursorPos);i={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let s=this.editorView.dom.offsetParent;this.element||(this.element=s.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let r,o;if(!s||s==document.body&&getComputedStyle(s).position=="static")r=-pageXOffset,o=-pageYOffset;else{let a=s.getBoundingClientRect();r=a.left-s.scrollLeft,o=a.top-s.scrollTop}this.element.style.left=i.left-r+"px",this.element.style.top=i.top-o+"px",this.element.style.width=i.right-i.left+"px",this.element.style.height=i.bottom-i.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),i=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),s=i&&i.type.spec.disableDropCursor,r=typeof s=="function"?s(this.editorView,t,e):s;if(t&&!r){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=D0(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const aD=et.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[rD(this.options)]}});class le extends W{constructor(e){super(e,e)}map(e,t){let i=e.resolve(t.map(this.head));return le.valid(i)?new le(i):W.near(i)}content(){return R.empty}eq(e){return e instanceof le&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new le(e.resolve(t.pos))}getBookmark(){return new Af(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!lD(e)||!cD(e))return!1;let i=t.type.spec.allowGapCursor;if(i!=null)return i;let s=t.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,t,i=!1){e:for(;;){if(!i&&le.valid(e))return e;let s=e.pos,r=null;for(let o=e.depth;;o--){let a=e.node(o);if(t>0?e.indexAfter(o)<a.childCount:e.index(o)>0){r=a.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;s+=t;let l=e.doc.resolve(s);if(le.valid(l))return l}for(;;){let o=t>0?r.firstChild:r.lastChild;if(!o){if(r.isAtom&&!r.isText&&!L.isSelectable(r)){e=e.doc.resolve(s+r.nodeSize*t),i=!1;continue e}break}r=o,s+=t;let a=e.doc.resolve(s);if(le.valid(a))return a}return null}}}le.prototype.visible=!1;le.findFrom=le.findGapCursorFrom;W.jsonID("gapcursor",le);class Af{constructor(e){this.pos=e}map(e){return new Af(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return le.valid(t)?new le(t):W.near(t)}}function lD(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),i=n.node(e);if(t==0){if(i.type.spec.isolating)return!0;continue}for(let s=i.child(t-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function cD(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),i=n.node(e);if(t==i.childCount){if(i.type.spec.isolating)return!0;continue}for(let s=i.child(t);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function uD(){return new Ge({props:{decorations:pD,createSelectionBetween(n,e,t){return e.pos==t.pos&&le.valid(t)?new le(t):null},handleClick:fD,handleKeyDown:dD,handleDOMEvents:{beforeinput:hD}}})}const dD=bv({ArrowLeft:co("horiz",-1),ArrowRight:co("horiz",1),ArrowUp:co("vert",-1),ArrowDown:co("vert",1)});function co(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(i,s,r){let o=i.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof F){if(!r.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=i.doc.resolve(e>0?a.after():a.before())}let c=le.findGapCursorFrom(a,e,l);return c?(s&&s(i.tr.setSelection(new le(c))),!0):!1}}function fD(n,e,t){if(!n||!n.editable)return!1;let i=n.state.doc.resolve(e);if(!le.valid(i))return!1;let s=n.posAtCoords({left:t.clientX,top:t.clientY});return s&&s.inside>-1&&L.isSelectable(n.state.doc.nodeAt(s.inside))?!1:(n.dispatch(n.state.tr.setSelection(new le(i))),!0)}function hD(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof le))return!1;let{$from:t}=n.state.selection,i=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!i)return!1;let s=M.empty;for(let o=i.length-1;o>=0;o--)s=M.from(i[o].createAndFill(null,s));let r=n.state.tr.replace(t.pos,t.pos,new R(s,0,0));return r.setSelection(F.near(r.doc.resolve(t.pos+1))),n.dispatch(r),!1}function pD(n){if(!(n.selection instanceof le))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ye.create(n.doc,[ut.widget(n.selection.head,e,{key:"gapcursor"})])}const gD=et.create({name:"gapCursor",addProseMirrorPlugins(){return[uD()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=j(P(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),mD=Fe.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",pe(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:i})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:s,storedMarks:r}=t;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=i.extensionManager,l=r||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const d=l.filter(f=>a.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),bD=Fe.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,pe(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Xu({find:new RegExp(`^(#{1,${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Ca=200,Ee=function(){};Ee.prototype.append=function(e){return e.length?(e=Ee.from(e),!this.length&&e||e.length<Ca&&this.leafAppend(e)||this.length<Ca&&e.leafPrepend(this)||this.appendInner(e)):this};Ee.prototype.prepend=function(e){return e.length?Ee.from(e).append(this):this};Ee.prototype.appendInner=function(e){return new yD(this,e)};Ee.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Ee.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Ee.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ee.prototype.forEach=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=this.length),t<=i?this.forEachInner(e,t,i,0):this.forEachInvertedInner(e,t,i,0)};Ee.prototype.map=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=this.length);var s=[];return this.forEach(function(r,o){return s.push(e(r,o))},t,i),s};Ee.from=function(e){return e instanceof Ee?e:e&&e.length?new Nv(e):Ee.empty};var Nv=function(n){function e(i){n.call(this),this.values=i}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,r){return s==0&&r==this.length?this:new e(this.values.slice(s,r))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,r,o,a){for(var l=r;l<o;l++)if(s(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(s,r,o,a){for(var l=r-1;l>=o;l--)if(s(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=Ca)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=Ca)return new e(s.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Ee);Ee.empty=new Nv([]);var yD=function(n){function e(t,i){n.call(this),this.left=t,this.right=i,this.length=t.length+i.length,this.depth=Math.max(t.depth,i.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},e.prototype.forEachInner=function(i,s,r,o){var a=this.left.length;if(s<a&&this.left.forEachInner(i,s,Math.min(r,a),o)===!1||r>a&&this.right.forEachInner(i,Math.max(s-a,0),Math.min(this.length,r)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,r,o){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(i,s-a,Math.max(r,a)-a,o+a)===!1||r<a&&this.left.forEachInvertedInner(i,Math.min(s,a),r,o)===!1)return!1},e.prototype.sliceInner=function(i,s){if(i==0&&s==this.length)return this;var r=this.left.length;return s<=r?this.left.slice(i,s):i>=r?this.right.slice(i-r,s-r):this.left.slice(i,r).append(this.right.slice(0,s-r))},e.prototype.leafAppend=function(i){var s=this.right.leafAppend(i);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(i){var s=this.left.leafPrepend(i);if(s)return new e(s,this.right)},e.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new e(this.left,new e(this.right,i)):new e(this,i)},e}(Ee);const vD=500;class gt{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let s,r;t&&(s=this.remapping(i,this.items.length),r=s.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){s||(s=this.remapping(i,f+1),r=s.maps.length),r--,u.push(d);return}if(s){u.push(new Ct(d.map));let h=d.step.map(s.slice(r)),p;h&&o.maybeStep(h).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new Ct(p,void 0,void 0,c.length+u.length))),r--,p&&s.appendMap(p,r)}else o.maybeStep(d.step);if(d.selection)return a=s?d.selection.map(s.slice(r)):d.selection,l=new gt(this.items.slice(0,i).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,t,i,s){let r=[],o=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new Ct(e.mapping.maps[u],d,t),h;(h=l&&l.merge(f))&&(f=h,u?r.pop():a=a.slice(0,a.length-1)),r.push(f),t&&(o++,t=void 0),s||(l=f)}let c=o-i.depth;return c>_D&&(a=xD(a,c),o-=c),new gt(a.append(r),o)}remapping(e,t){let i=new Qi;return this.items.forEach((s,r)=>{let o=s.mirrorOffset!=null&&r-s.mirrorOffset>=e?i.maps.length-s.mirrorOffset:void 0;i.appendMap(s.map,o)},e,t),i}addMaps(e){return this.eventCount==0?this:new gt(this.items.append(e.map(t=>new Ct(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let i=[],s=Math.max(0,this.items.length-t),r=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},s);let l=t;this.items.forEach(f=>{let h=r.getMirror(--l);if(h==null)return;o=Math.min(o,h);let p=r.maps[h];if(f.step){let g=e.steps[h].invert(e.docs[h]),m=f.selection&&f.selection.map(r.slice(l+1,h));m&&a++,i.push(new Ct(p,g,m))}else i.push(new Ct(p))},s);let c=[];for(let f=t;f<o;f++)c.push(new Ct(r.maps[f]));let u=this.items.slice(0,s).append(c).append(i),d=new gt(u,a);return d.emptyItemCount()>vD&&(d=d.compress(this.items.length-i.length)),d}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),i=t.maps.length,s=[],r=0;return this.items.forEach((o,a)=>{if(a>=e)s.push(o),o.selection&&r++;else if(o.step){let l=o.step.map(t.slice(i)),c=l&&l.getMap();if(i--,c&&t.appendMap(c,i),l){let u=o.selection&&o.selection.map(t.slice(i));u&&r++;let d=new Ct(c.invert(),l,u),f,h=s.length-1;(f=s.length&&s[h].merge(d))?s[h]=f:s.push(d)}}else o.map&&i--},this.items.length,0),new gt(Ee.from(s.reverse()),r)}}gt.empty=new gt(Ee.empty,0);function xD(n,e){let t;return n.forEach((i,s)=>{if(i.selection&&e--==0)return t=s,!1}),n.slice(t)}class Ct{constructor(e,t,i,s){this.map=e,this.step=t,this.selection=i,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Ct(t.getMap().invert(),t,this.selection)}}}class un{constructor(e,t,i,s,r){this.done=e,this.undone=t,this.prevRanges=i,this.prevTime=s,this.prevComposition=r}}const _D=20;function SD(n,e,t,i){let s=t.getMeta(xi),r;if(s)return s.historyState;t.getMeta(kD)&&(n=new un(n.done,n.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(xi))return o.getMeta(xi).redo?new un(n.done.addTransform(t,void 0,i,$o(e)),n.undone,Up(t.mapping.maps[t.steps.length-1]),n.prevTime,n.prevComposition):new un(n.done,n.undone.addTransform(t,void 0,i,$o(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),l=n.prevTime==0||!o&&n.prevComposition!=a&&(n.prevTime<(t.time||0)-i.newGroupDelay||!wD(t,n.prevRanges)),c=o?Rc(n.prevRanges,t.mapping):Up(t.mapping.maps[t.steps.length-1]);return new un(n.done.addTransform(t,l?e.selection.getBookmark():void 0,i,$o(e)),gt.empty,c,t.time,a??n.prevComposition)}else return(r=t.getMeta("rebased"))?new un(n.done.rebased(t,r),n.undone.rebased(t,r),Rc(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new un(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Rc(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function wD(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((i,s)=>{for(let r=0;r<e.length;r+=2)i<=e[r+1]&&s>=e[r]&&(t=!0)}),t}function Up(n){let e=[];return n.forEach((t,i,s,r)=>e.push(s,r)),e}function Rc(n,e){if(!n)return null;let t=[];for(let i=0;i<n.length;i+=2){let s=e.map(n[i],1),r=e.map(n[i+1],-1);s<=r&&t.push(s,r)}return t}function AD(n,e,t){let i=$o(e),s=xi.get(e).spec.config,r=(t?n.undone:n.done).popEvent(e,i);if(!r)return null;let o=r.selection.resolve(r.transform.doc),a=(t?n.done:n.undone).addTransform(r.transform,e.selection.getBookmark(),s,i),l=new un(t?a:r.remaining,t?r.remaining:a,null,0,-1);return r.transform.setSelection(o).setMeta(xi,{redo:t,historyState:l})}let Pc=!1,$p=null;function $o(n){let e=n.plugins;if($p!=e){Pc=!1,$p=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Pc=!0;break}}return Pc}const xi=new kt("history"),kD=new kt("closeHistory");function ED(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Ge({key:xi,state:{init(){return new un(gt.empty,gt.empty,null,0,-1)},apply(e,t,i){return SD(t,i,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let i=t.inputType,s=i=="historyUndo"?Lv:i=="historyRedo"?Bv:null;return s?(t.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function Iv(n,e){return(t,i)=>{let s=xi.getState(t);if(!s||(n?s.undone:s.done).eventCount==0)return!1;if(i){let r=AD(s,t,n);r&&i(e?r.scrollIntoView():r)}return!0}}const Lv=Iv(!1,!0),Bv=Iv(!0,!0),CD=et.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>Lv(n,e),redo:()=>({state:n,dispatch:e})=>Bv(n,e)}},addProseMirrorPlugins(){return[ED(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),MD=Fe.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",pe(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{$to:t}=e.selection,i=n();return t.parentOffset===0?i.insertContentAt(Math.max(t.pos-2,0),{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:r})=>{var o;if(r){const{$to:a}=s.selection,l=a.end();if(a.nodeAfter)a.nodeAfter.isTextblock?s.setSelection(F.create(s.doc,a.pos+1)):a.nodeAfter.isBlock?s.setSelection(L.create(s.doc,a.pos)):s.setSelection(F.create(s.doc,a.pos));else{const c=(o=a.parent.type.contentMatch.defaultType)===null||o===void 0?void 0:o.create();c&&(s.insert(l,c),s.setSelection(F.create(s.doc,l+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[jT({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),TD=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,DD=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,OD=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,RD=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,PD=St.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",pe(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[fs({find:TD,type:this.type}),fs({find:OD,type:this.type})]},addPasteRules(){return[Ci({find:DD,type:this.type}),Ci({find:RD,type:this.type})]}}),ND=Fe.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",pe(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ID=Fe.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",pe(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),qp=St.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["span",pe(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:n,commands:e})=>{const t=Kl(n,this.type);return Object.entries(t).some(([,s])=>!!s)?!0:e.unsetMark(this.name)}}}}),Gp=/^(\d+)\.\s$/,LD=Fe.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",pe(this.options.HTMLAttributes,t),0]:["ol",pe(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ID.name,this.editor.getAttributes(qp.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Sr({find:Gp,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Sr({find:Gp,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(qp.name)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),BD=Fe.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",pe(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),FD=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,zD=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,HD=St.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",pe(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[fs({find:FD,type:this.type})]},addPasteRules(){return[Ci({find:zD,type:this.type})]}}),VD=Fe.create({name:"text",group:"inline"}),jD=et.create({name:"starterKit",addExtensions(){var n,e,t,i,s,r,o,a,l,c,u,d,f,h,p,g,m,b;const y=[];return this.options.blockquote!==!1&&y.push(UT.configure((n=this.options)===null||n===void 0?void 0:n.blockquote)),this.options.bold!==!1&&y.push(YT.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&y.push(QT.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&y.push(eD.configure((i=this.options)===null||i===void 0?void 0:i.code)),this.options.codeBlock!==!1&&y.push(iD.configure((s=this.options)===null||s===void 0?void 0:s.codeBlock)),this.options.document!==!1&&y.push(sD.configure((r=this.options)===null||r===void 0?void 0:r.document)),this.options.dropcursor!==!1&&y.push(aD.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&y.push(gD.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&y.push(mD.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&y.push(bD.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&y.push(CD.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&y.push(MD.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&y.push(PD.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&y.push(ND.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&y.push(LD.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&y.push(BD.configure((g=this.options)===null||g===void 0?void 0:g.paragraph)),this.options.strike!==!1&&y.push(HD.configure((m=this.options)===null||m===void 0?void 0:m.strike)),this.options.text!==!1&&y.push(VD.configure((b=this.options)===null||b===void 0?void 0:b.text)),y}}),WD="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",UD="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",hs=(n,e)=>{for(const t in e)n[t]=e[t];return n},ed="numeric",td="ascii",nd="alpha",qo="asciinumeric",uo="alphanumeric",id="domain",Fv="emoji",$D="scheme",qD="slashscheme",Kp="whitespace";function GD(n,e){return n in e||(e[n]=[]),e[n]}function ai(n,e,t){e[ed]&&(e[qo]=!0,e[uo]=!0),e[td]&&(e[qo]=!0,e[nd]=!0),e[qo]&&(e[uo]=!0),e[nd]&&(e[uo]=!0),e[uo]&&(e[id]=!0),e[Fv]&&(e[id]=!0);for(const i in e){const s=GD(i,t);s.indexOf(n)<0&&s.push(n)}}function KD(n,e){const t={};for(const i in e)e[i].indexOf(n)>=0&&(t[i]=!0);return t}function Ye(n){n===void 0&&(n=null),this.j={},this.jr=[],this.jd=null,this.t=n}Ye.groups={};Ye.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let i=0;i<e.jr.length;i++){const s=e.jr[i][0],r=e.jr[i][1];if(r&&s.test(n))return r}return e.jd},has(n,e){return e===void 0&&(e=!1),e?n in this.j:!!this.go(n)},ta(n,e,t,i){for(let s=0;s<n.length;s++)this.tt(n[s],e,t,i)},tr(n,e,t,i){i=i||Ye.groups;let s;return e&&e.j?s=e:(s=new Ye(e),t&&i&&ai(e,t,i)),this.jr.push([n,s]),s},ts(n,e,t,i){let s=this;const r=n.length;if(!r)return s;for(let o=0;o<r-1;o++)s=s.tt(n[o]);return s.tt(n[r-1],e,t,i)},tt(n,e,t,i){i=i||Ye.groups;const s=this;if(e&&e.j)return s.j[n]=e,e;const r=e;let o,a=s.go(n);if(a?(o=new Ye,hs(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Ye,r){if(i)if(o.t&&typeof o.t=="string"){const l=hs(KD(o.t,i),t);ai(r,l,i)}else t&&ai(r,t,i);o.t=r}return s.j[n]=o,o}};const V=(n,e,t,i,s)=>n.ta(e,t,i,s),rt=(n,e,t,i,s)=>n.tr(e,t,i,s),Yp=(n,e,t,i,s)=>n.ts(e,t,i,s),O=(n,e,t,i,s)=>n.tt(e,t,i,s),Wt="WORD",sd="UWORD",wr="LOCALHOST",rd="TLD",od="UTLD",Go="SCHEME",Gi="SLASH_SCHEME",kf="NUM",zv="WS",Ef="NL",tr="OPENBRACE",nr="CLOSEBRACE",Ma="OPENBRACKET",Ta="CLOSEBRACKET",Da="OPENPAREN",Oa="CLOSEPAREN",Ra="OPENANGLEBRACKET",Pa="CLOSEANGLEBRACKET",Na="FULLWIDTHLEFTPAREN",Ia="FULLWIDTHRIGHTPAREN",La="LEFTCORNERBRACKET",Ba="RIGHTCORNERBRACKET",Fa="LEFTWHITECORNERBRACKET",za="RIGHTWHITECORNERBRACKET",Ha="FULLWIDTHLESSTHAN",Va="FULLWIDTHGREATERTHAN",ja="AMPERSAND",Wa="APOSTROPHE",Ua="ASTERISK",dn="AT",$a="BACKSLASH",qa="BACKTICK",Ga="CARET",hn="COLON",Cf="COMMA",Ka="DOLLAR",Mt="DOT",Ya="EQUALS",Mf="EXCLAMATION",Tt="HYPHEN",Ja="PERCENT",Qa="PIPE",Za="PLUS",Xa="POUND",el="QUERY",Tf="QUOTE",Df="SEMI",Dt="SLASH",ir="TILDE",tl="UNDERSCORE",Hv="EMOJI",nl="SYM";var Vv=Object.freeze({__proto__:null,WORD:Wt,UWORD:sd,LOCALHOST:wr,TLD:rd,UTLD:od,SCHEME:Go,SLASH_SCHEME:Gi,NUM:kf,WS:zv,NL:Ef,OPENBRACE:tr,CLOSEBRACE:nr,OPENBRACKET:Ma,CLOSEBRACKET:Ta,OPENPAREN:Da,CLOSEPAREN:Oa,OPENANGLEBRACKET:Ra,CLOSEANGLEBRACKET:Pa,FULLWIDTHLEFTPAREN:Na,FULLWIDTHRIGHTPAREN:Ia,LEFTCORNERBRACKET:La,RIGHTCORNERBRACKET:Ba,LEFTWHITECORNERBRACKET:Fa,RIGHTWHITECORNERBRACKET:za,FULLWIDTHLESSTHAN:Ha,FULLWIDTHGREATERTHAN:Va,AMPERSAND:ja,APOSTROPHE:Wa,ASTERISK:Ua,AT:dn,BACKSLASH:$a,BACKTICK:qa,CARET:Ga,COLON:hn,COMMA:Cf,DOLLAR:Ka,DOT:Mt,EQUALS:Ya,EXCLAMATION:Mf,HYPHEN:Tt,PERCENT:Ja,PIPE:Qa,PLUS:Za,POUND:Xa,QUERY:el,QUOTE:Tf,SEMI:Df,SLASH:Dt,TILDE:ir,UNDERSCORE:tl,EMOJI:Hv,SYM:nl});const ji=/[a-z]/,Nc=new RegExp("\\p{L}","u"),Ic=new RegExp("\\p{Emoji}","u"),Lc=/\d/,Jp=/\s/,Qp=`
`,YD="️",JD="‍";let fo=null,ho=null;function QD(n){n===void 0&&(n=[]);const e={};Ye.groups=e;const t=new Ye;fo==null&&(fo=Zp(WD)),ho==null&&(ho=Zp(UD)),O(t,"'",Wa),O(t,"{",tr),O(t,"}",nr),O(t,"[",Ma),O(t,"]",Ta),O(t,"(",Da),O(t,")",Oa),O(t,"<",Ra),O(t,">",Pa),O(t,"（",Na),O(t,"）",Ia),O(t,"「",La),O(t,"」",Ba),O(t,"『",Fa),O(t,"』",za),O(t,"＜",Ha),O(t,"＞",Va),O(t,"&",ja),O(t,"*",Ua),O(t,"@",dn),O(t,"`",qa),O(t,"^",Ga),O(t,":",hn),O(t,",",Cf),O(t,"$",Ka),O(t,".",Mt),O(t,"=",Ya),O(t,"!",Mf),O(t,"-",Tt),O(t,"%",Ja),O(t,"|",Qa),O(t,"+",Za),O(t,"#",Xa),O(t,"?",el),O(t,'"',Tf),O(t,"/",Dt),O(t,";",Df),O(t,"~",ir),O(t,"_",tl),O(t,"\\",$a);const i=rt(t,Lc,kf,{[ed]:!0});rt(i,Lc,i);const s=rt(t,ji,Wt,{[td]:!0});rt(s,ji,s);const r=rt(t,Nc,sd,{[nd]:!0});rt(r,ji),rt(r,Nc,r);const o=rt(t,Jp,zv,{[Kp]:!0});O(t,Qp,Ef,{[Kp]:!0}),O(o,Qp),rt(o,Jp,o);const a=rt(t,Ic,Hv,{[Fv]:!0});rt(a,Ic,a),O(a,YD,a);const l=O(a,JD);rt(l,Ic,a);const c=[[ji,s]],u=[[ji,null],[Nc,r]];for(let d=0;d<fo.length;d++)an(t,fo[d],rd,Wt,c);for(let d=0;d<ho.length;d++)an(t,ho[d],od,sd,u);ai(rd,{tld:!0,ascii:!0},e),ai(od,{utld:!0,alpha:!0},e),an(t,"file",Go,Wt,c),an(t,"mailto",Go,Wt,c),an(t,"http",Gi,Wt,c),an(t,"https",Gi,Wt,c),an(t,"ftp",Gi,Wt,c),an(t,"ftps",Gi,Wt,c),ai(Go,{scheme:!0,ascii:!0},e),ai(Gi,{slashscheme:!0,ascii:!0},e),n=n.sort((d,f)=>d[0]>f[0]?1:-1);for(let d=0;d<n.length;d++){const f=n[d][0],p=n[d][1]?{[$D]:!0}:{[qD]:!0};f.indexOf("-")>=0?p[id]=!0:ji.test(f)?Lc.test(f)?p[qo]=!0:p[td]=!0:p[ed]=!0,Yp(t,f,f,p)}return Yp(t,"localhost",wr,{ascii:!0}),t.jd=new Ye(nl),{start:t,tokens:hs({groups:e},Vv)}}function ZD(n,e){const t=XD(e.replace(/[A-Z]/g,a=>a.toLowerCase())),i=t.length,s=[];let r=0,o=0;for(;o<i;){let a=n,l=null,c=0,u=null,d=-1,f=-1;for(;o<i&&(l=a.go(t[o]));)a=l,a.accepts()?(d=0,f=0,u=a):d>=0&&(d+=t[o].length,f++),c+=t[o].length,r+=t[o].length,o++;r-=d,o-=f,c-=d,s.push({t:u.t,v:e.slice(r-c,r),s:r-c,e:r})}return s}function XD(n){const e=[],t=n.length;let i=0;for(;i<t;){let s=n.charCodeAt(i),r,o=s<55296||s>56319||i+1===t||(r=n.charCodeAt(i+1))<56320||r>57343?n[i]:n.slice(i,i+2);e.push(o),i+=o.length}return e}function an(n,e,t,i,s){let r;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];n.j[l]?r=n.j[l]:(r=new Ye(i),r.jr=s.slice(),n.j[l]=r),n=r}return r=new Ye(t),r.jr=s.slice(),n.j[e[o-1]]=r,r}function Zp(n){const e=[],t=[];let i=0,s="0123456789";for(;i<n.length;){let r=0;for(;s.indexOf(n[i+r])>=0;)r++;if(r>0){e.push(t.join(""));for(let o=parseInt(n.substring(i,i+r),10);o>0;o--)t.pop();i+=r}else t.push(n[i]),i++}return e}const Ar={defaultProtocol:"http",events:null,format:Xp,formatHref:Xp,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Of(n,e){e===void 0&&(e=null);let t=hs({},Ar);n&&(t=hs(t,n instanceof Of?n.o:n));const i=t.ignoreTags,s=[];for(let r=0;r<i.length;r++)s.push(i[r].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=s}Of.prototype={o:Ar,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const i=e!=null;let s=this.o[n];return s&&(typeof s=="object"?(s=t.t in s?s[t.t]:Ar[n],typeof s=="function"&&i&&(s=s(e,t))):typeof s=="function"&&i&&(s=s(e,t.t,t)),s)},getObj(n,e,t){let i=this.o[n];return typeof i=="function"&&e!=null&&(i=i(e,t.t,t)),i},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function Xp(n){return n}function jv(n,e){this.t="token",this.v=n,this.tk=e}jv.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),i=n.get("format",e,this);return t&&i.length>t?i.substring(0,t)+"…":i},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n){return n===void 0&&(n=Ar.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),i=n.get("formatHref",t,this),s=n.get("tagName",t,e),r=this.toFormattedString(n),o={},a=n.get("className",t,e),l=n.get("target",t,e),c=n.get("rel",t,e),u=n.getObj("attributes",t,e),d=n.getObj("events",t,e);return o.href=i,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&hs(o,u),{tagName:s,attributes:o,content:r,eventListeners:d}}};function Yl(n,e){class t extends jv{constructor(s,r){super(s,r),this.t=n}}for(const i in e)t.prototype[i]=e[i];return t.t=n,t}const eg=Yl("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),tg=Yl("text"),eO=Yl("nl"),po=Yl("url",{isLink:!0,toHref(n){return n===void 0&&(n=Ar.defaultProtocol),this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==wr&&n[1].t===hn}}),ot=n=>new Ye(n);function tO(n){let{groups:e}=n;const t=e.domain.concat([ja,Ua,dn,$a,qa,Ga,Ka,Ya,Tt,kf,Ja,Qa,Za,Xa,Dt,nl,ir,tl]),i=[Wa,hn,Cf,Mt,Mf,el,Tf,Df,Ra,Pa,tr,nr,Ta,Ma,Da,Oa,Na,Ia,La,Ba,Fa,za,Ha,Va],s=[ja,Wa,Ua,$a,qa,Ga,Ka,Ya,Tt,tr,nr,Ja,Qa,Za,Xa,el,Dt,nl,ir,tl],r=ot(),o=O(r,ir);V(o,s,o),V(o,e.domain,o);const a=ot(),l=ot(),c=ot();V(r,e.domain,a),V(r,e.scheme,l),V(r,e.slashscheme,c),V(a,s,o),V(a,e.domain,a);const u=O(a,dn);O(o,dn,u),O(l,dn,u),O(c,dn,u);const d=O(o,Mt);V(d,s,o),V(d,e.domain,o);const f=ot();V(u,e.domain,f),V(f,e.domain,f);const h=O(f,Mt);V(h,e.domain,f);const p=ot(eg);V(h,e.tld,p),V(h,e.utld,p),O(u,wr,p);const g=O(f,Tt);V(g,e.domain,f),V(p,e.domain,f),O(p,Mt,h),O(p,Tt,g);const m=O(p,hn);V(m,e.numeric,eg);const b=O(a,Tt),y=O(a,Mt);V(b,e.domain,a),V(y,s,o),V(y,e.domain,a);const v=ot(po);V(y,e.tld,v),V(y,e.utld,v),V(v,e.domain,a),V(v,s,o),O(v,Mt,y),O(v,Tt,b),O(v,dn,u);const x=O(v,hn),_=ot(po);V(x,e.numeric,_);const S=ot(po),E=ot();V(S,t,S),V(S,i,E),V(E,t,S),V(E,i,E),O(v,Dt,S),O(_,Dt,S);const C=O(l,hn),T=O(c,hn),N=O(T,Dt),B=O(N,Dt);V(l,e.domain,a),O(l,Mt,y),O(l,Tt,b),V(c,e.domain,a),O(c,Mt,y),O(c,Tt,b),V(C,e.domain,S),O(C,Dt,S),V(B,e.domain,S),V(B,t,S),O(B,Dt,S);const U=[[tr,nr],[Ma,Ta],[Da,Oa],[Ra,Pa],[Na,Ia],[La,Ba],[Fa,za],[Ha,Va]];for(let de=0;de<U.length;de++){const[Re,G]=U[de],Y=O(S,Re);O(E,Re,Y),O(Y,G,S);const Z=ot(po);V(Y,t,Z);const Me=ot();V(Y,i),V(Z,t,Z),V(Z,i,Me),V(Me,t,Z),V(Me,i,Me),O(Z,G,S),O(Me,G,S)}return O(r,wr,v),O(r,Ef,eO),{start:r,tokens:Vv}}function nO(n,e,t){let i=t.length,s=0,r=[],o=[];for(;s<i;){let a=n,l=null,c=null,u=0,d=null,f=-1;for(;s<i&&!(l=a.go(t[s].t));)o.push(t[s++]);for(;s<i&&(c=l||a.go(t[s].t));)l=null,a=c,a.accepts()?(f=0,d=a):f>=0&&f++,s++,u++;if(f<0)s-=u,s<i&&(o.push(t[s]),s++);else{o.length>0&&(r.push(Bc(tg,e,o)),o=[]),s-=f,u-=f;const h=d.t,p=t.slice(s-u,s);r.push(Bc(h,e,p))}}return o.length>0&&r.push(Bc(tg,e,o)),r}function Bc(n,e,t){const i=t[0].s,s=t[t.length-1].e,r=e.slice(i,s);return new n(r,t)}const iO=typeof console<"u"&&console&&console.warn||(()=>{}),sO="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",re={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function rO(){Ye.groups={},re.scanner=null,re.parser=null,re.tokenQueue=[],re.pluginQueue=[],re.customSchemes=[],re.initialized=!1}function ng(n,e){if(e===void 0&&(e=!1),re.initialized&&iO(`linkifyjs: already initialized - will not register custom scheme "${n}" ${sO}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);re.customSchemes.push([n,e])}function oO(){re.scanner=QD(re.customSchemes);for(let n=0;n<re.tokenQueue.length;n++)re.tokenQueue[n][1]({scanner:re.scanner});re.parser=tO(re.scanner.tokens);for(let n=0;n<re.pluginQueue.length;n++)re.pluginQueue[n][1]({scanner:re.scanner,parser:re.parser});re.initialized=!0}function Wv(n){return re.initialized||oO(),nO(re.parser.start,n,ZD(re.scanner.start,n))}function Uv(n,e,t){if(e===void 0&&(e=null),t===void 0&&(t=null),e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const i=new Of(t),s=Wv(n),r=[];for(let o=0;o<s.length;o++){const a=s[o];a.isLink&&(!e||a.t===e)&&i.check(a)&&r.push(a.toFormattedObject(i))}return r}function aO(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function lO(n){return new Ge({key:new kt("autolink"),appendTransaction:(e,t,i)=>{const s=e.some(c=>c.docChanged)&&!t.doc.eq(i.doc),r=e.some(c=>c.getMeta("preventAutolink"));if(!s||r)return;const{tr:o}=i,a=nT(t.doc,[...e]);if(dT(a).forEach(({newRange:c})=>{const u=sT(i.doc,c,h=>h.isTextblock);let d,f;if(u.length>1?(d=u[0],f=i.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ")):u.length&&i.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(d=u[0],f=i.doc.textBetween(d.pos,c.to,void 0," ")),d&&f){const h=f.split(" ").filter(b=>b!=="");if(h.length<=0)return!1;const p=h[h.length-1],g=d.pos+f.lastIndexOf(p);if(!p)return!1;const m=Wv(p).map(b=>b.toObject());if(!aO(m))return!1;m.filter(b=>b.isLink).map(b=>({...b,from:g+b.start+1,to:g+b.end+1})).filter(b=>i.schema.marks.code?!i.doc.rangeHasMark(b.from,b.to,i.schema.marks.code):!0).filter(b=>n.validate?n.validate(b.value):!0).forEach(b=>{wf(b.from,b.to,i.doc).some(y=>y.mark.type===n.type)||o.addMark(b.from,b.to,n.type.create({href:b.href}))})}}),!!o.steps.length)return o}})}function cO(n){return new Ge({key:new kt("handleClickLink"),props:{handleClick:(e,t,i)=>{var s,r;if(n.whenNotEditable&&e.editable||i.button!==0)return!1;let o=i.target;const a=[];for(;o.nodeName!=="DIV";)a.push(o),o=o.parentNode;if(!a.find(f=>f.nodeName==="A"))return!1;const l=Pv(e.state,n.type.name),c=i.target,u=(s=c==null?void 0:c.href)!==null&&s!==void 0?s:l.href,d=(r=c==null?void 0:c.target)!==null&&r!==void 0?r:l.target;return c&&u?(window.open(u,d),!0):!1}}})}function uO(n){return new Ge({key:new kt("handlePasteLink"),props:{handlePaste:(e,t,i)=>{const{state:s}=e,{selection:r}=s,{empty:o}=r;if(o)return!1;let a="";i.content.forEach(c=>{a+=c.textContent});const l=Uv(a).find(c=>c.isLink&&c.value===a);return!a||!l?!1:(n.editor.commands.setMark(n.type,{href:l.href}),!0)}}})}const dO=St.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(n=>{if(typeof n=="string"){ng(n);return}ng(n.scheme,n.optionalSlashes)})},onDestroy(){rO()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:'a[href]:not([href *= "javascript:" i])'}]},renderHTML({HTMLAttributes:n}){var e;return!((e=n.href)===null||e===void 0)&&e.startsWith("javascript:")?["a",pe(this.options.HTMLAttributes,{...n,href:""}),0]:["a",pe(this.options.HTMLAttributes,n),0]},addCommands(){return{setLink:n=>({chain:e})=>e().setMark(this.name,n).setMeta("preventAutolink",!0).run(),toggleLink:n=>({chain:e})=>e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ci({find:n=>{const e=[];if(n){const t=Uv(n).filter(i=>i.isLink);t.length&&t.forEach(i=>e.push({text:i.value,data:{href:i.href},index:i.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[];return this.options.autolink&&n.push(lO({type:this.type,validate:this.options.validate})),this.options.openOnClick&&n.push(cO({type:this.type,whenNotEditable:this.options.openOnClick==="whenNotEditable"})),this.options.linkOnPaste&&n.push(uO({editor:this.editor,type:this.type})),n}}),fO=et.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:n=>n.style.textAlign||this.options.defaultAlignment,renderHTML:n=>n.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${n.textAlign}`}}}}]},addCommands(){return{setTextAlign:n=>({commands:e})=>this.options.alignments.includes(n)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:n})).every(t=>t):!1,unsetTextAlign:()=>({commands:n})=>this.options.types.map(e=>n.resetAttributes(e,"textAlign")).every(e=>e)}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});String.prototype.deentitize=function(){var n=this.replace(/&amp;/g,"&");return n=n.replace(/&gt;/g,">"),n=n.replace(/&lt;/g,"<"),n=n.replace(/&quot;/g,'"'),n=n.replace(/&apos;/g,"'"),n=n.replace(/&amp;/g,"&"),n};const hO=(n,e=!0)=>{let t;return{updatedAt:Date.now(),init(){const i=this;t=new VT({element:this.$refs.element,extensions:[jD.configure({heading:{HTMLAttributes:{class:"text-2xl font-bold"}}}),dO.configure({openOnClick:!1,autolink:!1,defaultProtocol:"https"}),fO.configure({types:["heading","paragraph"]})],content:n.deentitize(),editable:e,autofocus:!0,editorProps:{attributes:{class:"w-full border-background-300 dark:border-background-700 dark:bg-background-900 dark:text-background-300 focus:outline-none focus:border-primary-500 dark:focus:border-primary-600 focus:ring-primary-500 dark:focus:ring-primary-600 rounded-md shadow-sm"}},onCreate({editor:s}){i.updatedAt=Date.now()},onUpdate({editor:s}){i.updatedAt=Date.now();const r=s.getHTML(),o=document.querySelector("#editor-content");o.value=r},onSelectionUpdate({editor:s}){i.updatedAt=Date.now()}})},isLoaded(){return t},isActive(i,s={}){return t.isActive(i,s)},toggleHeading(i){t.chain().toggleHeading(i).focus().run()},toggleTextAlign(i){console.log(i),t.chain().focus().setTextAlign(i).run()},toggleBold(){t.chain().focus().toggleBold().run()},toggleItalic(){t.chain().focus().toggleItalic().run()},toggleStrike(){t.chain().focus().toggleStrike().run()},toggleParagraph(){t.chain().focus().toggleParagraph().run()},toggleBulletList(){t.chain().focus().toggleBulletList().run()},toggleOrderedList(){t.chain().focus().toggleOrderedList().run()},toggleBlockquote(){t.chain().focus().toggleBlockquote().run()},toggleHorizontalRule(){t.chain().focus().setHorizontalRule().run()},toggleLink(){const i=t.getAttributes("link").href,s=window.prompt("URL",i);if(s!==null){if(s===""){t.chain().focus().extendMarkRange("link").unsetLink().run();return}t.chain().focus().extendMarkRange("link").setLink({href:s}).run()}},undo(){t.chain().focus().undo().run()},redo(){t.chain().focus().redo().run()},getActiveHeadingLevel(i){if(this.updatedAt===i)return t.isActive("heading",{level:1})?1:t.isActive("heading",{level:2})?2:t.isActive("heading",{level:3})?3:t.isActive("heading",{level:4})?4:t.isActive("heading",{level:5})?5:t.isActive("heading",{level:6})?6:0},getActiveTextalign(i){if(this.updatedAt===i){if(t.isActive({textAlign:"left"}))return"left";if(t.isActive({textAlign:"center"}))return"center";if(t.isActive({textAlign:"right"}))return"right";if(t.isActive({textAlign:"justify"}))return"justify"}}}},pO=n=>{const e=async i=>await(await fetch(`/events/location?location=${i}`)).json(),t=async i=>await(await fetch(`/events/coordinates?address=${i}`)).json();return{location:n||JSON.stringify({lat:0,lng:0}),city:"",address:"",postal_code:"",country:"",map:null,marker:null,init(){e(this.location).then(i=>{i.address_components.forEach(s=>{s.types.includes("route")&&(this.address=s.long_name+", "+this.address),s.types.includes("street_number")&&(this.address+=s.long_name),this.address===""&&s.types.includes("sublocality_level_2")&&(this.address=s.long_name),s.types.includes("locality")&&(this.city=s.long_name),this.city===""&&s.types.includes("postal_town")&&(this.city=s.long_name),this.city===""&&s.types.includes("administrative_area_level_2")&&(this.city=s.long_name),s.types.includes("country")&&(this.country=s.long_name),s.types.includes("postal_code")&&(this.postal_code=s.long_name)}),this.map=new google.maps.Map(document.getElementById("eventGoogleMap"),{center:i.geometry.location,zoom:15,height:"400px"}),this.marker=new google.maps.Marker({position:i.geometry.location,map:this.map})})},updateMap:function(){let i=this.address+", "+this.city+", "+this.postal_code+", "+this.country;t(i).then(s=>{this.map.setCenter(s),this.map.setZoom(15),this.marker!==null&&this.marker.setMap(null),this.marker=new google.maps.Marker({position:s,map:this.map}),this.location=JSON.stringify({lat:s.lat,lng:s.lng})})}}};var Jl,I,$v,qv,ps,ni,ig,Gv,Kv,il={},Yv=[],gO=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function bn(n,e){for(var t in e)n[t]=e[t];return n}function Jv(n){var e=n.parentNode;e&&e.removeChild(n)}function w(n,e,t){var i,s,r,o={};for(r in e)r=="key"?i=e[r]:r=="ref"?s=e[r]:o[r]=e[r];if(arguments.length>2&&(o.children=arguments.length>3?Jl.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(r in n.defaultProps)o[r]===void 0&&(o[r]=n.defaultProps[r]);return Ko(n,o,i,s,null)}function Ko(n,e,t,i,s){var r={type:n,props:e,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s??++$v};return s==null&&I.vnode!=null&&I.vnode(r),r}function en(){return{current:null}}function fe(n){return n.children}function mO(n,e,t,i,s){var r;for(r in t)r==="children"||r==="key"||r in e||sl(n,r,null,t[r],i);for(r in e)s&&typeof e[r]!="function"||r==="children"||r==="key"||r==="value"||r==="checked"||t[r]===e[r]||sl(n,r,e[r],t[r],i)}function sg(n,e,t){e[0]==="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||gO.test(e)?t:t+"px"}function sl(n,e,t,i,s){var r;e:if(e==="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)t&&e in t||sg(n.style,e,"");if(t)for(e in t)i&&t[e]===i[e]||sg(n.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")r=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+r]=t,t?i||n.addEventListener(e,r?og:rg,r):n.removeEventListener(e,r?og:rg,r);else if(e!=="dangerouslySetInnerHTML"){if(s)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e.indexOf("-")==-1?n.removeAttribute(e):n.setAttribute(e,t))}}function rg(n){ps=!0;try{return this.l[n.type+!1](I.event?I.event(n):n)}finally{ps=!1}}function og(n){ps=!0;try{return this.l[n.type+!0](I.event?I.event(n):n)}finally{ps=!1}}function st(n,e){this.props=n,this.context=e}function kr(n,e){if(e==null)return n.__?kr(n.__,n.__.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?kr(n):null}function Qv(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return Qv(n)}}function bO(n){ps?setTimeout(n):Gv(n)}function ad(n){(!n.__d&&(n.__d=!0)&&ni.push(n)&&!rl.__r++||ig!==I.debounceRendering)&&((ig=I.debounceRendering)||bO)(rl)}function rl(){var n,e,t,i,s,r,o,a;for(ni.sort(function(l,c){return l.__v.__b-c.__v.__b});n=ni.shift();)n.__d&&(e=ni.length,i=void 0,s=void 0,o=(r=(t=n).__v).__e,(a=t.__P)&&(i=[],(s=bn({},r)).__v=r.__v+1,Rf(a,r,s,t.__n,a.ownerSVGElement!==void 0,r.__h!=null?[o]:null,i,o??kr(r),r.__h),nx(i,r),r.__e!=o&&Qv(r)),ni.length>e&&ni.sort(function(l,c){return l.__v.__b-c.__v.__b}));rl.__r=0}function Zv(n,e,t,i,s,r,o,a,l,c){var u,d,f,h,p,g,m,b=i&&i.__k||Yv,y=b.length;for(t.__k=[],u=0;u<e.length;u++)if((h=t.__k[u]=(h=e[u])==null||typeof h=="boolean"?null:typeof h=="string"||typeof h=="number"||typeof h=="bigint"?Ko(null,h,null,null,h):Array.isArray(h)?Ko(fe,{children:h},null,null,null):h.__b>0?Ko(h.type,h.props,h.key,h.ref?h.ref:null,h.__v):h)!=null){if(h.__=t,h.__b=t.__b+1,(f=b[u])===null||f&&h.key==f.key&&h.type===f.type)b[u]=void 0;else for(d=0;d<y;d++){if((f=b[d])&&h.key==f.key&&h.type===f.type){b[d]=void 0;break}f=null}Rf(n,h,f=f||il,s,r,o,a,l,c),p=h.__e,(d=h.ref)&&f.ref!=d&&(m||(m=[]),f.ref&&m.push(f.ref,null,h),m.push(d,h.__c||p,h)),p!=null?(g==null&&(g=p),typeof h.type=="function"&&h.__k===f.__k?h.__d=l=Xv(h,l,n):l=ex(n,h,f,b,p,l),typeof t.type=="function"&&(t.__d=l)):l&&f.__e==l&&l.parentNode!=n&&(l=kr(f))}for(t.__e=g,u=y;u--;)b[u]!=null&&(typeof t.type=="function"&&b[u].__e!=null&&b[u].__e==t.__d&&(t.__d=tx(i).nextSibling),sx(b[u],b[u]));if(m)for(u=0;u<m.length;u++)ix(m[u],m[++u],m[++u])}function Xv(n,e,t){for(var i,s=n.__k,r=0;s&&r<s.length;r++)(i=s[r])&&(i.__=n,e=typeof i.type=="function"?Xv(i,e,t):ex(t,i,i,s,i.__e,e));return e}function ol(n,e){return e=e||[],n==null||typeof n=="boolean"||(Array.isArray(n)?n.some(function(t){ol(t,e)}):e.push(n)),e}function ex(n,e,t,i,s,r){var o,a,l;if(e.__d!==void 0)o=e.__d,e.__d=void 0;else if(t==null||s!=r||s.parentNode==null)e:if(r==null||r.parentNode!==n)n.appendChild(s),o=null;else{for(a=r,l=0;(a=a.nextSibling)&&l<i.length;l+=1)if(a==s)break e;n.insertBefore(s,r),o=r}return o!==void 0?o:s.nextSibling}function tx(n){var e,t,i;if(n.type==null||typeof n.type=="string")return n.__e;if(n.__k){for(e=n.__k.length-1;e>=0;e--)if((t=n.__k[e])&&(i=tx(t)))return i}return null}function Rf(n,e,t,i,s,r,o,a,l){var c,u,d,f,h,p,g,m,b,y,v,x,_,S,E,C=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(l=t.__h,a=e.__e=t.__e,e.__h=null,r=[a]),(c=I.__b)&&c(e);try{e:if(typeof C=="function"){if(m=e.props,b=(c=C.contextType)&&i[c.__c],y=c?b?b.props.value:c.__:i,t.__c?g=(u=e.__c=t.__c).__=u.__E:("prototype"in C&&C.prototype.render?e.__c=u=new C(m,y):(e.__c=u=new st(m,y),u.constructor=C,u.render=vO),b&&b.sub(u),u.props=m,u.state||(u.state={}),u.context=y,u.__n=i,d=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),C.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=bn({},u.__s)),bn(u.__s,C.getDerivedStateFromProps(m,u.__s))),f=u.props,h=u.state,u.__v=e,d)C.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(C.getDerivedStateFromProps==null&&m!==f&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(m,y),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(m,u.__s,y)===!1||e.__v===t.__v){for(e.__v!==t.__v&&(u.props=m,u.state=u.__s,u.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(T){T&&(T.__=e)}),v=0;v<u._sb.length;v++)u.__h.push(u._sb[v]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(m,u.__s,y),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(f,h,p)})}if(u.context=y,u.props=m,u.__P=n,x=I.__r,_=0,"prototype"in C&&C.prototype.render){for(u.state=u.__s,u.__d=!1,x&&x(e),c=u.render(u.props,u.state,u.context),S=0;S<u._sb.length;S++)u.__h.push(u._sb[S]);u._sb=[]}else do u.__d=!1,x&&x(e),c=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++_<25);u.state=u.__s,u.getChildContext!=null&&(i=bn(bn({},i),u.getChildContext())),d||u.getSnapshotBeforeUpdate==null||(p=u.getSnapshotBeforeUpdate(f,h)),E=c!=null&&c.type===fe&&c.key==null?c.props.children:c,Zv(n,Array.isArray(E)?E:[E],e,t,i,s,r,o,a,l),u.base=e.__e,e.__h=null,u.__h.length&&o.push(u),g&&(u.__E=u.__=null),u.__e=!1}else r==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=yO(t.__e,e,t,i,s,r,o,l);(c=I.diffed)&&c(e)}catch(T){e.__v=null,(l||r!=null)&&(e.__e=a,e.__h=!!l,r[r.indexOf(a)]=null),I.__e(T,e,t)}}function nx(n,e){I.__c&&I.__c(e,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(i){i.call(t)})}catch(i){I.__e(i,t.__v)}})}function yO(n,e,t,i,s,r,o,a){var l,c,u,d=t.props,f=e.props,h=e.type,p=0;if(h==="svg"&&(s=!0),r!=null){for(;p<r.length;p++)if((l=r[p])&&"setAttribute"in l==!!h&&(h?l.localName===h:l.nodeType===3)){n=l,r[p]=null;break}}if(n==null){if(h===null)return document.createTextNode(f);n=s?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h,f.is&&f),r=null,a=!1}if(h===null)d===f||a&&n.data===f||(n.data=f);else{if(r=r&&Jl.call(n.childNodes),c=(d=t.props||il).dangerouslySetInnerHTML,u=f.dangerouslySetInnerHTML,!a){if(r!=null)for(d={},p=0;p<n.attributes.length;p++)d[n.attributes[p].name]=n.attributes[p].value;(u||c)&&(u&&(c&&u.__html==c.__html||u.__html===n.innerHTML)||(n.innerHTML=u&&u.__html||""))}if(mO(n,f,d,s,a),u)e.__k=[];else if(p=e.props.children,Zv(n,Array.isArray(p)?p:[p],e,t,i,s&&h!=="foreignObject",r,o,r?r[0]:t.__k&&kr(t,0),a),r!=null)for(p=r.length;p--;)r[p]!=null&&Jv(r[p]);a||("value"in f&&(p=f.value)!==void 0&&(p!==n.value||h==="progress"&&!p||h==="option"&&p!==d.value)&&sl(n,"value",p,d.value,!1),"checked"in f&&(p=f.checked)!==void 0&&p!==n.checked&&sl(n,"checked",p,d.checked,!1))}return n}function ix(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(i){I.__e(i,t)}}function sx(n,e,t){var i,s;if(I.unmount&&I.unmount(n),(i=n.ref)&&(i.current&&i.current!==n.__e||ix(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){I.__e(r,e)}i.base=i.__P=null,n.__c=void 0}if(i=n.__k)for(s=0;s<i.length;s++)i[s]&&sx(i[s],e,t||typeof n.type!="function");t||n.__e==null||Jv(n.__e),n.__=n.__e=n.__d=void 0}function vO(n,e,t){return this.constructor(n,t)}function Er(n,e,t){var i,s,r;I.__&&I.__(n,e),s=(i=typeof t=="function")?null:e.__k,r=[],Rf(e,n=(!i&&t||e).__k=w(fe,null,[n]),s||il,il,e.ownerSVGElement!==void 0,!i&&t?[t]:s?null:e.firstChild?Jl.call(e.childNodes):null,r,!i&&t?t:s?s.__e:e.firstChild,i),nx(r,n)}function xO(n,e){var t={__c:e="__cC"+Kv++,__:n,Consumer:function(i,s){return i.children(s)},Provider:function(i){var s,r;return this.getChildContext||(s=[],(r={})[e]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&s.some(function(a){a.__e=!0,ad(a)})},this.sub=function(o){s.push(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){s.splice(s.indexOf(o),1),a&&a.call(o)}}),i.children}};return t.Provider.__=t.Consumer.contextType=t}Jl=Yv.slice,I={__e:function(n,e,t,i){for(var s,r,o;e=e.__;)if((s=e.__c)&&!s.__)try{if((r=s.constructor)&&r.getDerivedStateFromError!=null&&(s.setState(r.getDerivedStateFromError(n)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(n,i||{}),o=s.__d),o)return s.__E=s}catch(a){n=a}throw n}},$v=0,qv=function(n){return n!=null&&n.constructor===void 0},ps=!1,st.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=bn({},this.state),typeof n=="function"&&(n=n(bn({},t),this.props)),n&&bn(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),ad(this))},st.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),ad(this))},st.prototype.render=fe,ni=[],Gv=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,rl.__r=0,Kv=0;var Pt,Fc,ag,rx=[],zc=[],lg=I.__b,cg=I.__r,ug=I.diffed,dg=I.__c,fg=I.unmount;function _O(){for(var n;n=rx.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Yo),n.__H.__h.forEach(ld),n.__H.__h=[]}catch(e){n.__H.__h=[],I.__e(e,n.__v)}}I.__b=function(n){Pt=null,lg&&lg(n)},I.__r=function(n){cg&&cg(n);var e=(Pt=n.__c).__H;e&&(Fc===Pt?(e.__h=[],Pt.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=zc,t.__N=t.i=void 0})):(e.__h.forEach(Yo),e.__h.forEach(ld),e.__h=[])),Fc=Pt},I.diffed=function(n){ug&&ug(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(rx.push(e)!==1&&ag===I.requestAnimationFrame||((ag=I.requestAnimationFrame)||SO)(_O)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==zc&&(t.__=t.__V),t.i=void 0,t.__V=zc})),Fc=Pt=null},I.__c=function(n,e){e.some(function(t){try{t.__h.forEach(Yo),t.__h=t.__h.filter(function(i){return!i.__||ld(i)})}catch(i){e.some(function(s){s.__h&&(s.__h=[])}),e=[],I.__e(i,t.__v)}}),dg&&dg(n,e)},I.unmount=function(n){fg&&fg(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(i){try{Yo(i)}catch(s){e=s}}),t.__H=void 0,e&&I.__e(e,t.__v))};var hg=typeof requestAnimationFrame=="function";function SO(n){var e,t=function(){clearTimeout(i),hg&&cancelAnimationFrame(e),setTimeout(n)},i=setTimeout(t,100);hg&&(e=requestAnimationFrame(t))}function Yo(n){var e=Pt,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Pt=e}function ld(n){var e=Pt;n.__c=n.__(),Pt=e}function wO(n,e){for(var t in e)n[t]=e[t];return n}function pg(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var i in e)if(i!=="__source"&&n[i]!==e[i])return!0;return!1}function gg(n){this.props=n}(gg.prototype=new st).isPureReactComponent=!0,gg.prototype.shouldComponentUpdate=function(n,e){return pg(this.props,n)||pg(this.state,e)};var mg=I.__b;I.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),mg&&mg(n)};var AO=I.__e;I.__e=function(n,e,t,i){if(n.then){for(var s,r=e;r=r.__;)if((s=r.__c)&&s.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),s.__c(n,e)}AO(n,e,t,i)};var bg=I.unmount;function ox(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),n.__c.__H=null),(n=wO({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c=null),n.__k=n.__k&&n.__k.map(function(i){return ox(i,e,t)})),n}function ax(n,e,t){return n&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(i){return ax(i,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.insertBefore(n.__e,n.__d),n.__c.__e=!0,n.__c.__P=t)),n}function Hc(){this.__u=0,this.t=null,this.__b=null}function lx(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function go(){this.u=null,this.o=null}I.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&n.__h===!0&&(n.type=null),bg&&bg(n)},(Hc.prototype=new st).__c=function(n,e){var t=e.__c,i=this;i.t==null&&(i.t=[]),i.t.push(t);var s=lx(i.__v),r=!1,o=function(){r||(r=!0,t.__R=null,s?s(a):a())};t.__R=o;var a=function(){if(!--i.__u){if(i.state.__a){var c=i.state.__a;i.__v.__k[0]=ax(c,c.__c.__P,c.__c.__O)}var u;for(i.setState({__a:i.__b=null});u=i.t.pop();)u.forceUpdate()}},l=e.__h===!0;i.__u++||l||i.setState({__a:i.__b=i.__v.__k[0]}),n.then(o,o)},Hc.prototype.componentWillUnmount=function(){this.t=[]},Hc.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=ox(this.__b,t,i.__O=i.__P)}this.__b=null}var s=e.__a&&w(fe,null,n.fallback);return s&&(s.__h=null),[w(fe,null,e.__a?null:n.children),s]};var yg=function(n,e,t){if(++t[1]===t[0]&&n.o.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.o.size))for(t=n.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.u=t=t[2]}};function kO(n){return this.getChildContext=function(){return n.context},n.children}function EO(n){var e=this,t=n.i;e.componentWillUnmount=function(){Er(null,e.l),e.l=null,e.i=null},e.i&&e.i!==t&&e.componentWillUnmount(),n.__v?(e.l||(e.i=t,e.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(i){this.childNodes.push(i),e.i.appendChild(i)},insertBefore:function(i,s){this.childNodes.push(i),e.i.appendChild(i)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),e.i.removeChild(i)}}),Er(w(kO,{context:e.context},n.__v),e.l)):e.l&&e.componentWillUnmount()}function CO(n,e){var t=w(EO,{__v:n,i:e});return t.containerInfo=e,t}(go.prototype=new st).__a=function(n){var e=this,t=lx(e.__v),i=e.o.get(n);return i[0]++,function(s){var r=function(){e.props.revealOrder?(i.push(s),yg(e,n,i)):s()};t?t(r):r()}},go.prototype.render=function(n){this.u=null,this.o=new Map;var e=ol(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return n.children},go.prototype.componentDidUpdate=go.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(e,t){yg(n,t,e)})};var MO=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,TO=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,DO=typeof document<"u",OO=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(n)};st.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(st.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var vg=I.event;function RO(){}function PO(){return this.cancelBubble}function NO(){return this.defaultPrevented}I.event=function(n){return vg&&(n=vg(n)),n.persist=RO,n.isPropagationStopped=PO,n.isDefaultPrevented=NO,n.nativeEvent=n};var xg={configurable:!0,get:function(){return this.class}},_g=I.vnode;I.vnode=function(n){var e=n.type,t=n.props,i=t;if(typeof e=="string"){var s=e.indexOf("-")===-1;for(var r in i={},t){var o=t[r];DO&&r==="children"&&e==="noscript"||r==="value"&&"defaultValue"in t&&o==null||(r==="defaultValue"&&"value"in t&&t.value==null?r="value":r==="download"&&o===!0?o="":/ondoubleclick/i.test(r)?r="ondblclick":/^onchange(textarea|input)/i.test(r+e)&&!OO(t.type)?r="oninput":/^onfocus$/i.test(r)?r="onfocusin":/^onblur$/i.test(r)?r="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(r)?r=r.toLowerCase():s&&TO.test(r)?r=r.replace(/[A-Z0-9]/g,"-$&").toLowerCase():o===null&&(o=void 0),/^oninput$/i.test(r)&&(r=r.toLowerCase(),i[r]&&(r="oninputCapture")),i[r]=o)}e=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=ol(t.children).forEach(function(a){a.props.selected=i.value.indexOf(a.props.value)!=-1})),e=="select"&&i.defaultValue!=null&&(i.value=ol(t.children).forEach(function(a){a.props.selected=i.multiple?i.defaultValue.indexOf(a.props.value)!=-1:i.defaultValue==a.props.value})),n.props=i,t.class!=t.className&&(xg.enumerable="className"in t,t.className!=null&&(i.class=t.className),Object.defineProperty(i,"className",xg))}n.$$typeof=MO,_g&&_g(n)};var Sg=I.__r;I.__r=function(n){Sg&&Sg(n),n.__c};const cx=[],cd=new Map;function ux(n){cx.push(n),cd.forEach(e=>{fx(e,n)})}function IO(n){n.isConnected&&n.getRootNode&&dx(n.getRootNode())}function dx(n){let e=cd.get(n);if(!e||!e.isConnected){if(e=n.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const t=BO();t&&(e.nonce=t);const i=n===document?document.head:n,s=n===document?i.querySelector("script,link[rel=stylesheet],link[as=style],style"):i.firstChild;i.insertBefore(e,s)}cd.set(n,e),LO(e)}}function LO(n){for(const e of cx)fx(n,e)}function fx(n,e){const{sheet:t}=n,i=t.cssRules.length;e.split("}").forEach((s,r)=>{s=s.trim(),s&&t.insertRule(s+"}",i+r)})}let Vc;function BO(){return Vc===void 0&&(Vc=FO()),Vc}function FO(){const n=document.querySelector('meta[name="csp-nonce"]');if(n&&n.hasAttribute("content"))return n.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&dx(document);var zO=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';ux(zO);class Pf{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:t}=this;t[e]=(t[e]||0)+1,this.clearTimeout()}resume(e="",t){let{pauseDepths:i}=this;e in i&&(t?delete i[e]:(i[e]-=1,i[e]<=0&&delete i[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function HO(n){n.parentNode&&n.parentNode.removeChild(n)}function Kt(n,e){if(n.closest)return n.closest(e);if(!document.documentElement.contains(n))return null;do{if(VO(n,e))return n;n=n.parentElement||n.parentNode}while(n!==null&&n.nodeType===1);return null}function VO(n,e){return(n.matches||n.matchesSelector||n.msMatchesSelector).call(n,e)}function jO(n,e){let t=n instanceof HTMLElement?[n]:n,i=[];for(let s=0;s<t.length;s+=1){let r=t[s].querySelectorAll(e);for(let o=0;o<r.length;o+=1)i.push(r[o])}return i}const WO=/(top|left|right|bottom|width|height)$/i;function UO(n,e){for(let t in e)hx(n,t,e[t])}function hx(n,e,t){t==null?n.style[e]="":typeof t=="number"&&WO.test(e)?n.style[e]=`${t}px`:n.style[e]=t}function $O(n){var e,t;return(t=(e=n.composedPath)===null||e===void 0?void 0:e.call(n)[0])!==null&&t!==void 0?t:n.target}let wg=0;function Ql(){return wg+=1,"fc-dom-"+wg}function qO(n,e){return t=>{let i=Kt(t.target,n);i&&e.call(i,t,i)}}function px(n,e,t,i){let s=qO(t,i);return n.addEventListener(e,s),()=>{n.removeEventListener(e,s)}}function GO(n,e,t,i){let s;return px(n,"mouseover",e,(r,o)=>{if(o!==s){s=o,t(r,o);let a=l=>{s=null,i(l,o),o.removeEventListener("mouseleave",a)};o.addEventListener("mouseleave",a)}})}function gx(n){return Object.assign({onClick:n},mx(n))}function mx(n){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(n(e),e.preventDefault())}}}let Ag=0;function Ri(){return Ag+=1,String(Ag)}function KO(n){let e=[],t=[],i,s;for(typeof n=="string"?t=n.split(/\s*,\s*/):typeof n=="function"?t=[n]:Array.isArray(n)&&(t=n),i=0;i<t.length;i+=1)s=t[i],typeof s=="string"?e.push(s.charAt(0)==="-"?{field:s.substring(1),order:-1}:{field:s,order:1}):typeof s=="function"&&e.push({func:s});return e}function YO(n,e,t){let i,s;for(i=0;i<t.length;i+=1)if(s=JO(n,e,t[i]),s)return s;return 0}function JO(n,e,t){return t.func?t.func(n,e):QO(n[t.field],e[t.field])*(t.order||1)}function QO(n,e){return!n&&!e?0:e==null?-1:n==null?1:typeof n=="string"||typeof e=="string"?String(n).localeCompare(String(e)):n-e}function jc(n,e){let t=String(n);return"000".substr(0,e-t.length)+t}function sr(n,e,t){return typeof n=="function"?n(...e):typeof n=="string"?e.reduce((i,s,r)=>i.replace("$"+r,s||""),n):t}function Wc(n){return n%1===0}function ZO(n){let e=n.querySelector(".fc-scrollgrid-shrink-frame"),t=n.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!t)throw new Error("needs fc-scrollgrid-shrink-cushion className");return n.getBoundingClientRect().width-e.getBoundingClientRect().width+t.getBoundingClientRect().width}const XO=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function J(n,e){return typeof n=="string"?eR(n):typeof n=="object"&&n?kg(n):typeof n=="number"?kg({[e||"milliseconds"]:n}):null}function eR(n){let e=XO.exec(n);if(e){let t=e[1]?-1:1;return{years:0,months:0,days:t*(e[2]?parseInt(e[2],10):0),milliseconds:t*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function kg(n){let e={years:n.years||n.year||0,months:n.months||n.month||0,days:n.days||n.day||0,milliseconds:(n.hours||n.hour||0)*60*60*1e3+(n.minutes||n.minute||0)*60*1e3+(n.seconds||n.second||0)*1e3+(n.milliseconds||n.millisecond||n.ms||0)},t=n.weeks||n.week;return t&&(e.days+=t*7,e.specifiedWeeks=!0),e}function tR(n,e){return n.years===e.years&&n.months===e.months&&n.days===e.days&&n.milliseconds===e.milliseconds}function nR(n,e){return{years:n.years-e.years,months:n.months-e.months,days:n.days-e.days,milliseconds:n.milliseconds-e.milliseconds}}function iR(n){return ts(n)/365}function sR(n){return ts(n)/30}function ts(n){return Cr(n)/864e5}function Cr(n){return n.years*(365*864e5)+n.months*(30*864e5)+n.days*864e5+n.milliseconds}function ud(n){let e=n.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return n.days?n.specifiedWeeks&&n.days%7===0?{unit:"week",value:n.days/7}:{unit:"day",value:n.days}:n.months?{unit:"month",value:n.months}:n.years?{unit:"year",value:n.years}:{unit:"millisecond",value:0}}function Pn(n,e,t){if(n===e)return!0;let i=n.length,s;if(i!==e.length)return!1;for(s=0;s<i;s+=1)if(!(t?t(n[s],e[s]):n[s]===e[s]))return!1;return!0}const rR=["sun","mon","tue","wed","thu","fri","sat"];function Eg(n,e){let t=yn(n);return t[2]+=e*7,Qe(t)}function Be(n,e){let t=yn(n);return t[2]+=e,Qe(t)}function Nn(n,e){let t=yn(n);return t[6]+=e,Qe(t)}function oR(n,e){return Es(n,e)/7}function Es(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60*24)}function aR(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60)}function lR(n,e){return(e.valueOf()-n.valueOf())/(1e3*60)}function cR(n,e){return(e.valueOf()-n.valueOf())/1e3}function uR(n,e){let t=oe(n),i=oe(e);return{years:0,months:0,days:Math.round(Es(t,i)),milliseconds:e.valueOf()-i.valueOf()-(n.valueOf()-t.valueOf())}}function dR(n,e){let t=al(n,e);return t!==null&&t%7===0?t/7:null}function al(n,e){return vn(n)===vn(e)?Math.round(Es(n,e)):null}function oe(n){return Qe([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()])}function fR(n){return Qe([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours()])}function hR(n){return Qe([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes()])}function pR(n){return Qe([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds()])}function gR(n,e,t){let i=n.getUTCFullYear(),s=Uc(n,i,e,t);if(s<1)return Uc(n,i-1,e,t);let r=Uc(n,i+1,e,t);return r>=1?Math.min(s,r):s}function Uc(n,e,t,i){let s=Qe([e,0,1+mR(e,t,i)]),r=oe(n),o=Math.round(Es(s,r));return Math.floor(o/7)+1}function mR(n,e,t){let i=7+e-t;return-((7+Qe([n,0,i]).getUTCDay()-e)%7)+i-1}function Cg(n){return[n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()]}function Mg(n){return new Date(n[0],n[1]||0,n[2]==null?1:n[2],n[3]||0,n[4]||0,n[5]||0)}function yn(n){return[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]}function Qe(n){return n.length===1&&(n=n.concat([0])),new Date(Date.UTC(...n))}function bx(n){return!isNaN(n.valueOf())}function vn(n){return n.getUTCHours()*1e3*60*60+n.getUTCMinutes()*1e3*60+n.getUTCSeconds()*1e3+n.getUTCMilliseconds()}function bR(n,e,t=!1){let i=n.toISOString();return i=i.replace(".000",""),t&&(i=i.replace("T00:00:00Z","")),i.length>10&&(e==null?i=i.replace("Z",""):e!==0&&(i=i.replace("Z",If(e,!0)))),i}function Nf(n){return n.toISOString().replace(/T.*$/,"")}function yR(n){return n.toISOString().match(/^\d{4}-\d{2}/)[0]}function If(n,e=!1){let t=n<0?"-":"+",i=Math.abs(n),s=Math.floor(i/60),r=Math.round(i%60);return e?`${t+jc(s,2)}:${jc(r,2)}`:`GMT${t}${s}${r?`:${jc(r,2)}`:""}`}function K(n,e,t){let i,s;return function(...r){if(!i)s=n.apply(this,r);else if(!Pn(i,r)){let o=n.apply(this,r);(!e||!e(o,s))&&(s=o)}return i=r,s}}function Jo(n,e,t){let i,s;return r=>(i?Ht(i,r)||(s=n.call(this,r)):s=n.call(this,r),i=r,s)}const Tg={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},ll={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},mo=/\s*([ap])\.?m\.?/i,vR=/,/g,xR=/\s+/g,_R=/\u200e/g,SR=/UTC|GMT/;class wR{constructor(e){let t={},i={},s=0;for(let r in e)r in Tg?(i[r]=e[r],s=Math.max(Tg[r],s)):(t[r]=e[r],r in ll&&(s=Math.max(ll[r],s)));this.standardDateProps=t,this.extendedSettings=i,this.severity=s,this.buildFormattingFunc=K(Dg)}format(e,t){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,t)(e)}formatRange(e,t,i,s){let{standardDateProps:r,extendedSettings:o}=this,a=TR(e.marker,t.marker,i.calendarSystem);if(!a)return this.format(e,i);let l=a;l>1&&(r.year==="numeric"||r.year==="2-digit")&&(r.month==="numeric"||r.month==="2-digit")&&(r.day==="numeric"||r.day==="2-digit")&&(l=1);let c=this.format(e,i),u=this.format(t,i);if(c===u)return c;let d=DR(r,l),f=Dg(d,o,i),h=f(e),p=f(t),g=OR(c,h,u,p),m=o.separator||s||i.defaultSeparator||"";return g?g.before+h+m+p+g.after:c+m+u}getLargestUnit(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function Dg(n,e,t){let i=Object.keys(n).length;return i===1&&n.timeZoneName==="short"?s=>If(s.timeZoneOffset):i===0&&e.week?s=>MR(t.computeWeekNumber(s.marker),t.weekText,t.weekTextLong,t.locale,e.week):AR(n,e,t)}function AR(n,e,t){n=Object.assign({},n),e=Object.assign({},e),kR(n,e),n.timeZone="UTC";let i=new Intl.DateTimeFormat(t.locale.codes,n),s;if(e.omitZeroMinute){let r=Object.assign({},n);delete r.minute,s=new Intl.DateTimeFormat(t.locale.codes,r)}return r=>{let{marker:o}=r,a;s&&!o.getUTCMinutes()?a=s:a=i;let l=a.format(o);return ER(l,r,n,e,t)}}function kR(n,e){n.timeZoneName&&(n.hour||(n.hour="2-digit"),n.minute||(n.minute="2-digit")),n.timeZoneName==="long"&&(n.timeZoneName="short"),e.omitZeroMinute&&(n.second||n.millisecond)&&delete e.omitZeroMinute}function ER(n,e,t,i,s){return n=n.replace(_R,""),t.timeZoneName==="short"&&(n=CR(n,s.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":If(e.timeZoneOffset))),i.omitCommas&&(n=n.replace(vR,"").trim()),i.omitZeroMinute&&(n=n.replace(":00","")),i.meridiem===!1?n=n.replace(mo,"").trim():i.meridiem==="narrow"?n=n.replace(mo,(r,o)=>o.toLocaleLowerCase()):i.meridiem==="short"?n=n.replace(mo,(r,o)=>`${o.toLocaleLowerCase()}m`):i.meridiem==="lowercase"&&(n=n.replace(mo,r=>r.toLocaleLowerCase())),n=n.replace(xR," "),n=n.trim(),n}function CR(n,e){let t=!1;return n=n.replace(SR,()=>(t=!0,e)),t||(n+=` ${e}`),n}function MR(n,e,t,i,s){let r=[];return s==="long"?r.push(t):(s==="short"||s==="narrow")&&r.push(e),(s==="long"||s==="short")&&r.push(" "),r.push(i.simpleNumberFormat.format(n)),i.options.direction==="rtl"&&r.reverse(),r.join("")}function TR(n,e,t){return t.getMarkerYear(n)!==t.getMarkerYear(e)?5:t.getMarkerMonth(n)!==t.getMarkerMonth(e)?4:t.getMarkerDay(n)!==t.getMarkerDay(e)?2:vn(n)!==vn(e)?1:0}function DR(n,e){let t={};for(let i in n)(!(i in ll)||ll[i]<=e)&&(t[i]=n[i]);return t}function OR(n,e,t,i){let s=0;for(;s<n.length;){let r=n.indexOf(e,s);if(r===-1)break;let o=n.substr(0,r);s=r+e.length;let a=n.substr(s),l=0;for(;l<t.length;){let c=t.indexOf(i,l);if(c===-1)break;let u=t.substr(0,c);l=c+i.length;let d=t.substr(l);if(o===u&&a===d)return{before:o,after:a}}}return null}function Og(n,e){let t=e.markerToArray(n.marker);return{marker:n.marker,timeZoneOffset:n.timeZoneOffset,array:t,year:t[0],month:t[1],day:t[2],hour:t[3],minute:t[4],second:t[5],millisecond:t[6]}}function cl(n,e,t,i){let s=Og(n,t.calendarSystem),r=e?Og(e,t.calendarSystem):null;return{date:s,start:s,end:r,timeZone:t.timeZone,localeCodes:t.locale.codes,defaultSeparator:i||t.defaultSeparator}}class RR{constructor(e){this.cmdStr=e}format(e,t,i){return t.cmdFormatter(this.cmdStr,cl(e,null,t,i))}formatRange(e,t,i,s){return i.cmdFormatter(this.cmdStr,cl(e,t,i,s))}}class PR{constructor(e){this.func=e}format(e,t,i){return this.func(cl(e,null,t,i))}formatRange(e,t,i,s){return this.func(cl(e,t,i,s))}}function we(n){return typeof n=="object"&&n?new wR(n):typeof n=="string"?new RR(n):typeof n=="function"?new PR(n):null}const Rg={navLinkDayClick:A,navLinkWeekClick:A,duration:J,bootstrapFontAwesome:A,buttonIcons:A,customButtons:A,defaultAllDayEventDuration:J,defaultTimedEventDuration:J,nextDayThreshold:J,scrollTime:J,scrollTimeReset:Boolean,slotMinTime:J,slotMaxTime:J,dayPopoverFormat:we,slotDuration:J,snapDuration:J,headerToolbar:A,footerToolbar:A,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:we,dayHeaderClassNames:A,dayHeaderContent:A,dayHeaderDidMount:A,dayHeaderWillUnmount:A,dayCellClassNames:A,dayCellContent:A,dayCellDidMount:A,dayCellWillUnmount:A,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:A,weekNumbers:Boolean,weekNumberClassNames:A,weekNumberContent:A,weekNumberDidMount:A,weekNumberWillUnmount:A,editable:Boolean,viewClassNames:A,viewDidMount:A,viewWillUnmount:A,nowIndicator:Boolean,nowIndicatorClassNames:A,nowIndicatorContent:A,nowIndicatorDidMount:A,nowIndicatorWillUnmount:A,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:A,locale:A,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:A,eventOrder:KO,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:A,contentHeight:A,direction:String,weekNumberFormat:we,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:A,initialDate:A,now:A,eventDataTransform:A,stickyHeaderDates:A,stickyFooterScrollbar:A,viewHeight:A,defaultAllDay:Boolean,eventSourceFailure:A,eventSourceSuccess:A,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:A,eventConstraint:A,eventAllow:A,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:A,eventContent:A,eventDidMount:A,eventWillUnmount:A,selectConstraint:A,selectOverlap:A,selectAllow:A,droppable:Boolean,unselectCancel:String,slotLabelFormat:A,slotLaneClassNames:A,slotLaneContent:A,slotLaneDidMount:A,slotLaneWillUnmount:A,slotLabelClassNames:A,slotLabelContent:A,slotLabelDidMount:A,slotLabelWillUnmount:A,dayMaxEvents:A,dayMaxEventRows:A,dayMinWidth:Number,slotLabelInterval:J,allDayText:String,allDayClassNames:A,allDayContent:A,allDayDidMount:A,allDayWillUnmount:A,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:we,rerenderDelay:Number,moreLinkText:A,moreLinkHint:A,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:A,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:J,hiddenDays:A,fixedWeekCount:Boolean,validRange:A,visibleRange:A,titleFormat:A,eventInteractive:Boolean,noEventsText:String,viewHint:A,navLinkHint:A,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:A,moreLinkClassNames:A,moreLinkContent:A,moreLinkDidMount:A,moreLinkWillUnmount:A,monthStartFormat:we,handleCustomRendering:A,customRenderingMetaMap:A,customRenderingReplaces:Boolean},rr={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" – ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"}},Pg={datesSet:A,eventsSet:A,eventAdd:A,eventChange:A,eventRemove:A,windowResize:A,eventClick:A,eventMouseEnter:A,eventMouseLeave:A,select:A,unselect:A,loading:A,_unmount:A,_beforeprint:A,_afterprint:A,_noEventDrop:A,_noEventResize:A,_resize:A,_scrollRequest:A},Ng={buttonText:A,buttonHints:A,views:A,plugins:A,initialEvents:A,events:A,eventSources:A},Jn={headerToolbar:Qn,footerToolbar:Qn,buttonText:Qn,buttonHints:Qn,buttonIcons:Qn,dateIncrement:Qn,plugins:bo,events:bo,eventSources:bo,resources:bo};function Qn(n,e){return typeof n=="object"&&typeof e=="object"&&n&&e?Ht(n,e):n===e}function bo(n,e){return Array.isArray(n)&&Array.isArray(e)?Pn(n,e):n===e}const NR={type:String,component:A,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:A,usesMinMaxTime:Boolean,classNames:A,content:A,didMount:A,willUnmount:A};function $c(n){return Bf(n,Jn)}function Lf(n,e){let t={},i={};for(let s in e)s in n&&(t[s]=e[s](n[s]));for(let s in n)s in e||(i[s]=n[s]);return{refined:t,extra:i}}function A(n){return n}const{hasOwnProperty:ul}=Object.prototype;function Bf(n,e){let t={};if(e){for(let i in e)if(e[i]===Qn){let s=[];for(let r=n.length-1;r>=0;r-=1){let o=n[r][i];if(typeof o=="object"&&o)s.unshift(o);else if(o!==void 0){t[i]=o;break}}s.length&&(t[i]=Bf(s))}}for(let i=n.length-1;i>=0;i-=1){let s=n[i];for(let r in s)r in t||(t[r]=s[r])}return t}function gs(n,e){let t={};for(let i in n)e(n[i],i)&&(t[i]=n[i]);return t}function qr(n,e){let t={};for(let i in n)t[i]=e(n[i],i);return t}function yx(n){let e={};for(let t of n)e[t]=!0;return e}function Ff(n){let e=[];for(let t in n)e.push(n[t]);return e}function Ht(n,e){if(n===e)return!0;for(let t in n)if(ul.call(n,t)&&!(t in e))return!1;for(let t in e)if(ul.call(e,t)&&n[t]!==e[t])return!1;return!0}const IR=/^on[A-Z]/;function LR(n,e){const t=dd(n,e);for(let i of t)if(!IR.test(i))return!1;return!0}function dd(n,e){let t=[];for(let i in n)ul.call(n,i)&&(i in e||t.push(i));for(let i in e)ul.call(e,i)&&n[i]!==e[i]&&t.push(i);return t}function qc(n,e,t={}){if(n===e)return!0;for(let i in e)if(!(i in n&&BR(n[i],e[i],t[i])))return!1;for(let i in n)if(!(i in e))return!1;return!0}function BR(n,e,t){return n===e||t===!0?!0:t?t(n,e):!1}function FR(n,e=0,t,i=1){let s=[];t==null&&(t=Object.keys(n).length);for(let r=e;r<t;r+=i){let o=n[r];o!==void 0&&s.push(o)}return s}let vx={};function zR(n,e){vx[n]=e}function HR(n){return new vx[n]}class VR{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return Qe(e)}markerToArray(e){return yn(e)}}zR("gregory",VR);const jR=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function WR(n){let e=jR.exec(n);if(e){let t=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(bx(t)){let i=null;return e[13]&&(i=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:t,isTimeUnspecified:!e[6],timeZoneOffset:i}}}return null}class UR{constructor(e){let t=this.timeZone=e.timeZone,i=t!=="local"&&t!=="UTC";e.namedTimeZoneImpl&&i&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(t)),this.canComputeOffset=!!(!i||this.namedTimeZoneImpl),this.calendarSystem=HR(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let t=this.createMarkerMeta(e);return t===null?null:t.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):Qe(Cg(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let t=null;return typeof e=="number"?t=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(t=this.timestampToMarker(e))):Array.isArray(e)&&(t=Qe(e)),t===null||!bx(t)?null:{marker:t,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let t=WR(e);if(t===null)return null;let{marker:i}=t,s=null;return t.timeZoneOffset!==null&&(this.canComputeOffset?i=this.timestampToMarker(i.valueOf()-t.timeZoneOffset*60*1e3):s=t.timeZoneOffset),{marker:i,isTimeUnspecified:t.isTimeUnspecified,forcedTzo:s}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,t){let i=this.calendarSystem.markerToArray(e);return i[0]+=t.years,i[1]+=t.months,i[2]+=t.days,i[6]+=t.milliseconds,this.calendarSystem.arrayToMarker(i)}subtract(e,t){let i=this.calendarSystem.markerToArray(e);return i[0]-=t.years,i[1]-=t.months,i[2]-=t.days,i[6]-=t.milliseconds,this.calendarSystem.arrayToMarker(i)}addYears(e,t){let i=this.calendarSystem.markerToArray(e);return i[0]+=t,this.calendarSystem.arrayToMarker(i)}addMonths(e,t){let i=this.calendarSystem.markerToArray(e);return i[1]+=t,this.calendarSystem.arrayToMarker(i)}diffWholeYears(e,t){let{calendarSystem:i}=this;return vn(e)===vn(t)&&i.getMarkerDay(e)===i.getMarkerDay(t)&&i.getMarkerMonth(e)===i.getMarkerMonth(t)?i.getMarkerYear(t)-i.getMarkerYear(e):null}diffWholeMonths(e,t){let{calendarSystem:i}=this;return vn(e)===vn(t)&&i.getMarkerDay(e)===i.getMarkerDay(t)?i.getMarkerMonth(t)-i.getMarkerMonth(e)+(i.getMarkerYear(t)-i.getMarkerYear(e))*12:null}greatestWholeUnit(e,t){let i=this.diffWholeYears(e,t);return i!==null?{unit:"year",value:i}:(i=this.diffWholeMonths(e,t),i!==null?{unit:"month",value:i}:(i=dR(e,t),i!==null?{unit:"week",value:i}:(i=al(e,t),i!==null?{unit:"day",value:i}:(i=aR(e,t),Wc(i)?{unit:"hour",value:i}:(i=lR(e,t),Wc(i)?{unit:"minute",value:i}:(i=cR(e,t),Wc(i)?{unit:"second",value:i}:{unit:"millisecond",value:t.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,t,i){let s;return i.years&&(s=this.diffWholeYears(e,t),s!==null)?s/iR(i):i.months&&(s=this.diffWholeMonths(e,t),s!==null)?s/sR(i):i.days&&(s=al(e,t),s!==null)?s/ts(i):(t.valueOf()-e.valueOf())/Cr(i)}startOf(e,t){return t==="year"?this.startOfYear(e):t==="month"?this.startOfMonth(e):t==="week"?this.startOfWeek(e):t==="day"?oe(e):t==="hour"?fR(e):t==="minute"?hR(e):t==="second"?pR(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):gR(e,this.weekDow,this.weekDoy)}format(e,t,i={}){return t.format({marker:e,timeZoneOffset:i.forcedTzo!=null?i.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,t,i,s={}){return s.isEndExclusive&&(t=Nn(t,-1)),i.formatRange({marker:e,timeZoneOffset:s.forcedStartTzo!=null?s.forcedStartTzo:this.offsetForMarker(e)},{marker:t,timeZoneOffset:s.forcedEndTzo!=null?s.forcedEndTzo:this.offsetForMarker(t)},this,s.defaultSeparator)}formatIso(e,t={}){let i=null;return t.omitTimeZoneOffset||(t.forcedTzo!=null?i=t.forcedTzo:i=this.offsetForMarker(e)),bR(e,i,t.omitTime)}timestampToMarker(e){return this.timeZone==="local"?Qe(Cg(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):Qe(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-Mg(yn(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(yn(e)):null}toDate(e,t){return this.timeZone==="local"?Mg(yn(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(yn(e))*1e3*60):new Date(e.valueOf()-(t||0))}}class Gr{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let t,i;if(typeof e=="object"&&e){t=Object.assign({},this.iconClasses);for(i in e)t[i]=this.applyIconOverridePrefix(e[i]);this.iconClasses=t}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let t=this.iconOverridePrefix;return t&&e.indexOf(t)!==0&&(e=t+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,t){let i;return t&&this.rtlIconClasses?i=this.rtlIconClasses[e]||this.iconClasses[e]:i=this.iconClasses[e],i?`${this.baseIconClass} ${i}`:""}getCustomButtonIconClass(e){let t;return this.iconOverrideCustomButtonOption&&(t=e[this.iconOverrideCustomButtonOption],t)?`${this.baseIconClass} ${this.applyIconOverridePrefix(t)}`:""}}Gr.prototype.classes={};Gr.prototype.iconClasses={};Gr.prototype.baseIconClass="";Gr.prototype.iconOverridePrefix="";function dl(n){n();let e=I.debounceRendering,t=[];function i(s){t.push(s)}for(I.debounceRendering=i,Er(w($R,{}),document.createElement("div"));t.length;)t.shift()();I.debounceRendering=e}class $R extends st{render(){return w("div",{})}componentDidMount(){this.setState({})}}function xx(n){let e=xO(n),t=e.Provider;return e.Provider=function(){let i=!this.getChildContext,s=t.apply(this,arguments);if(i){let r=[];this.shouldComponentUpdate=o=>{this.props.value!==o.value&&r.forEach(a=>{a.context=o.value,a.forceUpdate()})},this.sub=o=>{r.push(o);let a=o.componentWillUnmount;o.componentWillUnmount=()=>{r.splice(r.indexOf(o),1),a&&a.call(o)}}}return s},e}class qR{constructor(e,t,i,s){this.execFunc=e,this.emitter=t,this.scrollTime=i,this.scrollTimeReset=s,this.handleScrollRequest=r=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},r),this.drain()},t.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const Pi=xx({});function GR(n,e,t,i,s,r,o,a,l,c,u,d,f){return{dateEnv:s,options:t,pluginHooks:o,emitter:c,dispatch:a,getCurrentData:l,calendarApi:u,viewSpec:n,viewApi:e,dateProfileGenerator:i,theme:r,isRtl:t.direction==="rtl",addResizeHandler(h){c.on("_resize",h)},removeResizeHandler(h){c.off("_resize",h)},createScrollResponder(h){return new qR(h,c,J(t.scrollTime),t.scrollTimeReset)},registerInteractiveComponent:d,unregisterInteractiveComponent:f}}class Ni extends st{shouldComponentUpdate(e,t){return this.debug&&console.log(dd(e,this.props),dd(t,this.state)),!qc(this.props,e,this.propEquality)||!qc(this.state,t,this.stateEquality)}safeSetState(e){qc(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}Ni.addPropsEquality=KR;Ni.addStateEquality=YR;Ni.contextType=Pi;Ni.prototype.propEquality={};Ni.prototype.stateEquality={};class ae extends Ni{}ae.contextType=Pi;function KR(n){let e=Object.create(this.prototype.propEquality);Object.assign(e,n),this.prototype.propEquality=e}function YR(n){let e=Object.create(this.prototype.stateEquality);Object.assign(e,n),this.prototype.stateEquality=e}function tn(n,e){typeof n=="function"?n(e):n&&(n.current=e)}class zf extends ae{constructor(){super(...arguments),this.id=Ri(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:t}=this.context,{generatorName:i}=this.props;(!t.customRenderingReplaces||!fd(i,t))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&tn(this.props.elRef,e)}}render(){const{props:e,context:t}=this,{options:i}=t,{customGenerator:s,defaultGenerator:r,renderProps:o}=e,a=_x(e,[],this.handleEl);let l=!1,c,u=[],d;if(s!=null){const f=typeof s=="function"?s(o,w):s;if(f===!0)l=!0;else{const h=f&&typeof f=="object";h&&"html"in f?a.dangerouslySetInnerHTML={__html:f.html}:h&&"domNodes"in f?u=Array.prototype.slice.call(f.domNodes):(h?qv(f):typeof f!="function")?c=f:d=f}}else l=!fd(e.generatorName,i);return l&&r&&(c=r(o)),this.queuedDomNodes=u,this.currentGeneratorMeta=d,w(e.elTag,a,c)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var t;const{props:i,context:s}=this,{handleCustomRendering:r,customRenderingMetaMap:o}=s.options;if(r){const a=(t=this.currentGeneratorMeta)!==null&&t!==void 0?t:o==null?void 0:o[i.generatorName];a&&r(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:a},i),{elClasses:(i.elClasses||[]).filter(JR)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:t}=this,i=this.base;if(!Pn(e,t)){t.forEach(HO);for(let s of e)i.appendChild(s);this.currentDomNodes=e}}}zf.addPropsEquality({elClasses:Pn,elStyle:Ht,elAttrs:LR,renderProps:Ht});function fd(n,e){var t;return!!(e.handleCustomRendering&&n&&(!((t=e.customRenderingMetaMap)===null||t===void 0)&&t[n]))}function _x(n,e,t){const i=Object.assign(Object.assign({},n.elAttrs),{ref:t});return(n.elClasses||e)&&(i.className=(n.elClasses||[]).concat(e||[]).concat(i.className||[]).filter(Boolean).join(" ")),n.elStyle&&(i.style=n.elStyle),i}function JR(n){return!!n}const Sx=xx(0);class nn extends st{constructor(){super(...arguments),this.InnerContent=QR.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(tn(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,t=ZR(e.classNameGenerator,e.renderProps);if(e.children){const i=_x(e,t,this.handleEl),s=e.children(this.InnerContent,e.renderProps,i);return e.elTag?w(e.elTag,i,s):s}else return w(zf,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(t),renderId:this.context}))}componentDidMount(){var e,t;this.el?(t=(e=this.props).didMount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,t;(t=(e=this.props).willUnmount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}nn.contextType=Sx;function QR(n,e){const t=n.props;return w(zf,Object.assign({renderProps:t.renderProps,generatorName:t.generatorName,customGenerator:t.customGenerator,defaultGenerator:t.defaultGenerator,renderId:n.context},e))}function ZR(n,e){const t=typeof n=="function"?n(e):n||[];return typeof t=="string"?[t]:t}class Ig extends ae{render(){let{props:e,context:t}=this,{options:i}=t,s={view:t.viewApi};return w(nn,Object.assign({},e,{elTag:e.elTag||"div",elClasses:[...wx(e.viewSpec),...e.elClasses||[]],renderProps:s,classNameGenerator:i.viewClassNames,generatorName:void 0,didMount:i.viewDidMount,willUnmount:i.viewWillUnmount}),()=>e.children)}}function wx(n){return[`fc-${n.type}-view`,"fc-view"]}function XR(n,e){let t=null,i=null;return n.start&&(t=e.createMarker(n.start)),n.end&&(i=e.createMarker(n.end)),!t&&!i||t&&i&&i<t?null:{start:t,end:i}}function Lg(n,e){let t=[],{start:i}=e,s,r;for(n.sort(eP),s=0;s<n.length;s+=1)r=n[s],r.start>i&&t.push({start:i,end:r.start}),r.end>i&&(i=r.end);return i<e.end&&t.push({start:i,end:e.end}),t}function eP(n,e){return n.start.valueOf()-e.start.valueOf()}function ms(n,e){let{start:t,end:i}=n,s=null;return e.start!==null&&(t===null?t=e.start:t=new Date(Math.max(t.valueOf(),e.start.valueOf()))),e.end!=null&&(i===null?i=e.end:i=new Date(Math.min(i.valueOf(),e.end.valueOf()))),(t===null||i===null||t<i)&&(s={start:t,end:i}),s}function tP(n,e){return(n.end===null||e.start===null||n.end>e.start)&&(n.start===null||e.end===null||n.start<e.end)}function Cn(n,e){return(n.start===null||e>=n.start)&&(n.end===null||e<n.end)}function nP(n,e){return e.start!=null&&n<e.start?e.start:e.end!=null&&n>=e.end?new Date(e.end.valueOf()-1):n}function Ax(n){let e=Math.floor(Es(n.start,n.end))||1,t=oe(n.start),i=Be(t,e);return{start:t,end:i}}function kx(n,e=J(0)){let t=null,i=null;if(n.end){i=oe(n.end);let s=n.end.valueOf()-i.valueOf();s&&s>=Cr(e)&&(i=Be(i,1))}return n.start&&(t=oe(n.start),i&&i<=t&&(i=Be(t,1))),{start:t,end:i}}function yo(n,e,t,i){return i==="year"?J(t.diffWholeYears(n,e),"year"):i==="month"?J(t.diffWholeMonths(n,e),"month"):uR(n,e)}function iP(n,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return n}}function sP(n,e){let t=n.initialDate;return t!=null?e.createMarker(t):Kr(n.now,e)}function Kr(n,e){return typeof n=="function"&&(n=n()),n==null?e.createNowMarker():e.createMarker(n)}class Ex{constructor(e){this.props=e,this.nowDate=Kr(e.nowInput,e.dateEnv),this.initHiddenDays()}buildPrev(e,t,i){let{dateEnv:s}=this.props,r=s.subtract(s.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(r,-1,i)}buildNext(e,t,i){let{dateEnv:s}=this.props,r=s.add(s.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(r,1,i)}build(e,t,i=!0){let{props:s}=this,r,o,a,l,c,u;return r=this.buildValidRange(),r=this.trimHiddenDays(r),i&&(e=nP(e,r)),o=this.buildCurrentRangeInfo(e,t),a=/^(year|month|week|day)$/.test(o.unit),l=this.buildRenderRange(this.trimHiddenDays(o.range),o.unit,a),l=this.trimHiddenDays(l),c=l,s.showNonCurrentDates||(c=ms(c,o.range)),c=this.adjustActiveRange(c),c=ms(c,r),u=tP(o.range,r),Cn(l,e)||(e=l.start),{currentDate:e,validRange:r,currentRange:o.range,currentRangeUnit:o.unit,isRangeAllDay:a,activeRange:c,renderRange:l,slotMinTime:s.slotMinTime,slotMaxTime:s.slotMaxTime,isValid:u,dateIncrement:this.buildDateIncrement(o.duration)}}buildValidRange(){let e=this.props.validRangeInput,t=typeof e=="function"?e.call(this.props.calendarApi,this.nowDate):e;return this.refineRange(t)||{start:null,end:null}}buildCurrentRangeInfo(e,t){let{props:i}=this,s=null,r=null,o=null,a;return i.duration?(s=i.duration,r=i.durationUnit,o=this.buildRangeFromDuration(e,t,s,r)):(a=this.props.dayCount)?(r="day",o=this.buildRangeFromDayCount(e,t,a)):(o=this.buildCustomVisibleRange(e))?r=i.dateEnv.greatestWholeUnit(o.start,o.end).unit:(s=this.getFallbackDuration(),r=ud(s).unit,o=this.buildRangeFromDuration(e,t,s,r)),{duration:s,unit:r,range:o}}getFallbackDuration(){return J({day:1})}adjustActiveRange(e){let{dateEnv:t,usesMinMaxTime:i,slotMinTime:s,slotMaxTime:r}=this.props,{start:o,end:a}=e;return i&&(ts(s)<0&&(o=oe(o),o=t.add(o,s)),ts(r)>1&&(a=oe(a),a=Be(a,-1),a=t.add(a,r))),{start:o,end:a}}buildRangeFromDuration(e,t,i,s){let{dateEnv:r,dateAlignment:o}=this.props,a,l,c;if(!o){let{dateIncrement:d}=this.props;d&&Cr(d)<Cr(i)?o=ud(d).unit:o=s}ts(i)<=1&&this.isHiddenDay(a)&&(a=this.skipHiddenDays(a,t),a=oe(a));function u(){a=r.startOf(e,o),l=r.add(a,i),c={start:a,end:l}}return u(),this.trimHiddenDays(c)||(e=this.skipHiddenDays(e,t),u()),c}buildRangeFromDayCount(e,t,i){let{dateEnv:s,dateAlignment:r}=this.props,o=0,a=e,l;r&&(a=s.startOf(a,r)),a=oe(a),a=this.skipHiddenDays(a,t),l=a;do l=Be(l,1),this.isHiddenDay(l)||(o+=1);while(o<i);return{start:a,end:l}}buildCustomVisibleRange(e){let{props:t}=this,i=t.visibleRangeInput,s=typeof i=="function"?i.call(t.calendarApi,t.dateEnv.toDate(e)):i,r=this.refineRange(s);return r&&(r.start==null||r.end==null)?null:r}buildRenderRange(e,t,i){return e}buildDateIncrement(e){let{dateIncrement:t}=this.props,i;return t||((i=this.props.dateAlignment)?J(1,i):e||J({days:1}))}refineRange(e){if(e){let t=XR(e,this.props.dateEnv);return t&&(t=kx(t)),t}return null}initHiddenDays(){let e=this.props.hiddenDays||[],t=[],i=0,s;for(this.props.weekends===!1&&e.push(0,6),s=0;s<7;s+=1)(t[s]=e.indexOf(s)!==-1)||(i+=1);if(!i)throw new Error("invalid hiddenDays");this.isHiddenDayHash=t}trimHiddenDays(e){let{start:t,end:i}=e;return t&&(t=this.skipHiddenDays(t)),i&&(i=this.skipHiddenDays(i,-1,!0)),t==null||i==null||t<i?{start:t,end:i}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,t=1,i=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(i?t:0)+7)%7];)e=Be(e,t);return e}}function Hf(n,e,t,i){return{instanceId:Ri(),defId:n,range:e,forcedStartTzo:t??null,forcedEndTzo:i??null}}function rP(n,e,t,i){for(let s=0;s<i.length;s+=1){let r=i[s].parse(n,t);if(r){let{allDay:o}=n;return o==null&&(o=e,o==null&&(o=r.allDayGuess,o==null&&(o=!1))),{allDay:o,duration:r.duration,typeData:r.typeData,typeId:s}}}return null}function Yr(n,e,t){let{dateEnv:i,pluginHooks:s,options:r}=t,{defs:o,instances:a}=n;a=gs(a,l=>!o[l.defId].recurringDef);for(let l in o){let c=o[l];if(c.recurringDef){let{duration:u}=c.recurringDef;u||(u=c.allDay?r.defaultAllDayEventDuration:r.defaultTimedEventDuration);let d=oP(c,u,e,i,s.recurringTypes);for(let f of d){let h=Hf(l,{start:f,end:i.add(f,u)});a[h.instanceId]=h}}}return{defs:o,instances:a}}function oP(n,e,t,i,s){let o=s[n.recurringDef.typeId].expand(n.recurringDef.typeData,{start:i.subtract(t.start,e),end:t.end},i);return n.allDay&&(o=o.map(oe)),o}const Qo={id:String,groupId:String,title:String,url:String,interactive:Boolean},Cx={start:A,end:A,date:A,allDay:Boolean},aP=Object.assign(Object.assign(Object.assign({},Qo),Cx),{extendedProps:A});function Mx(n,e,t,i,s=Vf(t),r,o){let{refined:a,extra:l}=Tx(n,t,s),c=cP(e,t),u=rP(a,c,t.dateEnv,t.pluginHooks.recurringTypes);if(u){let f=hd(a,l,e?e.sourceId:"",u.allDay,!!u.duration,t,r);return f.recurringDef={typeId:u.typeId,typeData:u.typeData,duration:u.duration},{def:f,instance:null}}let d=lP(a,c,t,i);if(d){let f=hd(a,l,e?e.sourceId:"",d.allDay,d.hasEnd,t,r),h=Hf(f.defId,d.range,d.forcedStartTzo,d.forcedEndTzo);return o&&f.publicId&&o[f.publicId]&&(h.instanceId=o[f.publicId]),{def:f,instance:h}}return null}function Tx(n,e,t=Vf(e)){return Lf(n,t)}function Vf(n){return Object.assign(Object.assign(Object.assign({},fl),aP),n.pluginHooks.eventRefiners)}function hd(n,e,t,i,s,r,o){let a={title:n.title||"",groupId:n.groupId||"",publicId:n.id||"",url:n.url||"",recurringDef:null,defId:(o&&n.id?o[n.id]:"")||Ri(),sourceId:t,allDay:i,hasEnd:s,interactive:n.interactive,ui:hl(n,r),extendedProps:Object.assign(Object.assign({},n.extendedProps||{}),e)};for(let l of r.pluginHooks.eventDefMemberAdders)Object.assign(a,l(n));return Object.freeze(a.ui.classNames),Object.freeze(a.extendedProps),a}function lP(n,e,t,i){let{allDay:s}=n,r,o=null,a=!1,l,c=null,u=n.start!=null?n.start:n.date;if(r=t.dateEnv.createMarkerMeta(u),r)o=r.marker;else if(!i)return null;return n.end!=null&&(l=t.dateEnv.createMarkerMeta(n.end)),s==null&&(e!=null?s=e:s=(!r||r.isTimeUnspecified)&&(!l||l.isTimeUnspecified)),s&&o&&(o=oe(o)),l&&(c=l.marker,s&&(c=oe(c)),o&&c<=o&&(c=null)),c?a=!0:i||(a=t.options.forceEventDuration||!1,c=t.dateEnv.add(o,s?t.options.defaultAllDayEventDuration:t.options.defaultTimedEventDuration)),{allDay:s,hasEnd:a,range:{start:o,end:c},forcedStartTzo:r?r.forcedTzo:null,forcedEndTzo:l?l.forcedTzo:null}}function cP(n,e){let t=null;return n&&(t=n.defaultAllDay),t==null&&(t=e.options.defaultAllDay),t}function Mr(n,e,t,i,s,r){let o=Mi(),a=Vf(t);for(let l of n){let c=Mx(l,e,t,i,a,s,r);c&&pd(c,o)}return o}function pd(n,e=Mi()){return e.defs[n.def.defId]=n.def,n.instance&&(e.instances[n.instance.instanceId]=n.instance),e}function uP(n,e){let t=n.instances[e];if(t){let i=n.defs[t.defId],s=Wf(n,r=>dP(i,r));return s.defs[i.defId]=i,s.instances[t.instanceId]=t,s}return Mi()}function dP(n,e){return!!(n.groupId&&n.groupId===e.groupId)}function Mi(){return{defs:{},instances:{}}}function jf(n,e){return{defs:Object.assign(Object.assign({},n.defs),e.defs),instances:Object.assign(Object.assign({},n.instances),e.instances)}}function Wf(n,e){let t=gs(n.defs,e),i=gs(n.instances,s=>t[s.defId]);return{defs:t,instances:i}}function fP(n,e){let{defs:t,instances:i}=n,s={},r={};for(let o in t)e.defs[o]||(s[o]=t[o]);for(let o in i)!e.instances[o]&&s[i[o].defId]&&(r[o]=i[o]);return{defs:s,instances:r}}function hP(n,e){return Array.isArray(n)?Mr(n,null,e,!0):typeof n=="object"&&n?Mr([n],null,e,!0):n!=null?String(n):null}function Bg(n){return Array.isArray(n)?n:typeof n=="string"?n.split(/\s+/):[]}const fl={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:A,overlap:A,allow:A,className:Bg,classNames:Bg,color:String,backgroundColor:String,borderColor:String,textColor:String},pP={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function hl(n,e){let t=hP(n.constraint,e);return{display:n.display||null,startEditable:n.startEditable!=null?n.startEditable:n.editable,durationEditable:n.durationEditable!=null?n.durationEditable:n.editable,constraints:t!=null?[t]:[],overlap:n.overlap!=null?n.overlap:null,allows:n.allow!=null?[n.allow]:[],backgroundColor:n.backgroundColor||n.color||"",borderColor:n.borderColor||n.color||"",textColor:n.textColor||"",classNames:(n.className||[]).concat(n.classNames||[])}}function gP(n){return n.reduce(mP,pP)}function mP(n,e){return{display:e.display!=null?e.display:n.display,startEditable:e.startEditable!=null?e.startEditable:n.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:n.durationEditable,constraints:n.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:n.overlap,allows:n.allows.concat(e.allows),backgroundColor:e.backgroundColor||n.backgroundColor,borderColor:e.borderColor||n.borderColor,textColor:e.textColor||n.textColor,classNames:n.classNames.concat(e.classNames)}}const bP={id:String,defaultAllDay:Boolean,url:String,format:String,events:A,eventDataTransform:A,success:A,failure:A};function Dx(n,e,t=Ox(e)){let i;if(typeof n=="string"?i={url:n}:typeof n=="function"||Array.isArray(n)?i={events:n}:typeof n=="object"&&n&&(i=n),i){let{refined:s,extra:r}=Lf(i,t),o=yP(s,e);if(o)return{_raw:n,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:s.defaultAllDay,eventDataTransform:s.eventDataTransform,success:s.success,failure:s.failure,publicId:s.id||"",sourceId:Ri(),sourceDefId:o.sourceDefId,meta:o.meta,ui:hl(s,e),extendedProps:r}}return null}function Ox(n){return Object.assign(Object.assign(Object.assign({},fl),bP),n.pluginHooks.eventSourceRefiners)}function yP(n,e){let t=e.pluginHooks.eventSourceDefs;for(let i=t.length-1;i>=0;i-=1){let r=t[i].parseMeta(n);if(r)return{sourceDefId:i,meta:r}}return null}function vP(n,e,t,i,s){switch(e.type){case"RECEIVE_EVENTS":return xP(n,t[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,s);case"RESET_RAW_EVENTS":return _P(n,t[e.sourceId],e.rawEvents,i.activeRange,s);case"ADD_EVENTS":return SP(n,e.eventStore,i?i.activeRange:null,s);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return jf(n,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return i?Yr(n,i.activeRange,s):n;case"REMOVE_EVENTS":return fP(n,e.eventStore);case"REMOVE_EVENT_SOURCE":return Px(n,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return Wf(n,r=>!r.sourceId);case"REMOVE_ALL_EVENTS":return Mi();default:return n}}function xP(n,e,t,i,s,r){if(e&&t===e.latestFetchId){let o=Mr(Rx(s,e,r),e,r);return i&&(o=Yr(o,i,r)),jf(Px(n,e.sourceId),o)}return n}function _P(n,e,t,i,s){const{defIdMap:r,instanceIdMap:o}=wP(n);let a=Mr(Rx(t,e,s),e,s,!1,r,o);return Yr(a,i,s)}function Rx(n,e,t){let i=t.options.eventDataTransform,s=e?e.eventDataTransform:null;return s&&(n=Fg(n,s)),i&&(n=Fg(n,i)),n}function Fg(n,e){let t;if(!e)t=n;else{t=[];for(let i of n){let s=e(i);s?t.push(s):s==null&&t.push(i)}}return t}function SP(n,e,t,i){return t&&(e=Yr(e,t,i)),jf(n,e)}function zg(n,e,t){let{defs:i}=n,s=qr(n.instances,r=>i[r.defId].allDay?r:Object.assign(Object.assign({},r),{range:{start:t.createMarker(e.toDate(r.range.start,r.forcedStartTzo)),end:t.createMarker(e.toDate(r.range.end,r.forcedEndTzo))},forcedStartTzo:t.canComputeOffset?null:r.forcedStartTzo,forcedEndTzo:t.canComputeOffset?null:r.forcedEndTzo}));return{defs:i,instances:s}}function Px(n,e){return Wf(n,t=>t.sourceId!==e)}function wP(n){const{defs:e,instances:t}=n,i={},s={};for(let r in e){const o=e[r],{publicId:a}=o;a&&(i[a]=r)}for(let r in t){const o=t[r],a=e[o.defId],{publicId:l}=a;l&&(s[l]=r)}return{defIdMap:i,instanceIdMap:s}}class AP{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,t){kP(this.handlers,e,t)}off(e,t){EP(this.handlers,e,t)}trigger(e,...t){let i=this.handlers[e]||[],s=this.options&&this.options[e],r=[].concat(s||[],i);for(let o of r)o.apply(this.thisContext,t)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function kP(n,e,t){(n[e]||(n[e]=[])).push(t)}function EP(n,e,t){t?n[e]&&(n[e]=n[e].filter(i=>i!==t)):delete n[e]}const CP={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function MP(n,e){return Mr(TP(n),null,e)}function TP(n){let e;return n===!0?e=[{}]:Array.isArray(n)?e=n.filter(t=>t.daysOfWeek):typeof n=="object"&&n?e=[n]:e=[],e=e.map(t=>Object.assign(Object.assign({},CP),t)),e}function DP(n,e,t){t.emitter.trigger("select",Object.assign(Object.assign({},RP(n,t)),{jsEvent:null,view:t.viewApi||t.calendarApi.view}))}function OP(n,e){e.emitter.trigger("unselect",{jsEvent:n?n.origEvent:null,view:e.viewApi||e.calendarApi.view})}function RP(n,e){let t={};for(let i of e.pluginHooks.dateSpanTransforms)Object.assign(t,i(n,e));return Object.assign(t,qP(n,e.dateEnv)),t}function Hg(n,e,t){let{dateEnv:i,options:s}=t,r=e;return n?(r=oe(r),r=i.add(r,s.defaultAllDayEventDuration)):r=i.add(r,s.defaultTimedEventDuration),r}function PP(n,e,t,i){let s=Ix(n.defs,e),r=Mi();for(let o in n.defs){let a=n.defs[o];r.defs[o]=NP(a,s[o],t,i)}for(let o in n.instances){let a=n.instances[o],l=r.defs[a.defId];r.instances[o]=IP(a,l,s[a.defId],t,i)}return r}function NP(n,e,t,i){let s=t.standardProps||{};s.hasEnd==null&&e.durationEditable&&(t.startDelta||t.endDelta)&&(s.hasEnd=!0);let r=Object.assign(Object.assign(Object.assign({},n),s),{ui:Object.assign(Object.assign({},n.ui),s.ui)});t.extendedProps&&(r.extendedProps=Object.assign(Object.assign({},r.extendedProps),t.extendedProps));for(let o of i.pluginHooks.eventDefMutationAppliers)o(r,t,i);return!r.hasEnd&&i.options.forceEventDuration&&(r.hasEnd=!0),r}function IP(n,e,t,i,s){let{dateEnv:r}=s,o=i.standardProps&&i.standardProps.allDay===!0,a=i.standardProps&&i.standardProps.hasEnd===!1,l=Object.assign({},n);return o&&(l.range=Ax(l.range)),i.datesDelta&&t.startEditable&&(l.range={start:r.add(l.range.start,i.datesDelta),end:r.add(l.range.end,i.datesDelta)}),i.startDelta&&t.durationEditable&&(l.range={start:r.add(l.range.start,i.startDelta),end:l.range.end}),i.endDelta&&t.durationEditable&&(l.range={start:l.range.start,end:r.add(l.range.end,i.endDelta)}),a&&(l.range={start:l.range.start,end:Hg(e.allDay,l.range.start,s)}),e.allDay&&(l.range={start:oe(l.range.start),end:oe(l.range.end)}),l.range.end<l.range.start&&(l.range.end=Hg(e.allDay,l.range.start,s)),l}class Ki{constructor(e,t){this.context=e,this.internalEventSource=t}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class dt{constructor(e,t,i){this._context=e,this._def=t,this._instance=i||null}setProp(e,t){if(e in Cx)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")t=Qo[e](t),this.mutate({standardProps:{publicId:t}});else if(e in Qo)t=Qo[e](t),this.mutate({standardProps:{[e]:t}});else if(e in fl){let i=fl[e](t);e==="color"?i={backgroundColor:t,borderColor:t}:e==="editable"?i={startEditable:t,durationEditable:t}:i={[e]:t},this.mutate({standardProps:{ui:i}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,t){this.mutate({extendedProps:{[e]:t}})}setStart(e,t={}){let{dateEnv:i}=this._context,s=i.createMarker(e);if(s&&this._instance){let r=this._instance.range,o=yo(r.start,s,i,t.granularity);t.maintainDuration?this.mutate({datesDelta:o}):this.mutate({startDelta:o})}}setEnd(e,t={}){let{dateEnv:i}=this._context,s;if(!(e!=null&&(s=i.createMarker(e),!s))&&this._instance)if(s){let r=yo(this._instance.range.end,s,i,t.granularity);this.mutate({endDelta:r})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,t,i={}){let{dateEnv:s}=this._context,r={allDay:i.allDay},o=s.createMarker(e),a;if(o&&!(t!=null&&(a=s.createMarker(t),!a))&&this._instance){let l=this._instance.range;i.allDay===!0&&(l=Ax(l));let c=yo(l.start,o,s,i.granularity);if(a){let u=yo(l.end,a,s,i.granularity);tR(c,u)?this.mutate({datesDelta:c,standardProps:r}):this.mutate({startDelta:c,endDelta:u,standardProps:r})}else r.hasEnd=!1,this.mutate({datesDelta:c,standardProps:r})}}moveStart(e){let t=J(e);t&&this.mutate({startDelta:t})}moveEnd(e){let t=J(e);t&&this.mutate({endDelta:t})}moveDates(e){let t=J(e);t&&this.mutate({datesDelta:t})}setAllDay(e,t={}){let i={allDay:e},{maintainDuration:s}=t;s==null&&(s=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(i.hasEnd=s),this.mutate({standardProps:i})}formatRange(e){let{dateEnv:t}=this._context,i=this._instance,s=we(e);return this._def.hasEnd?t.formatRange(i.range.start,i.range.end,s,{forcedStartTzo:i.forcedStartTzo,forcedEndTzo:i.forcedEndTzo}):t.format(i.range.start,s,{forcedTzo:i.forcedStartTzo})}mutate(e){let t=this._instance;if(t){let i=this._def,s=this._context,{eventStore:r}=s.getCurrentData(),o=uP(r,t.instanceId);o=PP(o,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,s);let l=new dt(s,i,t);this._def=o.defs[i.defId],this._instance=o.instances[t.instanceId],s.dispatch({type:"MERGE_EVENTS",eventStore:o}),s.emitter.trigger("eventChange",{oldEvent:l,event:this,relatedEvents:Uf(o,s,t),revert(){s.dispatch({type:"RESET_EVENTS",eventStore:r})}})}}remove(){let e=this._context,t=Nx(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:t}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:t})}})}get source(){let{sourceId:e}=this._def;return e?new Ki(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let t=this._def,{ui:i}=t,{startStr:s,endStr:r}=this,o={allDay:t.allDay};return t.title&&(o.title=t.title),s&&(o.start=s),r&&(o.end=r),t.publicId&&(o.id=t.publicId),t.groupId&&(o.groupId=t.groupId),t.url&&(o.url=t.url),i.display&&i.display!=="auto"&&(o.display=i.display),e.collapseColor&&i.backgroundColor&&i.backgroundColor===i.borderColor?o.color=i.backgroundColor:(i.backgroundColor&&(o.backgroundColor=i.backgroundColor),i.borderColor&&(o.borderColor=i.borderColor)),i.textColor&&(o.textColor=i.textColor),i.classNames.length&&(o.classNames=i.classNames),Object.keys(t.extendedProps).length&&(e.collapseExtendedProps?Object.assign(o,t.extendedProps):o.extendedProps=t.extendedProps),o}toJSON(){return this.toPlainObject()}}function Nx(n){let e=n._def,t=n._instance;return{defs:{[e.defId]:e},instances:t?{[t.instanceId]:t}:{}}}function Uf(n,e,t){let{defs:i,instances:s}=n,r=[],o=t?t.instanceId:"";for(let a in s){let l=s[a],c=i[l.defId];l.instanceId!==o&&r.push(new dt(e,c,l))}return r}function Vg(n,e,t,i){let s={},r={},o={},a=[],l=[],c=Ix(n.defs,e);for(let u in n.defs){let d=n.defs[u];c[d.defId].display==="inverse-background"&&(d.groupId?(s[d.groupId]=[],o[d.groupId]||(o[d.groupId]=d)):r[u]=[])}for(let u in n.instances){let d=n.instances[u],f=n.defs[d.defId],h=c[f.defId],p=d.range,g=!f.allDay&&i?kx(p,i):p,m=ms(g,t);m&&(h.display==="inverse-background"?f.groupId?s[f.groupId].push(m):r[d.defId].push(m):h.display!=="none"&&(h.display==="background"?a:l).push({def:f,ui:h,instance:d,range:m,isStart:g.start&&g.start.valueOf()===m.start.valueOf(),isEnd:g.end&&g.end.valueOf()===m.end.valueOf()}))}for(let u in s){let d=s[u],f=Lg(d,t);for(let h of f){let p=o[u],g=c[p.defId];a.push({def:p,ui:g,instance:null,range:h,isStart:!1,isEnd:!1})}}for(let u in r){let d=r[u],f=Lg(d,t);for(let h of f)a.push({def:n.defs[u],ui:c[u],instance:null,range:h,isStart:!1,isEnd:!1})}return{bg:a,fg:l}}function jg(n,e){n.fcSeg=e}function gd(n){return n.fcSeg||n.parentNode.fcSeg||null}function Ix(n,e){return qr(n,t=>Lx(t,e))}function Lx(n,e){let t=[];return e[""]&&t.push(e[""]),e[n.defId]&&t.push(e[n.defId]),t.push(n.ui),gP(t)}function LP(n,e){let t=n.map(BP);return t.sort((i,s)=>YO(i,s,e)),t.map(i=>i._seg)}function BP(n){let{eventRange:e}=n,t=e.def,i=e.instance?e.instance.range:e.range,s=i.start?i.start.valueOf():0,r=i.end?i.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},t.extendedProps),t),{id:t.publicId,start:s,end:r,duration:r-s,allDay:Number(t.allDay),_seg:n})}function FP(n,e){let{pluginHooks:t}=e,i=t.isDraggableTransformers,{def:s,ui:r}=n.eventRange,o=r.startEditable;for(let a of i)o=a(o,s,r,e);return o}function zP(n,e){return n.isStart&&n.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function HP(n,e){return n.isEnd&&n.eventRange.ui.durationEditable}function Bx(n,e,t,i,s,r,o){let{dateEnv:a,options:l}=t,{displayEventTime:c,displayEventEnd:u}=l,d=n.eventRange.def,f=n.eventRange.instance;c==null&&(c=i!==!1),u==null&&(u=s!==!1);let h=f.range.start,p=f.range.end,g=n.start||n.eventRange.range.start,m=n.end||n.eventRange.range.end,b=oe(h).valueOf()===oe(g).valueOf(),y=oe(Nn(p,-1)).valueOf()===oe(Nn(m,-1)).valueOf();return c&&!d.allDay&&(b||y)?(g=b?h:g,m=y?p:m,u&&d.hasEnd?a.formatRange(g,m,e,{forcedStartTzo:f.forcedStartTzo,forcedEndTzo:f.forcedEndTzo}):a.format(g,e,{forcedTzo:f.forcedStartTzo})):""}function or(n,e,t){let i=n.eventRange.range;return{isPast:i.end<=e.start,isFuture:i.start>=e.end,isToday:e&&Cn(e,i.start)}}function VP(n){let e=["fc-event"];return n.isMirror&&e.push("fc-event-mirror"),n.isDraggable&&e.push("fc-event-draggable"),(n.isStartResizable||n.isEndResizable)&&e.push("fc-event-resizable"),n.isDragging&&e.push("fc-event-dragging"),n.isResizing&&e.push("fc-event-resizing"),n.isSelected&&e.push("fc-event-selected"),n.isStart&&e.push("fc-event-start"),n.isEnd&&e.push("fc-event-end"),n.isPast&&e.push("fc-event-past"),n.isToday&&e.push("fc-event-today"),n.isFuture&&e.push("fc-event-future"),e}function jP(n){return n.instance?n.instance.instanceId:`${n.def.defId}:${n.range.start.toISOString()}`}function Fx(n,e){let{def:t,instance:i}=n.eventRange,{url:s}=t;if(s)return{href:s};let{emitter:r,options:o}=e,{eventInteractive:a}=o;return a==null&&(a=t.interactive,a==null&&(a=!!r.hasHandlers("eventClick"))),a?mx(l=>{r.trigger("eventClick",{el:l.target,event:new dt(e,t,i),jsEvent:l,view:e.viewApi})}):{}}const WP={start:A,end:A,allDay:Boolean};function UP(n,e,t){let i=$P(n,e),{range:s}=i;if(!s.start)return null;if(!s.end){if(t==null)return null;s.end=e.add(s.start,t)}return i}function $P(n,e){let{refined:t,extra:i}=Lf(n,WP),s=t.start?e.createMarkerMeta(t.start):null,r=t.end?e.createMarkerMeta(t.end):null,{allDay:o}=t;return o==null&&(o=s&&s.isTimeUnspecified&&(!r||r.isTimeUnspecified)),Object.assign({range:{start:s?s.marker:null,end:r?r.marker:null},allDay:o},i)}function qP(n,e){return Object.assign(Object.assign({},Hx(n.range,e,n.allDay)),{allDay:n.allDay})}function zx(n,e,t){return Object.assign(Object.assign({},Hx(n,e,t)),{timeZone:e.timeZone})}function Hx(n,e,t){return{start:e.toDate(n.start),end:e.toDate(n.end),startStr:e.formatIso(n.start,{omitTime:t}),endStr:e.formatIso(n.end,{omitTime:t})}}function GP(n,e,t){let i=Tx({editable:!1},t),s=hd(i.refined,i.extra,"",n.allDay,!0,t);return{def:s,ui:Lx(s,e),instance:Hf(s.defId,n.range),range:n.range,isStart:!0,isEnd:!0}}function KP(n,e,t){let i=!1,s=function(a){i||(i=!0,e(a))},r=function(a){i||(i=!0,t(a))},o=n(s,r);o&&typeof o.then=="function"&&o.then(s,r)}class Wg extends Error{constructor(e,t){super(e),this.response=t}}function YP(n,e,t){n=n.toUpperCase();const i={method:n};return n==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(t):(i.body=new URLSearchParams(t),i.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,i).then(s=>{if(s.ok)return s.json().then(r=>[r,s],()=>{throw new Wg("Failure parsing JSON",s)});throw new Wg("Request failed",s)})}let Gc;function Vx(){return Gc==null&&(Gc=JP()),Gc}function JP(){if(typeof document>"u")return!0;let n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.innerHTML="<table><tr><td><div></div></td></tr></table>",n.querySelector("table").style.height="100px",n.querySelector("div").style.height="100%",document.body.appendChild(n);let t=n.querySelector("div").offsetHeight>0;return document.body.removeChild(n),t}class QP extends ae{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{dl(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{dl(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:t}=e,{forPrint:i}=this.state,s=i||t.height==="auto"||t.contentHeight==="auto",r=!s&&t.height!=null?t.height:"",o=["fc",i?"fc-media-print":"fc-media-screen",`fc-direction-${t.direction}`,e.theme.getClass("root")];return Vx()||o.push("fc-liquid-hack"),e.children(o,r,s,i)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}let jx=class{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}};function ZP(n,e){return{component:n,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}const Ug={};class XP{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,t){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:t})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,t){let{currentDataManager:i}=this;i.currentCalendarOptionsRefiners[e]?i.emitter.on(e,t):console.warn(`Unknown listener name '${e}'`)}off(e,t){this.currentDataManager.emitter.off(e,t)}trigger(e,...t){this.currentDataManager.emitter.trigger(e,...t)}changeView(e,t){this.batchRendering(()=>{if(this.unselect(),t)if(t.start&&t.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:t});else{let{dateEnv:i}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:i.createMarker(t)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,t){let i=this.getCurrentData(),s;t=t||"day",s=i.viewSpecs[t]||this.getUnitViewSpec(t),this.unselect(),s?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:s.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:t,toolbarConfig:i}=this.getCurrentData(),s=[].concat(i.header?i.header.viewsWithButtons:[],i.footer?i.footer.viewsWithButtons:[]),r,o;for(let a in t)s.push(a);for(r=0;r<s.length;r+=1)if(o=t[s[r]],o&&o.singleUnit===e)return o;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:Kr(e.calendarOptions.now,e.dateEnv)})}gotoDate(e){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.createMarker(e)})}incrementDate(e){let t=this.getCurrentData(),i=J(e);i&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.add(t.currentDate,i)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,t){let{dateEnv:i}=this.getCurrentData();return i.format(i.createMarker(e),we(t))}formatRange(e,t,i){let{dateEnv:s}=this.getCurrentData();return s.formatRange(s.createMarker(e),s.createMarker(t),we(i),i)}formatIso(e,t){let{dateEnv:i}=this.getCurrentData();return i.formatIso(i.createMarker(e),{omitTime:t})}select(e,t){let i;t==null?e.start!=null?i=e:i={start:e,end:null}:i={start:e,end:t};let s=this.getCurrentData(),r=UP(i,s.dateEnv,J({days:1}));r&&(this.dispatch({type:"SELECT_DATES",selection:r}),DP(r,null,s))}unselect(e){let t=this.getCurrentData();t.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),OP(e,t))}addEvent(e,t){if(e instanceof dt){let o=e._def,a=e._instance;return this.getCurrentData().eventStore.defs[o.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:pd({def:o,instance:a})}),this.triggerEventAdd(e)),e}let i=this.getCurrentData(),s;if(t instanceof Ki)s=t.internalEventSource;else if(typeof t=="boolean")t&&([s]=Ff(i.eventSources));else if(t!=null){let o=this.getEventSourceById(t);if(!o)return console.warn(`Could not find an event source with ID "${t}"`),null;s=o.internalEventSource}let r=Mx(e,s,i,!1);if(r){let o=new dt(i,r.def,r.def.recurringDef?null:r.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:pd(r)}),this.triggerEventAdd(o),o}return null}triggerEventAdd(e){let{emitter:t}=this.getCurrentData();t.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:Nx(e)})}})}getEventById(e){let t=this.getCurrentData(),{defs:i,instances:s}=t.eventStore;e=String(e);for(let r in i){let o=i[r];if(o.publicId===e){if(o.recurringDef)return new dt(t,o,null);for(let a in s){let l=s[a];if(l.defId===o.defId)return new dt(t,o,l)}}}return null}getEvents(){let e=this.getCurrentData();return Uf(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),t=e.eventSources,i=[];for(let s in t)i.push(new Ki(e,t[s]));return i}getEventSourceById(e){let t=this.getCurrentData(),i=t.eventSources;e=String(e);for(let s in i)if(i[s].publicId===e)return new Ki(t,i[s]);return null}addEventSource(e){let t=this.getCurrentData();if(e instanceof Ki)return t.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let i=Dx(e,t);return i?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[i]}),new Ki(t,i)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let t=J(e);t&&this.trigger("_scrollRequest",{time:t})}}function eN(n,e){let t={left:Math.max(n.left,e.left),right:Math.min(n.right,e.right),top:Math.max(n.top,e.top),bottom:Math.min(n.bottom,e.bottom)};return t.left<t.right&&t.top<t.bottom?t:!1}function Wx(n,e,t,i){return{dow:n.getUTCDay(),isDisabled:!!(i&&!Cn(i.activeRange,n)),isOther:!!(i&&!Cn(i.currentRange,n)),isToday:!!(e&&Cn(e,n)),isPast:!!(e&&n<e.start),isFuture:!!(e&&n>=e.end)}}function $f(n,e){let t=["fc-day",`fc-day-${rR[n.dow]}`];return n.isDisabled?t.push("fc-day-disabled"):(n.isToday&&(t.push("fc-day-today"),t.push(e.getClass("today"))),n.isPast&&t.push("fc-day-past"),n.isFuture&&t.push("fc-day-future"),n.isOther&&t.push("fc-day-other")),t}const tN=we({year:"numeric",month:"long",day:"numeric"}),nN=we({week:"long"});function md(n,e,t="day",i=!0){const{dateEnv:s,options:r,calendarApi:o}=n;let a=s.format(e,t==="week"?nN:tN);if(r.navLinks){let l=s.toDate(e);const c=u=>{let d=t==="day"?r.navLinkDayClick:t==="week"?r.navLinkWeekClick:null;typeof d=="function"?d.call(o,s.toDate(e),u):(typeof d=="string"&&(t=d),o.zoomTo(e,t))};return Object.assign({title:sr(r.navLinkHint,[a,l],a),"data-navlink":""},i?gx(c):{onClick:c})}return{"aria-label":a}}let Kc;function iN(){return Kc||(Kc=sN()),Kc}function sN(){let n=document.createElement("div");n.style.overflow="scroll",n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",document.body.appendChild(n);let e=rN(n);return document.body.removeChild(n),e}function rN(n){return{x:n.offsetHeight-n.clientHeight,y:n.offsetWidth-n.clientWidth}}function oN(n){let e=aN(n),t=n.getBoundingClientRect();for(let i of e){let s=eN(t,i.getBoundingClientRect());if(s)t=s;else return null}return t}function aN(n){let e=[];for(;n instanceof HTMLElement;){let t=window.getComputedStyle(n);if(t.position==="fixed")break;/(auto|scroll)/.test(t.overflow+t.overflowY+t.overflowX)&&e.push(n),n=n.parentNode}return e}class pl{constructor(e,t,i,s){this.els=t;let r=this.originClientRect=e.getBoundingClientRect();i&&this.buildElHorizontals(r.left),s&&this.buildElVerticals(r.top)}buildElHorizontals(e){let t=[],i=[];for(let s of this.els){let r=s.getBoundingClientRect();t.push(r.left-e),i.push(r.right-e)}this.lefts=t,this.rights=i}buildElVerticals(e){let t=[],i=[];for(let s of this.els){let r=s.getBoundingClientRect();t.push(r.top-e),i.push(r.bottom-e)}this.tops=t,this.bottoms=i}leftToIndex(e){let{lefts:t,rights:i}=this,s=t.length,r;for(r=0;r<s;r+=1)if(e>=t[r]&&e<i[r])return r}topToIndex(e){let{tops:t,bottoms:i}=this,s=t.length,r;for(r=0;r<s;r+=1)if(e>=t[r]&&e<i[r])return r}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return vo(this.tops||[],e.tops||[])&&vo(this.bottoms||[],e.bottoms||[])&&vo(this.lefts||[],e.lefts||[])&&vo(this.rights||[],e.rights||[])}}function vo(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(Math.round(n[i])!==Math.round(e[i]))return!1;return!0}class Ii extends ae{constructor(){super(...arguments),this.uid=Ri()}prepareHits(){}queryHit(e,t,i,s){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Kt(e,".fc-event-mirror")}isValidDateDownEl(e){return!Kt(e,".fc-event:not(.fc-bg-event)")&&!Kt(e,".fc-more-link")&&!Kt(e,"a[data-navlink]")&&!Kt(e,".fc-popover")}}class lN{constructor(e=t=>t.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let t=[];for(let i of e)this.insertEntry(i,t);return t}insertEntry(e,t){let i=this.findInsertion(e);this.isInsertionValid(i,e)?this.insertEntryAt(e,i):this.handleInvalidInsertion(i,e,t)}isInsertionValid(e,t){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(t)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,t,i){if(this.allowReslicing&&e.touchingEntry){const s=Object.assign(Object.assign({},t),{span:Ux(t.span,e.touchingEntry.span)});i.push(s),this.splitEntry(t,e.touchingEntry,i)}else i.push(t)}splitEntry(e,t,i){let s=e.span,r=t.span;s.start<r.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:s.start,end:r.start}},i),s.end>r.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:r.end,end:s.end}},i)}insertEntryAt(e,t){let{entriesByLevel:i,levelCoords:s}=this;t.lateral===-1?(Yc(s,t.level,t.levelCoord),Yc(i,t.level,[e])):Yc(i[t.level],t.lateral,e),this.stackCnts[ar(e)]=t.stackCnt}findInsertion(e){let{levelCoords:t,entriesByLevel:i,strictOrder:s,stackCnts:r}=this,o=t.length,a=0,l=-1,c=-1,u=null,d=0;for(let p=0;p<o;p+=1){const g=t[p];if(!s&&g>=a+this.getEntryThickness(e))break;let m=i[p],b,y=qg(m,e.span.start,$g),v=y[0]+y[1];for(;(b=m[v])&&b.span.start<e.span.end;){let x=g+this.getEntryThickness(b);x>a&&(a=x,u=b,l=p,c=v),x===a&&(d=Math.max(d,r[ar(b)]+1)),v+=1}}let f=0;if(u)for(f=l+1;f<o&&t[f]<a;)f+=1;let h=-1;return f<o&&t[f]===a&&(h=qg(i[f],e.span.end,$g)[0]),{touchingLevel:l,touchingLateral:c,touchingEntry:u,stackCnt:d,levelCoord:a,level:f,lateral:h}}toRects(){let{entriesByLevel:e,levelCoords:t}=this,i=e.length,s=[];for(let r=0;r<i;r+=1){let o=e[r],a=t[r];for(let l of o)s.push(Object.assign(Object.assign({},l),{thickness:this.getEntryThickness(l),levelCoord:a}))}return s}}function $g(n){return n.span.end}function ar(n){return n.index+":"+n.span.start}function Ux(n,e){let t=Math.max(n.start,e.start),i=Math.min(n.end,e.end);return t<i?{start:t,end:i}:null}function Yc(n,e,t){n.splice(e,0,t)}function qg(n,e,t){let i=0,s=n.length;if(!s||e<t(n[i]))return[0,0];if(e>t(n[s-1]))return[s,0];for(;i<s;){let r=Math.floor(i+(s-i)/2),o=t(n[r]);if(e<o)s=r;else if(e>o)i=r+1;else return[r,1]}return[i,0]}function cN(n,e){return!n||e>10?we({weekday:"short"}):e>1?we({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):we({weekday:"long"})}const $x="fc-col-header-cell";function qx(n){return n.text}class uN extends ae{render(){let{dateEnv:e,options:t,theme:i,viewApi:s}=this.context,{props:r}=this,{date:o,dateProfile:a}=r,l=Wx(o,r.todayRange,null,a),c=[$x].concat($f(l,i)),u=e.format(o,r.dayHeaderFormat),d=!l.isDisabled&&r.colCnt>1?md(this.context,o):{},f=Object.assign(Object.assign(Object.assign({date:e.toDate(o),view:s},r.extraRenderProps),{text:u}),l);return w(nn,{elTag:"th",elClasses:c,elAttrs:Object.assign({role:"columnheader",colSpan:r.colSpan,"data-date":l.isDisabled?void 0:Nf(o)},r.extraDataAttrs),renderProps:f,generatorName:"dayHeaderContent",customGenerator:t.dayHeaderContent,defaultGenerator:qx,classNameGenerator:t.dayHeaderClassNames,didMount:t.dayHeaderDidMount,willUnmount:t.dayHeaderWillUnmount},h=>w("div",{className:"fc-scrollgrid-sync-inner"},!l.isDisabled&&w(h,{elTag:"a",elAttrs:d,elClasses:["fc-col-header-cell-cushion",r.isSticky&&"fc-sticky"]})))}}const dN=we({weekday:"long"});class fN extends ae{render(){let{props:e}=this,{dateEnv:t,theme:i,viewApi:s,options:r}=this.context,o=Be(new Date(2592e5),e.dow),a={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},l=t.format(o,e.dayHeaderFormat),c=Object.assign(Object.assign(Object.assign(Object.assign({date:o},a),{view:s}),e.extraRenderProps),{text:l});return w(nn,{elTag:"th",elClasses:[$x,...$f(a,i),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:c,generatorName:"dayHeaderContent",customGenerator:r.dayHeaderContent,defaultGenerator:qx,classNameGenerator:r.dayHeaderClassNames,didMount:r.dayHeaderDidMount,willUnmount:r.dayHeaderWillUnmount},u=>w("div",{className:"fc-scrollgrid-sync-inner"},w(u,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":t.format(o,dN)}})))}}class qf extends st{constructor(e,t){super(e,t),this.initialNowDate=Kr(t.options.now,t.dateEnv),this.initialNowQueriedMs=new Date().valueOf(),this.state=this.computeTiming().currentState}render(){let{props:e,state:t}=this;return e.children(t.nowDate,t.todayRange)}componentDidMount(){this.setTimeout()}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout()}computeTiming(){let{props:e,context:t}=this,i=Nn(this.initialNowDate,new Date().valueOf()-this.initialNowQueriedMs),s=t.dateEnv.startOf(i,e.unit),r=t.dateEnv.add(s,J(1,e.unit)),o=r.valueOf()-i.valueOf();return o=Math.min(1e3*60*60*24,o),{currentState:{nowDate:s,todayRange:Gg(s)},nextState:{nowDate:r,todayRange:Gg(r)},waitMs:o}}setTimeout(){let{nextState:e,waitMs:t}=this.computeTiming();this.timeoutId=setTimeout(()=>{this.setState(e,()=>{this.setTimeout()})},t)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}qf.contextType=Pi;function Gg(n){let e=oe(n),t=Be(e,1);return{start:e,end:t}}class hN extends ae{constructor(){super(...arguments),this.createDayHeaderFormatter=K(pN)}render(){let{context:e}=this,{dates:t,dateProfile:i,datesRepDistinctDays:s,renderIntro:r}=this.props,o=this.createDayHeaderFormatter(e.options.dayHeaderFormat,s,t.length);return w(qf,{unit:"day"},(a,l)=>w("tr",{role:"row"},r&&r("day"),t.map(c=>s?w(uN,{key:c.toISOString(),date:c,dateProfile:i,todayRange:l,colCnt:t.length,dayHeaderFormat:o}):w(fN,{key:c.getUTCDay(),dow:c.getUTCDay(),dayHeaderFormat:o}))))}}function pN(n,e,t){return n||cN(e,t)}class gN{constructor(e,t){let i=e.start,{end:s}=e,r=[],o=[],a=-1;for(;i<s;)t.isHiddenDay(i)?r.push(a+.5):(a+=1,r.push(a),o.push(i)),i=Be(i,1);this.dates=o,this.indices=r,this.cnt=o.length}sliceRange(e){let t=this.getDateDayIndex(e.start),i=this.getDateDayIndex(Be(e.end,-1)),s=Math.max(0,t),r=Math.min(this.cnt-1,i);return s=Math.ceil(s),r=Math.floor(r),s<=r?{firstIndex:s,lastIndex:r,isStart:t===s,isEnd:i===r}:null}getDateDayIndex(e){let{indices:t}=this,i=Math.floor(Es(this.dates[0],e));return i<0?t[0]-1:i>=t.length?t[t.length-1]+1:t[i]}}class mN{constructor(e,t){let{dates:i}=e,s,r,o;if(t){for(r=i[0].getUTCDay(),s=1;s<i.length&&i[s].getUTCDay()!==r;s+=1);o=Math.ceil(i.length/s)}else o=1,s=i.length;this.rowCnt=o,this.colCnt=s,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let t=0;t<this.rowCnt;t+=1){let i=[];for(let s=0;s<this.colCnt;s+=1)i.push(this.buildCell(t,s));e.push(i)}return e}buildCell(e,t){let i=this.daySeries.dates[e*this.colCnt+t];return{key:i.toISOString(),date:i}}buildHeaderDates(){let e=[];for(let t=0;t<this.colCnt;t+=1)e.push(this.cells[0][t].date);return e}sliceRange(e){let{colCnt:t}=this,i=this.daySeries.sliceRange(e),s=[];if(i){let{firstIndex:r,lastIndex:o}=i,a=r;for(;a<=o;){let l=Math.floor(a/t),c=Math.min((l+1)*t,o+1);s.push({row:l,firstCol:a%t,lastCol:(c-1)%t,isStart:i.isStart&&a===r,isEnd:i.isEnd&&c-1===o}),a=c}}return s}}class bN{constructor(){this.sliceBusinessHours=K(this._sliceBusinessHours),this.sliceDateSelection=K(this._sliceDateSpan),this.sliceEventStore=K(this._sliceEventStore),this.sliceEventDrag=K(this._sliceInteraction),this.sliceEventResize=K(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,t,i,s,...r){let{eventUiBases:o}=e,a=this.sliceEventStore(e.eventStore,o,t,i,...r);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,t,i,o,s,...r),businessHourSegs:this.sliceBusinessHours(e.businessHours,t,i,s,...r),fgEventSegs:a.fg,bgEventSegs:a.bg,eventDrag:this.sliceEventDrag(e.eventDrag,o,t,i,...r),eventResize:this.sliceEventResize(e.eventResize,o,t,i,...r),eventSelection:e.eventSelection}}sliceNowDate(e,t,i,s,...r){return this._sliceDateSpan({range:{start:e,end:Nn(e,1)},allDay:!1},t,i,{},s,...r)}_sliceBusinessHours(e,t,i,s,...r){return e?this._sliceEventStore(Yr(e,xo(t,!!i),s),{},t,i,...r).bg:[]}_sliceEventStore(e,t,i,s,...r){if(e){let o=Vg(e,t,xo(i,!!s),s);return{bg:this.sliceEventRanges(o.bg,r),fg:this.sliceEventRanges(o.fg,r)}}return{bg:[],fg:[]}}_sliceInteraction(e,t,i,s,...r){if(!e)return null;let o=Vg(e.mutatedEvents,t,xo(i,!!s),s);return{segs:this.sliceEventRanges(o.fg,r),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,t,i,s,r,...o){if(!e)return[];let a=xo(t,!!i),l=ms(e.range,a);if(l){e=Object.assign(Object.assign({},e),{range:l});let c=GP(e,s,r),u=this.sliceRange(e.range,...o);for(let d of u)d.eventRange=c;return u}return[]}sliceEventRanges(e,t){let i=[];for(let s of e)i.push(...this.sliceEventRange(s,t));return i}sliceEventRange(e,t){let i=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(i={start:i.start,end:Be(i.start,1)});let s=this.sliceRange(i,...t);for(let r of s)r.eventRange=e,r.isStart=e.isStart&&r.isStart,r.isEnd=e.isEnd&&r.isEnd;return s}}function xo(n,e){let t=n.activeRange;return e?t:{start:Nn(t.start,n.slotMinTime.milliseconds),end:Nn(t.end,n.slotMaxTime.milliseconds-864e5)}}const _o=/^(visible|hidden)$/;class yN extends ae{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,tn(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:t,liquidIsAbsolute:i}=e,s=t&&i,r=["fc-scroller"];return t&&(i?r.push("fc-scroller-liquid-absolute"):r.push("fc-scroller-liquid")),w("div",{ref:this.handleEl,className:r.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:s&&-(e.overcomeLeft||0)||"",right:s&&-(e.overcomeRight||0)||"",bottom:s&&-(e.overcomeBottom||0)||"",marginLeft:!s&&-(e.overcomeLeft||0)||"",marginRight:!s&&-(e.overcomeRight||0)||"",marginBottom:!s&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(_o.test(this.props.overflowX))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:i}=e;for(let s=0;s<i.length;s+=1)if(i[s].getBoundingClientRect().width>t)return!0;return!1}needsYScrolling(){if(_o.test(this.props.overflowY))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:i}=e;for(let s=0;s<i.length;s+=1)if(i[s].getBoundingClientRect().height>t)return!0;return!1}getXScrollbarWidth(){return _o.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return _o.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class li{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(t,i)=>{let{depths:s,currentMap:r}=this,o=!1,a=!1;t!==null?(o=i in r,r[i]=t,s[i]=(s[i]||0)+1,a=!0):(s[i]-=1,s[i]||(delete r[i],delete this.callbackMap[i],o=!0)),this.masterCallback&&(o&&this.masterCallback(null,String(i)),a&&this.masterCallback(t,String(i)))}}createRef(e){let t=this.callbackMap[e];return t||(t=this.callbackMap[e]=i=>{this.handleValue(i,String(e))}),t}collect(e,t,i){return FR(this.currentMap,e,t,i)}getAll(){return Ff(this.currentMap)}}function vN(n){let e=jO(n,".fc-scrollgrid-shrink"),t=0;for(let i of e)t=Math.max(t,ZO(i));return Math.ceil(t)}function Gx(n,e){return n.liquid&&e.liquid}function xN(n,e){return e.maxHeight!=null||Gx(n,e)}function _N(n,e,t,i){let{expandRows:s}=t;return typeof e.content=="function"?e.content(t):w("table",{role:"presentation",className:[e.tableClassName,n.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:t.tableMinWidth,width:t.clientWidth,height:s?t.clientHeight:""}},t.tableColGroupNode,w(i?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(t):e.rowContent))}function SN(n,e){return Pn(n,e,Ht)}function wN(n,e){let t=[];for(let i of n){let s=i.span||1;for(let r=0;r<s;r+=1)t.push(w("col",{style:{width:i.width==="shrink"?AN(e):i.width||"",minWidth:i.minWidth||""}}))}return w("colgroup",{},...t)}function AN(n){return n??4}function kN(n){for(let e of n)if(e.width==="shrink")return!0;return!1}function EN(n,e){let t=["fc-scrollgrid",e.theme.getClass("table")];return n&&t.push("fc-scrollgrid-liquid"),t}function CN(n,e){let t=["fc-scrollgrid-section",`fc-scrollgrid-section-${n.type}`,n.className];return e&&n.liquid&&n.maxHeight==null&&t.push("fc-scrollgrid-section-liquid"),n.isSticky&&t.push("fc-scrollgrid-section-sticky"),t}function MN(n){return w("div",{className:"fc-scrollgrid-sticky-shim",style:{width:n.clientWidth,minWidth:n.tableMinWidth}})}function Kg(n){let{stickyHeaderDates:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}function TN(n){let{stickyFooterScrollbar:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}class Kx extends ae{constructor(){super(...arguments),this.processCols=K(e=>e,SN),this.renderMicroColGroup=K(wN),this.scrollerRefs=new li,this.scrollerElRefs=new li(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:t,context:i}=this,s=e.sections||[],r=this.processCols(e.cols),o=this.renderMicroColGroup(r,t.shrinkWidth),a=EN(e.liquid,i);e.collapsibleWidth&&a.push("fc-scrollgrid-collapsible");let l=s.length,c=0,u,d=[],f=[],h=[];for(;c<l&&(u=s[c]).type==="header";)d.push(this.renderSection(u,o,!0)),c+=1;for(;c<l&&(u=s[c]).type==="body";)f.push(this.renderSection(u,o,!1)),c+=1;for(;c<l&&(u=s[c]).type==="footer";)h.push(this.renderSection(u,o,!0)),c+=1;let p=!Vx();const g={role:"rowgroup"};return w("table",{role:"grid",className:a.join(" "),style:{height:e.height}},!!(!p&&d.length)&&w("thead",g,...d),!!(!p&&f.length)&&w("tbody",g,...f),!!(!p&&h.length)&&w("tfoot",g,...h),p&&w("tbody",g,...d,...f,...h))}renderSection(e,t,i){return"outerContent"in e?w(fe,{key:e.key},e.outerContent):w("tr",{key:e.key,role:"presentation",className:CN(e,this.props.liquid).join(" ")},this.renderChunkTd(e,t,e.chunk,i))}renderChunkTd(e,t,i,s){if("outerContent"in i)return i.outerContent;let{props:r}=this,{forceYScrollbars:o,scrollerClientWidths:a,scrollerClientHeights:l}=this.state,c=xN(r,e),u=Gx(r,e),d=r.liquid?o?"scroll":c?"auto":"hidden":"visible",f=e.key,h=_N(e,i,{tableColGroupNode:t,tableMinWidth:"",clientWidth:!r.collapsibleWidth&&a[f]!==void 0?a[f]:null,clientHeight:l[f]!==void 0?l[f]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},s);return w(s?"th":"td",{ref:i.elRef,role:"presentation"},w("div",{className:`fc-scroller-harness${u?" fc-scroller-harness-liquid":""}`},w(yN,{ref:this.scrollerRefs.createRef(f),elRef:this.scrollerElRefs.createRef(f),overflowY:d,overflowX:r.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:u,liquidIsAbsolute:!0},h)))}_handleScrollerEl(e,t){let i=DN(this.props.sections,t);i&&tn(i.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return kN(this.props.cols)?vN(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=iN(),{scrollerRefs:t,scrollerElRefs:i}=this,s=!1,r={},o={};for(let a in t.currentMap){let l=t.currentMap[a];if(l&&l.needsYScrolling()){s=!0;break}}for(let a of this.props.sections){let l=a.key,c=i.currentMap[l];if(c){let u=c.parentNode;r[l]=Math.floor(u.getBoundingClientRect().width-(s?e.y:0)),o[l]=Math.floor(u.getBoundingClientRect().height)}}return{forceYScrollbars:s,scrollerClientWidths:r,scrollerClientHeights:o}}}Kx.addStateEquality({scrollerClientWidths:Ht,scrollerClientHeights:Ht});function DN(n,e){for(let t of n)if(t.key===e)return t;return null}class Gf extends ae{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,e&&jg(e,this.props.seg)}}render(){const{props:e,context:t}=this,{options:i}=t,{seg:s}=e,{eventRange:r}=s,{ui:o}=r,a={event:new dt(t,r.def,r.instance),view:t.viewApi,timeText:e.timeText,textColor:o.textColor,backgroundColor:o.backgroundColor,borderColor:o.borderColor,isDraggable:!e.disableDragging&&FP(s,t),isStartResizable:!e.disableResizing&&zP(s,t),isEndResizable:!e.disableResizing&&HP(s),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!s.isStart,isEnd:!!s.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return w(nn,Object.assign({},e,{elRef:this.handleEl,elClasses:[...VP(a),...s.eventRange.ui.classNames,...e.elClasses||[]],renderProps:a,generatorName:"eventContent",customGenerator:i.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.eventClassNames,didMount:i.eventDidMount,willUnmount:i.eventWillUnmount}))}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&jg(this.el,this.props.seg)}}class ON extends ae{render(){let{props:e,context:t}=this,{options:i}=t,{seg:s}=e,{ui:r}=s.eventRange,o=i.eventTimeFormat||e.defaultTimeFormat,a=Bx(s,o,t,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return w(Gf,Object.assign({},e,{elTag:"a",elStyle:{borderColor:r.borderColor,backgroundColor:r.backgroundColor},elAttrs:Fx(s,t),defaultGenerator:RN,timeText:a}),(l,c)=>w(fe,null,w(l,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:c.textColor}}),!!c.isStartResizable&&w("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!c.isEndResizable&&w("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}function RN(n){return w("div",{className:"fc-event-main-frame"},n.timeText&&w("div",{className:"fc-event-time"},n.timeText),w("div",{className:"fc-event-title-container"},w("div",{className:"fc-event-title fc-sticky"},n.event.title||w(fe,null," "))))}const PN=we({day:"numeric"});class Yx extends ae{constructor(){super(...arguments),this.refineRenderProps=Jo(NN)}render(){let{props:e,context:t}=this,{options:i}=t,s=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:t.viewApi,dateEnv:t.dateEnv,monthStartFormat:i.monthStartFormat});return w(nn,Object.assign({},e,{elClasses:[...$f(s,t.theme),...e.elClasses||[]],elAttrs:Object.assign(Object.assign({},e.elAttrs),s.isDisabled?{}:{"data-date":Nf(e.date)}),renderProps:s,generatorName:"dayCellContent",customGenerator:i.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:s.isDisabled?void 0:i.dayCellClassNames,didMount:i.dayCellDidMount,willUnmount:i.dayCellWillUnmount}))}}function Jx(n){return!!(n.dayCellContent||fd("dayCellContent",n))}function NN(n){let{date:e,dateEnv:t,dateProfile:i,isMonthStart:s}=n,r=Wx(e,n.todayRange,null,i),o=n.showDayNumber?t.format(e,s?n.monthStartFormat:PN):"";return Object.assign(Object.assign(Object.assign({date:t.toDate(e),view:n.viewApi},r),{isMonthStart:s,dayNumberText:o}),n.extraRenderProps)}class IN extends ae{render(){let{props:e}=this,{seg:t}=e;return w(Gf,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:t.eventRange.ui.backgroundColor},defaultGenerator:LN,seg:t,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function LN(n){let{title:e}=n.event;return e&&w("div",{className:"fc-event-title"},n.event.title)}function BN(n){return w("div",{className:`fc-${n}`})}const FN=n=>w(Pi.Consumer,null,e=>{let{dateEnv:t,options:i}=e,{date:s}=n,r=i.weekNumberFormat||n.defaultFormat,o=t.computeWeekNumber(s),a=t.format(s,r);return w(nn,Object.assign({},n,{renderProps:{num:o,text:a,date:s},generatorName:"weekNumberContent",customGenerator:i.weekNumberContent,defaultGenerator:zN,classNameGenerator:i.weekNumberClassNames,didMount:i.weekNumberDidMount,willUnmount:i.weekNumberWillUnmount}))});function zN(n){return n.text}const Jc=10;class HN extends ae{constructor(){super(...arguments),this.state={titleId:Ql()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&tn(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const t=$O(e);this.rootEl.contains(t)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:t}=this.context,{props:i,state:s}=this,r=["fc-popover",e.getClass("popover")].concat(i.extraClassNames||[]);return CO(w("div",Object.assign({},i.extraAttrs,{id:i.id,className:r.join(" "),"aria-labelledby":s.titleId,ref:this.handleRootEl}),w("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},w("span",{className:"fc-popover-title",id:s.titleId},i.title),w("span",{className:"fc-popover-close "+e.getIconClass("close"),title:t.closeHint,onClick:this.handleCloseClick})),w("div",{className:"fc-popover-body "+e.getClass("popoverContent")},i.children)),i.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:t,alignGridTop:i}=this.props,{rootEl:s}=this,r=oN(t);if(r){let o=s.getBoundingClientRect(),a=i?Kt(t,".fc-scrollgrid").getBoundingClientRect().top:r.top,l=e?r.right-o.width:r.left;a=Math.max(a,Jc),l=Math.min(l,document.documentElement.clientWidth-Jc-o.width),l=Math.max(l,Jc);let c=s.offsetParent.getBoundingClientRect();UO(s,{top:a-c.top,left:l-c.left})}}}class VN extends Ii{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:t}=this.context,{props:i}=this,{startDate:s,todayRange:r,dateProfile:o}=i,a=t.format(s,e.dayPopoverFormat);return w(Yx,{elRef:this.handleRootEl,date:s,dateProfile:o,todayRange:r},(l,c,u)=>w(HN,{elRef:u.ref,id:i.id,title:a,extraClassNames:["fc-more-popover"].concat(u.className||[]),extraAttrs:u,parentEl:i.parentEl,alignmentEl:i.alignmentEl,alignGridTop:i.alignGridTop,onClose:i.onClose},Jx(e)&&w(l,{elTag:"div",elClasses:["fc-more-popover-misc"]}),i.children))}queryHit(e,t,i,s){let{rootEl:r,props:o}=this;return e>=0&&e<i&&t>=0&&t<s?{dateProfile:o.dateProfile,dateSpan:Object.assign({allDay:!o.forceTimed,range:{start:o.startDate,end:o.endDate}},o.extraDateSpan),dayEl:r,rect:{left:0,top:0,right:i,bottom:s},layer:1}:null}}class jN extends ae{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Ql()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&tn(this.props.elRef,e)},this.handleClick=e=>{let{props:t,context:i}=this,{moreLinkClick:s}=i.options,r=Yg(t).start;function o(a){let{def:l,instance:c,range:u}=a.eventRange;return{event:new dt(i,l,c),start:i.dateEnv.toDate(u.start),end:i.dateEnv.toDate(u.end),isStart:a.isStart,isEnd:a.isEnd}}typeof s=="function"&&(s=s({date:r,allDay:!!t.allDayDate,allSegs:t.allSegs.map(o),hiddenSegs:t.hiddenSegs.map(o),jsEvent:e,view:i.viewApi})),!s||s==="popover"?this.setState({isPopoverOpen:!0}):typeof s=="string"&&i.calendarApi.zoomTo(r,s)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:t}=this;return w(Pi.Consumer,null,i=>{let{viewApi:s,options:r,calendarApi:o}=i,{moreLinkText:a}=r,{moreCnt:l}=e,c=Yg(e),u=typeof a=="function"?a.call(o,l):`+${l} ${a}`,d=sr(r.moreLinkHint,[l],u),f={num:l,shortText:`+${l}`,text:u,view:s};return w(fe,null,!!e.moreCnt&&w(nn,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),gx(this.handleClick)),{title:d,"aria-expanded":t.isPopoverOpen,"aria-controls":t.isPopoverOpen?t.popoverId:""}),renderProps:f,generatorName:"moreLinkContent",customGenerator:r.moreLinkContent,defaultGenerator:e.defaultGenerator||WN,classNameGenerator:r.moreLinkClassNames,didMount:r.moreLinkDidMount,willUnmount:r.moreLinkWillUnmount},e.children),t.isPopoverOpen&&w(VN,{id:t.popoverId,startDate:c.start,endDate:c.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Kt(this.linkEl,".fc-view-harness"))}}function WN(n){return n.text}function Yg(n){if(n.allDayDate)return{start:n.allDayDate,end:Be(n.allDayDate,1)};let{hiddenSegs:e}=n;return{start:UN(e),end:qN(e)}}function UN(n){return n.reduce($N).eventRange.range.start}function $N(n,e){return n.eventRange.range.start<e.eventRange.range.start?n:e}function qN(n){return n.reduce(GN).eventRange.range.end}function GN(n,e){return n.eventRange.range.end>e.eventRange.range.end?n:e}const KN=[],Qx={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},Zx=Object.assign(Object.assign({},Qx),{buttonHints:{prev:"Previous $0",next:"Next $0",today(n,e){return e==="day"?"Today":`This ${n}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(n){return`Show ${n} more event${n===1?"":"s"}`}});function YN(n){let e=n.length>0?n[0].code:"en",t=KN.concat(n),i={en:Zx};for(let s of t)i[s.code]=s;return{map:i,defaultCode:e}}function Xx(n,e){return typeof n=="object"&&!Array.isArray(n)?e_(n.code,[n.code],n):JN(n,e)}function JN(n,e){let t=[].concat(n||[]),i=QN(t,e)||Zx;return e_(n,t,i)}function QN(n,e){for(let t=0;t<n.length;t+=1){let i=n[t].toLocaleLowerCase().split("-");for(let s=i.length;s>0;s-=1){let r=i.slice(0,s).join("-");if(e[r])return e[r]}}return null}function e_(n,e,t){let i=Bf([Qx,t],["buttonText"]);delete i.code;let{week:s}=i;return delete i.week,{codeArg:n,codes:e,week:s,simpleNumberFormat:new Intl.NumberFormat(n),options:i}}function Li(n){return{id:Ri(),name:n.name,premiumReleaseDate:n.premiumReleaseDate?new Date(n.premiumReleaseDate):void 0,deps:n.deps||[],reducers:n.reducers||[],isLoadingFuncs:n.isLoadingFuncs||[],contextInit:[].concat(n.contextInit||[]),eventRefiners:n.eventRefiners||{},eventDefMemberAdders:n.eventDefMemberAdders||[],eventSourceRefiners:n.eventSourceRefiners||{},isDraggableTransformers:n.isDraggableTransformers||[],eventDragMutationMassagers:n.eventDragMutationMassagers||[],eventDefMutationAppliers:n.eventDefMutationAppliers||[],dateSelectionTransformers:n.dateSelectionTransformers||[],datePointTransforms:n.datePointTransforms||[],dateSpanTransforms:n.dateSpanTransforms||[],views:n.views||{},viewPropsTransformers:n.viewPropsTransformers||[],isPropsValid:n.isPropsValid||null,externalDefTransforms:n.externalDefTransforms||[],viewContainerAppends:n.viewContainerAppends||[],eventDropTransformers:n.eventDropTransformers||[],componentInteractions:n.componentInteractions||[],calendarInteractions:n.calendarInteractions||[],themeClasses:n.themeClasses||{},eventSourceDefs:n.eventSourceDefs||[],cmdFormatter:n.cmdFormatter,recurringTypes:n.recurringTypes||[],namedTimeZonedImpl:n.namedTimeZonedImpl,initialView:n.initialView||"",elementDraggingImpl:n.elementDraggingImpl,optionChangeHandlers:n.optionChangeHandlers||{},scrollGridImpl:n.scrollGridImpl||null,listenerRefiners:n.listenerRefiners||{},optionRefiners:n.optionRefiners||{},propSetHandlers:n.propSetHandlers||{}}}function ZN(n,e){let t={},i={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function s(r){for(let o of r){const a=o.name,l=t[a];l===void 0?(t[a]=o.id,s(o.deps),i=eI(i,o)):l!==o.id&&console.warn(`Duplicate plugin '${a}'`)}}return n&&s(n),s(e),i}function XN(){let n=[],e=[],t;return(i,s)=>((!t||!Pn(i,n)||!Pn(s,e))&&(t=ZN(i,s)),n=i,e=s,t)}function eI(n,e){return{premiumReleaseDate:tI(n.premiumReleaseDate,e.premiumReleaseDate),reducers:n.reducers.concat(e.reducers),isLoadingFuncs:n.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:n.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},n.eventRefiners),e.eventRefiners),eventDefMemberAdders:n.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},n.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:n.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:n.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:n.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:n.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:n.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:n.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},n.views),e.views),viewPropsTransformers:n.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||n.isPropsValid,externalDefTransforms:n.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:n.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:n.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:n.calendarInteractions.concat(e.calendarInteractions),componentInteractions:n.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},n.themeClasses),e.themeClasses),eventSourceDefs:n.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||n.cmdFormatter,recurringTypes:n.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||n.namedTimeZonedImpl,initialView:n.initialView||e.initialView,elementDraggingImpl:n.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},n.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||n.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},n.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},n.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},n.propSetHandlers),e.propSetHandlers)}}function tI(n,e){return n===void 0?e:e===void 0?n:new Date(Math.max(n.valueOf(),e.valueOf()))}class Vn extends Gr{}Vn.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};Vn.prototype.baseIconClass="fc-icon";Vn.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};Vn.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};Vn.prototype.iconOverrideOption="buttonIcons";Vn.prototype.iconOverrideCustomButtonOption="icon";Vn.prototype.iconOverridePrefix="fc-icon-";function nI(n,e){let t={},i;for(i in n)bd(i,t,n,e);for(i in e)bd(i,t,n,e);return t}function bd(n,e,t,i){if(e[n])return e[n];let s=iI(n,e,t,i);return s&&(e[n]=s),s}function iI(n,e,t,i){let s=t[n],r=i[n],o=u=>s&&s[u]!==null?s[u]:r&&r[u]!==null?r[u]:null,a=o("component"),l=o("superType"),c=null;if(l){if(l===n)throw new Error("Can't have a custom view type that references itself");c=bd(l,e,t,i)}return!a&&c&&(a=c.component),a?{type:n,component:a,defaults:Object.assign(Object.assign({},c?c.defaults:{}),s?s.rawOptions:{}),overrides:Object.assign(Object.assign({},c?c.overrides:{}),r?r.rawOptions:{})}:null}function Jg(n){return qr(n,sI)}function sI(n){let e=typeof n=="function"?{component:n}:n,{component:t}=e;return e.content?t=Qg(e):t&&!(t.prototype instanceof ae)&&(t=Qg(Object.assign(Object.assign({},e),{content:t}))),{superType:e.type,component:t,rawOptions:e}}function Qg(n){return e=>w(Pi.Consumer,null,t=>w(nn,{elTag:"div",elClasses:wx(t.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:t.options.nextDayThreshold}),generatorName:void 0,customGenerator:n.content,classNameGenerator:n.classNames,didMount:n.didMount,willUnmount:n.willUnmount}))}function rI(n,e,t,i){let s=Jg(n),r=Jg(e.views),o=nI(s,r);return qr(o,a=>oI(a,r,e,t,i))}function oI(n,e,t,i,s){let r=n.overrides.duration||n.defaults.duration||i.duration||t.duration,o=null,a="",l="",c={};if(r&&(o=aI(r),o)){let f=ud(o);a=f.unit,f.value===1&&(l=a,c=e[a]?e[a].rawOptions:{})}let u=f=>{let h=f.buttonText||{},p=n.defaults.buttonTextKey;return p!=null&&h[p]!=null?h[p]:h[n.type]!=null?h[n.type]:h[l]!=null?h[l]:null},d=f=>{let h=f.buttonHints||{},p=n.defaults.buttonTextKey;return p!=null&&h[p]!=null?h[p]:h[n.type]!=null?h[n.type]:h[l]!=null?h[l]:null};return{type:n.type,component:n.component,duration:o,durationUnit:a,singleUnit:l,optionDefaults:n.defaults,optionOverrides:Object.assign(Object.assign({},c),n.overrides),buttonTextOverride:u(i)||u(t)||n.overrides.buttonText,buttonTextDefault:u(s)||n.defaults.buttonText||u(rr)||n.type,buttonTitleOverride:d(i)||d(t)||n.overrides.buttonHint,buttonTitleDefault:d(s)||n.defaults.buttonHint||d(rr)}}let Zg={};function aI(n){let e=JSON.stringify(n),t=Zg[e];return t===void 0&&(t=J(n),Zg[e]=t),t}function lI(n,e){switch(e.type){case"CHANGE_VIEW_TYPE":n=e.viewType}return n}function cI(n,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},n),{[e.optionName]:e.rawOptionValue});default:return n}}function uI(n,e,t,i){let s;switch(e.type){case"CHANGE_VIEW_TYPE":return i.build(e.dateMarker||t);case"CHANGE_DATE":return i.build(e.dateMarker);case"PREV":if(s=i.buildPrev(n,t),s.isValid)return s;break;case"NEXT":if(s=i.buildNext(n,t),s.isValid)return s;break}return n}function dI(n,e,t){let i=e?e.activeRange:null;return n_({},yI(n,t),i,t)}function fI(n,e,t,i){let s=t?t.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return n_(n,e.sources,s,i);case"REMOVE_EVENT_SOURCE":return pI(n,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return t?i_(n,s,i):n;case"FETCH_EVENT_SOURCES":return Kf(n,e.sourceIds?yx(e.sourceIds):s_(n,i),s,e.isRefetch||!1,i);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return bI(n,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return n}}function hI(n,e,t){let i=e?e.activeRange:null;return Kf(n,s_(n,t),i,!0,t)}function t_(n){for(let e in n)if(n[e].isFetching)return!0;return!1}function n_(n,e,t,i){let s={};for(let r of e)s[r.sourceId]=r;return t&&(s=i_(s,t,i)),Object.assign(Object.assign({},n),s)}function pI(n,e){return gs(n,t=>t.sourceId!==e)}function i_(n,e,t){return Kf(n,gs(n,i=>gI(i,e,t)),e,!1,t)}function gI(n,e,t){return r_(n,t)?!t.options.lazyFetching||!n.fetchRange||n.isFetching||e.start<n.fetchRange.start||e.end>n.fetchRange.end:!n.latestFetchId}function Kf(n,e,t,i,s){let r={};for(let o in n){let a=n[o];e[o]?r[o]=mI(a,t,i,s):r[o]=a}return r}function mI(n,e,t,i){let{options:s,calendarApi:r}=i,o=i.pluginHooks.eventSourceDefs[n.sourceDefId],a=Ri();return o.fetch({eventSource:n,range:e,isRefetch:t,context:i},l=>{let{rawEvents:c}=l;s.eventSourceSuccess&&(c=s.eventSourceSuccess.call(r,c,l.response)||c),n.success&&(c=n.success.call(r,c,l.response)||c),i.dispatch({type:"RECEIVE_EVENTS",sourceId:n.sourceId,fetchId:a,fetchRange:e,rawEvents:c})},l=>{let c=!1;s.eventSourceFailure&&(s.eventSourceFailure.call(r,l),c=!0),n.failure&&(n.failure(l),c=!0),c||console.warn(l.message,l),i.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:n.sourceId,fetchId:a,fetchRange:e,error:l})}),Object.assign(Object.assign({},n),{isFetching:!0,latestFetchId:a})}function bI(n,e,t,i){let s=n[e];return s&&t===s.latestFetchId?Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},s),{isFetching:!1,fetchRange:i})}):n}function s_(n,e){return gs(n,t=>r_(t,e))}function yI(n,e){let t=Ox(e),i=[].concat(n.eventSources||[]),s=[];n.initialEvents&&i.unshift(n.initialEvents),n.events&&i.unshift(n.events);for(let r of i){let o=Dx(r,e,t);o&&s.push(o)}return s}function r_(n,e){return!e.pluginHooks.eventSourceDefs[n.sourceDefId].ignoreRange}function vI(n,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return n}}function xI(n,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return n}}function _I(n,e){let t;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function SI(n,e){let t;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function wI(n,e,t,i,s){let r=n.headerToolbar?Xg(n.headerToolbar,n,e,t,i,s):null,o=n.footerToolbar?Xg(n.footerToolbar,n,e,t,i,s):null;return{header:r,footer:o}}function Xg(n,e,t,i,s,r){let o={},a=[],l=!1;for(let c in n){let u=n[c],d=AI(u,e,t,i,s,r);o[c]=d.widgets,a.push(...d.viewsWithButtons),l=l||d.hasTitle}return{sectionWidgets:o,viewsWithButtons:a,hasTitle:l}}function AI(n,e,t,i,s,r){let o=e.direction==="rtl",a=e.customButtons||{},l=t.buttonText||{},c=e.buttonText||{},u=t.buttonHints||{},d=e.buttonHints||{},f=n?n.split(" "):[],h=[],p=!1;return{widgets:f.map(m=>m.split(",").map(b=>{if(b==="title")return p=!0,{buttonName:b};let y,v,x,_,S,E;if(y=a[b])x=C=>{y.click&&y.click.call(C.target,C,C.target)},(_=i.getCustomButtonIconClass(y))||(_=i.getIconClass(b,o))||(S=y.text),E=y.hint||y.text;else if(v=s[b]){h.push(b),x=()=>{r.changeView(b)},(S=v.buttonTextOverride)||(_=i.getIconClass(b,o))||(S=v.buttonTextDefault);let C=v.buttonTextOverride||v.buttonTextDefault;E=sr(v.buttonTitleOverride||v.buttonTitleDefault||e.viewHint,[C,b],C)}else if(r[b])if(x=()=>{r[b]()},(S=l[b])||(_=i.getIconClass(b,o))||(S=c[b]),b==="prevYear"||b==="nextYear"){let C=b==="prevYear"?"prev":"next";E=sr(u[C]||d[C],[c.year||"year","year"],c[b])}else E=C=>sr(u[b]||d[b],[c[C]||C,C],c[b]);return{buttonName:b,buttonClick:x,buttonIcon:_,buttonText:S,buttonHint:E}})),viewsWithButtons:h,hasTitle:p}}class kI{constructor(e,t,i){this.type=e,this.getCurrentData=t,this.dateEnv=i}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let EI={ignoreRange:!0,parseMeta(n){return Array.isArray(n.events)?n.events:null},fetch(n,e){e({rawEvents:n.eventSource.meta})}};const CI=Li({name:"array-event-source",eventSourceDefs:[EI]});let MI={parseMeta(n){return typeof n.events=="function"?n.events:null},fetch(n,e,t){const{dateEnv:i}=n.context,s=n.eventSource.meta;KP(s.bind(null,zx(n.range,i)),r=>e({rawEvents:r}),t)}};const TI=Li({name:"func-event-source",eventSourceDefs:[MI]}),DI={method:String,extraParams:A,startParam:String,endParam:String,timeZoneParam:String};let OI={parseMeta(n){return n.url&&(n.format==="json"||!n.format)?{url:n.url,format:"json",method:(n.method||"GET").toUpperCase(),extraParams:n.extraParams,startParam:n.startParam,endParam:n.endParam,timeZoneParam:n.timeZoneParam}:null},fetch(n,e,t){const{meta:i}=n.eventSource,s=PI(i,n.range,n.context);YP(i.method,i.url,s).then(([r,o])=>{e({rawEvents:r,response:o})},t)}};const RI=Li({name:"json-event-source",eventSourceRefiners:DI,eventSourceDefs:[OI]});function PI(n,e,t){let{dateEnv:i,options:s}=t,r,o,a,l,c={};return r=n.startParam,r==null&&(r=s.startParam),o=n.endParam,o==null&&(o=s.endParam),a=n.timeZoneParam,a==null&&(a=s.timeZoneParam),typeof n.extraParams=="function"?l=n.extraParams():l=n.extraParams||{},Object.assign(c,l),c[r]=i.formatIso(e.start),c[o]=i.formatIso(e.end),i.timeZone!=="local"&&(c[a]=i.timeZone),c}const NI={daysOfWeek:A,startTime:J,endTime:J,duration:J,startRecur:A,endRecur:A};let II={parse(n,e){if(n.daysOfWeek||n.startTime||n.endTime||n.startRecur||n.endRecur){let t={daysOfWeek:n.daysOfWeek||null,startTime:n.startTime||null,endTime:n.endTime||null,startRecur:n.startRecur?e.createMarker(n.startRecur):null,endRecur:n.endRecur?e.createMarker(n.endRecur):null},i;return n.duration&&(i=n.duration),!i&&n.startTime&&n.endTime&&(i=nR(n.endTime,n.startTime)),{allDayGuess:!n.startTime&&!n.endTime,duration:i,typeData:t}}return null},expand(n,e,t){let i=ms(e,{start:n.startRecur,end:n.endRecur});return i?BI(n.daysOfWeek,n.startTime,i,t):[]}};const LI=Li({name:"simple-recurring-event",recurringTypes:[II],eventRefiners:NI});function BI(n,e,t,i){let s=n?yx(n):null,r=oe(t.start),o=t.end,a=[];for(;r<o;){let l;(!s||s[r.getUTCDay()])&&(e?l=i.add(r,e):l=r,a.push(l)),r=Be(r,1)}return a}const FI=Li({name:"change-handler",optionChangeHandlers:{events(n,e){em([n],e)},eventSources:em}});function em(n,e){let t=Ff(e.getCurrentData().eventSources);if(t.length===1&&n.length===1&&Array.isArray(t[0]._raw)&&Array.isArray(n[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:t[0].sourceId,rawEvents:n[0]});return}let i=[];for(let s of n){let r=!1;for(let o=0;o<t.length;o+=1)if(t[o]._raw===s){t.splice(o,1),r=!0;break}r||i.push(s)}for(let s of t)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:s.sourceId});for(let s of i)e.calendarApi.addEventSource(s)}function zI(n,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},zx(n.activeRange,e.dateEnv)),{view:e.viewApi}))}function HI(n,e){let{emitter:t}=e;t.hasHandlers("eventsSet")&&t.trigger("eventsSet",Uf(n,e))}const VI=[CI,TI,RI,LI,FI,Li({name:"misc",isLoadingFuncs:[n=>t_(n.eventSources)],propSetHandlers:{dateProfile:zI,eventStore:HI}})];class jI{constructor(e,t){this.runTaskOption=e,this.drainedOption=t,this.queue=[],this.delayedRunner=new Pf(this.drain.bind(this))}request(e,t){this.queue.push(e),this.delayedRunner.request(t)}pause(e){this.delayedRunner.pause(e)}resume(e,t){this.delayedRunner.resume(e,t)}drain(){let{queue:e}=this;for(;e.length;){let t=[],i;for(;i=e.shift();)this.runTask(i),t.push(i);this.drained(t)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function WI(n,e,t){let i;return/^(year|month)$/.test(n.currentRangeUnit)?i=n.currentRange:i=n.activeRange,t.formatRange(i.start,i.end,we(e.titleFormat||UI(n)),{isEndExclusive:n.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function UI(n){let{currentRangeUnit:e}=n;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let t=al(n.currentRange.start,n.currentRange.end);return t!==null&&t>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class $I{constructor(e){this.computeCurrentViewData=K(this._computeCurrentViewData),this.organizeRawLocales=K(YN),this.buildLocale=K(Xx),this.buildPluginHooks=XN(),this.buildDateEnv=K(qI),this.buildTheme=K(GI),this.parseToolbars=K(wI),this.buildViewSpecs=K(rI),this.buildDateProfileGenerator=Jo(KI),this.buildViewApi=K(YI),this.buildViewUiProps=Jo(ZI),this.buildEventUiBySource=K(JI,Ht),this.buildEventUiBases=K(QI),this.parseContextBusinessHours=Jo(XI),this.buildTitle=K(WI),this.emitter=new AP,this.actionRunner=new jI(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=f=>{this.actionRunner.request(f)},this.props=e,this.actionRunner.pause();let t={},i=this.computeOptionsData(e.optionOverrides,t,e.calendarApi),s=i.calendarOptions.initialView||i.pluginHooks.initialView,r=this.computeCurrentViewData(s,i,e.optionOverrides,t);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(r.options);let o=sP(i.calendarOptions,i.dateEnv),a=r.dateProfileGenerator.build(o);Cn(a.activeRange,o)||(o=a.currentRange.start);let l={dateEnv:i.dateEnv,options:i.calendarOptions,pluginHooks:i.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData};for(let f of i.pluginHooks.contextInit)f(l);let c=dI(i.calendarOptions,a,l),u={dynamicOptionOverrides:t,currentViewType:s,currentDate:o,dateProfile:a,businessHours:this.parseContextBusinessHours(l),eventSources:c,eventUiBases:{},eventStore:Mi(),renderableEventStore:Mi(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(l).selectionConfig},d=Object.assign(Object.assign({},l),u);for(let f of i.pluginHooks.reducers)Object.assign(u,f(null,null,d));Qc(u,l)&&this.emitter.trigger("loading",!0),this.state=u,this.updateData(),this.actionRunner.resume()}resetOptions(e,t){let{props:i}=this;t===void 0?i.optionOverrides=e:(i.optionOverrides=Object.assign(Object.assign({},i.optionOverrides||{}),e),this.optionsForRefining.push(...t)),(t===void 0||t.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:t,state:i,emitter:s}=this,r=cI(i.dynamicOptionOverrides,e),o=this.computeOptionsData(t.optionOverrides,r,t.calendarApi),a=lI(i.currentViewType,e),l=this.computeCurrentViewData(a,o,t.optionOverrides,r);t.calendarApi.currentDataManager=this,s.setThisContext(t.calendarApi),s.setOptions(l.options);let c={dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:s,getCurrentData:this.getCurrentData},{currentDate:u,dateProfile:d}=i;this.data&&this.data.dateProfileGenerator!==l.dateProfileGenerator&&(d=l.dateProfileGenerator.build(u)),u=iP(u,e),d=uI(d,e,u,l.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!Cn(d.currentRange,u))&&(u=d.currentRange.start);let f=fI(i.eventSources,e,d,c),h=vP(i.eventStore,e,f,d,c),g=t_(f)&&!l.options.progressiveEventRendering&&i.renderableEventStore||h,{eventUiSingleBase:m,selectionConfig:b}=this.buildViewUiProps(c),y=this.buildEventUiBySource(f),v=this.buildEventUiBases(g.defs,m,y),x={dynamicOptionOverrides:r,currentViewType:a,currentDate:u,dateProfile:d,eventSources:f,eventStore:h,renderableEventStore:g,selectionConfig:b,eventUiBases:v,businessHours:this.parseContextBusinessHours(c),dateSelection:vI(i.dateSelection,e),eventSelection:xI(i.eventSelection,e),eventDrag:_I(i.eventDrag,e),eventResize:SI(i.eventResize,e)},_=Object.assign(Object.assign({},c),x);for(let C of o.pluginHooks.reducers)Object.assign(x,C(i,e,_));let S=Qc(i,c),E=Qc(x,c);!S&&E?s.trigger("loading",!0):S&&!E&&s.trigger("loading",!1),this.state=x,t.onAction&&t.onAction(e)}updateData(){let{props:e,state:t}=this,i=this.data,s=this.computeOptionsData(e.optionOverrides,t.dynamicOptionOverrides,e.calendarApi),r=this.computeCurrentViewData(t.currentViewType,s,e.optionOverrides,t.dynamicOptionOverrides),o=this.data=Object.assign(Object.assign(Object.assign({viewTitle:this.buildTitle(t.dateProfile,r.options,s.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},s),r),t),a=s.pluginHooks.optionChangeHandlers,l=i&&i.calendarOptions,c=s.calendarOptions;if(l&&l!==c){l.timeZone!==c.timeZone&&(t.eventSources=o.eventSources=hI(o.eventSources,t.dateProfile,o),t.eventStore=o.eventStore=zg(o.eventStore,i.dateEnv,o.dateEnv),t.renderableEventStore=o.renderableEventStore=zg(o.renderableEventStore,i.dateEnv,o.dateEnv));for(let u in a)(this.optionsForHandling.indexOf(u)!==-1||l[u]!==c[u])&&a[u](c[u],o)}this.optionsForHandling=[],e.onData&&e.onData(o)}computeOptionsData(e,t,i){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&t===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:s,pluginHooks:r,localeDefaults:o,availableLocaleData:a,extra:l}=this.processRawCalendarOptions(e,t);tm(l);let c=this.buildDateEnv(s.timeZone,s.locale,s.weekNumberCalculation,s.firstDay,s.weekText,r,a,s.defaultRangeSeparator),u=this.buildViewSpecs(r.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,o),d=this.buildTheme(s,r),f=this.parseToolbars(s,this.stableOptionOverrides,d,u,i);return this.stableCalendarOptionsData={calendarOptions:s,pluginHooks:r,dateEnv:c,viewSpecs:u,theme:d,toolbarConfig:f,localeDefaults:o,availableRawLocales:a.map}}processRawCalendarOptions(e,t){let{locales:i,locale:s}=$c([rr,e,t]),r=this.organizeRawLocales(i),o=r.map,a=this.buildLocale(s||r.defaultCode,o).options,l=this.buildPluginHooks(e.plugins||[],VI),c=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Rg),Pg),Ng),l.listenerRefiners),l.optionRefiners),u={},d=$c([rr,a,e,t]),f={},h=this.currentCalendarOptionsInput,p=this.currentCalendarOptionsRefined,g=!1;for(let m in d)this.optionsForRefining.indexOf(m)===-1&&(d[m]===h[m]||Jn[m]&&m in h&&Jn[m](h[m],d[m]))?f[m]=p[m]:c[m]?(f[m]=c[m](d[m]),g=!0):u[m]=h[m];return g&&(this.currentCalendarOptionsInput=d,this.currentCalendarOptionsRefined=f,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=t),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:l,availableLocaleData:r,localeDefaults:a,extra:u}}_computeCurrentViewData(e,t,i,s){let r=t.viewSpecs[e];if(!r)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:o,extra:a}=this.processRawViewOptions(r,t.pluginHooks,t.localeDefaults,i,s);tm(a);let l=this.buildDateProfileGenerator({dateProfileGeneratorClass:r.optionDefaults.dateProfileGeneratorClass,duration:r.duration,durationUnit:r.durationUnit,usesMinMaxTime:r.optionDefaults.usesMinMaxTime,dateEnv:t.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,showNonCurrentDates:o.showNonCurrentDates,dayCount:o.dayCount,dateAlignment:o.dateAlignment,dateIncrement:o.dateIncrement,hiddenDays:o.hiddenDays,weekends:o.weekends,nowInput:o.now,validRangeInput:o.validRange,visibleRangeInput:o.visibleRange,fixedWeekCount:o.fixedWeekCount}),c=this.buildViewApi(e,this.getCurrentData,t.dateEnv);return{viewSpec:r,options:o,dateProfileGenerator:l,viewApi:c}}processRawViewOptions(e,t,i,s,r){let o=$c([rr,e.optionDefaults,i,s,e.optionOverrides,r]),a=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Rg),Pg),Ng),NR),t.listenerRefiners),t.optionRefiners),l={},c=this.currentViewOptionsInput,u=this.currentViewOptionsRefined,d=!1,f={};for(let h in o)o[h]===c[h]||Jn[h]&&Jn[h](o[h],c[h])?l[h]=u[h]:(o[h]===this.currentCalendarOptionsInput[h]||Jn[h]&&Jn[h](o[h],this.currentCalendarOptionsInput[h])?h in this.currentCalendarOptionsRefined&&(l[h]=this.currentCalendarOptionsRefined[h]):a[h]?l[h]=a[h](o[h]):f[h]=o[h],d=!0);return d&&(this.currentViewOptionsInput=o,this.currentViewOptionsRefined=l),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:f}}}function qI(n,e,t,i,s,r,o,a){let l=Xx(e||o.defaultCode,o.map);return new UR({calendarSystem:"gregory",timeZone:n,namedTimeZoneImpl:r.namedTimeZonedImpl,locale:l,weekNumberCalculation:t,firstDay:i,weekText:s,cmdFormatter:r.cmdFormatter,defaultSeparator:a})}function GI(n,e){let t=e.themeClasses[n.themeSystem]||Vn;return new t(n)}function KI(n){let e=n.dateProfileGeneratorClass||Ex;return new e(n)}function YI(n,e,t){return new kI(n,e,t)}function JI(n){return qr(n,e=>e.ui)}function QI(n,e,t){let i={"":e};for(let s in n){let r=n[s];r.sourceId&&t[r.sourceId]&&(i[s]=t[r.sourceId])}return i}function ZI(n){let{options:e}=n;return{eventUiSingleBase:hl({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},n),selectionConfig:hl({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},n)}}function Qc(n,e){for(let t of e.pluginHooks.isLoadingFuncs)if(t(n))return!0;return!1}function XI(n){return MP(n.options.businessHours,n)}function tm(n,e){for(let t in n)console.warn(`Unknown option '${t}'`)}class eL extends ae{render(){let e=this.props.widgetGroups.map(t=>this.renderWidgetGroup(t));return w("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:t}=this,{theme:i}=this.context,s=[],r=!0;for(let o of e){let{buttonName:a,buttonClick:l,buttonText:c,buttonIcon:u,buttonHint:d}=o;if(a==="title")r=!1,s.push(w("h2",{className:"fc-toolbar-title",id:t.titleId},t.title));else{let f=a===t.activeButton,h=!t.isTodayEnabled&&a==="today"||!t.isPrevEnabled&&a==="prev"||!t.isNextEnabled&&a==="next",p=[`fc-${a}-button`,i.getClass("button")];f&&p.push(i.getClass("buttonActive")),s.push(w("button",{type:"button",title:typeof d=="function"?d(t.navUnit):d,disabled:h,"aria-pressed":f,className:p.join(" "),onClick:l},c||(u?w("span",{className:u,role:"img"}):"")))}}if(s.length>1){let o=r&&i.getClass("buttonGroup")||"";return w("div",{className:o},...s)}return s[0]}}class nm extends ae{render(){let{model:e,extraClassName:t}=this.props,i=!1,s,r,o=e.sectionWidgets,a=o.center;return o.left?(i=!0,s=o.left):s=o.start,o.right?(i=!0,r=o.right):r=o.end,w("div",{className:[t||"","fc-toolbar",i?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",s||[]),this.renderSection("center",a||[]),this.renderSection("end",r||[]))}renderSection(e,t){let{props:i}=this;return w(eL,{key:e,widgetGroups:t,title:i.title,navUnit:i.navUnit,activeButton:i.activeButton,isTodayEnabled:i.isTodayEnabled,isPrevEnabled:i.isPrevEnabled,isNextEnabled:i.isNextEnabled,titleId:i.titleId})}}class tL extends ae{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,tn(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:t}=this,{aspectRatio:i}=e,s=["fc-view-harness",i||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],r="",o="";return i?t.availableWidth!==null?r=t.availableWidth/i:o=`${1/i*100}%`:r=e.height||"",w("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:s.join(" "),style:{height:r,paddingBottom:o}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class nL extends jx{constructor(e){super(e),this.handleSegClick=(t,i)=>{let{component:s}=this,{context:r}=s,o=gd(i);if(o&&s.isValidSegDownEl(t.target)){let a=Kt(t.target,".fc-event-forced-url"),l=a?a.querySelector("a[href]").href:"";r.emitter.trigger("eventClick",{el:i,event:new dt(s.context,o.eventRange.def,o.eventRange.instance),jsEvent:t,view:r.viewApi}),l&&!t.defaultPrevented&&(window.location.href=l)}},this.destroy=px(e.el,"click",".fc-event",this.handleSegClick)}}class iL extends jx{constructor(e){super(e),this.handleEventElRemove=t=>{t===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(t,i)=>{gd(i)&&(this.currentSegEl=i,this.triggerEvent("eventMouseEnter",t,i))},this.handleSegLeave=(t,i)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",t,i))},this.removeHoverListeners=GO(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,t,i){let{component:s}=this,{context:r}=s,o=gd(i);(!t||s.isValidSegDownEl(t.target))&&r.emitter.trigger(e,{el:i,event:new dt(r,o.eventRange.def,o.eventRange.instance),jsEvent:t,view:r.viewApi})}}class sL extends Ni{constructor(){super(...arguments),this.buildViewContext=K(GR),this.buildViewPropTransformers=K(oL),this.buildToolbarProps=K(rL),this.headerRef=en(),this.footerRef=en(),this.interactionsStore={},this.state={viewLabelId:Ql()},this.registerInteractiveComponent=(e,t)=>{let i=ZP(e,t),o=[nL,iL].concat(this.props.pluginHooks.componentInteractions).map(a=>new a(i));this.interactionsStore[e.uid]=o,Ug[e.uid]=i},this.unregisterInteractiveComponent=e=>{let t=this.interactionsStore[e.uid];if(t){for(let i of t)i.destroy();delete this.interactionsStore[e.uid]}delete Ug[e.uid]},this.resizeRunner=new Pf(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:t}=this.props;t.handleWindowResize&&e.target===window&&this.resizeRunner.request(t.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:t,options:i}=e,s=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,Kr(e.options.now,e.dateEnv),e.viewTitle),r=!1,o="",a;e.isHeightAuto||e.forPrint?o="":i.height!=null?r=!0:i.contentHeight!=null?o=i.contentHeight:a=Math.max(i.aspectRatio,.5);let l=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),c=t.header&&t.header.hasTitle?this.state.viewLabelId:void 0;return w(Pi.Provider,{value:l},t.header&&w(nm,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:t.header,titleId:c},s)),w(tL,{liquid:r,height:o,aspectRatio:a,labeledById:c},this.renderView(e),this.buildAppendContent()),t.footer&&w(nm,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:t.footer,titleId:""},s)))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(i=>new i(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:t}=e.pluginHooks;for(let i in t)t[i](e[i],e)}componentDidUpdate(e){let{props:t}=this,{propSetHandlers:i}=t.pluginHooks;for(let s in i)t[s]!==e[s]&&i[s](t[s],t)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,t=e.pluginHooks.viewContainerAppends.map(i=>i(e));return w(fe,{},...t)}renderView(e){let{pluginHooks:t}=e,{viewSpec:i}=e,s={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},r=this.buildViewPropTransformers(t.viewPropsTransformers);for(let a of r)Object.assign(s,a.transform(s,e));let o=i.component;return w(o,Object.assign({},s))}}function rL(n,e,t,i,s,r){let o=t.build(s,void 0,!1),a=t.buildPrev(e,i,!1),l=t.buildNext(e,i,!1);return{title:r,activeButton:n.type,navUnit:n.singleUnit,isTodayEnabled:o.isValid&&!Cn(e.currentRange,s),isPrevEnabled:a.isValid,isNextEnabled:l.isValid}}function oL(n){return n.map(e=>new e)}class aL extends XP{constructor(e,t={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=i=>{switch(i.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=i=>{this.currentData=i,this.renderRunner.request(i.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:i}=this;dl(()=>{Er(w(QP,{options:i.calendarOptions,theme:i.theme,emitter:i.emitter},(s,r,o,a)=>(this.setClassNames(s),this.setHeight(r),w(Sx.Provider,{value:this.customContentRenderId},w(sL,Object.assign({isHeightAuto:o,forPrint:a},i))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Er(null,this.el),this.setClassNames([]),this.setHeight(""))},IO(e),this.el=e,this.renderRunner=new Pf(this.handleRenderRequest),new $I({optionOverrides:t,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){dl(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,t){this.currentDataManager.resetOptions(e,t)}setClassNames(e){if(!Pn(e,this.currentClassNames)){let{classList:t}=this.el;for(let i of this.currentClassNames)t.remove(i);for(let i of e)t.add(i);this.currentClassNames=e}}setHeight(e){hx(this.el,"height",e)}}class lL extends Ii{constructor(){super(...arguments),this.headerElRef=en()}renderSimpleLayout(e,t){let{props:i,context:s}=this,r=[],o=Kg(s.options);return e&&r.push({type:"header",key:"header",isSticky:o,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),r.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),w(Ig,{elClasses:["fc-daygrid"],viewSpec:s.viewSpec},w(Kx,{liquid:!i.isHeightAuto&&!i.forPrint,collapsibleWidth:i.forPrint,cols:[],sections:r}))}renderHScrollLayout(e,t,i,s){let r=this.context.pluginHooks.scrollGridImpl;if(!r)throw new Error("No ScrollGrid implementation");let{props:o,context:a}=this,l=!o.forPrint&&Kg(a.options),c=!o.forPrint&&TN(a.options),u=[];return e&&u.push({type:"header",key:"header",isSticky:l,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),u.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),c&&u.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:MN}]}),w(Ig,{elClasses:["fc-daygrid"],viewSpec:a.viewSpec},w(r,{liquid:!o.isHeightAuto&&!o.forPrint,forPrint:o.forPrint,collapsibleWidth:o.forPrint,colGroups:[{cols:[{span:i,minWidth:s}]}],sections:u}))}}function So(n,e){let t=[];for(let i=0;i<e;i+=1)t[i]=[];for(let i of n)t[i.row].push(i);return t}function wo(n,e){let t=[];for(let i=0;i<e;i+=1)t[i]=[];for(let i of n)t[i.firstCol].push(i);return t}function im(n,e){let t=[];if(n){for(let i=0;i<e;i+=1)t[i]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let i of n.segs)t[i.row].segs.push(i)}else for(let i=0;i<e;i+=1)t[i]=null;return t}const o_=we({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function a_(n){let{display:e}=n.eventRange.ui;return e==="list-item"||e==="auto"&&!n.eventRange.def.allDay&&n.firstCol===n.lastCol&&n.isStart&&n.isEnd}class l_ extends ae{render(){let{props:e}=this;return w(ON,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:o_,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class c_ extends ae{render(){let{props:e,context:t}=this,{options:i}=t,{seg:s}=e,r=i.eventTimeFormat||o_,o=Bx(s,r,t,!0,e.defaultDisplayEventEnd);return w(Gf,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:Fx(e.seg,t),defaultGenerator:cL,timeText:o,isResizing:!1,isDateSelecting:!1}))}}function cL(n){return w(fe,null,w("div",{className:"fc-daygrid-event-dot",style:{borderColor:n.borderColor||n.backgroundColor}}),n.timeText&&w("div",{className:"fc-event-time"},n.timeText),w("div",{className:"fc-event-title"},n.event.title||w(fe,null," ")))}class uL extends ae{constructor(){super(...arguments),this.compileSegs=K(dL)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:i}=this.compileSegs(e.singlePlacements);return w(jN,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:i,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let s=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return w(fe,null,t.map(r=>{let o=r.eventRange.instance.instanceId;return w("div",{className:"fc-daygrid-event-harness",key:o,style:{visibility:s[o]?"hidden":""}},a_(r)?w(c_,Object.assign({seg:r,isDragging:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},or(r,e.todayRange))):w(l_,Object.assign({seg:r,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},or(r,e.todayRange))))}))}})}}function dL(n){let e=[],t=[];for(let i of n)e.push(i.seg),i.isVisible||t.push(i.seg);return{allSegs:e,invisibleSegs:t}}const fL=we({week:"narrow"});class hL extends Ii{constructor(){super(...arguments),this.rootElRef=en(),this.state={dayNumberId:Ql()},this.handleRootEl=e=>{tn(this.rootElRef,e),tn(this.props.elRef,e)}}render(){let{context:e,props:t,state:i,rootElRef:s}=this,{options:r,dateEnv:o}=e,{date:a,dateProfile:l}=t;const c=t.showDayNumber&&gL(a,l.currentRange,o);return w(Yx,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":i.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:pL,date:a,dateProfile:l,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:c,extraRenderProps:t.extraRenderProps},(u,d)=>w("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&w(FN,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:md(e,a,"week"),date:a,defaultFormat:fL}),!d.isDisabled&&(t.showDayNumber||Jx(r)||t.forceDayTop)?w("div",{className:"fc-daygrid-day-top"},w(u,{elTag:"a",elClasses:["fc-daygrid-day-number",c&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},md(e,a)),{id:i.dayNumberId})})):t.showDayNumber?w("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},w("a",{className:"fc-daygrid-day-number"}," ")):void 0,w("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,w("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},w(uL,{allDayDate:a,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:s,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),w("div",{className:"fc-daygrid-day-bg"},t.bgContent)))}}function pL(n){return n.dayNumberText||w(fe,null," ")}function gL(n,e,t){const{start:i,end:s}=e,r=Nn(s,-1),o=t.getYear(i),a=t.getMonth(i),l=t.getYear(r),c=t.getMonth(r);return!(o===l&&a===c)&&(n.valueOf()===i.valueOf()||t.getDay(n)===1&&n.valueOf()<s.valueOf())}function u_(n){return n.eventRange.instance.instanceId+":"+n.firstCol}function d_(n){return u_(n)+":"+n.lastCol}function mL(n,e,t,i,s,r,o){let a=new vL(b=>{let y=n[b.index].eventRange.instance.instanceId+":"+b.span.start+":"+(b.span.end-1);return s[y]||1});a.allowReslicing=!0,a.strictOrder=i,e===!0||t===!0?(a.maxCoord=r,a.hiddenConsumes=!0):typeof e=="number"?a.maxStackCnt=e:typeof t=="number"&&(a.maxStackCnt=t,a.hiddenConsumes=!0);let l=[],c=[];for(let b=0;b<n.length;b+=1){let y=n[b],v=d_(y);s[v]!=null?l.push({index:b,span:{start:y.firstCol,end:y.lastCol+1}}):c.push(y)}let u=a.addSegs(l),d=a.toRects(),{singleColPlacements:f,multiColPlacements:h,leftoverMargins:p}=bL(d,n,o),g=[],m=[];for(let b of c){h[b.firstCol].push({seg:b,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let y=b.firstCol;y<=b.lastCol;y+=1)f[y].push({seg:ns(b,y,y+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let b=0;b<o.length;b+=1)g.push(0);for(let b of u){let y=n[b.index],v=b.span;h[v.start].push({seg:ns(y,v.start,v.end,o),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let x=v.start;x<v.end;x+=1)g[x]+=1,f[x].push({seg:ns(y,x,x+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let b=0;b<o.length;b+=1)m.push(p[b]);return{singleColPlacements:f,multiColPlacements:h,moreCnts:g,moreMarginTops:m}}function bL(n,e,t){let i=yL(n,t.length),s=[],r=[],o=[];for(let a=0;a<t.length;a+=1){let l=i[a],c=[],u=0,d=0;for(let h of l){let p=e[h.index];c.push({seg:ns(p,a,a+1,t),isVisible:!0,isAbsolute:!1,absoluteTop:h.levelCoord,marginTop:h.levelCoord-u}),u=h.levelCoord+h.thickness}let f=[];u=0,d=0;for(let h of l){let p=e[h.index],g=h.span.end-h.span.start>1,m=h.span.start===a;d+=h.levelCoord-u,u=h.levelCoord+h.thickness,g?(d+=h.thickness,m&&f.push({seg:ns(p,h.span.start,h.span.end,t),isVisible:!0,isAbsolute:!0,absoluteTop:h.levelCoord,marginTop:0})):m&&(f.push({seg:ns(p,h.span.start,h.span.end,t),isVisible:!0,isAbsolute:!1,absoluteTop:h.levelCoord,marginTop:d}),d=0)}s.push(c),r.push(f),o.push(d)}return{singleColPlacements:s,multiColPlacements:r,leftoverMargins:o}}function yL(n,e){let t=[];for(let i=0;i<e;i+=1)t.push([]);for(let i of n)for(let s=i.span.start;s<i.span.end;s+=1)t[s].push(i);return t}function ns(n,e,t,i){if(n.firstCol===e&&n.lastCol===t-1)return n;let s=n.eventRange,r=s.range,o=ms(r,{start:i[e].date,end:Be(i[t-1].date,1)});return Object.assign(Object.assign({},n),{firstCol:e,lastCol:t-1,eventRange:{def:s.def,ui:Object.assign(Object.assign({},s.ui),{durationEditable:!1}),instance:s.instance,range:o},isStart:n.isStart&&o.start.valueOf()===r.start.valueOf(),isEnd:n.isEnd&&o.end.valueOf()===r.end.valueOf()})}class vL extends lN{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const t=super.addSegs(e),{entriesByLevel:i}=this,s=r=>!this.forceHidden[ar(r)];for(let r=0;r<i.length;r+=1)i[r]=i[r].filter(s);return t}handleInvalidInsertion(e,t,i){const{entriesByLevel:s,forceHidden:r}=this,{touchingEntry:o,touchingLevel:a,touchingLateral:l}=e;if(this.hiddenConsumes&&o){const c=ar(o);if(!r[c])if(this.allowReslicing){const u=Object.assign(Object.assign({},o),{span:Ux(o.span,t.span)}),d=ar(u);r[d]=!0,s[a][l]=u,i.push(u),this.splitEntry(o,t,i)}else r[c]=!0,i.push(o)}super.handleInvalidInsertion(e,t,i)}}class f_ extends Ii{constructor(){super(...arguments),this.cellElRefs=new li,this.frameElRefs=new li,this.fgElRefs=new li,this.segHarnessRefs=new li,this.rootElRef=en(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:i}=this,{options:s}=i,r=e.cells.length,o=wo(e.businessHourSegs,r),a=wo(e.bgEventSegs,r),l=wo(this.getHighlightSegs(),r),c=wo(this.getMirrorSegs(),r),{singleColPlacements:u,multiColPlacements:d,moreCnts:f,moreMarginTops:h}=mL(LP(e.fgEventSegs,s.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,s.eventOrderStrict,t.segHeights,t.maxContentHeight,e.cells),p=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return w("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((g,m)=>{let b=this.renderFgSegs(m,e.forPrint?u[m]:d[m],e.todayRange,p),y=this.renderFgSegs(m,xL(c[m],d),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return w(hL,{key:g.key,elRef:this.cellElRefs.createRef(g.key),innerElRef:this.frameElRefs.createRef(g.key),dateProfile:e.dateProfile,date:g.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&m===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:g.extraRenderProps,extraDataAttrs:g.extraDataAttrs,extraClassNames:g.extraClassNames,extraDateSpan:g.extraDateSpan,moreCnt:f[m],moreMarginTop:h[m],singlePlacements:u[m],fgContentElRef:this.fgElRefs.createRef(g.key),fgContent:w(fe,null,w(fe,null,b),w(fe,null,y)),bgContent:w(fe,null,this.renderFillSegs(l[m],"highlight"),this.renderFillSegs(o[m],"non-business"),this.renderFillSegs(a[m],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){let i=this.props;this.updateSizing(!Ht(e,i))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,i,s,r,o,a){let{context:l}=this,{eventSelection:c}=this.props,{framePositions:u}=this.state,d=this.props.cells.length===1,f=r||o||a,h=[];if(u)for(let p of t){let{seg:g}=p,{instanceId:m}=g.eventRange.instance,b=p.isVisible&&!s[m],y=p.isAbsolute,v="",x="";y&&(l.isRtl?(x=0,v=u.lefts[g.lastCol]-u.lefts[g.firstCol]):(v=0,x=u.rights[g.firstCol]-u.rights[g.lastCol])),h.push(w("div",{className:"fc-daygrid-event-harness"+(y?" fc-daygrid-event-harness-abs":""),key:u_(g),ref:f?null:this.segHarnessRefs.createRef(d_(g)),style:{visibility:b?"":"hidden",marginTop:y?"":p.marginTop,top:y?p.absoluteTop:"",left:v,right:x}},a_(g)?w(c_,Object.assign({seg:g,isDragging:r,isSelected:m===c,defaultDisplayEventEnd:d},or(g,i))):w(l_,Object.assign({seg:g,isDragging:r,isResizing:o,isDateSelecting:a,isSelected:m===c,defaultDisplayEventEnd:d},or(g,i)))))}return h}renderFillSegs(e,t){let{isRtl:i}=this.context,{todayRange:s}=this.props,{framePositions:r}=this.state,o=[];if(r)for(let a of e){let l=i?{right:0,left:r.lefts[a.lastCol]-r.lefts[a.firstCol]}:{left:0,right:r.rights[a.firstCol]-r.rights[a.lastCol]};o.push(w("div",{key:jP(a.eventRange),className:"fc-daygrid-bg-harness",style:l},t==="bg-event"?w(IN,Object.assign({seg:a},or(a,s))):BN(t)))}return w(fe,{},...o)}updateSizing(e){let{props:t,state:i,frameElRefs:s}=this;if(!t.forPrint&&t.clientWidth!==null){if(e){let l=t.cells.map(c=>s.currentMap[c.key]);if(l.length){let c=this.rootElRef.current,u=new pl(c,l,!0,!1);(!i.framePositions||!i.framePositions.similarTo(u))&&this.setState({framePositions:new pl(c,l,!0,!1)})}}const r=this.state.segHeights,o=this.querySegHeights(),a=t.dayMaxEvents===!0||t.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},r),o),maxContentHeight:a?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let i in e){let s=Math.round(e[i].getBoundingClientRect().height);t[i]=Math.max(t[i]||0,s)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],i=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-i.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(t=>e[t.key])}}f_.addStateEquality({segHeights:Ht});function xL(n,e){if(!n.length)return[];let t=_L(e);return n.map(i=>({seg:i,isVisible:!0,isAbsolute:!0,absoluteTop:t[i.eventRange.instance.instanceId],marginTop:0}))}function _L(n){let e={};for(let t of n)for(let i of t)e[i.seg.eventRange.instance.instanceId]=i.absoluteTop;return e}class SL extends Ii{constructor(){super(...arguments),this.splitBusinessHourSegs=K(So),this.splitBgEventSegs=K(So),this.splitFgEventSegs=K(So),this.splitDateSelectionSegs=K(So),this.splitEventDrag=K(im),this.splitEventResize=K(im),this.rowRefs=new li}render(){let{props:e,context:t}=this,i=e.cells.length,s=this.splitBusinessHourSegs(e.businessHourSegs,i),r=this.splitBgEventSegs(e.bgEventSegs,i),o=this.splitFgEventSegs(e.fgEventSegs,i),a=this.splitDateSelectionSegs(e.dateSelectionSegs,i),l=this.splitEventDrag(e.eventDrag,i),c=this.splitEventResize(e.eventResize,i),u=i>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return w(qf,{unit:"day"},(d,f)=>w(fe,null,e.cells.map((h,p)=>w(f_,{ref:this.rowRefs.createRef(p),key:h.length?h[0].date.toISOString():p,showDayNumbers:i>1,showWeekNumbers:e.showWeekNumbers,todayRange:f,dateProfile:e.dateProfile,cells:h,renderIntro:e.renderRowIntro,businessHourSegs:s[p],eventSelection:e.eventSelection,bgEventSegs:r[p].filter(wL),fgEventSegs:o[p],dateSelectionSegs:a[p],eventDrag:l[p],eventResize:c[p],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:u,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],t=e?e.closest(".fc-daygrid-body"):null;t&&(this.rootEl=t,this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new pl(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new pl(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:i,rowPositions:s}=this,r=i.leftToIndex(e),o=s.topToIndex(t);if(o!=null&&r!=null){let a=this.props.cells[o][r];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(o,r),allDay:!0},a.extraDateSpan),dayEl:this.getCellEl(o,r),rect:{left:i.lefts[r],right:i.rights[r],top:s.tops[o],bottom:s.bottoms[o]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let i=this.props.cells[e][t].date,s=Be(i,1);return{start:i,end:s}}}function wL(n){return n.eventRange.def.allDay}class AL extends Ii{constructor(){super(...arguments),this.elRef=en(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:i,expandRows:s}=e,r=i===!0||t===!0;r&&!s&&(r=!1,t=null,i=null);let o=["fc-daygrid-body",r?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",s?"":"fc-daygrid-body-natural"];return w("div",{ref:this.elRef,className:o.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},w("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:s?e.clientHeight:""}},e.colGroupNode,w("tbody",{role:"presentation"},w(SL,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:i,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=kL(this.elRef.current,this.props.dateProfile);if(e){const t=e.closest(".fc-daygrid-body"),i=t.closest(".fc-scroller"),s=e.getBoundingClientRect().top-t.getBoundingClientRect().top;i.scrollTop=s?s+1:0}this.needsScrollReset=!1}}}function kL(n,e){let t;return e.currentRangeUnit.match(/year|month/)&&(t=n.querySelector(`[data-date="${yR(e.currentDate)}-01"]`)),t||(t=n.querySelector(`[data-date="${Nf(e.currentDate)}"]`)),t}class EL extends bN{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}}class CL extends Ii{constructor(){super(...arguments),this.slicer=new EL,this.tableRef=en()}render(){let{props:e,context:t}=this;return w(AL,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class ML extends lL{constructor(){super(...arguments),this.buildDayTableModel=K(TL),this.headerRef=en(),this.tableRef=en()}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:i}=this,s=this.buildDayTableModel(i.dateProfile,t),r=e.dayHeaders&&w(hN,{ref:this.headerRef,dateProfile:i.dateProfile,dates:s.headerDates,datesRepDistinctDays:s.rowCnt===1}),o=a=>w(CL,{ref:this.tableRef,dateProfile:i.dateProfile,dayTableModel:s,businessHours:i.businessHours,dateSelection:i.dateSelection,eventStore:i.eventStore,eventUiBases:i.eventUiBases,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:a.tableColGroupNode,tableMinWidth:a.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!i.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:a.clientWidth,clientHeight:a.clientHeight,forPrint:i.forPrint});return e.dayMinWidth?this.renderHScrollLayout(r,o,s.colCnt,e.dayMinWidth):this.renderSimpleLayout(r,o)}}function TL(n,e){let t=new gN(n.renderRange,e);return new mN(t,/year|month|week/.test(n.currentRangeUnit))}class DL extends Ex{buildRenderRange(e,t,i){let s=super.buildRenderRange(e,t,i),{props:r}=this;return OL({currentRange:s,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:r.fixedWeekCount,dateEnv:r.dateEnv})}}function OL(n){let{dateEnv:e,currentRange:t}=n,{start:i,end:s}=t,r;if(n.snapToWeek&&(i=e.startOfWeek(i),r=e.startOfWeek(s),r.valueOf()!==s.valueOf()&&(s=Eg(r,1))),n.fixedWeekCount){let o=e.startOfWeek(e.startOfMonth(Be(t.end,-1))),a=Math.ceil(oR(o,s));s=Eg(s,6-a)}return{start:i,end:s}}var RL=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';ux(RL);var PL=Li({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:ML,dateProfileGeneratorClass:DL},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});const NL=n=>({calendar:null,approved_events:[],pending_events:[],init(){this.calendar=new aL(this.$refs.calendar,{plugins:[PL],initialView:"dayGridMonth",events:n,height:"auto",eventClick:function(e){window.location.href=e.event.url},eventSourceSuccess:(e,t)=>(this.approved_events=[],this.pending_events=[],e.map(i=>{i.is_approved?this.approved_events.push(i):this.pending_events.push(i)}),e.eventArray)}),this.calendar.render()}}),IL=(n,e,t)=>({eventid:n,participants:[],filteredParticipants:[],availableUsers:[],paginatedUsers:[],currentPage:1,pageSize:10,totalPages:0,searchAvailablesValue:"",searchParticipantsValue:"",getAvailableUsers:async function(){console.log("getAvailableUsers");const i=`${e=="admin"?"":"/"+e}/events/${this.eventid}/available-users`,s=await fetch(i);if(s.ok){const r=await s.json();this.participants.length>0?this.availableUsers=r.filter(o=>!this.participants.some(a=>a.id===o.id)):this.availableUsers=r}},getParticipants:async function(){console.log("getParticipants");const i=`${e=="admin"?"":"/"+e}/events/${this.eventid}/participants`,s=await fetch(i);if(s.ok){const r=await s.json();Array.isArray(r)&&(this.participants=r,this.filteredParticipants=r,this.availableUsers.length>0&&(this.availableUsers=this.availableUsers.filter(o=>!this.participants.some(a=>a.id===o.id))))}},searchAvailableUsers:function(i){let s=i.target.value;if(s.length===0){this.paginateAvailableUsers();return}this.paginatedUsers=this.availableUsers.filter(r=>r.name.toLowerCase().includes(s.toLowerCase())||r.surname.toLowerCase().includes(s.toLowerCase()))},searchParticipants:function(i){console.log("searchParticipants");let s=i.target.value;return this.filteredParticipants=this.participants.filter(r=>r.name.toLowerCase().includes(s.toLowerCase())||r.surname.toLowerCase().includes(s.toLowerCase()))},addParticipant:async function(i){console.log("addParticipant");const s=this.availableUsers.find(l=>l.id===i);s&&this.participants.push(s);let r=JSON.stringify(this.participants.map(l=>l.id));const o=`${e=="admin"?"":"/"+e}/add-participants`,a=new FormData;a.append("event_id",this.eventid),a.append("participants",r),await fetch(o,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:a}),this.availableUsers=this.availableUsers.filter(l=>l.id!==i),this.searchAvailablesValue="",this.paginateAvailableUsers(),this.searchParticipantsValue="",this.searchParticipants({target:{value:""}})},hasRankingResult:function(i){let s=t.find(r=>r.user_id===i);return s?s.style_points>0||s.war_points>0:!1},removeParticipant:async function(i){console.log("removeParticipant");const s=this.participants.find(l=>l.id===i);s&&(this.participants=this.participants.filter(l=>l.id!==i));let r=JSON.stringify(this.participants.map(l=>l.id));const o=`${e=="admin"?"":"/"+e}/add-participants`,a=new FormData;a.append("event_id",this.eventid),a.append("participants",r),await fetch(o,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:a}),this.availableUsers.push(s),this.searchAvailablesValue="",this.paginateAvailableUsers(),this.searchParticipantsValue="",this.searchParticipants({target:{value:""}})},saveParticipants:async function(){console.log("saveParticipants")},paginateAvailableUsers:function(){const i=(this.currentPage-1)*this.pageSize,s=i+this.pageSize;this.paginatedUsers=this.availableUsers.slice(i,s),this.totalPages=Math.ceil(this.availableUsers.length/this.pageSize)},goToPage:function(i){i>=1&&i<=this.totalPages&&(this.currentPage=i,this.paginateAvailableUsers())},init:async function(){await this.getAvailableUsers(),await this.getParticipants(),this.paginateAvailableUsers()}}),LL=n=>({map:null,search:"",results:n,allResults:n,paginatedResults:[],currentPage:1,totalPages:0,nationFilter:"",markers:[],searchChanged:async function(){if(this.search.length<3)return;const e=await fetch(`/schools-search?location=${this.search}`);this.results=await e.json(),this.results.forEach(t=>{let i=JSON.parse(t.coordinates),s=new google.maps.Marker({position:i,map:this.map});this.markers.push({id:t.id,marker:s})}),this.results[0]&&this.results[0].id&&this.zoomToMarker(this.results[0].id)},zoomToMarker:function(e){let t=this.markers.find(i=>i.id===e);t&&(this.map.panTo(t.marker.getPosition()),this.map.setZoom(15))},paginateResults:function(){this.totalPages=Math.ceil(this.results.length/5),this.paginatedResults=this.results.slice((this.currentPage-1)*5,this.currentPage*5)},nextPage:function(){this.currentPage<this.totalPages&&(this.currentPage++,this.paginateResults())},prevPage:function(){this.currentPage>1&&(this.currentPage--,this.paginateResults())},fiterByNation:async function(e){this.results=n.filter(s=>s.nation_id==e),this.paginateResults();const t=this.results[0].coordinates;let i=new google.maps.Marker({position:t,map:this.map});this.map.panTo(i.getPosition()),this.map.setZoom(6),this.map.mapTypeId="roadmap"},async init(){const{Map:e}=await google.maps.importLibrary("maps");this.map=new e(document.getElementById("google-map"),{center:{lat:45.46404,lng:9.18938},zoom:2,mapTypeId:"satellite",mapTypeControlOptions:{mapTypeIds:["roadmap","satellite","hybrid","terrain"]}}),this.paginateResults(),this.results.forEach(t=>{let i=new google.maps.Marker({position:t.coordinates,map:this.map});console.log(t.nation_id),this.markers.push({id:t.id,marker:i})})}});/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Jr(n){return n+.5|0}const xn=(n,e,t)=>Math.max(Math.min(n,t),e);function Ws(n){return xn(Jr(n*2.55),0,255)}function Mn(n){return xn(Jr(n*255),0,255)}function Gt(n){return xn(Jr(n/2.55)/100,0,1)}function sm(n){return xn(Jr(n*100),0,100)}const at={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},yd=[..."0123456789ABCDEF"],BL=n=>yd[n&15],FL=n=>yd[(n&240)>>4]+yd[n&15],Ao=n=>(n&240)>>4===(n&15),zL=n=>Ao(n.r)&&Ao(n.g)&&Ao(n.b)&&Ao(n.a);function HL(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&at[n[1]]*17,g:255&at[n[2]]*17,b:255&at[n[3]]*17,a:e===5?at[n[4]]*17:255}:(e===7||e===9)&&(t={r:at[n[1]]<<4|at[n[2]],g:at[n[3]]<<4|at[n[4]],b:at[n[5]]<<4|at[n[6]],a:e===9?at[n[7]]<<4|at[n[8]]:255})),t}const VL=(n,e)=>n<255?e(n):"";function jL(n){var e=zL(n)?BL:FL;return n?"#"+e(n.r)+e(n.g)+e(n.b)+VL(n.a,e):void 0}const WL=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function h_(n,e,t){const i=e*Math.min(t,1-t),s=(r,o=(r+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function UL(n,e,t){const i=(s,r=(s+n/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function $L(n,e,t){const i=h_(n,1,.5);let s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)i[s]*=1-e-t,i[s]+=e;return i}function qL(n,e,t,i,s){return n===s?(e-t)/i+(e<t?6:0):e===s?(t-n)/i+2:(n-e)/i+4}function Yf(n){const t=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(t,i,s),o=Math.min(t,i,s),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=qL(t,i,s,u,r),l=l*60+.5),[l|0,c||0,a]}function Jf(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Mn)}function Qf(n,e,t){return Jf(h_,n,e,t)}function GL(n,e,t){return Jf($L,n,e,t)}function KL(n,e,t){return Jf(UL,n,e,t)}function p_(n){return(n%360+360)%360}function YL(n){const e=WL.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?Ws(+e[5]):Mn(+e[5]));const s=p_(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=GL(s,r,o):e[1]==="hsv"?i=KL(s,r,o):i=Qf(s,r,o),{r:i[0],g:i[1],b:i[2],a:t}}function JL(n,e){var t=Yf(n);t[0]=p_(t[0]+e),t=Qf(t),n.r=t[0],n.g=t[1],n.b=t[2]}function QL(n){if(!n)return;const e=Yf(n),t=e[0],i=sm(e[1]),s=sm(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${s}%, ${Gt(n.a)})`:`hsl(${t}, ${i}%, ${s}%)`}const rm={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},om={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function ZL(){const n={},e=Object.keys(om),t=Object.keys(rm);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<t.length;s++)r=t[s],a=a.replace(r,rm[r]);r=parseInt(om[o],16),n[a]=[r>>16&255,r>>8&255,r&255]}return n}let ko;function XL(n){ko||(ko=ZL(),ko.transparent=[0,0,0,0]);const e=ko[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const eB=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function tB(n){const e=eB.exec(n);let t=255,i,s,r;if(e){if(e[7]!==i){const o=+e[7];t=e[8]?Ws(o):xn(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?Ws(i):xn(i,0,255)),s=255&(e[4]?Ws(s):xn(s,0,255)),r=255&(e[6]?Ws(r):xn(r,0,255)),{r:i,g:s,b:r,a:t}}}function nB(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Gt(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Zc=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Wi=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function iB(n,e,t){const i=Wi(Gt(n.r)),s=Wi(Gt(n.g)),r=Wi(Gt(n.b));return{r:Mn(Zc(i+t*(Wi(Gt(e.r))-i))),g:Mn(Zc(s+t*(Wi(Gt(e.g))-s))),b:Mn(Zc(r+t*(Wi(Gt(e.b))-r))),a:n.a+t*(e.a-n.a)}}function Eo(n,e,t){if(n){let i=Yf(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=Qf(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function g_(n,e){return n&&Object.assign(e||{},n)}function am(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Mn(n[3]))):(e=g_(n,{r:0,g:0,b:0,a:1}),e.a=Mn(e.a)),e}function sB(n){return n.charAt(0)==="r"?tB(n):YL(n)}class Tr{constructor(e){if(e instanceof Tr)return e;const t=typeof e;let i;t==="object"?i=am(e):t==="string"&&(i=HL(e)||XL(e)||sB(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=g_(this._rgb);return e&&(e.a=Gt(e.a)),e}set rgb(e){this._rgb=am(e)}rgbString(){return this._valid?nB(this._rgb):void 0}hexString(){return this._valid?jL(this._rgb):void 0}hslString(){return this._valid?QL(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,s=e.rgb;let r;const o=t===r?.5:t,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=iB(this._rgb,e._rgb,t)),this}clone(){return new Tr(this.rgb)}alpha(e){return this._rgb.a=Mn(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Jr(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Eo(this._rgb,2,e),this}darken(e){return Eo(this._rgb,2,-e),this}saturate(e){return Eo(this._rgb,1,e),this}desaturate(e){return Eo(this._rgb,1,-e),this}rotate(e){return JL(this._rgb,e),this}}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function jt(){}const rB=(()=>{let n=0;return()=>n++})();function q(n){return n===null||typeof n>"u"}function se(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function $(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ce(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function tt(n,e){return ce(n)?n:e}function H(n,e){return typeof n>"u"?e:n}const oB=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,m_=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function ee(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Q(n,e,t,i){let s,r,o;if(se(n))for(r=n.length,s=0;s<r;s++)e.call(t,n[s],s);else if($(n))for(o=Object.keys(n),r=o.length,s=0;s<r;s++)e.call(t,n[o[s]],o[s])}function gl(n,e){let t,i,s,r;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(s=n[t],r=e[t],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function ml(n){if(se(n))return n.map(ml);if($(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let s=0;for(;s<i;++s)e[t[s]]=ml(n[t[s]]);return e}return n}function b_(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function aB(n,e,t,i){if(!b_(n))return;const s=e[n],r=t[n];$(s)&&$(r)?Dr(s,r,i):e[n]=ml(r)}function Dr(n,e,t){const i=se(e)?e:[e],s=i.length;if(!$(n))return n;t=t||{};const r=t.merger||aB;let o;for(let a=0;a<s;++a){if(o=i[a],!$(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],n,o,t)}return n}function lr(n,e){return Dr(n,e,{merger:lB})}function lB(n,e,t){if(!b_(n))return;const i=e[n],s=t[n];$(i)&&$(s)?lr(i,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=ml(s))}const lm={"":n=>n,x:n=>n.x,y:n=>n.y};function cB(n){const e=n.split("."),t=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function uB(n){const e=cB(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function In(n,e){return(lm[e]||(lm[e]=uB(e)))(n)}function Zf(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Or=n=>typeof n<"u",Ln=n=>typeof n=="function",cm=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function dB(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const ie=Math.PI,te=2*ie,fB=te+ie,bl=Number.POSITIVE_INFINITY,hB=ie/180,he=ie/2,$n=ie/4,um=ie*2/3,_n=Math.log10,Bt=Math.sign;function cr(n,e,t){return Math.abs(n-e)<t}function dm(n){const e=Math.round(n);n=cr(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(_n(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function pB(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((s,r)=>s-r).pop(),e}function bs(n){return!isNaN(parseFloat(n))&&isFinite(n)}function gB(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function y_(n,e,t){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function mt(n){return n*(ie/180)}function Xf(n){return n*(180/ie)}function fm(n){if(!ce(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function v_(n,e){const t=e.x-n.x,i=e.y-n.y,s=Math.sqrt(t*t+i*i);let r=Math.atan2(i,t);return r<-.5*ie&&(r+=te),{angle:r,distance:s}}function vd(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function mB(n,e){return(n-e+fB)%te-ie}function nt(n){return(n%te+te)%te}function Rr(n,e,t,i){const s=nt(n),r=nt(e),o=nt(t),a=nt(r-s),l=nt(o-s),c=nt(s-r),u=nt(s-o);return s===r||s===o||i&&r===o||a>l&&c<u}function Ae(n,e,t){return Math.max(e,Math.min(t,n))}function bB(n){return Ae(n,-32768,32767)}function Yt(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function eh(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,t(r)?s=r:i=r;return{lo:s,hi:i}}const Jt=(n,e,t,i)=>eh(n,t,i?s=>{const r=n[s][e];return r<t||r===t&&n[s+1][e]===t}:s=>n[s][e]<t),yB=(n,e,t)=>eh(n,t,i=>n[i][e]>=t);function vB(n,e,t){let i=0,s=n.length;for(;i<s&&n[i]<e;)i++;for(;s>i&&n[s-1]>t;)s--;return i>0||s<n.length?n.slice(i,s):n}const x_=["push","pop","shift","splice","unshift"];function xB(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),x_.forEach(t=>{const i="_onData"+Zf(t),s=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function hm(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(x_.forEach(r=>{delete n[r]}),delete n._chartjs)}function __(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const S_=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function w_(n,e){let t=[],i=!1;return function(...s){t=s,i||(i=!0,S_.call(window,()=>{i=!1,n.apply(e,t)}))}}function _B(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const th=n=>n==="start"?"left":n==="end"?"right":"center",Ne=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,SB=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function A_(n,e,t){const i=e.length;let s=0,r=i;if(n._sorted){const{iScale:o,_parsed:a}=n,l=o.axis,{min:c,max:u,minDefined:d,maxDefined:f}=o.getUserBounds();d&&(s=Ae(Math.min(Jt(a,l,c).lo,t?i:Jt(e,l,o.getPixelForValue(c)).lo),0,i-1)),f?r=Ae(Math.max(Jt(a,o.axis,u,!0).hi+1,t?0:Jt(e,l,o.getPixelForValue(u),!0).hi+1),s,i)-s:r=i-s}return{start:s,count:r}}function k_(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,s={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,s),r}const Co=n=>n===0||n===1,pm=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*te/t)),gm=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*te/t)+1,ur={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*he)+1,easeOutSine:n=>Math.sin(n*he),easeInOutSine:n=>-.5*(Math.cos(ie*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Co(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Co(n)?n:pm(n,.075,.3),easeOutElastic:n=>Co(n)?n:gm(n,.075,.3),easeInOutElastic(n){return Co(n)?n:n<.5?.5*pm(n*2,.1125,.45):.5+.5*gm(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-ur.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?ur.easeInBounce(n*2)*.5:ur.easeOutBounce(n*2-1)*.5+.5};function nh(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function mm(n){return nh(n)?n:new Tr(n)}function Xc(n){return nh(n)?n:new Tr(n).saturate(.5).darken(.1).hexString()}const wB=["x","y","borderWidth","radius","tension"],AB=["color","borderColor","backgroundColor"];function kB(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:AB},numbers:{type:"number",properties:wB}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function EB(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const bm=new Map;function CB(n,e){e=e||{};const t=n+JSON.stringify(e);let i=bm.get(t);return i||(i=new Intl.NumberFormat(n,e),bm.set(t,i)),i}function Qr(n,e,t){return CB(e,t).format(n)}const E_={values(n){return se(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let s,r=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=MB(n,t)}const o=_n(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Qr(n,i,l)},logarithmic(n,e,t){if(n===0)return"0";const i=t[e].significand||n/Math.pow(10,Math.floor(_n(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?E_.numeric.call(this,n,e,t):""}};function MB(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var Zl={formatters:E_};function TB(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Zl.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ti=Object.create(null),xd=Object.create(null);function dr(n,e){if(!e)return n;const t=e.split(".");for(let i=0,s=t.length;i<s;++i){const r=t[i];n=n[r]||(n[r]=Object.create(null))}return n}function eu(n,e,t){return typeof e=="string"?Dr(dr(n,e),t):Dr(dr(n,""),e)}class DB{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>Xc(s.backgroundColor),this.hoverBorderColor=(i,s)=>Xc(s.borderColor),this.hoverColor=(i,s)=>Xc(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return eu(this,e,t)}get(e){return dr(this,e)}describe(e,t){return eu(xd,e,t)}override(e,t){return eu(Ti,e,t)}route(e,t,i,s){const r=dr(this,e),o=dr(this,i),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],c=o[s];return $(l)?Object.assign({},c,l):H(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var ue=new DB({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[kB,EB,TB]);function OB(n){return!n||q(n.size)||q(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function yl(n,e,t,i,s){let r=e[s];return r||(r=e[s]=n.measureText(s).width,t.push(s)),r>i&&(i=r),i}function RB(n,e,t,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0;const a=t.length;let l,c,u,d,f;for(l=0;l<a;l++)if(d=t[l],d!=null&&!se(d))o=yl(n,s,r,o,d);else if(se(d))for(c=0,u=d.length;c<u;c++)f=d[c],f!=null&&!se(f)&&(o=yl(n,s,r,o,f));n.restore();const h=r.length/2;if(h>t.length){for(l=0;l<h;l++)delete s[r[l]];r.splice(0,h)}return o}function qn(n,e,t){const i=n.currentDevicePixelRatio,s=t!==0?Math.max(t/2,.5):0;return Math.round((e-s)*i)/i+s}function ym(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function _d(n,e,t,i){C_(n,e,t,i,null)}function C_(n,e,t,i,s){let r,o,a,l,c,u,d,f;const h=e.pointStyle,p=e.rotation,g=e.radius;let m=(p||0)*hB;if(h&&typeof h=="object"&&(r=h.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(m),n.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),n.restore();return}if(!(isNaN(g)||g<=0)){switch(n.beginPath(),h){default:s?n.ellipse(t,i,s/2,g,0,0,te):n.arc(t,i,g,0,te),n.closePath();break;case"triangle":u=s?s/2:g,n.moveTo(t+Math.sin(m)*u,i-Math.cos(m)*g),m+=um,n.lineTo(t+Math.sin(m)*u,i-Math.cos(m)*g),m+=um,n.lineTo(t+Math.sin(m)*u,i-Math.cos(m)*g),n.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(m+$n)*l,d=Math.cos(m+$n)*(s?s/2-c:l),a=Math.sin(m+$n)*l,f=Math.sin(m+$n)*(s?s/2-c:l),n.arc(t-d,i-a,c,m-ie,m-he),n.arc(t+f,i-o,c,m-he,m),n.arc(t+d,i+a,c,m,m+he),n.arc(t-f,i+o,c,m+he,m+ie),n.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=s?s/2:l,n.rect(t-u,i-l,2*u,2*l);break}m+=$n;case"rectRot":d=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,f=Math.sin(m)*(s?s/2:g),n.moveTo(t-d,i-a),n.lineTo(t+f,i-o),n.lineTo(t+d,i+a),n.lineTo(t-f,i+o),n.closePath();break;case"crossRot":m+=$n;case"cross":d=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,f=Math.sin(m)*(s?s/2:g),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+f,i-o),n.lineTo(t-f,i+o);break;case"star":d=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,f=Math.sin(m)*(s?s/2:g),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+f,i-o),n.lineTo(t-f,i+o),m+=$n,d=Math.cos(m)*(s?s/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,f=Math.sin(m)*(s?s/2:g),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+f,i-o),n.lineTo(t-f,i+o);break;case"line":o=s?s/2:Math.cos(m)*g,a=Math.sin(m)*g,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(m)*(s?s/2:g),i+Math.sin(m)*g);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Qt(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Xl(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function ec(n){n.restore()}function PB(n,e,t,i,s){if(!e)return n.lineTo(t.x,t.y);if(s==="middle"){const r=(e.x+t.x)/2;n.lineTo(r,e.y),n.lineTo(r,t.y)}else s==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function NB(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function IB(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),q(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function LB(n,e,t,i,s){if(s.strikethrough||s.underline){const r=n.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=t-r.actualBoundingBoxAscent,c=t+r.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function BB(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Di(n,e,t,i,s,r={}){const o=se(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(n.save(),n.font=s.string,IB(n,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&BB(n,r.backdrop),a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),q(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(c,t,i,r.maxWidth)),n.fillText(c,t,i,r.maxWidth),LB(n,t,i,c,r),i+=Number(s.lineHeight);n.restore()}function Pr(n,e){const{x:t,y:i,w:s,h:r,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*ie,ie,!0),n.lineTo(t,i+r-o.bottomLeft),n.arc(t+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,ie,he,!0),n.lineTo(t+s-o.bottomRight,i+r),n.arc(t+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,he,0,!0),n.lineTo(t+s,i+o.topRight),n.arc(t+s-o.topRight,i+o.topRight,o.topRight,0,-he,!0),n.lineTo(t+o.topLeft,i)}const FB=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,zB=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function HB(n,e){const t=(""+n).match(FB);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const VB=n=>+n||0;function ih(n,e){const t={},i=$(e),s=i?Object.keys(e):e,r=$(n)?i?o=>H(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of s)t[o]=VB(r(o));return t}function M_(n){return ih(n,{top:"y",right:"x",bottom:"y",left:"x"})}function _i(n){return ih(n,["topLeft","topRight","bottomLeft","bottomRight"])}function ze(n){const e=M_(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function xe(n,e){n=n||{},e=e||ue.font;let t=H(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=H(n.style,e.style);i&&!(""+i).match(zB)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:H(n.family,e.family),lineHeight:HB(H(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:H(n.weight,e.weight),string:""};return s.string=OB(s),s}function Us(n,e,t,i){let s,r,o;for(s=0,r=n.length;s<r;++s)if(o=n[s],o!==void 0&&o!==void 0)return o}function jB(n,e,t){const{min:i,max:s}=n,r=m_(e,(s-i)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function jn(n,e){return Object.assign(Object.create(n),e)}function sh(n,e=[""],t,i,s=()=>n[0]){const r=t||n;typeof i>"u"&&(i=R_("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>sh([a,...n],e,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return D_(a,l,()=>JB(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return xm(a).includes(l)},ownKeys(a){return xm(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function ys(n,e,t,i){const s={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:T_(n,i),setContext:r=>ys(n,r,t,i),override:r=>ys(n.override(r),e,t,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,a){return D_(r,o,()=>UB(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,a){return n[o]=a,delete r[o],!0}})}function T_(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:t,indexable:i,isScriptable:Ln(t)?t:()=>t,isIndexable:Ln(i)?i:()=>i}}const WB=(n,e)=>n?n+Zf(e):e,rh=(n,e)=>$(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function D_(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function UB(n,e,t){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=n;let a=i[e];return Ln(a)&&o.isScriptable(e)&&(a=$B(e,a,n,t)),se(a)&&a.length&&(a=qB(e,a,n,o.isIndexable)),rh(e,a)&&(a=ys(a,s,r&&r[e],o)),a}function $B(n,e,t,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(r,o||i);return a.delete(n),rh(n,l)&&(l=oh(s._scopes,s,n,l)),l}function qB(n,e,t,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=t;if(typeof r.index<"u"&&i(n))return e[r.index%e.length];if($(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=oh(c,s,n,u);e.push(ys(d,r,o&&o[n],a))}}return e}function O_(n,e,t){return Ln(n)?n(e,t):n}const GB=(n,e)=>n===!0?e:typeof n=="string"?In(e,n):void 0;function KB(n,e,t,i,s){for(const r of e){const o=GB(t,r);if(o){n.add(o);const a=O_(o._fallback,t,s);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function oh(n,e,t,i){const s=e._rootScopes,r=O_(e._fallback,t,i),o=[...n,...s],a=new Set;a.add(i);let l=vm(a,o,t,r||t,i);return l===null||typeof r<"u"&&r!==t&&(l=vm(a,o,r,l,i),l===null)?!1:sh(Array.from(a),[""],s,r,()=>YB(e,t,i))}function vm(n,e,t,i,s){for(;t;)t=KB(n,e,t,i,s);return t}function YB(n,e,t){const i=n._getTarget();e in i||(i[e]={});const s=i[e];return se(s)&&$(t)?t:s||{}}function JB(n,e,t,i){let s;for(const r of e)if(s=R_(WB(r,n),t),typeof s<"u")return rh(n,s)?oh(t,i,n,s):s}function R_(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function xm(n){let e=n._keys;return e||(e=n._keys=QB(n._scopes)),e}function QB(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}function P_(n,e,t,i){const{iScale:s}=n,{key:r="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+t,u=e[c],o[a]={r:s.parse(In(u,r),c)};return o}const ZB=Number.EPSILON||1e-14,vs=(n,e)=>e<n.length&&!n[e].skip&&n[e],N_=n=>n==="x"?"y":"x";function XB(n,e,t,i){const s=n.skip?e:n,r=e,o=t.skip?e:t,a=vd(r,s),l=vd(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=i*c,f=i*u;return{previous:{x:r.x-d*(o.x-s.x),y:r.y-d*(o.y-s.y)},next:{x:r.x+f*(o.x-s.x),y:r.y+f*(o.y-s.y)}}}function e2(n,e,t){const i=n.length;let s,r,o,a,l,c=vs(n,0);for(let u=0;u<i-1;++u)if(l=c,c=vs(n,u+1),!(!l||!c)){if(cr(e[u],0,ZB)){t[u]=t[u+1]=0;continue}s=t[u]/e[u],r=t[u+1]/e[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=s*o*e[u],t[u+1]=r*o*e[u])}}function t2(n,e,t="x"){const i=N_(t),s=n.length;let r,o,a,l=vs(n,0);for(let c=0;c<s;++c){if(o=a,a=l,l=vs(n,c+1),!a)continue;const u=a[t],d=a[i];o&&(r=(u-o[t])/3,a[`cp1${t}`]=u-r,a[`cp1${i}`]=d-r*e[c]),l&&(r=(l[t]-u)/3,a[`cp2${t}`]=u+r,a[`cp2${i}`]=d+r*e[c])}}function n2(n,e="x"){const t=N_(e),i=n.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=vs(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=vs(n,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[t]-l[t])/u:0}r[o]=a?c?Bt(s[o-1])!==Bt(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}e2(n,s,r),t2(n,r,e)}function Mo(n,e,t){return Math.max(Math.min(n,t),e)}function i2(n,e){let t,i,s,r,o,a=Qt(n[0],e);for(t=0,i=n.length;t<i;++t)o=r,r=a,a=t<i-1&&Qt(n[t+1],e),r&&(s=n[t],o&&(s.cp1x=Mo(s.cp1x,e.left,e.right),s.cp1y=Mo(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Mo(s.cp2x,e.left,e.right),s.cp2y=Mo(s.cp2y,e.top,e.bottom)))}function s2(n,e,t,i,s){let r,o,a,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")n2(n,s);else{let c=i?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)a=n[r],l=XB(c,a,n[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&i2(n,t)}function ah(){return typeof window<"u"&&typeof document<"u"}function lh(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function vl(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const tc=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function r2(n,e){return tc(n).getPropertyValue(e)}const o2=["top","right","bottom","left"];function Si(n,e,t){const i={};t=t?"-"+t:"";for(let s=0;s<4;s++){const r=o2[s];i[r]=parseFloat(n[e+"-"+r+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const a2=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function l2(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(a2(s,r,n.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Zn(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,s=tc(t),r=s.boxSizing==="border-box",o=Si(s,"padding"),a=Si(s,"border","width"),{x:l,y:c,box:u}=l2(n,t),d=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:h,height:p}=e;return r&&(h-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-d)/h*t.width/i),y:Math.round((c-f)/p*t.height/i)}}function c2(n,e,t){let i,s;if(e===void 0||t===void 0){const r=n&&lh(n);if(!r)e=n.clientWidth,t=n.clientHeight;else{const o=r.getBoundingClientRect(),a=tc(r),l=Si(a,"border","width"),c=Si(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,i=vl(a.maxWidth,r,"clientWidth"),s=vl(a.maxHeight,r,"clientHeight")}}return{width:e,height:t,maxWidth:i||bl,maxHeight:s||bl}}const To=n=>Math.round(n*10)/10;function u2(n,e,t,i){const s=tc(n),r=Si(s,"margin"),o=vl(s.maxWidth,n,"clientWidth")||bl,a=vl(s.maxHeight,n,"clientHeight")||bl,l=c2(n,e,t);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const f=Si(s,"border","width"),h=Si(s,"padding");c-=h.width+f.width,u-=h.height+f.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?c/i:u-r.height),c=To(Math.min(c,o,l.maxWidth)),u=To(Math.min(u,a,l.maxHeight)),c&&!u&&(u=To(c/2)),(e!==void 0||t!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=To(Math.floor(u*i))),{width:c,height:u}}function _m(n,e,t){const i=e||1,s=Math.floor(n.height*i),r=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(n.currentDevicePixelRatio=i,o.height=s,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const d2=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};ah()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function Sm(n,e){const t=r2(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Xn(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function f2(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function h2(n,e,t,i){const s={x:n.cp2x,y:n.cp2y},r={x:e.cp1x,y:e.cp1y},o=Xn(n,s,t),a=Xn(s,r,t),l=Xn(r,e,t),c=Xn(o,a,t),u=Xn(a,l,t);return Xn(c,u,t)}const p2=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},g2=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function is(n,e,t){return n?p2(e,t):g2()}function I_(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function L_(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function B_(n){return n==="angle"?{between:Rr,compare:mB,normalize:nt}:{between:Yt,compare:(e,t)=>e-t,normalize:e=>e}}function wm({start:n,end:e,count:t,loop:i,style:s}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:s}}function m2(n,e,t){const{property:i,start:s,end:r}=t,{between:o,normalize:a}=B_(i),l=e.length;let{start:c,end:u,loop:d}=n,f,h;if(d){for(c+=l,u+=l,f=0,h=l;f<h&&o(a(e[c%l][i]),s,r);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:n.style}}function F_(n,e,t){if(!t)return[n];const{property:i,start:s,end:r}=t,o=e.length,{compare:a,between:l,normalize:c}=B_(i),{start:u,end:d,loop:f,style:h}=m2(n,e,t),p=[];let g=!1,m=null,b,y,v;const x=()=>l(s,v,b)&&a(s,v)!==0,_=()=>a(r,b)===0||l(r,v,b),S=()=>g||x(),E=()=>!g||_();for(let C=u,T=u;C<=d;++C)y=e[C%o],!y.skip&&(b=c(y[i]),b!==v&&(g=l(b,s,r),m===null&&S()&&(m=a(b,s)===0?C:T),m!==null&&E()&&(p.push(wm({start:m,end:C,loop:f,count:o,style:h})),m=null),T=C,v=b));return m!==null&&p.push(wm({start:m,end:d,loop:f,count:o,style:h})),p}function z_(n,e){const t=[],i=n.segments;for(let s=0;s<i.length;s++){const r=F_(i[s],n.points,e);r.length&&t.push(...r)}return t}function b2(n,e,t,i){let s=0,r=e-1;if(t&&!i)for(;s<e&&!n[s].skip;)s++;for(;s<e&&n[s].skip;)s++;for(s%=e,t&&(r+=s);r>s&&n[r%e].skip;)r--;return r%=e,{start:s,end:r}}function y2(n,e,t,i){const s=n.length,r=[];let o=e,a=n[e],l;for(l=e+1;l<=t;++l){const c=n[l%s];c.skip||c.stop?a.skip||(i=!1,r.push({start:e%s,end:(l-1)%s,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&r.push({start:e%s,end:o%s,loop:i}),r}function v2(n,e){const t=n.points,i=n.options.spanGaps,s=t.length;if(!s)return[];const r=!!n._loop,{start:o,end:a}=b2(t,s,r,i);if(i===!0)return Am(n,[{start:o,end:a,loop:r}],t,e);const l=a<o?a+s:a,c=!!n._fullLoop&&o===0&&a===s-1;return Am(n,y2(t,o,l,c),t,e)}function Am(n,e,t,i){return!i||!i.setContext||!t?e:x2(n,e,t,i)}function x2(n,e,t,i){const s=n._chart.getContext(),r=km(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,c=[];let u=r,d=e[0].start,f=d;function h(p,g,m,b){const y=a?-1:1;if(p!==g){for(p+=l;t[p%l].skip;)p-=y;for(;t[g%l].skip;)g+=y;p%l!==g%l&&(c.push({start:p%l,end:g%l,loop:m,style:b}),u=b,d=g%l)}}for(const p of e){d=a?d:p.start;let g=t[d%l],m;for(f=d+1;f<=p.end;f++){const b=t[f%l];m=km(i.setContext(jn(s,{type:"segment",p0:g,p1:b,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),_2(m,u)&&h(d,f-1,p.loop,u),g=b,u=m}d<f-1&&h(d,f-1,p.loop,u)}return c}function km(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function _2(n,e){if(!e)return!1;const t=[],i=function(s,r){return nh(r)?(t.includes(r)||t.push(r),t.indexOf(r)):r};return JSON.stringify(n,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class S2{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,s){const r=t.listeners[s],o=t.duration;r.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=S_.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),t+=r.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ut=new S2;const Em="transparent",w2={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=mm(n||Em),s=i.valid&&mm(e||Em);return s&&s.valid?s.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class A2{constructor(e,t,i,s){const r=t[i];s=Us([e.to,s,r,e.from]);const o=Us([e.from,r,s]);this._active=!0,this._fn=e.fn||w2[e.type||typeof o],this._easing=ur[e.easing]||ur.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Us([e.to,t,s,e.from]),this._from=Us([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||t<i),!this._active){this._target[s]=a,this._notify(!0);return}if(t<0){this._target[s]=r;return}l=t/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][t]()}}class H_{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!$(e))return;const t=Object.keys(ue.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!$(r))return;const o={};for(const a of t)o[a]=r[a];(se(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){const i=t.options,s=E2(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&k2(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,t){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,t));continue}const u=t[c];let d=r[c];const f=i.get(c);if(d)if(f&&d.active()){d.update(f,u,a);continue}else d.cancel();if(!f||!f.duration){e[c]=u;continue}r[c]=d=new A2(f,e,c,u),s.push(d)}return s}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return Ut.add(this._chart,i),!0}}function k2(n,e){const t=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=n[i[s]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}function E2(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Cm(n,e){const t=n&&n.options||{},i=t.reverse,s=t.min===void 0?e:0,r=t.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function C2(n,e,t){if(t===!1)return!1;const i=Cm(n,t),s=Cm(e,t);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function M2(n){let e,t,i,s;return $(n)?(e=n.top,t=n.right,i=n.bottom,s=n.left):e=t=i=s=n,{top:e,right:t,bottom:i,left:s,disabled:n===!1}}function V_(n,e){const t=[],i=n._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)t.push(i[s].index);return t}function Mm(n,e,t,i={}){const s=n.keys,r=i.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===t){if(i.all)continue;break}c=n.values[l],ce(c)&&(r||e===0||Bt(e)===Bt(c))&&(e+=c)}return e}}function T2(n,e){const{iScale:t,vScale:i}=e,s=t.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[r]:n[u]};return a}function Tm(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function D2(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function O2(n){const{min:e,max:t,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}function R2(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function Dm(n,e,t,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=n[s.index];if(t&&r>0||!t&&r<0)return s.index}return null}function Om(n,e){const{chart:t,_cachedMeta:i}=n,s=t._stacks||(t._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,u=D2(r,o,i),d=e.length;let f;for(let h=0;h<d;++h){const p=e[h],{[l]:g,[c]:m}=p,b=p._stacks||(p._stacks={});f=b[c]=R2(s,u,g),f[a]=m,f._top=Dm(f,o,!0,i.type),f._bottom=Dm(f,o,!1,i.type);const y=f._visualValues||(f._visualValues={});y[a]=m}}function tu(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function P2(n,e){return jn(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function N2(n,e,t){return jn(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Ns(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][t]===void 0)return;delete r[i][t],r[i]._visualValues!==void 0&&r[i]._visualValues[t]!==void 0&&delete r[i]._visualValues[t]}}}const nu=n=>n==="reset"||n==="none",Rm=(n,e)=>e?n:Object.assign({},n),I2=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:V_(t,!0),values:null};class vt{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Tm(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ns(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),s=(d,f,h,p)=>d==="x"?f:d==="r"?p:h,r=t.xAxisID=H(i.xAxisID,tu(e,"x")),o=t.yAxisID=H(i.yAxisID,tu(e,"y")),a=t.rAxisID=H(i.rAxisID,tu(e,"r")),l=t.indexAxis,c=t.iAxisID=s(l,r,o,a),u=t.vAxisID=s(l,o,r,a);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&hm(this._data,this),e._stacked&&Ns(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if($(t)){const s=this._cachedMeta;this._data=T2(t,s)}else if(i!==t){if(i){hm(i,this);const s=this._cachedMeta;Ns(s),s._parsed=[]}t&&Object.isExtensible(t)&&xB(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=t._stacked;t._stacked=Tm(t.vScale,t),t.stack!==i.stack&&(s=!0,Ns(t),t.stack=i.stack),this._resyncElements(e),(s||r!==t._stacked)&&Om(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=e===0&&t===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,d,f;if(this._parsing===!1)i._parsed=s,i._sorted=!0,f=s;else{se(s[e])?f=this.parseArrayData(i,s,e,t):$(s[e])?f=this.parseObjectData(i,s,e,t):f=this.parsePrimitiveData(i,s,e,t);const h=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<t;++u)i._parsed[u+e]=d=f[u],l&&(h()&&(l=!1),c=d);i._sorted=l}o&&Om(this,f)}parsePrimitiveData(e,t,i,s){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,d=new Array(s);let f,h,p;for(f=0,h=s;f<h;++f)p=f+i,d[f]={[a]:u||r.parse(c[p],p),[l]:o.parse(t[p],p)};return d}parseArrayData(e,t,i,s){const{xScale:r,yScale:o}=e,a=new Array(s);let l,c,u,d;for(l=0,c=s;l<c;++l)u=l+i,d=t[u],a[l]={x:r.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,t,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,d,f,h;for(u=0,d=s;u<d;++u)f=u+i,h=t[f],c[u]={x:r.parse(In(h,a),f),y:o.parse(In(h,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const s=this.chart,r=this._cachedMeta,o=t[e.axis],a={keys:V_(s,!0),values:t._stacks[e.axis]._visualValues};return Mm(a,o,r.index,{mode:i})}updateRangeFromParsed(e,t,i,s){const r=i[t.axis];let o=r===null?NaN:r;const a=s&&i._stacks[t.axis];s&&a&&(s.values=a,o=Mm(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,a=this._getOtherScale(e),l=I2(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=O2(a);let f,h;function p(){h=s[f];const g=h[a.axis];return!ce(h[e.axis])||u>g||d<g}for(f=0;f<o&&!(!p()&&(this.updateRangeFromParsed(c,e,h,l),r));++f);if(r){for(f=o-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(c,e,h,l);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=t.length;s<r;++s)o=t[s][e.axis],ce(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,s=t.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=M2(H(this.options.clip,C2(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,s=i.data||[],r=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,r,a,l),u=a;u<a+l;++u){const d=s[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=N2(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=P2(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const s=t==="active",r=this._cachedDataOpts,o=e+"-"+t,a=r[o],l=this.enableOptionSharing&&Or(i);if(a)return Rm(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=s?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),h=Object.keys(ue.elements[e]),p=()=>this.getContext(i,s,t),g=c.resolveNamedOptions(f,h,p,d);return g.$shared&&(g.$shared=l,r[o]=Object.freeze(Rm(g,l))),g}_resolveAnimations(e,t,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${t}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,t),f=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(f,this.getContext(e,i,t))}const c=new H_(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||nu(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(t,r)||r!==s;return this.updateSharedOptions(r,t,i),{sharedOptions:r,includeOptions:o}}updateElement(e,t,i,s){nu(s)?Object.assign(e,i):this._resolveAnimations(t,s).update(e,i)}updateSharedOptions(e,t,i){e&&!nu(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,s){e.active=s;const r=this.getStyle(t,s);this._resolveAnimations(t,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=t.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,t,i=!0){const s=this._cachedMeta,r=s.data,o=e+t;let a;const l=c=>{for(c.length+=t,a=c.length-1;a>=o;a--)c[a]=c[a-t]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,t),i&&this.updateElements(r,e,t,"reset")}updateElements(e,t,i,s){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,t);i._stacked&&Ns(i,s)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,s]=e;this[t](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}D(vt,"defaults",{}),D(vt,"datasetElementType",null),D(vt,"dataElementType",null);function L2(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let s=0,r=t.length;s<r;s++)i=i.concat(t[s].controller.getAllParsedValues(n));n._cache.$bar=__(i.sort((s,r)=>s-r))}return n._cache.$bar}function B2(n){const e=n.iScale,t=L2(e,n.type);let i=e._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(Or(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=t.length;s<r;++s)o=e.getPixelForValue(t[s]),l();for(a=void 0,s=0,r=e.ticks.length;s<r;++s)o=e.getPixelForTick(s),l();return i}function F2(n,e,t,i){const s=t.barThickness;let r,o;return q(s)?(r=e.min*t.categoryPercentage,o=t.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[n]-r/2}}function z2(n,e,t,i){const s=e.pixels,r=s[n];let o=n>0?s[n-1]:null,a=n<s.length-1?s[n+1]:null;const l=t.categoryPercentage;o===null&&(o=r-(a===null?e.end-e.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:t.barPercentage,start:c}}function H2(n,e,t,i){const s=t.parse(n[0],i),r=t.parse(n[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function j_(n,e,t,i){return se(n)?H2(n,e,t,i):e[t.axis]=t.parse(n,i),e}function Pm(n,e,t,i){const s=n.iScale,r=n.vScale,o=s.getLabels(),a=s===r,l=[];let c,u,d,f;for(c=t,u=t+i;c<u;++c)f=e[c],d={},d[s.axis]=a||s.parse(o[c],c),l.push(j_(f,d,r,c));return l}function iu(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function V2(n,e,t){return n!==0?Bt(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function j2(n){let e,t,i,s,r;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:t,end:i,reverse:e,top:s,bottom:r}}function W2(n,e,t,i){let s=e.borderSkipped;const r={};if(!s){n.borderSkipped=r;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=j2(n);s==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?s=c:(t._bottom||0)===i?s=u:(r[Nm(u,o,a,l)]=!0,s=c)),r[Nm(s,o,a,l)]=!0,n.borderSkipped=r}function Nm(n,e,t,i){return i?(n=U2(n,e,t),n=Im(n,t,e)):n=Im(n,e,t),n}function U2(n,e,t){return n===e?t:n===t?e:n}function Im(n,e,t){return n==="start"?e:n==="end"?t:n}function $2(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class Zo extends vt{parsePrimitiveData(e,t,i,s){return Pm(e,t,i,s)}parseArrayData(e,t,i,s){return Pm(e,t,i,s)}parseObjectData(e,t,i,s){const{iScale:r,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let f,h,p,g;for(f=i,h=i+s;f<h;++f)g=t[f],p={},p[r.axis]=r.parse(In(g,c),f),d.push(j_(In(g,u),p,o,f));return d}updateRangeFromParsed(e,t,i,s){super.updateRangeFromParsed(e,t,i,s);const r=i._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:s}=t,r=this.getParsed(e),o=r._custom,a=iu(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(t,s);for(let h=t;h<t+i;h++){const p=this.getParsed(h),g=r||q(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(h),m=this._calculateBarIndexPixels(h,u),b=(p._stacks||{})[a.axis],y={horizontal:c,base:g.base,enableBorderRadius:!b||iu(p._custom)||o===b._top||o===b._bottom,x:c?g.head:m.center,y:c?m.center:g.head,height:c?m.size:Math.abs(g.size),width:c?Math.abs(g.size):m.size};f&&(y.options=d||this.resolveDataElementOptions(h,e[h].active?"active":s));const v=y.options||e[h].options;W2(y,v,b,o),$2(y,v,u.ratio),this.updateElement(e[h],h,y,s)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),r=i.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(t),u=c&&c[l.vScale.axis];if(q(u)||isNaN(u))return!0};for(const l of s)if(!(t!==void 0&&a(l))&&((r===!1||o.indexOf(l.stack)===-1||r===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,i){const s=this._getStacks(e,i),r=t!==void 0?s.indexOf(t):-1;return r===-1?s.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,s=[];let r,o;for(r=0,o=t.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=e.barThickness;return{min:a||B2(t),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(e),c=l._custom,u=iu(c);let d=l[t.axis],f=0,h=i?this.applyStack(t,l,i):d,p,g;h!==d&&(f=h-d,h=d),u&&(d=c.barStart,h=c.barEnd-c.barStart,d!==0&&Bt(d)!==Bt(c.barEnd)&&(f=0),f+=d);const m=!q(r)&&!u?r:f;let b=t.getPixelForValue(m);if(this.chart.getDataVisibility(e)?p=t.getPixelForValue(f+h):p=b,g=p-b,Math.abs(g)<o){g=V2(g,t,a)*o,d===a&&(b-=g/2);const y=t.getPixelForDecimal(0),v=t.getPixelForDecimal(1),x=Math.min(y,v),_=Math.max(y,v);b=Math.max(Math.min(b,_),x),p=b+g,i&&!u&&(l._stacks[t.axis]._visualValues[s]=t.getValueForPixel(p)-t.getValueForPixel(b))}if(b===t.getPixelForValue(a)){const y=Bt(g)*t.getLineWidthForValue(a)/2;b+=y,g-=y}return{size:g,base:b,head:p,center:p+g/2}}_calculateBarIndexPixels(e,t){const i=t.scale,s=this.options,r=s.skipNull,o=H(s.maxBarThickness,1/0);let a,l;if(t.grouped){const c=r?this._getStackCount(e):t.stackCount,u=s.barThickness==="flex"?z2(e,t,s,c):F2(e,t,s,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);a=u.start+u.chunk*d+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[t.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}D(Zo,"id","bar"),D(Zo,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),D(Zo,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Xo extends vt{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,s){const r=super.parsePrimitiveData(e,t,i,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(e,t,i,s){const r=super.parseArrayData(e,t,i,s);for(let o=0;o<r.length;o++){const a=t[i+o];r[o]._custom=H(a[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(e,t,i,s){const r=super.parseObjectData(e,t,i,s);for(let o=0;o<r.length;o++){const a=t[i+o];r[o]._custom=H(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=t,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:i[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,s){const r=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(t,s),u=o.axis,d=a.axis;for(let f=t;f<t+i;f++){const h=e[f],p=!r&&this.getParsed(f),g={},m=g[u]=r?o.getPixelForDecimal(.5):o.getPixelForValue(p[u]),b=g[d]=r?a.getBasePixel():a.getPixelForValue(p[d]);g.skip=isNaN(m)||isNaN(b),c&&(g.options=l||this.resolveDataElementOptions(f,h.active?"active":s),r&&(g.options.radius=0)),this.updateElement(h,f,g,s)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let s=super.resolveDataElementOptions(e,t);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return t!=="active"&&(s.radius=0),s.radius+=H(i&&i._custom,r),s}}D(Xo,"id","bubble"),D(Xo,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),D(Xo,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function q2(n,e,t){let i=1,s=1,r=0,o=0;if(e<te){const a=n,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),f=Math.sin(l),h=(v,x,_)=>Rr(v,a,l,!0)?1:Math.max(x,x*t,_,_*t),p=(v,x,_)=>Rr(v,a,l,!0)?-1:Math.min(x,x*t,_,_*t),g=h(0,c,d),m=h(he,u,f),b=p(ie,c,d),y=p(ie+he,u,f);i=(g-b)/2,s=(m-y)/2,r=-(g+b)/2,o=-(m+y)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}class ci extends vt{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=l=>+i[l];if($(i[e])){const{key:l="value"}=this._parsing;r=c=>+In(i[c],l)}let o,a;for(o=e,a=e+t;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return mt(this.options.rotation-90)}_getCircumference(){return mt(this.options.circumference)}_getRotationExtents(){let e=te,t=-te;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();e=Math.min(e,r),t=Math.max(t,r+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(oB(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:h,offsetX:p,offsetY:g}=q2(d,u,l),m=(i.width-o)/f,b=(i.height-o)/h,y=Math.max(Math.min(m,b)/2,0),v=m_(this.options.radius,y),x=Math.max(v*l,0),_=(v-x)/this._getVisibleDatasetWeightTotal();this.offsetX=p*v,this.offsetY=g*v,s.total=this.calculateTotal(),this.outerRadius=v-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*c,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*r/te)}updateElements(e,t,i,s){const r=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=r&&c.animateScale,h=f?0:this.innerRadius,p=f?0:this.outerRadius,{sharedOptions:g,includeOptions:m}=this._getSharedOptions(t,s);let b=this._getRotation(),y;for(y=0;y<t;++y)b+=this._circumference(y,r);for(y=t;y<t+i;++y){const v=this._circumference(y,r),x=e[y],_={x:u+this.offsetX,y:d+this.offsetY,startAngle:b,endAngle:b+v,circumference:v,outerRadius:p,innerRadius:h};m&&(_.options=g||this.resolveDataElementOptions(y,x.active?"active":s)),b+=v,this.updateElement(x,y,_,s)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,s;for(s=0;s<t.length;s++){const r=e._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!t[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?te*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Qr(t._parsed[e],i.options.locale);return{label:s[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const i=this.chart;let s,r,o,a,l;if(!e){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,r=e.length;s<r;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,s=e.length;i<s;++i){const r=this.resolveDataElementOptions(i);t=Math.max(t,r.offset||0,r.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(H(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}D(ci,"id","doughnut"),D(ci,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),D(ci,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),D(ci,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return t.labels.map((r,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}});class ea extends vt{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=t,o=this.chart._animationsDisabled;let{start:a,count:l}=A_(t,s,o);this._drawStart=a,this._drawCount=l,k_(t)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,t,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,s),f=o.axis,h=a.axis,{spanGaps:p,segment:g}=this.options,m=bs(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||s==="none",y=t+i,v=e.length;let x=t>0&&this.getParsed(t-1);for(let _=0;_<v;++_){const S=e[_],E=b?S:{};if(_<t||_>=y){E.skip=!0;continue}const C=this.getParsed(_),T=q(C[h]),N=E[f]=o.getPixelForValue(C[f],_),B=E[h]=r||T?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,C,l):C[h],_);E.skip=isNaN(N)||isNaN(B)||T,E.stop=_>0&&Math.abs(C[f]-x[f])>m,g&&(E.parsed=C,E.raw=c.data[_]),d&&(E.options=u||this.resolveDataElementOptions(_,S.active?"active":s)),b||this.updateElement(S,_,E,s),x=C}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}D(ea,"id","line"),D(ea,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),D(ea,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class fr extends vt{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Qr(t._parsed[e].r,i.options.locale);return{label:s[e]||"",value:r}}parseObjectData(e,t,i,s){return P_.bind(this)(e,t,i,s)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,s=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(s/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-o)/e.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,i,s){const r=s==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,d=c.yCenter,f=c.getIndexAngle(0)-.5*ie;let h=f,p;const g=360/this.countVisibleElements();for(p=0;p<t;++p)h+=this._computeAngle(p,s,g);for(p=t;p<t+i;p++){const m=e[p];let b=h,y=h+this._computeAngle(p,s,g),v=o.getDataVisibility(p)?c.getDistanceFromCenterForValue(this.getParsed(p).r):0;h=y,r&&(l.animateScale&&(v=0),l.animateRotate&&(b=y=f));const x={x:u,y:d,innerRadius:0,outerRadius:v,startAngle:b,endAngle:y,options:this.resolveDataElementOptions(p,m.active?"active":s)};this.updateElement(m,p,x,s)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?mt(this.resolveDataElementOptions(e,t).angle||i):0}}D(fr,"id","polarArea"),D(fr,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),D(fr,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return t.labels.map((r,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Sd extends ci{}D(Sd,"id","pie"),D(Sd,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class ta extends vt{getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,s){return P_.bind(this)(e,t,i,s)}update(e){const t=this._cachedMeta,i=t.dataset,s=t.data||[],r=t.iScale.getLabels();if(i.points=s,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(s,0,s.length,e)}updateElements(e,t,i,s){const r=this._cachedMeta.rScale,o=s==="reset";for(let a=t;a<t+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":s),u=r.getPointPositionForValue(a,this.getParsed(a).r),d=o?r.xCenter:u.x,f=o?r.yCenter:u.y,h={x:d,y:f,angle:u.angle,skip:isNaN(d)||isNaN(f),options:c};this.updateElement(l,a,h,s)}}}D(ta,"id","radar"),D(ta,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),D(ta,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class na extends vt{getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=t,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,s=this.chart._animationsDisabled;let{start:r,count:o}=A_(t,i,s);if(this._drawStart=r,this._drawCount=o,k_(t)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(t,s),d=this.getSharedOptions(u),f=this.includeOptions(s,d),h=o.axis,p=a.axis,{spanGaps:g,segment:m}=this.options,b=bs(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||s==="none";let v=t>0&&this.getParsed(t-1);for(let x=t;x<t+i;++x){const _=e[x],S=this.getParsed(x),E=y?_:{},C=q(S[p]),T=E[h]=o.getPixelForValue(S[h],x),N=E[p]=r||C?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,S,l):S[p],x);E.skip=isNaN(T)||isNaN(N)||C,E.stop=x>0&&Math.abs(S[h]-v[h])>b,m&&(E.parsed=S,E.raw=c.data[x]),f&&(E.options=d||this.resolveDataElementOptions(x,_.active?"active":s)),y||this.updateElement(_,x,E,s),v=S}this.updateSharedOptions(d,s,u)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let a=0;for(let l=t.length-1;l>=0;--l)a=Math.max(a,t[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,s=i.options&&i.options.borderWidth||0;if(!t.length)return s;const r=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(s,r,o)/2}}D(na,"id","scatter"),D(na,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),D(na,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var G2=Object.freeze({__proto__:null,BarController:Zo,BubbleController:Xo,DoughnutController:ci,LineController:ea,PieController:Sd,PolarAreaController:fr,RadarController:ta,ScatterController:na});function Gn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ch{constructor(e){D(this,"options");this.options=e||{}}static override(e){Object.assign(ch.prototype,e)}init(){}formats(){return Gn()}parse(){return Gn()}format(){return Gn()}add(){return Gn()}diff(){return Gn()}startOf(){return Gn()}endOf(){return Gn()}}var K2={_date:ch};function Y2(n,e,t,i){const{controller:s,data:r,_sorted:o}=n,a=s._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const l=a._reversePixels?yB:Jt;if(i){if(s._sharedOptions){const c=r[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const d=l(r,e,t-u),f=l(r,e,t+u);return{lo:d.lo,hi:f.hi}}}}else return l(r,e,t)}return{lo:0,hi:r.length-1}}function Zr(n,e,t,i,s){const r=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:d,hi:f}=Y2(r[a],e,o,s);for(let h=d;h<=f;++h){const p=u[h];p.skip||i(p,c,h)}}}function J2(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=t?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function su(n,e,t,i,s){const r=[];return!s&&!n.isPointInArea(e)||Zr(n,t,e,function(a,l,c){!s&&!Qt(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function Q2(n,e,t,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:d}=v_(o,{x:e.x,y:e.y});Rr(d,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return Zr(n,t,e,r),s}function Z2(n,e,t,i,s,r){let o=[];const a=J2(t);let l=Number.POSITIVE_INFINITY;function c(u,d,f){const h=u.inRange(e.x,e.y,s);if(i&&!h)return;const p=u.getCenterPoint(s);if(!(!!r||n.isPointInArea(p))&&!h)return;const m=a(e,p);m<l?(o=[{element:u,datasetIndex:d,index:f}],l=m):m===l&&o.push({element:u,datasetIndex:d,index:f})}return Zr(n,t,e,c),o}function ru(n,e,t,i,s,r){return!r&&!n.isPointInArea(e)?[]:t==="r"&&!i?Q2(n,e,t,s):Z2(n,e,t,i,s,r)}function Lm(n,e,t,i,s){const r=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return Zr(n,t,e,(l,c,u)=>{l[o](e[t],s)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var X2={evaluateInteractionItems:Zr,modes:{index(n,e,t,i){const s=Zn(e,n),r=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?su(n,s,r,i,o):ru(n,s,r,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(n,e,t,i){const s=Zn(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?su(n,s,r,i,o):ru(n,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,e,t,i){const s=Zn(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return su(n,s,r,i,o)},nearest(n,e,t,i){const s=Zn(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return ru(n,s,r,t.intersect,i,o)},x(n,e,t,i){const s=Zn(e,n);return Lm(n,s,"x",t.intersect,i)},y(n,e,t,i){const s=Zn(e,n);return Lm(n,s,"y",t.intersect,i)}}};const W_=["left","top","right","bottom"];function Is(n,e){return n.filter(t=>t.pos===e)}function Bm(n,e){return n.filter(t=>W_.indexOf(t.pos)===-1&&t.box.axis===e)}function Ls(n,e){return n.sort((t,i)=>{const s=e?i:t,r=e?t:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function eF(n){const e=[];let t,i,s,r,o,a;for(t=0,i=(n||[]).length;t<i;++t)s=n[t],{position:r,options:{stack:o,stackWeight:a=1}}=s,e.push({index:t,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}function tF(n){const e={};for(const t of n){const{stack:i,pos:s,stackWeight:r}=t;if(!i||!W_.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function nF(n,e){const t=tF(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];const{fullSize:l}=a.box,c=t[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:l&&e.availableHeight)}return t}function iF(n){const e=eF(n),t=Ls(e.filter(c=>c.box.fullSize),!0),i=Ls(Is(e,"left"),!0),s=Ls(Is(e,"right")),r=Ls(Is(e,"top"),!0),o=Ls(Is(e,"bottom")),a=Bm(e,"x"),l=Bm(e,"y");return{fullSize:t,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Is(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function Fm(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function U_(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function sF(n,e,t,i){const{pos:s,box:r}=t,o=n.maxPadding;if(!$(s)){t.size&&(n[s]-=t.size);const d=i[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?r.height:r.width),t.size=d.size/d.count,n[s]+=t.size}r.getPadding&&U_(o,r.getPadding());const a=Math.max(0,e.outerWidth-Fm(o,n,"left","right")),l=Math.max(0,e.outerHeight-Fm(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:c,other:u}:{same:u,other:c}}function rF(n){const e=n.maxPadding;function t(i){const s=Math.max(e[i]-n[i],0);return n[i]+=s,s}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function oF(n,e){const t=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],t[o])}),r}return i(n?["left","right"]:["top","bottom"])}function $s(n,e,t,i){const s=[];let r,o,a,l,c,u;for(r=0,o=n.length,c=0;r<o;++r){a=n[r],l=a.box,l.update(a.width||e.w,a.height||e.h,oF(a.horizontal,e));const{same:d,other:f}=sF(e,t,a,i);c|=d&&s.length,u=u||f,l.fullSize||s.push(a)}return c&&$s(s,e,t,i)||u}function Do(n,e,t,i,s){n.top=t,n.left=e,n.right=e+i,n.bottom=t+s,n.width=i,n.height=s}function zm(n,e,t,i){const s=t.padding;let{x:r,y:o}=e;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,f=c.size||l.height;Or(c.start)&&(o=c.start),l.fullSize?Do(l,s.left,o,t.outerWidth-s.right-s.left,f):Do(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,f=c.size||l.width;Or(c.start)&&(r=c.start),l.fullSize?Do(l,r,s.top,f,t.outerHeight-s.bottom-s.top):Do(l,r,e.top+c.placed,f,d),c.start=r,c.placed+=d,r=l.right}}e.x=r,e.y=o}var Le={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const s=ze(n.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(t-s.height,0),a=iF(n.boxes),l=a.vertical,c=a.horizontal;Q(n.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=l.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},s);U_(f,ze(i));const h=Object.assign({maxPadding:f,w:r,h:o,x:s.left,y:s.top},s),p=nF(l.concat(c),d);$s(a.fullSize,h,d,p),$s(l,h,d,p),$s(c,h,d,p)&&$s(l,h,d,p),rF(h),zm(a.leftAndTop,h,d,p),h.x+=h.w,h.y+=h.h,zm(a.rightAndBottom,h,d,p),n.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},Q(a.chartArea,g=>{const m=g.box;Object.assign(m,n.chartArea),m.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}};class $_{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,s){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):i)}}isAttached(e){return!0}updateConfig(e){}}class aF extends $_{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ia="$chartjs",lF={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Hm=n=>n===null||n==="";function cF(n,e){const t=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[ia]={initial:{height:i,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Hm(s)){const r=Sm(n,"width");r!==void 0&&(n.width=r)}if(Hm(i))if(n.style.height==="")n.height=n.width/(e||2);else{const r=Sm(n,"height");r!==void 0&&(n.height=r)}return n}const q_=d2?{passive:!0}:!1;function uF(n,e,t){n&&n.addEventListener(e,t,q_)}function dF(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,q_)}function fF(n,e){const t=lF[n.type]||n.type,{x:i,y:s}=Zn(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function xl(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function hF(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||xl(a.addedNodes,i),o=o&&!xl(a.removedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function pF(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||xl(a.removedNodes,i),o=o&&!xl(a.addedNodes,i);o&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}const Nr=new Map;let Vm=0;function G_(){const n=window.devicePixelRatio;n!==Vm&&(Vm=n,Nr.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function gF(n,e){Nr.size||window.addEventListener("resize",G_),Nr.set(n,e)}function mF(n){Nr.delete(n),Nr.size||window.removeEventListener("resize",G_)}function bF(n,e,t){const i=n.canvas,s=i&&lh(i);if(!s)return;const r=w_((a,l)=>{const c=s.clientWidth;t(a,l),c<s.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(s),gF(n,r),o}function ou(n,e,t){t&&t.disconnect(),e==="resize"&&mF(n)}function yF(n,e,t){const i=n.canvas,s=w_(r=>{n.ctx!==null&&t(fF(r,n))},n);return uF(i,e,s),s}class vF extends $_{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(cF(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[ia])return!1;const i=t[ia].initial;["height","width"].forEach(r=>{const o=i[r];q(o)?t.removeAttribute(r):t.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{t.style[r]=s[r]}),t.width=t.width,delete t[ia],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),o={attach:hF,detach:pF,resize:bF}[t]||yF;s[t]=o(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),s=i[t];if(!s)return;({attach:ou,detach:ou,resize:ou}[t]||dF)(e,t,s),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return u2(e,t,i,s)}isAttached(e){const t=e&&lh(e);return!!(t&&t.isConnected)}}function xF(n){return!ah()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?aF:vF}var Fo;let sn=(Fo=class{constructor(){D(this,"x");D(this,"y");D(this,"active",!1);D(this,"options");D(this,"$animations")}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return bs(this.x)&&bs(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}},D(Fo,"defaults",{}),D(Fo,"defaultRoutes"),Fo);function _F(n,e){const t=n.options.ticks,i=SF(n),s=Math.min(t.maxTicksLimit||i,i),r=t.major.enabled?AF(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return kF(e,c,r,o/s),c;const u=wF(r,e,s);if(o>0){let d,f;const h=o>1?Math.round((l-a)/(o-1)):null;for(Oo(e,c,u,q(h)?0:a-h,a),d=0,f=o-1;d<f;d++)Oo(e,c,u,r[d],r[d+1]);return Oo(e,c,u,l,q(h)?e.length:l+h),c}return Oo(e,c,u),c}function SF(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),s=n._maxLength/t;return Math.floor(Math.min(i,s))}function wF(n,e,t){const i=EF(n),s=e.length/t;if(!i)return Math.max(s,1);const r=pB(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function AF(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function kF(n,e,t,i){let s=0,r=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(e.push(n[o]),s++,r=t[s*i])}function Oo(n,e,t,i,s){const r=H(i,0),o=Math.min(H(s,n.length),n.length);let a=0,l,c,u;for(t=Math.ceil(t),s&&(l=s-i,t=l/Math.floor(l/t)),u=r;u<0;)a++,u=Math.round(r+a*t);for(c=Math.max(r,0);c<o;c++)c===u&&(e.push(n[c]),a++,u=Math.round(r+a*t))}function EF(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const CF=n=>n==="left"?"right":n==="right"?"left":n,jm=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,Wm=(n,e)=>Math.min(e||n,n);function Um(n,e){const t=[],i=n.length/e,s=n.length;let r=0;for(;r<s;r+=i)t.push(n[Math.floor(r)]);return t}function MF(n,e,t){const i=n.ticks.length,s=Math.min(e,i-1),r=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(s),c;if(!(t&&(i===1?c=Math.max(l-r,o-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function TF(n,e){Q(n,t=>{const i=t.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete t.data[i[r]];i.splice(0,s)}})}function Bs(n){return n.drawTicks?n.tickLength:0}function $m(n,e){if(!n.display)return 0;const t=xe(n.font,e),i=ze(n.padding);return(se(n.text)?n.text.length:1)*t.lineHeight+i.height}function DF(n,e){return jn(n,{scale:e,type:"scale"})}function OF(n,e,t){return jn(n,{tick:t,index:e,type:"tick"})}function RF(n,e,t){let i=th(n);return(t&&e!=="right"||!t&&e==="right")&&(i=CF(i)),i}function PF(n,e,t,i){const{top:s,left:r,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l;let d=0,f,h,p;const g=o-s,m=a-r;if(n.isHorizontal()){if(h=Ne(i,r,a),$(t)){const b=Object.keys(t)[0],y=t[b];p=u[b].getPixelForValue(y)+g-e}else t==="center"?p=(c.bottom+c.top)/2+g-e:p=jm(n,t,e);f=a-r}else{if($(t)){const b=Object.keys(t)[0],y=t[b];h=u[b].getPixelForValue(y)-m+e}else t==="center"?h=(c.left+c.right)/2-m+e:h=jm(n,t,e);p=Ne(i,o,s),d=t==="left"?-he:he}return{titleX:h,titleY:p,maxWidth:f,rotation:d}}class Bi extends sn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=tt(e,Number.POSITIVE_INFINITY),t=tt(t,Number.NEGATIVE_INFINITY),i=tt(i,Number.POSITIVE_INFINITY),s=tt(s,Number.NEGATIVE_INFINITY),{min:tt(e,i),max:tt(t,s),minDefined:ce(e),maxDefined:ce(t)}}getMinMax(e){let{min:t,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:t,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(t=Math.min(t,o.min)),r||(i=Math.max(i,o.max));return t=r&&t>i?i:t,i=s&&t>i?t:i,{min:tt(t,tt(i,t)),max:tt(i,tt(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ee(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=jB(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Um(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=_F(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ee(this.options.afterUpdate,[this])}beforeSetDimensions(){ee(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ee(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ee(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ee(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=ee(t.callback,[r.value,i,e],this)}afterTickToLabelConversion(){ee(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ee(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=Wm(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,r=t.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!t.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,h=Ae(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:h/(i-1),d+6>a&&(a=h/(i-(e.offset?.5:1)),l=this.maxHeight-Bs(e.grid)-t.padding-$m(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=Xf(Math.min(Math.asin(Ae((u.highest.height+6)/a,-1,1)),Math.asin(Ae(l/c,-1,1))-Math.asin(Ae(f/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){ee(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ee(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=$m(s,t.options.font);if(a?(e.width=this.maxWidth,e.height=Bs(r)+l):(e.height=this.maxHeight,e.width=Bs(r)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:f}=this._getLabelSizes(),h=i.padding*2,p=mt(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(a){const b=i.mirror?0:m*d.width+g*f.height;e.height=Math.min(this.maxHeight,e.height+b+h)}else{const b=i.mirror?0:g*d.width+m*f.height;e.width=Math.min(this.maxWidth,e.width+b+h)}this._calculatePadding(c,u,m,g)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,h=0;l?c?(f=s*e.width,h=i*t.height):(f=i*e.height,h=s*t.width):r==="start"?h=t.width:r==="end"?f=e.width:r!=="inner"&&(f=e.width/2,h=t.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((h-d+o)*this.width/(this.width-d),0)}else{let u=t.height/2,d=e.height/2;r==="start"?(u=0,d=e.height):r==="end"&&(u=t.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ee(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)q(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=Um(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(t/Wm(t,i));let c=0,u=0,d,f,h,p,g,m,b,y,v,x,_;for(d=0;d<t;d+=l){if(p=e[d].label,g=this._resolveTickFontOptions(d),s.font=m=g.string,b=r[m]=r[m]||{data:{},gc:[]},y=g.lineHeight,v=x=0,!q(p)&&!se(p))v=yl(s,b.data,b.gc,v,p),x=y;else if(se(p))for(f=0,h=p.length;f<h;++f)_=p[f],!q(_)&&!se(_)&&(v=yl(s,b.data,b.gc,v,_),x+=y);o.push(v),a.push(x),c=Math.max(v,c),u=Math.max(x,u)}TF(r,t);const S=o.indexOf(c),E=a.indexOf(u),C=T=>({width:o[T]||0,height:a[T]||0});return{first:C(0),last:C(t-1),widest:C(S),highest:C(E),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return bB(this._alignToPixels?qn(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=OF(this.getContext(),e,i))}return this.$context||(this.$context=DF(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=mt(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Bs(r),h=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,b=function(Y){return qn(i,Y,g)};let y,v,x,_,S,E,C,T,N,B,U,de;if(o==="top")y=b(this.bottom),E=this.bottom-f,T=y-m,B=b(e.top)+m,de=e.bottom;else if(o==="bottom")y=b(this.top),B=e.top,de=b(e.bottom)-m,E=y+m,T=this.top+f;else if(o==="left")y=b(this.right),S=this.right-f,C=y-m,N=b(e.left)+m,U=e.right;else if(o==="right")y=b(this.left),N=e.left,U=b(e.right)-m,S=y+m,C=this.left+f;else if(t==="x"){if(o==="center")y=b((e.top+e.bottom)/2+.5);else if($(o)){const Y=Object.keys(o)[0],Z=o[Y];y=b(this.chart.scales[Y].getPixelForValue(Z))}B=e.top,de=e.bottom,E=y+m,T=E+f}else if(t==="y"){if(o==="center")y=b((e.left+e.right)/2);else if($(o)){const Y=Object.keys(o)[0],Z=o[Y];y=b(this.chart.scales[Y].getPixelForValue(Z))}S=y-m,C=S-f,N=e.left,U=e.right}const Re=H(s.ticks.maxTicksLimit,d),G=Math.max(1,Math.ceil(d/Re));for(v=0;v<d;v+=G){const Y=this.getContext(v),Z=r.setContext(Y),Me=a.setContext(Y),Pe=Z.lineWidth,Fi=Z.color,Xr=Me.dash||[],zi=Me.dashOffset,Cs=Z.tickWidth,Wn=Z.tickColor,Ms=Z.tickBorderDash||[],Un=Z.tickBorderDashOffset;x=MF(this,v,l),x!==void 0&&(_=qn(i,x,Pe),c?S=C=N=U=_:E=T=B=de=_,h.push({tx1:S,ty1:E,tx2:C,ty2:T,x1:N,y1:B,x2:U,y2:de,width:Pe,color:Fi,borderDash:Xr,borderDashOffset:zi,tickWidth:Cs,tickColor:Wn,tickBorderDash:Ms,tickBorderDashOffset:Un}))}return this._ticksLength=d,this._borderValue=y,h}_computeLabelItems(e){const t=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=r,f=Bs(i.grid),h=f+u,p=d?-u:h,g=-mt(this.labelRotation),m=[];let b,y,v,x,_,S,E,C,T,N,B,U,de="middle";if(s==="top")S=this.bottom-p,E=this._getXAxisLabelAlignment();else if(s==="bottom")S=this.top+p,E=this._getXAxisLabelAlignment();else if(s==="left"){const G=this._getYAxisLabelAlignment(f);E=G.textAlign,_=G.x}else if(s==="right"){const G=this._getYAxisLabelAlignment(f);E=G.textAlign,_=G.x}else if(t==="x"){if(s==="center")S=(e.top+e.bottom)/2+h;else if($(s)){const G=Object.keys(s)[0],Y=s[G];S=this.chart.scales[G].getPixelForValue(Y)+h}E=this._getXAxisLabelAlignment()}else if(t==="y"){if(s==="center")_=(e.left+e.right)/2-h;else if($(s)){const G=Object.keys(s)[0],Y=s[G];_=this.chart.scales[G].getPixelForValue(Y)}E=this._getYAxisLabelAlignment(f).textAlign}t==="y"&&(l==="start"?de="top":l==="end"&&(de="bottom"));const Re=this._getLabelSizes();for(b=0,y=a.length;b<y;++b){v=a[b],x=v.label;const G=r.setContext(this.getContext(b));C=this.getPixelForTick(b)+r.labelOffset,T=this._resolveTickFontOptions(b),N=T.lineHeight,B=se(x)?x.length:1;const Y=B/2,Z=G.color,Me=G.textStrokeColor,Pe=G.textStrokeWidth;let Fi=E;o?(_=C,E==="inner"&&(b===y-1?Fi=this.options.reverse?"left":"right":b===0?Fi=this.options.reverse?"right":"left":Fi="center"),s==="top"?c==="near"||g!==0?U=-B*N+N/2:c==="center"?U=-Re.highest.height/2-Y*N+N:U=-Re.highest.height+N/2:c==="near"||g!==0?U=N/2:c==="center"?U=Re.highest.height/2-Y*N:U=Re.highest.height-B*N,d&&(U*=-1),g!==0&&!G.showLabelBackdrop&&(_+=N/2*Math.sin(g))):(S=C,U=(1-B)*N/2);let Xr;if(G.showLabelBackdrop){const zi=ze(G.backdropPadding),Cs=Re.heights[b],Wn=Re.widths[b];let Ms=U-zi.top,Un=0-zi.left;switch(de){case"middle":Ms-=Cs/2;break;case"bottom":Ms-=Cs;break}switch(E){case"center":Un-=Wn/2;break;case"right":Un-=Wn;break;case"inner":b===y-1?Un-=Wn:b>0&&(Un-=Wn/2);break}Xr={left:Un,top:Ms,width:Wn+zi.width,height:Cs+zi.height,color:G.backdropColor}}m.push({label:x,font:T,textOffset:U,options:{rotation:g,color:Z,strokeColor:Me,strokeWidth:Pe,textAlign:Fi,textBaseline:de,translation:[_,S],backdrop:Xr}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-mt(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,u;return t==="left"?s?(u=this.right+r,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):t==="right"?s?(u=this.left+r,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:s,width:r,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(r=0,o=s.length;r<o;++r){const l=s[r];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,f;this.isHorizontal()?(c=qn(e,this.left,o)-o/2,u=qn(e,this.right,a)+a/2,d=f=l):(d=qn(e,this.top,o)-o/2,f=qn(e,this.bottom,a)+a/2,c=u=l),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(c,d),t.lineTo(u,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Xl(i,s);const r=this.getLabelItems(e);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Di(i,c,0,u,l,a)}s&&ec(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:s}}=this;if(!i.display)return;const r=xe(i.font),o=ze(i.padding),a=i.align;let l=r.lineHeight/2;t==="bottom"||t==="center"||$(t)?(l+=o.bottom,se(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:f}=PF(this,l,t,a);Di(e,i.text,0,0,r,{color:i.color,maxWidth:d,rotation:f,textAlign:RF(a,t,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=H(e.grid&&e.grid.z,-1),s=H(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Bi.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=t.length;r<o;++r){const a=t[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return xe(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ro{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;LF(t)&&(i=this.register(t));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,NF(e,o,i),this.override&&ue.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in ue[s]&&(delete ue[s][i],this.override&&delete Ti[i])}}function NF(n,e,t){const i=Dr(Object.create(null),[t?ue.get(t):{},ue.get(e),n.defaults]);ue.set(e,i),n.defaultRoutes&&IF(e,n.defaultRoutes),n.descriptors&&ue.describe(e,n.descriptors)}function IF(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),s=i.pop(),r=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");ue.route(r,s,l,a)})}function LF(n){return"id"in n&&"defaults"in n}class BF{constructor(){this.controllers=new Ro(vt,"datasets",!0),this.elements=new Ro(sn,"elements"),this.plugins=new Ro(Object,"plugins"),this.scales=new Ro(Bi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):Q(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){const s=Zf(e);ee(i["before"+s],[],i),t[e](i),ee(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const s=t.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var Ot=new BF;class FF{constructor(){this._init=[]}notify(e,t,i,s){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,t,i);return t==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,s){s=s||{};for(const r of e){const o=r.plugin,a=o[i],l=[t,s,r.options];if(ee(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){q(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,s=H(i.options&&i.options.plugins,{}),r=zF(i);return s===!1&&!t?[]:VF(e,r,s,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(t,i),e,"stop"),this._notify(s(i,t),e,"start")}}function zF(n){const e={},t=[],i=Object.keys(Ot.plugins.items);for(let r=0;r<i.length;r++)t.push(Ot.getPlugin(i[r]));const s=n.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function HF(n,e){return!e&&n===!1?null:n===!0?{}:n}function VF(n,{plugins:e,localIds:t},i,s){const r=[],o=n.getContext();for(const a of e){const l=a.id,c=HF(i[l],s);c!==null&&r.push({plugin:a,options:jF(n.config,{plugin:a,local:t[l]},c,o)})}return r}function jF(n,{plugin:e,local:t},i,s){const r=n.pluginScopeKeys(e),o=n.getOptionScopes(i,r);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function wd(n,e){const t=ue.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function WF(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function UF(n,e){return n===e?"_index_":"_value_"}function qm(n){if(n==="x"||n==="y"||n==="r")return n}function $F(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Ad(n,...e){if(qm(n))return n;for(const t of e){const i=t.axis||$F(t.position)||n.length>1&&qm(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Gm(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function qF(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return Gm(n,"x",t[0])||Gm(n,"y",t[0])}return{}}function GF(n,e){const t=Ti[n.type]||{scales:{}},i=e.scales||{},s=wd(n.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!$(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Ad(o,a,qF(o,n),ue.scales[a.type]),c=UF(l,s),u=t.scales||{};r[o]=lr(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||wd(a,e),u=(Ti[a]||{}).scales||{};Object.keys(u).forEach(d=>{const f=WF(d,l),h=o[f+"AxisID"]||f;r[h]=r[h]||Object.create(null),lr(r[h],[{axis:f},i[h],u[d]])})}),Object.keys(r).forEach(o=>{const a=r[o];lr(a,[ue.scales[a.type],ue.scale])}),r}function K_(n){const e=n.options||(n.options={});e.plugins=H(e.plugins,{}),e.scales=GF(n,e)}function Y_(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function KF(n){return n=n||{},n.data=Y_(n.data),K_(n),n}const Km=new Map,J_=new Set;function Po(n,e){let t=Km.get(n);return t||(t=e(),Km.set(n,t),J_.add(t)),t}const Fs=(n,e,t)=>{const i=In(e,t);i!==void 0&&n.add(i)};class YF{constructor(e){this._config=KF(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Y_(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),K_(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Po(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Po(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Po(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return Po(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let s=i.get(e);return(!s||t)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,t,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;const l=new Set;t.forEach(u=>{e&&(l.add(e),u.forEach(d=>Fs(l,e,d))),u.forEach(d=>Fs(l,s,d)),u.forEach(d=>Fs(l,Ti[r]||{},d)),u.forEach(d=>Fs(l,ue,d)),u.forEach(d=>Fs(l,xd,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),J_.has(t)&&o.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,Ti[t]||{},ue.datasets[t]||{},{type:t},ue,xd]}resolveNamedOptions(e,t,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=Ym(this._resolverCache,e,s);let l=o;if(QF(o,t)){r.$shared=!1,i=Ln(i)?i():i;const c=this.createResolver(e,i,a);l=ys(o,i,c)}for(const c of t)r[c]=l[c];return r}createResolver(e,t,i=[""],s){const{resolver:r}=Ym(this._resolverCache,e,i);return $(t)?ys(r,t,void 0,s):r}}function Ym(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const s=t.join();let r=i.get(s);return r||(r={resolver:sh(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const JF=n=>$(n)&&Object.getOwnPropertyNames(n).some(e=>Ln(n[e]));function QF(n,e){const{isScriptable:t,isIndexable:i}=T_(n);for(const s of e){const r=t(s),o=i(s),a=(o||r)&&n[s];if(r&&(Ln(a)||JF(a))||o&&se(a))return!0}return!1}var ZF="4.4.3";const XF=["top","bottom","left","right","chartArea"];function Jm(n,e){return n==="top"||n==="bottom"||XF.indexOf(n)===-1&&e==="x"}function Qm(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function Zm(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),ee(t&&t.onComplete,[n],e)}function ez(n){const e=n.chart,t=e.options.animation;ee(t&&t.onProgress,[n],e)}function Q_(n){return ah()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const sa={},Xm=n=>{const e=Q_(n);return Object.values(sa).filter(t=>t.canvas===e).pop()};function tz(n,e,t){const i=Object.keys(n);for(const s of i){const r=+s;if(r>=e){const o=n[s];delete n[s],(t>0||r>e)&&(n[r+t]=o)}}}function nz(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}function No(n,e,t){return n.options.clip?n[t]:e[t]}function iz(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:No(t,e,"left"),right:No(t,e,"right"),top:No(i,e,"top"),bottom:No(i,e,"bottom")}:e}class Ve{static register(...e){Ot.add(...e),eb()}static unregister(...e){Ot.remove(...e),eb()}constructor(e,t){const i=this.config=new YF(t),s=Q_(e),r=Xm(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||xF(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=rB(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new FF,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=_B(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],sa[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ut.listen(this,"complete",Zm),Ut.listen(this,"progress",ez),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:s,_aspectRatio:r}=this;return q(e)?t&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ot}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():_m(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ym(this.canvas,this.ctx),this}stop(){return Ut.stop(this),this}resize(e,t){Ut.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,t,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,_m(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ee(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Q(t,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];t&&(r=r.concat(Object.keys(t).map(o=>{const a=t[o],l=Ad(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Q(r,o=>{const a=o.options,l=a.id,c=Ad(l,a),u=H(a.type,o.dtype);(a.position===void 0||Jm(a.position,c)!==Jm(o.dposition))&&(a.position=o.dposition),s[l]=!0;let d=null;if(l in i&&i[l].type===u)d=i[l];else{const f=Ot.getScale(u);d=new f({id:l,type:u,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),Q(s,(o,a)=>{o||delete i[a]}),Q(i,o=>{Le.configure(this,o,o.options),Le.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>t){for(let s=t;s<i;++s)this._destroyDatasetMeta(s);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(Qm("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,s)=>{t.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=t.length;i<s;i++){const r=t[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||wd(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Ot.getController(a),{datasetElementType:c,dataElementType:u}=ue.datasets[a];Object.assign(l,{dataElementType:Ot.getElement(u),datasetElementType:c&&Ot.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Q(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),f=!s&&r.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||Q(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Qm("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Q(this.scales,e=>{Le.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!cm(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of t){const o=i==="_removeElements"?-r:r;tz(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<t;r++)if(!cm(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Le.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],Q(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,Ln(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ut.has(this)?this.attached&&!Ut.running(this)&&Ut.start(this):(this.draw(),Zm({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let s,r;for(s=0,r=t.length;s<r;++s){const o=t[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i=e._clip,s=!i.disabled,r=iz(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&Xl(t,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),e.controller.draw(),s&&ec(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Qt(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,s){const r=X2.modes[t];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=jn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);Or(t)?(r.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Ut.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),ym(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete sa[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(r,o)=>{t.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Q(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){Q(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Q(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const s=i?"set":"remove";let r,o,a,l;for(t==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!gl(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const s=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=r(t,e),a=i?e:r(e,t);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:s=[],options:r}=this,o=t,a=this._getActiveElements(e,s,i,o),l=dB(e),c=nz(e,this._lastEvent,i,l);i&&(this._lastEvent=null,ee(r.onHover,[e,a,this],this),l&&ee(r.onClick,[e,a,this],this));const u=!gl(a,s);return(u||t)&&(this._active=a,this._updateHoverStyles(a,s,t)),this._lastEvent=c,u}_getActiveElements(e,t,i,s){if(e.type==="mouseout")return[];if(!i)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}}D(Ve,"defaults",ue),D(Ve,"instances",sa),D(Ve,"overrides",Ti),D(Ve,"registry",Ot),D(Ve,"version",ZF),D(Ve,"getChart",Xm);function eb(){return Q(Ve.instances,n=>n._plugins.invalidate())}function sz(n,e,t){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;n.beginPath(),n.arc(r,o,a,i-c,t+c),l>s?(c=s/l,n.arc(r,o,l,t+c,i-c,!0)):n.arc(r,o,s,t+he,i-he),n.closePath(),n.clip()}function rz(n){return ih(n,["outerStart","outerEnd","innerStart","innerEnd"])}function oz(n,e,t,i){const s=rz(n.options.borderRadius),r=(t-e)/2,o=Math.min(r,i*e/2),a=l=>{const c=(t-Math.min(r,l))*i/2;return Ae(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Ae(s.innerStart,0,o),innerEnd:Ae(s.innerEnd,0,o)}}function Ui(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function _l(n,e,t,i,s,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+i+t-c,0),f=u>0?u+i+t+c:0;let h=0;const p=s-l;if(i){const G=u>0?u-i:0,Y=d>0?d-i:0,Z=(G+Y)/2,Me=Z!==0?p*Z/(Z+i):p;h=(p-Me)/2}const g=Math.max(.001,p*d-t/ie)/d,m=(p-g)/2,b=l+m+h,y=s-m-h,{outerStart:v,outerEnd:x,innerStart:_,innerEnd:S}=oz(e,f,d,y-b),E=d-v,C=d-x,T=b+v/E,N=y-x/C,B=f+_,U=f+S,de=b+_/B,Re=y-S/U;if(n.beginPath(),r){const G=(T+N)/2;if(n.arc(o,a,d,T,G),n.arc(o,a,d,G,N),x>0){const Pe=Ui(C,N,o,a);n.arc(Pe.x,Pe.y,x,N,y+he)}const Y=Ui(U,y,o,a);if(n.lineTo(Y.x,Y.y),S>0){const Pe=Ui(U,Re,o,a);n.arc(Pe.x,Pe.y,S,y+he,Re+Math.PI)}const Z=(y-S/f+(b+_/f))/2;if(n.arc(o,a,f,y-S/f,Z,!0),n.arc(o,a,f,Z,b+_/f,!0),_>0){const Pe=Ui(B,de,o,a);n.arc(Pe.x,Pe.y,_,de+Math.PI,b-he)}const Me=Ui(E,b,o,a);if(n.lineTo(Me.x,Me.y),v>0){const Pe=Ui(E,T,o,a);n.arc(Pe.x,Pe.y,v,b-he,T)}}else{n.moveTo(o,a);const G=Math.cos(T)*d+o,Y=Math.sin(T)*d+a;n.lineTo(G,Y);const Z=Math.cos(N)*d+o,Me=Math.sin(N)*d+a;n.lineTo(Z,Me)}n.closePath()}function az(n,e,t,i,s){const{fullCircles:r,startAngle:o,circumference:a}=e;let l=e.endAngle;if(r){_l(n,e,t,i,l,s);for(let c=0;c<r;++c)n.fill();isNaN(a)||(l=o+(a%te||te))}return _l(n,e,t,i,l,s),n.fill(),l}function lz(n,e,t,i,s){const{fullCircles:r,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:f}=l,h=l.borderAlign==="inner";if(!c)return;n.setLineDash(d||[]),n.lineDashOffset=f,h?(n.lineWidth=c*2,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let p=e.endAngle;if(r){_l(n,e,t,i,p,s);for(let g=0;g<r;++g)n.stroke();isNaN(a)||(p=o+(a%te||te))}h&&sz(n,e,p),r||(_l(n,e,t,i,p,s),n.stroke())}class qs extends sn{constructor(t){super();D(this,"circumference");D(this,"endAngle");D(this,"fullCircles");D(this,"innerRadius");D(this,"outerRadius");D(this,"pixelMargin");D(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,s){const r=this.getProps(["x","y"],s),{angle:o,distance:a}=v_(r,{x:t,y:i}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:d,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),h=(this.options.spacing+this.options.borderWidth)/2,g=H(f,c-l)>=te||Rr(o,l,c),m=Yt(a,u+h,d+h);return g&&m}getCenterPoint(t){const{x:i,y:s,startAngle:r,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:u}=this.options,d=(r+o)/2,f=(a+l+u+c)/2;return{x:i+Math.cos(d)*f,y:s+Math.sin(d)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:i,circumference:s}=this,r=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>te?Math.floor(s/te):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(ie,s||0)),u=r*c;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,az(t,this,u,o,a),lz(t,this,u,o,a),t.restore()}}D(qs,"id","arc"),D(qs,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),D(qs,"defaultRoutes",{backgroundColor:"backgroundColor"}),D(qs,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function Z_(n,e,t=e){n.lineCap=H(t.borderCapStyle,e.borderCapStyle),n.setLineDash(H(t.borderDash,e.borderDash)),n.lineDashOffset=H(t.borderDashOffset,e.borderDashOffset),n.lineJoin=H(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=H(t.borderWidth,e.borderWidth),n.strokeStyle=H(t.borderColor,e.borderColor)}function cz(n,e,t){n.lineTo(t.x,t.y)}function uz(n){return n.stepped?PB:n.tension||n.cubicInterpolationMode==="monotone"?NB:cz}function X_(n,e,t={}){const i=n.length,{start:s=0,end:r=i-1}=t,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function dz(n,e,t,i){const{points:s,options:r}=e,{count:o,start:a,loop:l,ilen:c}=X_(s,t,i),u=uz(r);let{move:d=!0,reverse:f}=i||{},h,p,g;for(h=0;h<=c;++h)p=s[(a+(f?c-h:h))%o],!p.skip&&(d?(n.moveTo(p.x,p.y),d=!1):u(n,g,p,f,r.stepped),g=p);return l&&(p=s[(a+(f?c:0))%o],u(n,g,p,f,r.stepped)),!!l}function fz(n,e,t,i){const s=e.points,{count:r,start:o,ilen:a}=X_(s,t,i),{move:l=!0,reverse:c}=i||{};let u=0,d=0,f,h,p,g,m,b;const y=x=>(o+(c?a-x:x))%r,v=()=>{g!==m&&(n.lineTo(u,m),n.lineTo(u,g),n.lineTo(u,b))};for(l&&(h=s[y(0)],n.moveTo(h.x,h.y)),f=0;f<=a;++f){if(h=s[y(f)],h.skip)continue;const x=h.x,_=h.y,S=x|0;S===p?(_<g?g=_:_>m&&(m=_),u=(d*u+x)/++d):(v(),n.lineTo(x,_),p=S,d=0,g=m=_),b=_}v()}function kd(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?fz:dz}function hz(n){return n.stepped?f2:n.tension||n.cubicInterpolationMode==="monotone"?h2:Xn}function pz(n,e,t,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,t,i)&&s.closePath()),Z_(n,e.options),n.stroke(s)}function gz(n,e,t,i){const{segments:s,options:r}=e,o=kd(e);for(const a of s)Z_(n,r,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const mz=typeof Path2D=="function";function bz(n,e,t,i){mz&&!e.options.segment?pz(n,e,t,i):gz(n,e,t,i)}class Sn extends sn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;s2(this._points,i,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=v2(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,s=e[t],r=this.points,o=z_(this,{property:t,start:s,end:s});if(!o.length)return;const a=[],l=hz(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:f}=o[c],h=r[d],p=r[f];if(h===p){a.push(h);continue}const g=Math.abs((s-h[t])/(p[t]-h[t])),m=l(h,p,g,i.stepped);m[t]=e[t],a.push(m)}return a.length===1?a[0]:a}pathSegment(e,t,i){return kd(this)(e,this,t,i)}path(e,t,i){const s=this.segments,r=kd(this);let o=this._loop;t=t||0,i=i||this.points.length-t;for(const a of s)o&=r(e,this,a,{start:t,end:t+i-1});return!!o}draw(e,t,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),bz(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}D(Sn,"id","line"),D(Sn,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),D(Sn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),D(Sn,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function tb(n,e,t,i){const s=n.options,{[t]:r}=n.getProps([t],i);return Math.abs(e-r)<s.radius+s.hitRadius}class ra extends sn{constructor(t){super();D(this,"parsed");D(this,"skip");D(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(t-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,i){return tb(this,t,"x",i)}inYRange(t,i){return tb(this,t,"y",i)}getCenterPoint(t){const{x:i,y:s}=this.getProps(["x","y"],t);return{x:i,y:s}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const s=i&&t.borderWidth||0;return(i+s)*2}draw(t,i){const s=this.options;this.skip||s.radius<.1||!Qt(this,i,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,_d(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}D(ra,"id","point"),D(ra,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),D(ra,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function eS(n,e){const{x:t,y:i,base:s,width:r,height:o}=n.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return n.horizontal?(d=o/2,a=Math.min(t,s),l=Math.max(t,s),c=i-d,u=i+d):(d=r/2,a=t-d,l=t+d,c=Math.min(i,s),u=Math.max(i,s)),{left:a,top:c,right:l,bottom:u}}function wn(n,e,t,i){return n?0:Ae(e,t,i)}function yz(n,e,t){const i=n.options.borderWidth,s=n.borderSkipped,r=M_(i);return{t:wn(s.top,r.top,0,t),r:wn(s.right,r.right,0,e),b:wn(s.bottom,r.bottom,0,t),l:wn(s.left,r.left,0,e)}}function vz(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,r=_i(s),o=Math.min(e,t),a=n.borderSkipped,l=i||$(s);return{topLeft:wn(!l||a.top||a.left,r.topLeft,0,o),topRight:wn(!l||a.top||a.right,r.topRight,0,o),bottomLeft:wn(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:wn(!l||a.bottom||a.right,r.bottomRight,0,o)}}function xz(n){const e=eS(n),t=e.right-e.left,i=e.bottom-e.top,s=yz(n,t/2,i/2),r=vz(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:t-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function au(n,e,t,i){const s=e===null,r=t===null,a=n&&!(s&&r)&&eS(n,i);return a&&(s||Yt(e,a.left,a.right))&&(r||Yt(t,a.top,a.bottom))}function _z(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Sz(n,e){n.rect(e.x,e.y,e.w,e.h)}function lu(n,e,t={}){const i=n.x!==t.x?-e:0,s=n.y!==t.y?-e:0,r=(n.x+n.w!==t.x+t.w?e:0)-i,o=(n.y+n.h!==t.y+t.h?e:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+r,h:n.h+o,radius:n.radius}}class oa extends sn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=xz(this),a=_z(o.radius)?Pr:Sz;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,lu(o,t,r)),e.clip(),a(e,lu(r,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,lu(r,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,i){return au(this,e,t,i)}inXRange(e,t){return au(this,e,null,t)}inYRange(e,t){return au(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+s)/2:t,y:r?i:(i+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}D(oa,"id","bar"),D(oa,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),D(oa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var wz=Object.freeze({__proto__:null,ArcElement:qs,BarElement:oa,LineElement:Sn,PointElement:ra});const Ed=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],nb=Ed.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function tS(n){return Ed[n%Ed.length]}function nS(n){return nb[n%nb.length]}function Az(n,e){return n.borderColor=tS(e),n.backgroundColor=nS(e),++e}function kz(n,e){return n.backgroundColor=n.data.map(()=>tS(e++)),e}function Ez(n,e){return n.backgroundColor=n.data.map(()=>nS(e++)),e}function Cz(n){let e=0;return(t,i)=>{const s=n.getDatasetMeta(i).controller;s instanceof ci?e=kz(t,e):s instanceof fr?e=Ez(t,e):s&&(e=Az(t,e))}}function ib(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function Mz(n){return n&&(n.borderColor||n.backgroundColor)}var Tz={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:i},options:s}=n.config,{elements:r}=s;if(!t.forceOverride&&(ib(i)||Mz(s)||r&&ib(r)))return;const o=Cz(n);i.forEach(o)}};function Dz(n,e,t,i,s){const r=s.samples||i;if(r>=t)return n.slice(e,e+t);const o=[],a=(t-2)/(r-2);let l=0;const c=e+t-1;let u=e,d,f,h,p,g;for(o[l++]=n[u],d=0;d<r-2;d++){let m=0,b=0,y;const v=Math.floor((d+1)*a)+1+e,x=Math.min(Math.floor((d+2)*a)+1,t)+e,_=x-v;for(y=v;y<x;y++)m+=n[y].x,b+=n[y].y;m/=_,b/=_;const S=Math.floor(d*a)+1+e,E=Math.min(Math.floor((d+1)*a)+1,t)+e,{x:C,y:T}=n[u];for(h=p=-1,y=S;y<E;y++)p=.5*Math.abs((C-m)*(n[y].y-T)-(C-n[y].x)*(b-T)),p>h&&(h=p,f=n[y],g=y);o[l++]=f,u=g}return o[l++]=n[c],o}function Oz(n,e,t,i){let s=0,r=0,o,a,l,c,u,d,f,h,p,g;const m=[],b=e+t-1,y=n[e].x,x=n[b].x-y;for(o=e;o<e+t;++o){a=n[o],l=(a.x-y)/x*i,c=a.y;const _=l|0;if(_===u)c<p?(p=c,d=o):c>g&&(g=c,f=o),s=(r*s+a.x)/++r;else{const S=o-1;if(!q(d)&&!q(f)){const E=Math.min(d,f),C=Math.max(d,f);E!==h&&E!==S&&m.push({...n[E],x:s}),C!==h&&C!==S&&m.push({...n[C],x:s})}o>0&&S!==h&&m.push(n[S]),m.push(a),u=_,r=0,p=g=c,d=f=h=o}}return m}function iS(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function sb(n){n.data.datasets.forEach(e=>{iS(e)})}function Rz(n,e){const t=e.length;let i=0,s;const{iScale:r}=n,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(i=Ae(Jt(e,r.axis,o).lo,0,t-1)),c?s=Ae(Jt(e,r.axis,a).hi+1,i,t)-i:s=t-i,{start:i,count:s}}var Pz={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){sb(n);return}const i=n.width;n.data.datasets.forEach((s,r)=>{const{_data:o,indexAxis:a}=s,l=n.getDatasetMeta(r),c=o||s.data;if(Us([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=n.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:d,count:f}=Rz(l,c);const h=t.threshold||4*i;if(f<=h){iS(s);return}q(o)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(t.algorithm){case"lttb":p=Dz(c,d,f,i,t);break;case"min-max":p=Oz(c,d,f,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}s._decimated=p})},destroy(n){sb(n)}};function Nz(n,e,t){const i=n.segments,s=n.points,r=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=uh(l,c,s);const u=Cd(t,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const d=z_(e,u);for(const f of d){const h=Cd(t,r[f.start],r[f.end],f.loop),p=F_(a,s,h);for(const g of p)o.push({source:g,target:f,start:{[t]:rb(u,h,"start",Math.max)},end:{[t]:rb(u,h,"end",Math.min)}})}}return o}function Cd(n,e,t,i){if(i)return;let s=e[n],r=t[n];return n==="angle"&&(s=nt(s),r=nt(r)),{property:n,start:s,end:r}}function Iz(n,e){const{x:t=null,y:i=null}=n||{},s=e.points,r=[];return e.segments.forEach(({start:o,end:a})=>{a=uh(o,a,s);const l=s[o],c=s[a];i!==null?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):t!==null&&(r.push({x:t,y:l.y}),r.push({x:t,y:c.y}))}),r}function uh(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function rb(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function sS(n,e){let t=[],i=!1;return se(n)?(i=!0,t=n):t=Iz(n,e),t.length?new Sn({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function ob(n){return n&&n.fill!==!1}function Lz(n,e,t){let s=n[e].fill;const r=[e];let o;if(!t)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!ce(s))return s;if(o=n[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function Bz(n,e,t){const i=Vz(n);if($(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return ce(s)&&Math.floor(s)===s?Fz(i[0],e,s,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Fz(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function zz(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:$(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function Hz(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:$(n)?i=n.value:i=e.getBaseValue(),i}function Vz(n){const e=n.options,t=e.fill;let i=H(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function jz(n){const{scale:e,index:t,line:i}=n,s=[],r=i.segments,o=i.points,a=Wz(e,t);a.push(sS({x:null,y:e.bottom},i));for(let l=0;l<r.length;l++){const c=r[l];for(let u=c.start;u<=c.end;u++)Uz(s,o[u],a)}return new Sn({points:s,options:{}})}function Wz(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===e)break;r.hidden||t.unshift(r.dataset)}return t}function Uz(n,e,t){const i=[];for(let s=0;s<t.length;s++){const r=t[s],{first:o,last:a,point:l}=$z(r,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function $z(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const s=i[t],r=n.segments,o=n.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const u=r[c],d=o[u.start][t],f=o[u.end][t];if(Yt(s,d,f)){a=s===d,l=s===f;break}}return{first:a,last:l,point:i}}class rS{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:s,y:r,radius:o}=this;return t=t||{start:0,end:te},e.arc(s,r,o,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:s}=this,r=e.angle;return{x:t+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function qz(n){const{chart:e,fill:t,line:i}=n;if(ce(t))return Gz(e,t);if(t==="stack")return jz(n);if(t==="shape")return!0;const s=Kz(n);return s instanceof rS?s:sS(s,i)}function Gz(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function Kz(n){return(n.scale||{}).getPointPositionForValue?Jz(n):Yz(n)}function Yz(n){const{scale:e={},fill:t}=n,i=zz(t,e);if(ce(i)){const s=e.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function Jz(n){const{scale:e,fill:t}=n,i=e.options,s=e.getLabels().length,r=i.reverse?e.max:e.min,o=Hz(t,e,r),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,r);return new rS({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function cu(n,e,t){const i=qz(e),{line:s,scale:r,axis:o}=e,a=s.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:d=c}=l||{};i&&s.points.length&&(Xl(n,t),Qz(n,{line:s,target:i,above:u,below:d,area:t,scale:r,axis:o}),ec(n))}function Qz(n,e){const{line:t,target:i,above:s,below:r,area:o,scale:a}=e,l=t._loop?"angle":e.axis;n.save(),l==="x"&&r!==s&&(ab(n,i,o.top),lb(n,{line:t,target:i,color:s,scale:a,property:l}),n.restore(),n.save(),ab(n,i,o.bottom)),lb(n,{line:t,target:i,color:r,scale:a,property:l}),n.restore()}function ab(n,e,t){const{segments:i,points:s}=e;let r=!0,o=!1;n.beginPath();for(const a of i){const{start:l,end:c}=a,u=s[l],d=s[uh(l,c,s)];r?(n.moveTo(u.x,u.y),r=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function lb(n,e){const{line:t,target:i,property:s,color:r,scale:o}=e,a=Nz(t,i,s);for(const{source:l,target:c,start:u,end:d}of a){const{style:{backgroundColor:f=r}={}}=l,h=i!==!0;n.save(),n.fillStyle=f,Zz(n,o,h&&Cd(s,u,d)),n.beginPath();const p=!!t.pathSegment(n,l);let g;if(h){p?n.closePath():cb(n,i,d,s);const m=!!i.pathSegment(n,c,{move:p,reverse:!0});g=p&&m,g||cb(n,i,u,s)}n.closePath(),n.fill(g?"evenodd":"nonzero"),n.restore()}}function Zz(n,e,t){const{top:i,bottom:s}=e.chart.chartArea,{property:r,start:o,end:a}=t||{};r==="x"&&(n.beginPath(),n.rect(o,i,a-o,s-i),n.clip())}function cb(n,e,t,i){const s=e.interpolate(t,i);s&&n.lineTo(s.x,s.y)}var Xz={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,s=[];let r,o,a,l;for(o=0;o<i;++o)r=n.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof Sn&&(l={visible:n.isDatasetVisible(o),index:o,fill:Bz(a,o,i),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<i;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=Lz(s,o,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",s=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),i&&a.fill&&cu(n.ctx,a,r))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;ob(r)&&cu(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!ob(i)||t.drawTime!=="beforeDatasetDraw"||cu(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const ub=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},eH=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class db extends sn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=ee(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=xe(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=ub(i,r);let c,u;t.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let d=e;r.textAlign="left",r.textBaseline="middle";let f=-1,h=-u;return this.legendItems.forEach((p,g)=>{const m=i+t/2+r.measureText(p.text).width;(g===0||c[c.length-1]+m+2*a>o)&&(d+=u,c[c.length-(g>0?0:1)]=0,h+=u,f++),l[g]={left:0,top:h,row:f,width:m,height:s},c[c.length-1]+=m+a}),d}_fitCols(e,t,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,f=0,h=0,p=0,g=0;return this.legendItems.forEach((m,b)=>{const{itemWidth:y,itemHeight:v}=tH(i,t,r,m,s);b>0&&h+v+2*a>u&&(d+=f+a,c.push({width:f,height:h}),p+=f+a,g++,f=h=0),l[b]={left:p,top:h,col:g,width:y,height:v},f=Math.max(f,y),h+=v+a}),d+=f,c.push({width:f,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:s},rtl:r}}=this,o=is(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ne(i,this.left+s,this.right-this.lineWidths[a]);for(const c of t)a!==c.row&&(a=c.row,l=Ne(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Ne(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of t)c.col!==a&&(a=c.col,l=Ne(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Xl(e,this),this._draw(),ec(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,a=ue.color,l=is(e.rtl,this.left,this.width),c=xe(o.font),{padding:u}=o,d=c.size,f=d/2;let h;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:p,boxHeight:g,itemHeight:m}=ub(o,d),b=function(S,E,C){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;s.save();const T=H(C.lineWidth,1);if(s.fillStyle=H(C.fillStyle,a),s.lineCap=H(C.lineCap,"butt"),s.lineDashOffset=H(C.lineDashOffset,0),s.lineJoin=H(C.lineJoin,"miter"),s.lineWidth=T,s.strokeStyle=H(C.strokeStyle,a),s.setLineDash(H(C.lineDash,[])),o.usePointStyle){const N={radius:g*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:T},B=l.xPlus(S,p/2),U=E+f;C_(s,N,B,U,o.pointStyleWidth&&p)}else{const N=E+Math.max((d-g)/2,0),B=l.leftForLtr(S,p),U=_i(C.borderRadius);s.beginPath(),Object.values(U).some(de=>de!==0)?Pr(s,{x:B,y:N,w:p,h:g,radius:U}):s.rect(B,N,p,g),s.fill(),T!==0&&s.stroke()}s.restore()},y=function(S,E,C){Di(s,C.text,S,E+m/2,c,{strikethrough:C.hidden,textAlign:l.textAlign(C.textAlign)})},v=this.isHorizontal(),x=this._computeTitleHeight();v?h={x:Ne(r,this.left+u,this.right-i[0]),y:this.top+u+x,line:0}:h={x:this.left+u,y:Ne(r,this.top+x+u,this.bottom-t[0].height),line:0},I_(this.ctx,e.textDirection);const _=m+u;this.legendItems.forEach((S,E)=>{s.strokeStyle=S.fontColor,s.fillStyle=S.fontColor;const C=s.measureText(S.text).width,T=l.textAlign(S.textAlign||(S.textAlign=o.textAlign)),N=p+f+C;let B=h.x,U=h.y;l.setWidth(this.width),v?E>0&&B+N+u>this.right&&(U=h.y+=_,h.line++,B=h.x=Ne(r,this.left+u,this.right-i[h.line])):E>0&&U+_>this.bottom&&(B=h.x=B+t[h.line].width+u,h.line++,U=h.y=Ne(r,this.top+x+u,this.bottom-t[h.line].height));const de=l.x(B);if(b(de,U,S),B=SB(T,B+p+f,v?B+N:this.right,e.rtl),y(l.x(B),U,S),v)h.x+=N+u;else if(typeof S.text!="string"){const Re=c.lineHeight;h.y+=oS(S,Re)+u}else h.y+=_}),L_(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=xe(t.font),s=ze(t.padding);if(!t.display)return;const r=is(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=i.size/2,c=s.top+l;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,d=Ne(e.align,d,this.right-f);else{const p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);u=c+Ne(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const h=Ne(a,d,d+f);o.textAlign=r.textAlign(th(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,Di(o,t.text,h,u,i)}_computeTitleHeight(){const e=this.options.title,t=xe(e.font),i=ze(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,s,r;if(Yt(e,this.left,this.right)&&Yt(t,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Yt(e,s.left,s.left+s.width)&&Yt(t,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!sH(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=eH(s,i);s&&!r&&ee(t.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&ee(t.onHover,[e,i,this],this)}else i&&ee(t.onClick,[e,i,this],this)}}function tH(n,e,t,i,s){const r=nH(i,n,e,t),o=iH(s,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function nH(n,e,t,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),e+t.size/2+i.measureText(s).width}function iH(n,e,t){let i=n;return typeof e.text!="string"&&(i=oS(e,t)),i}function oS(n,e){const t=n.text?n.text.length:0;return e*t}function sH(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var rH={id:"legend",_element:db,start(n,e,t){const i=n.legend=new db({ctx:n.ctx,options:t,chart:n});Le.configure(n,i,t),Le.addBox(n,i)},stop(n){Le.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;Le.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,s=t.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(t?0:void 0),u=ze(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class dh extends sn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const s=se(i.text)?i.text.length:1;this._padding=ze(i.padding);const r=s*xe(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Ne(a,i,r),d=t+e,c=r-i):(o.position==="left"?(u=i+e,d=Ne(a,s,t),l=ie*-.5):(u=r-e,d=Ne(a,t,s),l=ie*.5),c=s-t),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=xe(t.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Di(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:th(t.align),textBaseline:"middle",translation:[o,a]})}}function oH(n,e){const t=new dh({ctx:n.ctx,options:e,chart:n});Le.configure(n,t,e),Le.addBox(n,t),n.titleBlock=t}var aH={id:"title",_element:dh,start(n,e,t){oH(n,t)},stop(n){const e=n.titleBlock;Le.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;Le.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Io=new WeakMap;var lH={id:"subtitle",start(n,e,t){const i=new dh({ctx:n.ctx,options:t,chart:n});Le.configure(n,i,t),Le.addBox(n,i),Io.set(n,i)},stop(n){Le.removeBox(n,Io.get(n)),Io.delete(n)},beforeUpdate(n,e,t){const i=Io.get(n);Le.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Gs={average(n){if(!n.length)return!1;let e,t,i=new Set,s=0,r=0;for(e=0,t=n.length;e<t;++e){const a=n[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),s+=l.y,++r}}return{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/r}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=n.length;r<o;++r){const l=n[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=vd(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function Et(n,e){return e&&(se(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function $t(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function cH(n,e){const{element:t,datasetIndex:i,index:s}=e,r=n.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:n,label:o,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:t}}function fb(n,e){const t=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:o,boxHeight:a}=e,l=xe(e.bodyFont),c=xe(e.titleFont),u=xe(e.footerFont),d=r.length,f=s.length,h=i.length,p=ze(e.padding);let g=p.height,m=0,b=i.reduce((x,_)=>x+_.before.length+_.lines.length+_.after.length,0);if(b+=n.beforeBody.length+n.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),b){const x=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=h*x+(b-h)*l.lineHeight+(b-1)*e.bodySpacing}f&&(g+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let y=0;const v=function(x){m=Math.max(m,t.measureText(x).width+y)};return t.save(),t.font=c.string,Q(n.title,v),t.font=l.string,Q(n.beforeBody.concat(n.afterBody),v),y=e.displayColors?o+2+e.boxPadding:0,Q(i,x=>{Q(x.before,v),Q(x.lines,v),Q(x.after,v)}),y=0,t.font=u.string,Q(n.footer,v),t.restore(),m+=p.width,{width:m,height:g}}function uH(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function dH(n,e,t,i){const{x:s,width:r}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&s+r+o>e.width||n==="right"&&s-r-o<0)return!0}function fH(n,e,t,i){const{x:s,width:r}=t,{width:o,chartArea:{left:a,right:l}}=n;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),dH(c,n,e,t)&&(c="center"),c}function hb(n,e,t){const i=t.yAlign||e.yAlign||uH(n,t);return{xAlign:t.xAlign||e.xAlign||fH(n,e,t,i),yAlign:i}}function hH(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function pH(n,e,t){let{y:i,height:s}=n;return e==="top"?i+=t:e==="bottom"?i-=s+t:i-=s/2,i}function pb(n,e,t,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,c=s+r,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:h}=_i(o);let p=hH(e,a);const g=pH(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,f)+s:a==="right"&&(p+=Math.max(d,h)+s),{x:Ae(p,0,i.width-e.width),y:Ae(g,0,i.height-e.height)}}function Lo(n,e,t){const i=ze(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function gb(n){return Et([],$t(n))}function gH(n,e,t){return jn(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function mb(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const aS={beforeTitle:jt,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:jt,beforeBody:jt,beforeLabel:jt,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return q(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:jt,afterBody:jt,beforeFooter:jt,footer:jt,afterFooter:jt};function Ke(n,e,t,i){const s=n[e].call(t,i);return typeof s>"u"?aS[e].call(t,i):s}class Md extends sn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&t.options.animation&&i.animations,r=new H_(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=gH(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,s=Ke(i,"beforeTitle",this,e),r=Ke(i,"title",this,e),o=Ke(i,"afterTitle",this,e);let a=[];return a=Et(a,$t(s)),a=Et(a,$t(r)),a=Et(a,$t(o)),a}getBeforeBody(e,t){return gb(Ke(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,s=[];return Q(e,r=>{const o={before:[],lines:[],after:[]},a=mb(i,r);Et(o.before,$t(Ke(a,"beforeLabel",this,r))),Et(o.lines,Ke(a,"label",this,r)),Et(o.after,$t(Ke(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,t){return gb(Ke(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,s=Ke(i,"beforeFooter",this,e),r=Ke(i,"footer",this,e),o=Ke(i,"afterFooter",this,e);let a=[];return a=Et(a,$t(s)),a=Et(a,$t(r)),a=Et(a,$t(o)),a}_createItems(e){const t=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=t.length;l<c;++l)a.push(cH(this.chart,t[l]));return e.filter&&(a=a.filter((u,d,f)=>e.filter(u,d,f,i))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,i))),Q(a,u=>{const d=mb(e.callbacks,u);s.push(Ke(d,"labelColor",this,u)),r.push(Ke(d,"labelPointStyle",this,u)),o.push(Ke(d,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=Gs[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=fb(this,i),c=Object.assign({},a,l),u=hb(this.chart,i,c),d=pb(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,s){const r=this.getCaretPosition(e,i,s);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=_i(a),{x:f,y:h}=e,{width:p,height:g}=t;let m,b,y,v,x,_;return r==="center"?(x=h+g/2,s==="left"?(m=f,b=m-o,v=x+o,_=x-o):(m=f+p,b=m+o,v=x-o,_=x+o),y=m):(s==="left"?b=f+Math.max(l,u)+o:s==="right"?b=f+p-Math.max(c,d)-o:b=this.caretX,r==="top"?(v=h,x=v-o,m=b-o,y=b+o):(v=h+g,x=v+o,m=b+o,y=b-o),_=v),{x1:m,x2:b,x3:y,y1:v,y2:x,y3:_}}drawTitle(e,t,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=is(i.rtl,this.x,this.width);for(e.x=Lo(this,i.titleAlign,i),t.textAlign=c.textAlign(i.titleAlign),t.textBaseline="middle",o=xe(i.titleFont),a=i.titleSpacing,t.fillStyle=i.titleColor,t.font=o.string,l=0;l<r;++l)t.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,t,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,u=xe(r.bodyFont),d=Lo(this,"left",r),f=s.x(d),h=l<u.lineHeight?(u.lineHeight-l)/2:0,p=t.y+h;if(r.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=s.leftForLtr(f,c)+c/2,b=p+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,_d(e,g,m,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,_d(e,g,m,b)}else{e.lineWidth=$(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=s.leftForLtr(f,c),m=s.leftForLtr(s.xPlus(f,1),c-2),b=_i(o.borderRadius);Object.values(b).some(y=>y!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Pr(e,{x:g,y:p,w:c,h:l,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Pr(e,{x:m,y:p+1,w:c-2,h:l-2,radius:b}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(g,p,c,l),e.strokeRect(g,p,c,l),e.fillStyle=o.backgroundColor,e.fillRect(m,p+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,d=xe(i.bodyFont);let f=d.lineHeight,h=0;const p=is(i.rtl,this.x,this.width),g=function(C){t.fillText(C,p.x(e.x+h),e.y+f/2),e.y+=f+r},m=p.textAlign(o);let b,y,v,x,_,S,E;for(t.textAlign=o,t.textBaseline="middle",t.font=d.string,e.x=Lo(this,m,i),t.fillStyle=i.bodyColor,Q(this.beforeBody,g),h=a&&m!=="right"?o==="center"?c/2+u:c+2+u:0,x=0,S=s.length;x<S;++x){for(b=s[x],y=this.labelTextColors[x],t.fillStyle=y,Q(b.before,g),v=b.lines,a&&v.length&&(this._drawColorBox(t,e,x,p,i),f=Math.max(d.lineHeight,l)),_=0,E=v.length;_<E;++_)g(v[_]),f=d.lineHeight;Q(b.after,g)}h=0,f=d.lineHeight,Q(this.afterBody,g),e.y-=r}drawFooter(e,t,i){const s=this.footer,r=s.length;let o,a;if(r){const l=is(i.rtl,this.x,this.width);for(e.x=Lo(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=l.textAlign(i.footerAlign),t.textBaseline="middle",o=xe(i.footerFont),t.fillStyle=i.footerColor,t.font=o.string,a=0;a<r;++a)t.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,t,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:d,topRight:f,bottomLeft:h,bottomRight:p}=_i(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(a+d,l),o==="top"&&this.drawCaret(e,t,i,s),t.lineTo(a+c-f,l),t.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&r==="right"&&this.drawCaret(e,t,i,s),t.lineTo(a+c,l+u-p),t.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(e,t,i,s),t.lineTo(a+h,l+u),t.quadraticCurveTo(a,l+u,a,l+u-h),o==="center"&&r==="left"&&this.drawCaret(e,t,i,s),t.lineTo(a,l+d),t.quadraticCurveTo(a,l,a+d,l),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=Gs[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=fb(this,e),l=Object.assign({},o,this._size),c=hb(t,e,l),u=pb(e,l,c,t);(s._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=ze(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,t),I_(e,t.textDirection),r.y+=o.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),L_(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!gl(i,s),o=this._positionChanged(s,t);(r||o)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,t,i),a=this._positionChanged(o,e),l=t||!gl(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:i,caretY:s,options:r}=this,o=Gs[r.position].call(this,e,t);return o!==!1&&(i!==o.x||s!==o.y)}}D(Md,"positioners",Gs);var mH={id:"tooltip",_element:Md,positioners:Gs,afterInit(n,e,t){t&&(n.tooltip=new Md({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:aS},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},bH=Object.freeze({__proto__:null,Colors:Tz,Decimation:Pz,Filler:Xz,Legend:rH,SubTitle:lH,Title:aH,Tooltip:mH});const yH=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function vH(n,e,t,i){const s=n.indexOf(e);if(s===-1)return yH(n,e,t,i);const r=n.lastIndexOf(e);return s!==r?t:s}const xH=(n,e)=>n===null?null:Ae(Math.round(n),0,e);function bb(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class Td extends Bi{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:s,label:r}of t)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(q(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:vH(i,e,H(t,e),this._addedLabels),xH(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=t;o++)s.push({value:o});return s}getLabelForValue(e){return bb.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}D(Td,"id","category"),D(Td,"defaults",{ticks:{callback:bb}});function _H(n,e){const t=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:f}=n,h=r||1,p=u-1,{min:g,max:m}=e,b=!q(o),y=!q(a),v=!q(c),x=(m-g)/(d+1);let _=dm((m-g)/p/h)*h,S,E,C,T;if(_<1e-14&&!b&&!y)return[{value:g},{value:m}];T=Math.ceil(m/_)-Math.floor(g/_),T>p&&(_=dm(T*_/p/h)*h),q(l)||(S=Math.pow(10,l),_=Math.ceil(_*S)/S),s==="ticks"?(E=Math.floor(g/_)*_,C=Math.ceil(m/_)*_):(E=g,C=m),b&&y&&r&&gB((a-o)/r,_/1e3)?(T=Math.round(Math.min((a-o)/_,u)),_=(a-o)/T,E=o,C=a):v?(E=b?o:E,C=y?a:C,T=c-1,_=(C-E)/T):(T=(C-E)/_,cr(T,Math.round(T),_/1e3)?T=Math.round(T):T=Math.ceil(T));const N=Math.max(fm(_),fm(E));S=Math.pow(10,q(l)?N:l),E=Math.round(E*S)/S,C=Math.round(C*S)/S;let B=0;for(b&&(f&&E!==o?(t.push({value:o}),E<o&&B++,cr(Math.round((E+B*_)*S)/S,o,yb(o,x,n))&&B++):E<o&&B++);B<T;++B){const U=Math.round((E+B*_)*S)/S;if(y&&U>a)break;t.push({value:U})}return y&&f&&C!==a?t.length&&cr(t[t.length-1].value,a,yb(a,x,n))?t[t.length-1].value=a:t.push({value:a}):(!y||C===a)&&t.push({value:C}),t}function yb(n,e,{horizontal:t,minRotation:i}){const s=mt(i),r=(t?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+n).length;return Math.min(e/r,o)}class Sl extends Bi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return q(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=t?s:l,a=l=>r=i?r:l;if(e){const l=Bt(s),c=Bt(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},r=this._range||this,o=_H(s,r);return e.bounds==="ticks"&&y_(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-t)/Math.max(e.length-1,1)/2;t-=s,i+=s}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return Qr(e,this.chart.options.locale,this.options.ticks.format)}}class Dd extends Sl{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ce(e)?e:0,this.max=ce(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=mt(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}D(Dd,"id","linear"),D(Dd,"defaults",{ticks:{callback:Zl.formatters.numeric}});const Ir=n=>Math.floor(_n(n)),Kn=(n,e)=>Math.pow(10,Ir(n)+e);function vb(n){return n/Math.pow(10,Ir(n))===1}function xb(n,e,t){const i=Math.pow(10,t),s=Math.floor(n/i);return Math.ceil(e/i)-s}function SH(n,e){const t=e-n;let i=Ir(t);for(;xb(n,e,i)>10;)i++;for(;xb(n,e,i)<10;)i--;return Math.min(i,Ir(n))}function wH(n,{min:e,max:t}){e=tt(n.min,e);const i=[],s=Ir(e);let r=SH(e,t),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,r)),f=tt(n.min,Math.round((l+u+d*Math.pow(10,r))*o)/o);for(;f<t;)i.push({value:f,major:vb(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(r++,d=2,o=r>=0?1:o),f=Math.round((l+u+d*Math.pow(10,r))*o)/o;const h=tt(n.max,f);return i.push({value:h,major:vb(h),significand:d}),i}class Od extends Bi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=Sl.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return ce(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ce(e)?Math.max(0,e):null,this.max=ce(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ce(this._userMin)&&(this.min=e===Kn(this.min,0)?Kn(this.min,-1):Kn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=e?i:a,o=a=>s=t?s:a;i===s&&(i<=0?(r(1),o(10)):(r(Kn(i,-1)),o(Kn(s,1)))),i<=0&&r(Kn(s,-1)),s<=0&&o(Kn(i,1)),this.min=i,this.max=s}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},i=wH(t,this);return e.bounds==="ticks"&&y_(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Qr(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=_n(e),this._valueRange=_n(this.max)-_n(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(_n(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}D(Od,"id","logarithmic"),D(Od,"defaults",{ticks:{callback:Zl.formatters.logarithmic,major:{enabled:!0}}});function Rd(n){const e=n.ticks;if(e.display&&n.display){const t=ze(e.backdropPadding);return H(e.font&&e.font.size,ue.font.size)+t.height}return 0}function AH(n,e,t){return t=se(t)?t:[t],{w:RB(n,e.string,t),h:t.length*e.lineHeight}}function _b(n,e,t,i,s){return n===i||n===s?{start:e-t/2,end:e+t/2}:n<i||n>s?{start:e-t,end:e}:{start:e,end:e+t}}function kH(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],s=[],r=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?ie/r:0;for(let l=0;l<r;l++){const c=o.setContext(n.getPointLabelContext(l));s[l]=c.padding;const u=n.getPointPosition(l,n.drawingArea+s[l],a),d=xe(c.font),f=AH(n.ctx,d,n._pointLabels[l]);i[l]=f;const h=nt(n.getIndexAngle(l)+a),p=Math.round(Xf(h)),g=_b(p,u.x,f.w,0,180),m=_b(p,u.y,f.h,90,270);EH(t,e,h,g,m)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=TH(n,i,s)}function EH(n,e,t,i,s){const r=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/r,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,n.r=Math.max(n.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,n.t=Math.min(n.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,n.b=Math.max(n.b,e.b+l))}function CH(n,e,t){const i=n.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=t,l=n.getPointPosition(e,i+s+o,r),c=Math.round(Xf(nt(l.angle+he))),u=RH(l.y,a.h,c),d=DH(c),f=OH(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:f,top:u,right:f+a.w,bottom:u+a.h}}function MH(n,e){if(!e)return!0;const{left:t,top:i,right:s,bottom:r}=n;return!(Qt({x:t,y:i},e)||Qt({x:t,y:r},e)||Qt({x:s,y:i},e)||Qt({x:s,y:r},e))}function TH(n,e,t){const i=[],s=n._pointLabels.length,r=n.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:Rd(r)/2,additionalAngle:o?ie/s:0};let c;for(let u=0;u<s;u++){l.padding=t[u],l.size=e[u];const d=CH(n,u,l);i.push(d),a==="auto"&&(d.visible=MH(d,c),d.visible&&(c=d))}return i}function DH(n){return n===0||n===180?"center":n<180?"left":"right"}function OH(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function RH(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function PH(n,e,t){const{left:i,top:s,right:r,bottom:o}=t,{backdropColor:a}=e;if(!q(a)){const l=_i(e.borderRadius),c=ze(e.backdropPadding);n.fillStyle=a;const u=i-c.left,d=s-c.top,f=r-i+c.width,h=o-s+c.height;Object.values(l).some(p=>p!==0)?(n.beginPath(),Pr(n,{x:u,y:d,w:f,h,radius:l}),n.fill()):n.fillRect(u,d,f,h)}}function NH(n,e){const{ctx:t,options:{pointLabels:i}}=n;for(let s=e-1;s>=0;s--){const r=n._pointLabelItems[s];if(!r.visible)continue;const o=i.setContext(n.getPointLabelContext(s));PH(t,o,r);const a=xe(o.font),{x:l,y:c,textAlign:u}=r;Di(t,n._pointLabels[s],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function lS(n,e,t,i){const{ctx:s}=n;if(t)s.arc(n.xCenter,n.yCenter,e,0,te);else{let r=n.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=n.getPointPosition(o,e),s.lineTo(r.x,r.y)}}function IH(n,e,t,i,s){const r=n.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||t<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash),r.lineDashOffset=s.dashOffset,r.beginPath(),lS(n,t,o,i),r.closePath(),r.stroke(),r.restore())}function LH(n,e,t){return jn(n,{label:t,index:e,type:"pointLabel"})}class Ks extends Sl{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ze(Rd(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=ce(e)&&!isNaN(e)?e:0,this.max=ce(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Rd(this.options))}generateTickLabels(e){Sl.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const s=ee(this.options.pointLabels.callback,[t,i],this);return s||s===0?s:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?kH(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,s){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,s))}getIndexAngle(e){const t=te/(this._pointLabels.length||1),i=this.options.startAngle||0;return nt(e*t+mt(i))}getDistanceFromCenterForValue(e){if(q(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(q(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return LH(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const s=this.getIndexAngle(e)-he+i;return{x:Math.cos(s)*t+this.xCenter,y:Math.sin(s)*t+this.yCenter,angle:s}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:t,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),lS(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:s,border:r}=t,o=this._pointLabels.length;let a,l,c;if(t.pointLabels.display&&NH(this,o),s.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(d),h=s.setContext(f),p=r.setContext(f);IH(this,h,l,o,p)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:f}=u;!f||!d||(e.lineWidth=f,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const c=i.setContext(this.getContext(l)),u=xe(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const d=ze(c.backdropPadding);e.fillRect(-o/2-d.left,-r-u.size/2-d.top,o+d.width,u.size+d.height)}Di(e,a.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}D(Ks,"id","radialLinear"),D(Ks,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Zl.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),D(Ks,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),D(Ks,"descriptors",{angleLines:{_fallback:"grid"}});const nc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Je=Object.keys(nc);function Sb(n,e){return n-e}function wb(n,e){if(q(e))return null;const t=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),ce(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(s&&(o=s==="week"&&(bs(r)||r===!0)?t.startOf(o,"isoWeek",r):t.startOf(o,s)),+o)}function Ab(n,e,t,i){const s=Je.length;for(let r=Je.indexOf(n);r<s-1;++r){const o=nc[Je[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return Je[r]}return Je[s-1]}function BH(n,e,t,i,s){for(let r=Je.length-1;r>=Je.indexOf(t);r--){const o=Je[r];if(nc[o].common&&n._adapter.diff(s,i,o)>=e-1)return o}return Je[t?Je.indexOf(t):0]}function FH(n){for(let e=Je.indexOf(n)+1,t=Je.length;e<t;++e)if(nc[Je[e]].common)return Je[e]}function kb(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:s}=eh(t,e),r=t[i]>=e?t[i]:t[s];n[r]=!0}}function zH(n,e,t,i){const s=n._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=t[a],l>=0&&(e[l].major=!0);return e}function Eb(n,e,t){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return r===0||!t?i:zH(n,i,s,t)}class Lr extends Bi{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),s=this._adapter=new K2._date(e.adapters.date);s.init(t),lr(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:wb(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=ce(s)&&!isNaN(s)?s:+t.startOf(Date.now(),i),r=ce(r)&&!isNaN(r)?r:+t.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=vB(s,r,o);return this._unit=t.unit||(i.autoSkip?Ab(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):BH(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:FH(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),Eb(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?t=1-s:t=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Ae(t,0,o),i=Ae(i,0,o),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||Ab(r.minUnit,t,i,this._getLabelCapacity(t)),a=H(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=bs(l)||l===!0,u={};let d=t,f,h;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(i,t,o)>1e5*a)throw new Error(t+" and "+i+" are too far apart with stepSize of "+a+" "+o);const p=s.ticks.source==="data"&&this.getDataTimestamps();for(f=d,h=0;f<i;f=+e.add(f,a,o),h++)kb(u,f,p);return(f===i||s.bounds==="ticks"||h===1)&&kb(u,f,p),Object.keys(u).sort(Sb).map(g=>+g)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,r=this._unit,o=t||s[r];return this._adapter.format(e,o)}_tickFormatFunction(e,t,i,s){const r=this.options,o=r.ticks.callback;if(o)return ee(o,[e,t,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],f=i[t],h=c&&d&&f&&f.major;return this._adapter.format(e,s||(h?d:u))}generateTickLabels(e){let t,i,s;for(t=0,i=e.length;t<i;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,s=mt(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,s=i[t.unit]||i.millisecond,r=this._tickFormatFunction(e,0,Eb(this,[e],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,i=s.length;t<i;++t)e=e.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const s=this.getLabels();for(t=0,i=s.length;t<i;++t)e.push(wb(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return __(e.sort(Sb))}}D(Lr,"id","time"),D(Lr,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Bo(n,e,t){let i=0,s=n.length-1,r,o,a,l;t?(e>=n[i].pos&&e<=n[s].pos&&({lo:i,hi:s}=Jt(n,"pos",e)),{pos:r,time:a}=n[i],{pos:o,time:l}=n[s]):(e>=n[i].time&&e<=n[s].time&&({lo:i,hi:s}=Jt(n,"time",e)),{time:r,pos:a}=n[i],{time:o,pos:l}=n[s]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class Pd extends Lr{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Bo(t,this.min),this._tableRange=Bo(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,s=[],r=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=i&&s.push(c);if(s.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Bo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Bo(this._table,i*this._tableRange+this._minPos,!0)}}D(Pd,"id","timeseries"),D(Pd,"defaults",Lr.defaults);var HH=Object.freeze({__proto__:null,CategoryScale:Td,LinearScale:Dd,LogarithmicScale:Od,RadialLinearScale:Ks,TimeScale:Lr,TimeSeriesScale:Pd});const VH=[G2,wz,bH,HH];Ve.register(...VH);const jH=n=>({nationData:[],filteredNationData:[],worldYearData:[],currentNationsPage:1,totalNationsPages:1,paginatedNations:[],colors:["rgb(237,116,0)","rgb(212, 145, 255)","rgb(179,4,16)","rgb(0,94,152)","rgb(0,129,57)"],async getNationData(){return await(await fetch(`${n=="admin"?"":"/"+n}/world-athletes-data-list`)).json()},async getWorldYearData(){return await(await fetch(`${n=="admin"?"":"/"+n}/world-athletes-year-data`)).json()},createGraph(){const e=document.getElementById("usernationgraph").getContext("2d"),t=this.nationData.map(o=>o.name),i=this.nationData.map(o=>o.athletes),r={type:"pie",data:{labels:t,datasets:[{label:"Athletes",data:i,backgroundColor:this.colors,hoverOffset:4}]}};new Ve(e,r)},searchNationByValue(e){const t=e.target.value.toLowerCase();t!=""?(this.filteredNationData=this.nationData.filter(i=>i.name.toLowerCase().includes(t)),this.updateNations()):(this.filteredNationData=this.nationData,this.updateNations())},nextPage(){this.currentNationsPage<this.totalNationsPages&&(this.currentNationsPage++,this.updateNations())},previousPage(){this.currentNationsPage>1&&(this.currentNationsPage--,this.updateNations())},updateNations(){const e=(this.currentNationsPage-1)*10;this.totalNationsPages=Math.ceil(this.filteredNationData.length/10),this.paginatedNations=this.filteredNationData.slice(e,e+10)},async init(){console.log("usernationgraph initialized"),this.nationData=await this.getNationData(),this.worldYearData=await this.getWorldYearData(),this.createGraph(),this.filteredNationData=this.nationData,this.totalNationsPages=Math.ceil(this.filteredNationData.length/10),this.updateNations(),this.$dispatch("usernationgraph-data",this.nationData)}}),WH=(n,e,t)=>({nation:null,academyData:[],filteredAcademyData:[],nationYearData:[],currentAcademiesPage:1,totalAcademiesPages:1,paginatedAcademies:[],colors:["rgb(237,116,0)","rgb(212, 145, 255)","rgb(179,4,16)","rgb(0,94,152)","rgb(0,129,57)"],async getNationYearData(){return await(await fetch(`${n=="admin"?"":"/"+n}/nations/${e.id}/athletes-year-data`)).json()},createGraph(){const i=document.getElementById("useracademygraph").getContext("2d"),s=this.academyData.map(l=>l.name),r=this.academyData.map(l=>l.athletes),a={type:"pie",data:{labels:s,datasets:[{label:"Athletes",data:r,backgroundColor:this.colors,hoverOffset:4}]}};new Ve(i,a)},searchAcademyByValue(i){const s=i.target.value.toLowerCase();s!=""?(this.filteredAcademyData=this.academyData.filter(r=>r.name.toLowerCase().includes(s)),this.updateAcademies()):(this.filteredAcademyData=this.academyData,this.updateAcademies())},nextPage(){this.currentAcademiesPage<this.totalAcademiesPages&&(this.currentAcademiesPage++,this.updateAcademies())},previousPage(){this.currentAcademiesPage>1&&(this.currentAcademiesPage--,this.updateAcademies())},updateAcademies(){const i=(this.currentAcademiesPage-1)*10;this.totalAcademiesPages=Math.ceil(this.filteredAcademyData.length/10),this.paginatedAcademies=this.filteredAcademyData.slice(i,i+10)},async init(){console.log("useracademygraph initialized"),this.nation=e,console.log(e.name),this.academyData=t,this.nationYearData=await this.getNationYearData(),this.createGraph(),this.filteredAcademyData=this.academyData,this.totalAcademiesPages=Math.ceil(this.filteredAcademyData.length/10),this.updateAcademies(),this.$dispatch("useracademygraph-data",this.academyData)}}),UH=(n,e,t)=>({academy:null,schoolData:[],filteredSchoolData:[],academyYearData:[],currentSchoolsPage:1,totalSchoolsPages:1,paginatedSchools:[],colors:["rgb(237,116,0)","rgb(212, 145, 255)","rgb(179,4,16)","rgb(0,94,152)","rgb(0,129,57)"],async getAcademyYearData(){return await(await fetch(`${n=="admin"?"":"/"+n}/academies/${e.id}/athletes-year-data`)).json()},createGraph(){const i=document.getElementById("userschoolgraph").getContext("2d"),s=this.schoolData.map(l=>l.name),r=this.schoolData.map(l=>l.athletes),a={type:"pie",data:{labels:s,datasets:[{label:"Athletes",data:r,backgroundColor:this.colors,hoverOffset:4}]}};new Ve(i,a)},searchSchoolByValue(i){const s=i.target.value.toLowerCase();s!=""?(this.filteredSchoolData=this.schoolData.filter(r=>r.name.toLowerCase().includes(s)),this.updateSchools()):(this.filteredSchoolData=this.schoolData,this.updateSchools())},nextPage(){this.currentSchoolsPage<this.totalSchoolsPages&&(this.currentSchoolsPage++,this.updateSchools())},previousPage(){this.currentSchoolsPage>1&&(this.currentSchoolsPage--,this.updateSchools())},updateSchools(){const i=(this.currentSchoolsPage-1)*10;this.totalSchoolsPages=Math.ceil(this.filteredSchoolData.length/10),this.paginatedSchools=this.filteredSchoolData.slice(i,i+10)},async init(){console.log("userschoolgraph initialized"),this.academy=e,console.log(e.name),this.schoolData=t,this.academyYearData=await this.getAcademyYearData(),this.createGraph(),this.filteredSchoolData=this.schoolData,this.totalSchoolsPages=Math.ceil(this.filteredSchoolData.length/10),this.updateSchools(),this.$dispatch("userschoolgraph-data",this.schoolData)}}),$H=(n,e,t)=>({school:null,courseData:[],filteredCourseData:[],schoolYearData:[],currentCoursesPage:1,totalCoursesPages:1,paginatedCourses:[],colors:["rgb(237,116,0)","rgb(212, 145, 255)","rgb(179,4,16)","rgb(0,94,152)","rgb(0,129,57)"],async getSchoolYearData(){return await(await fetch(`${n=="admin"?"":"/"+n}/schools/${e.id}/athletes-year-data`)).json()},createGraph(){const i=document.getElementById("usercoursegraph").getContext("2d"),s=this.courseData.map(l=>l.name),r=this.courseData.map(l=>l.athletes),a={type:"pie",data:{labels:s,datasets:[{label:"Athletes",data:r,backgroundColor:this.colors,hoverOffset:4}]}};new Ve(i,a)},searchCourseByValue(i){const s=i.target.value.toLowerCase();s!=""?(this.filteredCourseData=this.courseData.filter(r=>r.name.toLowerCase().includes(s)),this.updateCourses()):(this.filteredCourseData=this.courseData,this.updateCourses())},nextPage(){this.currentCoursesPage<this.totalCoursesPages&&(this.currentCoursesPage++,this.updateCourses())},previousPage(){this.currentCoursesPage>1&&(this.currentCoursesPage--,this.updateCourses())},updateCourses(){const i=(this.currentCoursesPage-1)*10;this.totalCoursesPages=Math.ceil(this.filteredCourseData.length/10),this.paginatedCourses=this.filteredCourseData.slice(i,i+10)},async init(){console.log("usercoursegraph initialized"),this.school=e,console.log(e.name),this.courseData=t,this.schoolYearData=await this.getSchoolYearData(),this.createGraph(),this.filteredCourseData=this.courseData,this.totalCoursesPages=Math.ceil(this.filteredCourseData.length/10),this.updateCourses(),this.$dispatch("usercoursegraph-data",this.courseData)}}),qH=()=>({eventList:[],filteredEventList:[],currentEventsPage:1,totalEventsPages:1,paginatedEvents:[],colors:["rgb(237,116,0)","rgb(212, 145, 255)","rgb(179,4,16)","rgb(0,94,152)","rgb(0,129,57)"],async getEventList(){return await(await fetch("/technician/dashboard-events")).json()},createGraph(){const n=document.getElementById("participantseventsgraph").getContext("2d"),e=this.eventList.map(r=>r.name),t=this.eventList.map(r=>r.participants),s={type:"pie",data:{labels:e,datasets:[{label:"Athletes",data:t,backgroundColor:this.colors,hoverOffset:4}]}};new Ve(n,s)},searchEventByValue(n){const e=n.target.value.toLowerCase();e!=""?(this.filteredEventList=this.eventList.filter(t=>t.name.toLowerCase().includes(e)),this.updateEvents()):(this.filteredEventList=this.eventList,this.updateEvents())},nextPage(){this.currentEventsPage<this.totalEventsPages&&(this.currentEventsPage++,this.updateEvents())},previousPage(){this.currentEventsPage>1&&(this.currentEventsPage--,this.updateEvents())},updateEvents(){const n=(this.currentEventsPage-1)*10;this.totalEventsPages=Math.ceil(this.filteredEventList.length/10),this.paginatedEvents=this.filteredEventList.slice(n,n+10)},async init(){console.log("participantseventsgraph initialized"),this.eventList=await this.getEventList(),console.log(this.eventList),this.createGraph(),this.filteredEventList=this.eventList,this.totalEventsPages=Math.ceil(this.filteredEventList.length/10),this.updateEvents()}}),GH=(n,e)=>({academyId:n,schoolData:[],yearData:[],colors:["rgb(237,116,0)","rgb(212, 145, 255)","rgb(179,4,16)","rgb(0,94,152)","rgb(0,129,57)"],async getSchoolData(){return await(await fetch(`${e=="admin"?"":"/"+e}/academies/${this.academyId}/athletes-school-data`)).json()},async getYearData(){return await(await fetch(`${e=="admin"?"":"/"+e}/academies/${this.academyId}/athletes-year-data`)).json()},createGraph(){const t=document.getElementById("userschoolgraph").getContext("2d"),i=this.schoolData.map(a=>a.name),s=this.schoolData.map(a=>a.athletes),o={type:"pie",data:{labels:i,datasets:[{label:"Athletes",data:s,backgroundColor:this.colors,hoverOffset:4}]}};new Ve(t,o)},async init(){console.log("userschoolgraph initialized"),this.schoolData=await this.getSchoolData(),this.yearData=await this.getYearData(),this.createGraph()}}),KH=(n,e)=>({schoolId:n,clanData:[],yearData:[],colors:["rgb(237,116,0)","rgb(212, 145, 255)","rgb(179,4,16)","rgb(0,94,152)","rgb(0,129,57)"],async getclanData(){return await(await fetch(`${e=="admin"?"":"/"+e}/schools/${this.schoolId}/athletes-clan-data`)).json()},async getYearData(){return await(await fetch(`${e=="admin"?"":"/"+e}/schools/${this.schoolId}/athletes-year-data`)).json()},createGraph(){const t=document.getElementById("usersclangraph").getContext("2d"),i=this.clanData.map(a=>a.name),s=this.clanData.map(a=>a.athletes),o={type:"pie",data:{labels:i,datasets:[{label:"Athletes",data:s,backgroundColor:this.colors,hoverOffset:4}]}};new Ve(t,o)},async init(){console.log("usersclangraph initialized"),this.clanData=await this.getclanData(),this.yearData=await this.getYearData(),this.createGraph()}}),YH=()=>{const n=new Date;return{events:[],selectedEvent:0,selectedEventData:{},athletesData:[],nationFilter:"",eventName:"General Rankings",getEventsList:async function(e=null){const t=`/website-rankings/events/list?date=${n.toISOString()}${e?"&nation="+e:""}`,i=await fetch(t);if(i.ok){const s=await i.json();this.events=s}},getDataForEvent:async function(e){this.selectedEvent=e,this.athletesData=[];const t=`/website-rankings/events/${this.selectedEvent}/rankings`,i=await fetch(t);if(i.ok){const s=await i.json();let r=1;Object.entries(s).forEach(([o,a])=>{this.athletesData.push({id:o,name:a.user_name,rank:r++,battle_name:a.user_battle_name,academy:a.user_academy,school:a.user_school,school_slug:a.school_slug,nation:a.nation,war_points:a.total_war_points,style_points:a.total_style_points})})}this.rows=this.athletesData},getGeneralRankings:async function(){if(this.nationFilter!="")this.fiterByNation(this.nationFilter);else{this.selectedEvent=0,this.athletesData=[],this.eventName="General Rankings";const e=`/website-rankings/general?date=${n.toISOString()}`,t=await fetch(e);if(t.ok){const i=await t.json();let s=1;Object.entries(i).forEach(([r,o])=>{this.athletesData.push({id:r,name:o.user_name,rank:s++,battle_name:o.user_battle_name,academy:o.user_academy,school:o.user_school,school_slug:o.school_slug,nation:o.nation,war_points:o.total_war_points,style_points:o.total_style_points})})}this.rows=this.athletesData}},fiterByNation:async function(e){if(e==""){this.getGeneralRankings(),this.getEventsList();return}this.getEventsList(e),this.events=this.events.filter(r=>r.nation_id==e),this.athletesData=[];const i=await(await fetch(`/website-rankings/nation/${e}/rankings`)).json();let s=1;Object.entries(i.results).forEach(([r,o])=>{this.athletesData.push({id:r,name:o.user_name,rank:s++,battle_name:o.user_battle_name,academy:o.user_academy,school:o.user_school,school_slug:o.school_slug,nation:o.nation,war_points:o.total_war_points,style_points:o.total_style_points})}),this.eventName="National Rankings - "+i.nation.name,this.rows=this.athletesData},columns:[{name:"Rank",field:"rank",columnClasses:""},{name:"Name",field:"name",columnClasses:""},{name:"Academy",field:"academy",columnClasses:""},{name:"School",field:"school",columnClasses:""},{name:"Nation",field:"nation",columnClasses:""},{name:"Arena Points",field:"war_points",columnClasses:""},{name:"Style Points",field:"style_points",columnClasses:""}],sortColumn:null,sortDirection:"asc",rows:[],sort:function(e){this.sortColumn===e?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.rows=[...this.rows].sort((t,i)=>{const s=this.columns[e],r=String(t[s.field]),o=String(i[s.field]);return this.sortDirection==="asc"?r.localeCompare(o):o.localeCompare(r)})},searchByValue:function(e){const t=e.target.value.toLowerCase();t===""?this.rows=athletesData:this.rows=athletesData.filter(i=>Object.values(i).some(s=>String(s).toLowerCase().includes(t)))},page:1,pageLength:10,totalPages:function(){return Math.ceil(this.rows.length/this.pageLength)},paginatedRows:function(){const e=(this.page-1)*this.pageLength,t=e+this.pageLength;return this.rows.slice(e,t)},init(){this.getGeneralRankings(),this.getEventsList()}}},JH=(n,e)=>({eventid:n,eventPersonnel:[],filteredPersonnel:[],availableUsers:[],paginatedUsers:[],currentPage:1,pageSize:10,totalPages:0,searchAvailablesValue:"",searchPersonnelValue:"",getAvailableUsers:async function(){console.log("getAvailableUsers");const t=`${e=="admin"?"":"/"+e}/events/${this.eventid}/available-personnel`,i=await fetch(t);if(i.ok){const s=await i.json();this.eventPersonnel.length>0?this.availableUsers=s.filter(r=>!this.eventPersonnel.some(o=>o.id===r.id)):this.availableUsers=s}},getPersonnel:async function(){console.log("getPersonnel");const t=`${e=="admin"?"":"/"+e}/events/${this.eventid}/personnel`,i=await fetch(t);if(i.ok){const s=await i.json();this.eventPersonnel=s,this.filteredPersonnel=s,this.availableUsers.length>0&&(this.availableUsers=this.availableUsers.filter(r=>!this.eventPersonnel.some(o=>o.id===r.id)))}},searchAvailableUsers:function(t){console.log("searchAvailableUsers");let i=t.target.value;if(i.length===0){this.paginateAvailableUsers();return}this.paginatedUsers=this.availableUsers.filter(s=>s.name.toLowerCase().includes(i.toLowerCase())||s.surname.toLowerCase().includes(i.toLowerCase()))},searchPersonnel:function(t){console.log("searchPersonnel");let i=t.target.value;this.filteredPersonnel=this.eventPersonnel.filter(s=>s.name.toLowerCase().includes(i.toLowerCase())||s.surname.toLowerCase().includes(i.toLowerCase()))},addPersonnel:async function(t){console.log("addPersonnel");const i=this.availableUsers.find(a=>a.id===t);i&&this.eventPersonnel.push(i);let s=JSON.stringify(this.eventPersonnel.map(a=>a.id));const r=`${e=="admin"?"":"/"+e}/events/${this.eventid}/add-personnel`,o=new FormData;o.append("event_id",this.eventid),o.append("personnel",s),await fetch(r,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:o}),this.availableUsers=this.availableUsers.filter(a=>a.id!==t),this.searchAvailablesValue="",this.paginateAvailableUsers(),this.searchPersonnelValue="",this.searchPersonnel({target:{value:""}})},removePersonnel:async function(t){console.log("removePersonnel"),console.log(this.eventPersonnel);const i=this.eventPersonnel.find(a=>a.id===t);i&&(this.eventPersonnel=this.eventPersonnel.filter(a=>a.id!==t));let s=JSON.stringify(this.eventPersonnel.map(a=>a.id));const r=`${e=="admin"?"":"/"+e}/events/${this.eventid}/add-personnel`,o=new FormData;o.append("event_id",this.eventid),o.append("personnel",s),await fetch(r,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:o}),this.availableUsers.push(i),this.searchAvailablesValue="",this.paginateAvailableUsers(),this.searchPersonnelValue="",this.searchPersonnel({target:{value:""}})},savePersonnel:async function(){console.log("savePersonnel")},paginateAvailableUsers:function(){const t=(this.currentPage-1)*this.pageSize,i=t+this.pageSize;this.paginatedUsers=this.availableUsers.slice(t,i),this.totalPages=Math.ceil(this.availableUsers.length/this.pageSize)},goToPage:function(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.paginateAvailableUsers())},init:async function(){await this.getAvailableUsers(),await this.getPersonnel(),this.paginateAvailableUsers()}}),QH=n=>({submitEnablingResult:async function(e,t,i=null){const s=`/submit-enabling-result/${n}`,r=new FormData;r.append("result_id",e),r.append("result",t),r.append("retake",i);const o=await fetch(s,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:r});if(o.ok){const a=await o.json();a.success&&(this.row.result=a.result.result,this.row.stage=a.result.stage,this.row.retake=a.result.retake)}},notesModal:{resultid:null,notes:null,internshipDuration:null,internshipNotes:null,retake:null},openNotesModal:function(e,t=null,i=null,s=null,r=null){this.notesModal.resultid=e,this.notesModal.notes=t,this.notesModal.internshipDuration=i,this.notesModal.internshipNotes=s,this.notesModal.retake=r},init:async function(){}});document.addEventListener("alpine:init",()=>{_e.data("editor",hO),_e.data("googlemap",pO),_e.data("calendar",NL),_e.data("chart",jk),_e.data("participants",IL),_e.data("eventpersonnel",JH),_e.data("mapsearcher",LL),_e.data("usernationgraphadmin",jH),_e.data("useracademygraphadmin",WH),_e.data("userschoolgraphadmin",UH),_e.data("usercoursegraphadmin",$H),_e.data("eventsparticipantsgraph",qH),_e.data("userschoolgraph",GH),_e.data("usersclangraph",KH),_e.data("rankingschart",YH),_e.data("enablingresults",QH)});window.Alpine=_e;document.addEventListener("click",function(n){let e=document.querySelector("#bigone");if(e&&n.target.tagName==="A"&&n.target.hasAttribute("href")){n.preventDefault();let t=document.querySelector("#smallone");e.classList.add("expand"),t.classList.add("reduce"),setTimeout(()=>{window.location.href=n.target.getAttribute("href")},1e3)}});_e.start();
