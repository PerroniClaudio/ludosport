import{C as o}from"./auto-CdBL8C_c.js";const d=e=>({nationData:[],filteredNationData:[],worldYearData:[],currentNationsPage:1,totalNationsPages:1,paginatedNations:[],colors:["rgb(237,116,0)","rgb(212, 145, 255)","rgb(179,4,16)","rgb(0,94,152)","rgb(0,129,57)"],async getNationData(){return await(await fetch(`${e=="admin"?"":"/"+e}/world-athletes-data-list`)).json()},async getWorldYearData(){return await(await fetch(`${e=="admin"?"":"/"+e}/world-athletes-year-data`)).json()},createGraph(){const t=document.getElementById("usernationgraph").getContext("2d"),a=this.nationData.map(s=>s.name),i=this.nationData.map(s=>s.athletes),n={type:"pie",data:{labels:a,datasets:[{label:"Athletes",data:i,backgroundColor:this.colors,hoverOffset:4}]}};new o(t,n)},searchNationByValue(t){const a=t.target.value.toLowerCase();a!=""?(this.filteredNationData=this.nationData.filter(i=>i.name.toLowerCase().includes(a)),this.updateNations()):(this.filteredNationData=this.nationData,this.updateNations())},nextPage(){this.currentNationsPage<this.totalNationsPages&&(this.currentNationsPage++,this.updateNations())},previousPage(){this.currentNationsPage>1&&(this.currentNationsPage--,this.updateNations())},updateNations(){const t=(this.currentNationsPage-1)*10;this.totalNationsPages=Math.ceil(this.filteredNationData.length/10),this.paginatedNations=this.filteredNationData.slice(t,t+10)},async init(){console.log("usernationgraph initialized"),this.nationData=await this.getNationData(),this.worldYearData=await this.getWorldYearData(),this.createGraph(),this.filteredNationData=this.nationData,this.totalNationsPages=Math.ceil(this.filteredNationData.length/10),this.updateNations(),this.$dispatch("usernationgraph-data",this.nationData)}});export{d as usernationgraphadmin};
