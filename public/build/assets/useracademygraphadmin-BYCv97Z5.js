import{C as n}from"./auto-CdBL8C_c.js";const o=(c,t,d)=>({nation:null,academyData:[],filteredAcademyData:[],nationYearData:[],currentAcademiesPage:1,totalAcademiesPages:1,paginatedAcademies:[],colors:["rgb(237,116,0)","rgb(212, 145, 255)","rgb(179,4,16)","rgb(0,94,152)","rgb(0,129,57)"],async getNationYearData(){return await(await fetch(`${c=="admin"?"":"/"+c}/nations/${t.id}/athletes-year-data`)).json()},createGraph(){const a=document.getElementById("useracademygraph").getContext("2d"),e=this.academyData.map(i=>i.name),s=this.academyData.map(i=>i.athletes),r={type:"pie",data:{labels:e,datasets:[{label:"Athletes",data:s,backgroundColor:this.colors,hoverOffset:4}]}};new n(a,r)},searchAcademyByValue(a){const e=a.target.value.toLowerCase();e!=""?(this.filteredAcademyData=this.academyData.filter(s=>s.name.toLowerCase().includes(e)),this.updateAcademies()):(this.filteredAcademyData=this.academyData,this.updateAcademies())},nextPage(){this.currentAcademiesPage<this.totalAcademiesPages&&(this.currentAcademiesPage++,this.updateAcademies())},previousPage(){this.currentAcademiesPage>1&&(this.currentAcademiesPage--,this.updateAcademies())},updateAcademies(){const a=(this.currentAcademiesPage-1)*10;this.totalAcademiesPages=Math.ceil(this.filteredAcademyData.length/10),this.paginatedAcademies=this.filteredAcademyData.slice(a,a+10)},async init(){console.log("useracademygraph initialized"),this.nation=t,console.log(t.name),this.academyData=d,this.nationYearData=await this.getNationYearData(),this.createGraph(),this.filteredAcademyData=this.academyData,this.totalAcademiesPages=Math.ceil(this.filteredAcademyData.length/10),this.updateAcademies(),this.$dispatch("useracademygraph-data",this.academyData)}});export{o as useracademygraphadmin};
